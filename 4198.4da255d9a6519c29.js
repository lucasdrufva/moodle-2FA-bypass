"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4198],{92010:(e,n,o)=>{o.d(n,{E:()=>AddonModGlossaryEntriesSource});var t=o(10467),s=o(99522),i=o(21113),r=o(20119),a=o(59829);class AddonModGlossaryEntriesSource extends s.F{constructor(e,n,o){super(),this.isSearch=!1,this.hasSearched=!1,this.onlineEntries=[],this.offlineEntries=[],this.COURSE_ID=e,this.CM_ID=n,this.GLOSSARY_PATH_PREFIX=o}isOnlineEntry(e){return"id"in e}isOfflineEntry(e){return!this.isOnlineEntry(e)}getItemPath(e){return this.isOfflineEntry(e)?`${this.GLOSSARY_PATH_PREFIX}entry/new-${e.timecreated}`:`${this.GLOSSARY_PATH_PREFIX}entry/${e.id}`}getItemQueryParams(){return{cmId:this.CM_ID,courseId:this.COURSE_ID}}getPagesLoaded(){return null===this.items?0:Math.ceil(this.onlineEntries.length/this.getPageLength())}startSearch(){this.isSearch=!0,this.setDirty(!0)}stopSearch(e,n){this.fetchMode&&(this.isSearch=!1,this.hasSearched=!1,this.onlineEntries=e,this.hasMoreItems=n,this.setDirty(!0))}search(e){if(!this.glossary)return;const n=this.glossary.id;this.fetchFunction=o=>i.$.getEntriesBySearch(n,e,!0,o),this.fetchInvalidate=()=>i.$.invalidateEntriesBySearch(n,e,!0),this.hasSearched=!0,this.setDirty(!0)}loadGlossary(){var e=this;return(0,t.A)((function*(){e.glossary=yield i.$.getGlossary(e.COURSE_ID,e.CM_ID)}))()}invalidateCache(e=!0){var n=this;return(0,t.A)((function*(){yield Promise.all([n.fetchInvalidate&&n.fetchInvalidate(),e&&i.$.invalidateCourseGlossaries(n.COURSE_ID),e&&n.glossary&&i.$.invalidateCategories(n.glossary.id)])}))()}switchMode(e){if(!this.glossary)throw new Error("Can't switch entries mode without a glossary!");const n=this.glossary.id;switch(this.fetchMode=e,this.isSearch=!1,this.setDirty(!0),e){case"author_all":this.viewMode="author",this.fetchFunction=e=>i.$.getEntriesByAuthor(n,e),this.fetchInvalidate=()=>i.$.invalidateEntriesByAuthor(n);break;case"cat_all":this.viewMode="cat",this.fetchFunction=e=>i.$.getEntriesByCategory(n,e),this.fetchInvalidate=()=>i.$.invalidateEntriesByCategory(n);break;case"newest_first":this.viewMode="date",this.fetchFunction=e=>i.$.getEntriesByDate(n,"CREATION",e),this.fetchInvalidate=()=>i.$.invalidateEntriesByDate(n,"CREATION");break;case"recently_updated":this.viewMode="date",this.fetchFunction=e=>i.$.getEntriesByDate(n,"UPDATE",e),this.fetchInvalidate=()=>i.$.invalidateEntriesByDate(n,"UPDATE");break;default:this.viewMode="letter",this.fetchMode="letter_all",this.fetchFunction=e=>i.$.getEntriesByLetter(n,e),this.fetchInvalidate=()=>i.$.invalidateEntriesByLetter(n)}}loadPageItems(e){var n=this;return(0,t.A)((function*(){const o=n.glossary,t=n.fetchFunction;if(!o||!t)throw new Error("Can't load entries without glossary or fetch function");const s=[];if(0===e){const e=yield r.e.getGlossaryOfflineEntries(o.id);e.sort(((e,n)=>e.concept.localeCompare(n.concept))),s.push(...e)}const i=e*n.getPageLength(),a=yield t({from:i,cmId:n.CM_ID});return s.push(...a.entries),{items:s,hasMoreItems:i+a.entries.length<a.count}}))()}getPageLength(){return a.sT}setItems(e,n){this.onlineEntries=[],this.offlineEntries=[],e.forEach((e=>{this.isOnlineEntry(e)&&this.onlineEntries.push(e),this.isOfflineEntry(e)&&this.offlineEntries.push(e)})),super.setItems(e,n)}reset(){this.onlineEntries=[],this.offlineEntries=[],super.reset()}}},14198:(e,n,o)=>{o.r(n),o.d(n,{AddonModGlossaryIndexComponent:()=>U});var t=o(10467),s=o(2401),i=o(83696),r=o(25124),a=o(29492),d=o(69006),l=o(44682),c=o(87326),h=o(32440),u=o(82308),_=o(15324),f=o(52749),m=o(89911),g=o(75383),p=o(79555),y=o(49882),I=o(92010),v=o(21113),M=o(88712),b=o(24742),C=o(59829),E=o(23039),G=o(54438),A=o(21182),x=o(73465),S=o(51024),T=o(60177),R=o(69502),w=o(17388),k=o(16986),$=o(66198),D=o(64422),O=o(13988),j=o(19858),L=o(86198),P=o(58197),Y=o(66731),B=o(43570),F=o(6736),N=o(30864),V=o(75357),X=o(73955);function AddonModGlossaryIndexComponent_ion_button_1_Template(e,n){if(1&e){const e=G.RV6();G.j41(0,"ion-button",14),G.nI1(1,"translate"),G.bIt("click",(function AddonModGlossaryIndexComponent_ion_button_1_Template_ion_button_click_0_listener(n){G.eBV(e);const o=G.XpG();return G.Njj(o.openModePicker(n))})),G.nrm(2,"ion-icon",15),G.k0s()}2&e&&G.Y8G("ariaLabel",G.bMT(1,1,"addon.mod_glossary.browsemode"))}function AddonModGlossaryIndexComponent_ion_button_2_Template(e,n){if(1&e){const e=G.RV6();G.j41(0,"ion-button",14),G.nI1(1,"translate"),G.bIt("click",(function AddonModGlossaryIndexComponent_ion_button_2_Template_ion_button_click_0_listener(){G.eBV(e);const n=G.XpG();return G.Njj(n.toggleSearch())})),G.nrm(2,"ion-icon",16),G.k0s()}2&e&&G.Y8G("ariaLabel",G.bMT(1,1,"addon.mod_glossary.bysearch"))}function AddonModGlossaryIndexComponent_Conditional_3_Template(e,n){if(1&e){const e=G.RV6();G.j41(0,"ion-button",17),G.nI1(1,"translate"),G.bIt("click",(function AddonModGlossaryIndexComponent_Conditional_3_Template_ion_button_click_0_listener(){G.eBV(e);const n=G.XpG();return G.Njj(n.openModuleSummary())})),G.nrm(2,"ion-icon",18),G.k0s()}2&e&&G.Y8G("ariaLabel",G.bMT(1,1,"core.info"))}function AddonModGlossaryIndexComponent_Conditional_4_Template(e,n){if(1&e){const e=G.RV6();G.j41(0,"core-context-menu")(1,"core-context-menu-item",19),G.nI1(2,"translate"),G.bIt("action",(function AddonModGlossaryIndexComponent_Conditional_4_Template_core_context_menu_item_action_1_listener(){G.eBV(e);const n=G.XpG();return G.Njj(n.openModuleSummary())})),G.k0s()()}2&e&&(G.R7$(),G.Y8G("priority",5e3)("content",G.bMT(2,2,"core.info")))}function AddonModGlossaryIndexComponent_core_search_box_9_Template(e,n){if(1&e){const e=G.RV6();G.j41(0,"core-search-box",20),G.nI1(1,"translate"),G.bIt("onSubmit",(function AddonModGlossaryIndexComponent_core_search_box_9_Template_core_search_box_onSubmit_0_listener(n){G.eBV(e);const o=G.XpG();return G.Njj(o.search(n))}))("onClear",(function AddonModGlossaryIndexComponent_core_search_box_9_Template_core_search_box_onClear_0_listener(){G.eBV(e);const n=G.XpG();return G.Njj(n.toggleSearch())})),G.k0s()}if(2&e){const e=G.XpG();G.Mz_("searchArea","AddonModGlossary-",e.module.id,""),G.Y8G("placeholder",G.bMT(1,5,"addon.mod_glossary.searchquery"))("autoFocus",!0)("lengthCheck",2)}}function AddonModGlossaryIndexComponent_core_course_module_info_11_Template(e,n){if(1&e){const e=G.RV6();G.j41(0,"core-course-module-info",21),G.bIt("completionChanged",(function AddonModGlossaryIndexComponent_core_course_module_info_11_Template_core_course_module_info_completionChanged_0_listener(){G.eBV(e);const n=G.XpG();return G.Njj(n.onCompletionChange())})),G.k0s()}if(2&e){const e=G.XpG();G.Y8G("module",e.module)("description",e.description)("component",e.component)("componentId",e.componentId)("courseId",e.courseId)("hasDataToSync",e.hasOffline)}}function AddonModGlossaryIndexComponent_ion_list_12_ion_item_6_Template(e,n){if(1&e){const e=G.RV6();G.j41(0,"ion-item",25),G.bIt("click",(function AddonModGlossaryIndexComponent_ion_list_12_ion_item_6_Template_ion_item_click_0_listener(){const n=G.eBV(e).$implicit,o=G.XpG(2);return G.Njj(o.entries.select(n))})),G.j41(1,"ion-label")(2,"div",26),G.nrm(3,"ion-icon",27),G.nI1(4,"translate"),G.nrm(5,"core-format-text",28),G.k0s()()()}if(2&e){const e=n.$implicit,o=G.XpG(2);G.Y8G("detail",!1),G.BMQ("aria-current",o.entries.getItemAriaCurrent(e)),G.R7$(3),G.BMQ("aria-label",G.bMT(4,6,"core.notsent")),G.R7$(2),G.Y8G("text",e.concept)("contextInstanceId",o.glossary.coursemodule)("courseId",o.courseId)}}function AddonModGlossaryIndexComponent_ion_list_12_Template(e,n){if(1&e&&(G.j41(0,"ion-list",22)(1,"ion-item-divider")(2,"ion-label")(3,"h2",23),G.EFF(4),G.nI1(5,"translate"),G.k0s()()(),G.DNE(6,AddonModGlossaryIndexComponent_ion_list_12_ion_item_6_Template,6,8,"ion-item",24),G.k0s()),2&e){const e=G.XpG();G.R7$(4),G.JRh(G.bMT(5,2,"addon.mod_glossary.entriestobesynced")),G.R7$(2),G.Y8G("ngForOf",e.entries.offlineEntries)}}function AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_ion_item_divider_1_Template(e,n){if(1&e&&(G.j41(0,"ion-item-divider")(1,"ion-label")(2,"h2",23),G.EFF(3),G.k0s()()()),2&e){const e=G.XpG().$implicit,n=G.XpG(2);G.R7$(3),G.JRh(n.getDivider(e))}}function AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_Template(e,n){if(1&e){const e=G.RV6();G.qex(0),G.DNE(1,AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_ion_item_divider_1_Template,4,1,"ion-item-divider",9),G.j41(2,"ion-item",25),G.bIt("click",(function AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_Template_ion_item_click_2_listener(){const n=G.eBV(e).$implicit,o=G.XpG(2);return G.Njj(o.entries.select(n))})),G.j41(3,"ion-label"),G.nrm(4,"core-format-text",28),G.k0s()(),G.bVm()}if(2&e){const e=n.$implicit,o=n.index,t=G.XpG(2);G.R7$(),G.Y8G("ngIf",t.getDivider&&t.showDivider(e,t.entries.onlineEntries[o-1])),G.R7$(),G.Y8G("detail",!1),G.BMQ("aria-current",t.entries.getItemAriaCurrent(e)),G.R7$(2),G.Y8G("text",e.concept)("contextInstanceId",t.glossary.coursemodule)("courseId",t.courseId)}}function AddonModGlossaryIndexComponent_ion_list_13_Template(e,n){if(1&e&&(G.j41(0,"ion-list"),G.DNE(1,AddonModGlossaryIndexComponent_ion_list_13_ng_container_1_Template,5,6,"ng-container",29),G.k0s()),2&e){const e=G.XpG();G.R7$(),G.Y8G("ngForOf",e.entries.onlineEntries)}}function AddonModGlossaryIndexComponent_core_empty_box_14_Template(e,n){if(1&e&&(G.nrm(0,"core-empty-box",30),G.nI1(1,"translate")),2&e){const e=G.XpG();G.Y8G("message",G.bMT(1,2,"addon.mod_glossary.noentriesfound")),G.BMQ("role",e.hasSearched?"alert":null)}}function AddonModGlossaryIndexComponent_ion_fab_17_Template(e,n){if(1&e){const e=G.RV6();G.j41(0,"ion-fab",31)(1,"ion-fab-button",32),G.nI1(2,"translate"),G.bIt("click",(function AddonModGlossaryIndexComponent_ion_fab_17_Template_ion_fab_button_click_1_listener(){G.eBV(e);const n=G.XpG();return G.Njj(n.openNewEntry())})),G.nrm(3,"ion-icon",33),G.j41(4,"span",34),G.EFF(5),G.nI1(6,"translate"),G.k0s()()()}2&e&&(G.R7$(),G.BMQ("aria-label",G.bMT(2,2,"addon.mod_glossary.addentry")),G.R7$(4),G.JRh(G.bMT(6,4,"addon.mod_glossary.addentry")))}let U=(()=>{var e;class AddonModGlossaryIndexComponent extends d.y{constructor(e,n,o){super("AddonModGlossaryIndexComponent",n,o),this.route=e,this.content=n,this.courseContentsPage=o,this.component=C.XG,this.pluginName="glossary",this.canAdd=!1,this.loadMoreError=!1,this.hasOfflineEntries=!1,this.hasOfflineRatings=!1,this.syncEventName=C.iW,this.fetchedEntriesCanLoadMore=!1,this.fetchedEntries=[],this.checkCompletionAfterLog=!1,this.showDivider=()=>!1,this.loadingMessage=p.HT.instant("core.loading"),this.promisedEntries=new r._}get entries(){return this.promisedEntries.value}get glossary(){var e;return null===(e=this.entries)||void 0===e?void 0:e.getSource().glossary}get isSearch(){var e,n;return null!==(e=null===(n=this.entries)||void 0===n?void 0:n.getSource().isSearch)&&void 0!==e&&e}get hasSearched(){var e,n;return null!==(e=null===(n=this.entries)||void 0===n?void 0:n.getSource().hasSearched)&&void 0!==e&&e}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,t.A)((function*(){yield _superprop_getNgOnInit().call(e);const n=i.u.getOrCreateSource(I.E,[e.courseId,e.module.id,e.courseContentsPage?`${C.Z9}/`:""]);e.promisedEntries.resolve(new AddonModGlossaryEntriesManager(n,e)),e.sourceUnsubscribe=n.addListener({onItemsUpdated:o=>{e.hasOfflineEntries=!!o.find((e=>n.isOfflineEntry(e))),e.hasOffline=e.hasOfflineEntries||e.hasOfflineRatings}}),e.observers=[y.z.on(C.Z_,(({glossaryId:n})=>{var o;(null===(o=e.glossary)||void 0===o?void 0:o.id)===n&&(e.checkCompletion(),e.showLoadingAndRefresh(!1))})),y.z.on(C.uw,(({glossaryId:n})=>{var o;(null===(o=e.glossary)||void 0===o?void 0:o.id)===n&&e.showLoadingAndRefresh(!1)})),y.z.on(C.OL,(({glossaryId:n})=>{var o;(null===(o=e.glossary)||void 0===o?void 0:o.id)===n&&e.showLoadingAndRefresh(!1)}))],e.observers.push(y.z.on(c.CoreRatingProvider.RATING_SAVED_EVENT,(n=>{e.glossary&&"mod_glossary"==n.component&&"entry"==n.ratingArea&&"module"==n.contextLevel&&n.instanceId==e.glossary.coursemodule&&(e.hasOfflineRatings=!0,e.hasOffline=!0)}))),e.observers.push(y.z.on(u.CoreRatingSyncProvider.SYNCED_EVENT,(n=>{e.glossary&&"mod_glossary"==n.component&&"entry"==n.ratingArea&&"module"==n.contextLevel&&n.instanceId==e.glossary.coursemodule&&(e.hasOfflineRatings=!1,e.hasOffline=e.hasOfflineEntries)})))}))()}ngAfterViewInit(){var e=this;return(0,t.A)((function*(){const n=yield e.promisedEntries;yield e.loadContent(!1,!0),yield n.start(e.splitView)}))()}fetchContent(e=!1,n=!1,o=!1){var s=this;return(0,t.A)((function*(){const t=yield s.promisedEntries;if(yield t.getSource().loadGlossary(),!s.glossary)return;s.description=s.glossary.intro||s.description,s.canAdd=!!s.glossary.canaddentry||!1,s.dataRetrieved.emit(s.glossary),t.getSource().fetchMode||s.switchMode("letter_all"),n&&(yield s.syncActivity(o));const[i]=yield Promise.all([h.CoreRatingOffline.hasRatings("mod_glossary","entry","module",s.glossary.coursemodule),e?t.reload():t.load()]);s.hasOfflineRatings=i,s.hasOffline=s.hasOfflineEntries||s.hasOfflineRatings,s.isSearch&&s.logSearch&&s.logSearch()}))()}invalidateContent(){var e=this;return(0,t.A)((function*(){var n;yield null===(n=e.entries)||void 0===n?void 0:n.getSource().invalidateCache()}))()}sync(){return M.A.sync(this.module,this.courseId)}isRefreshSyncNeeded(e){return!!this.glossary&&e.glossaryId==this.glossary.id&&e.userId==f.CoreSites.getCurrentSiteUserId()}switchMode(e){var n;switch(null===(n=this.entries)||void 0===n||n.getSource().switchMode(e),e){case"author_all":this.getDivider=e=>e.userfullname,this.showDivider=(e,n)=>!n||e.userid!=n.userid;break;case"cat_all":{const getDivider=e=>e.categoryname||"";this.getDivider=getDivider,this.showDivider=(e,n)=>!n||getDivider(e)!=getDivider(n);break}case"newest_first":case"recently_updated":this.getDivider=void 0,this.showDivider=()=>!1;break;default:{const getDivider=e=>(g.Ni.cleanTags(e.concept)||e.concept).substring(0,1).toUpperCase();this.getDivider=getDivider,this.showDivider=(e,n)=>!n||getDivider(e)!=getDivider(n);break}}}loadMoreEntries(e){var n=this;return(0,t.A)((function*(){const o=yield n.promisedEntries;try{n.loadMoreError=!1,yield o.load()}catch(e){n.loadMoreError=!0,m.CoreDomUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentries",!0)}finally{e&&e()}}))()}openModePicker(e){var n=this;return(0,t.A)((function*(){if(!n.glossary)return;const{AddonModGlossaryModePickerPopoverComponent:t}=yield o.e(3454).then(o.bind(o,3454)),s=(yield n.promisedEntries).getSource().fetchMode,i=yield E.CorePopovers.open({component:t,componentProps:{browseModes:n.glossary.browsemodes,selectedMode:n.isSearch?"":s},event:e});return i?i!==s?(n.changeFetchMode(i),void 0):n.isSearch?(n.toggleSearch(),void 0):void 0:void 0}))()}toggleSearch(){if(this.entries){if(this.isSearch){const e=this.entries.getSource().fetchMode;return e&&this.switchMode(e),this.entries.getSource().stopSearch(this.fetchedEntries,this.fetchedEntriesCanLoadMore),void 0}this.fetchedEntries=this.entries.getSource().onlineEntries,this.fetchedEntriesCanLoadMore=!this.entries.completed,this.getDivider=void 0,this.showDivider=()=>!1,this.entries.reset(),this.entries.getSource().startSearch()}}changeFetchMode(e){var n;this.loadingMessage=p.HT.instant("core.loading"),null===(n=this.content)||void 0===n||n.scrollToTop(),this.switchMode(e),this.showLoading=!0,this.loadContent()}openNewEntry(){_.CoreNavigator.navigateToSitePath(`${C.Z9}/${this.courseId}/${this.module.id}/entry/new`)}search(e){var n;this.loadingMessage=p.HT.instant("core.searching"),this.showLoading=!0,this.logSearch=b.j.once((()=>this.performLogSearch(e))),null===(n=this.entries)||void 0===n||n.getSource().search(e),this.loadContent()}performLogSearch(e){var n=this;return(0,t.A)((function*(){n.analyticsLogEvent("mod_glossary_get_entries_by_search",{data:{mode:"search",hook:e,fullsearch:1}})}))()}ngOnDestroy(){var e,n,o;super.ngOnDestroy(),null===(e=this.observers)||void 0===e||e.forEach((e=>e.off())),null===(n=this.sourceUnsubscribe)||void 0===n||n.call(null),null===(o=this.entries)||void 0===o||o.destroy()}}return(e=AddonModGlossaryIndexComponent).ɵfac=function AddonModGlossaryIndexComponent_Factory(n){return new(n||e)(G.rXU(A.nX),G.rXU(x.W9),G.rXU(S.k,8))},e.ɵcmp=G.VBU({type:e,selectors:[["addon-mod-glossary-index"]],viewQuery:function AddonModGlossaryIndexComponent_Query(e,n){if(1&e&&G.GBs(a.M,5),2&e){let e;G.mGM(e=G.lsd())&&(n.splitView=e.first)}},features:[G.Vt3],decls:18,vars:20,consts:[["slot","end"],[3,"ariaLabel","click",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"placeholder","autoFocus","lengthCheck","searchArea","onSubmit","onClear",4,"ngIf"],[3,"hideUntil","message"],[3,"module","description","component","componentId","courseId","hasDataToSync","completionChanged",4,"ngIf"],["class","addon-mod-glossary-index--offline-entries",4,"ngIf"],[4,"ngIf"],["icon","fas-list",3,"message",4,"ngIf"],[3,"action","enabled","error"],["collapsible-footer","",3,"hidden","courseId","currentModuleId"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end",4,"ngIf"],[3,"click","ariaLabel"],["name","fas-sort","slot","icon-only","aria-hidden","true"],["name","fas-magnifying-glass","slot","icon-only","aria-hidden","true"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],[3,"onSubmit","onClear","placeholder","autoFocus","lengthCheck","searchArea"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],[1,"addon-mod-glossary-index--offline-entries"],[1,"big"],["button","",3,"detail","click",4,"ngFor","ngForOf"],["button","",3,"click","detail"],[1,"addon-mod-glossary-index--offline-entry"],["name","fas-clock",1,"ion-margin-end"],["contextLevel","module",3,"text","contextInstanceId","courseId"],[4,"ngFor","ngForOf"],["icon","fas-list",3,"message"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end"],[3,"click"],["name","fas-plus","aria-hidden","true"],[1,"sr-only"]],template:function AddonModGlossaryIndexComponent_Template(e,n){1&e&&(G.j41(0,"core-navbar-buttons",0),G.DNE(1,AddonModGlossaryIndexComponent_ion_button_1_Template,3,3,"ion-button",1)(2,AddonModGlossaryIndexComponent_ion_button_2_Template,3,3,"ion-button",1)(3,AddonModGlossaryIndexComponent_Conditional_3_Template,3,3,"ion-button",2)(4,AddonModGlossaryIndexComponent_Conditional_4_Template,3,4),G.k0s(),G.j41(5,"core-split-view")(6,"ion-refresher",3),G.bIt("ionRefresh",(function AddonModGlossaryIndexComponent_Template_ion_refresher_ionRefresh_6_listener(e){return n.doRefresh(e.target)})),G.nrm(7,"ion-refresher-content",4),G.nI1(8,"translate"),G.k0s(),G.DNE(9,AddonModGlossaryIndexComponent_core_search_box_9_Template,2,7,"core-search-box",5),G.j41(10,"core-loading",6),G.DNE(11,AddonModGlossaryIndexComponent_core_course_module_info_11_Template,1,6,"core-course-module-info",7)(12,AddonModGlossaryIndexComponent_ion_list_12_Template,7,4,"ion-list",8)(13,AddonModGlossaryIndexComponent_ion_list_13_Template,2,1,"ion-list",9)(14,AddonModGlossaryIndexComponent_core_empty_box_14_Template,2,4,"core-empty-box",10),G.j41(15,"core-infinite-loading",11),G.bIt("action",(function AddonModGlossaryIndexComponent_Template_core_infinite_loading_action_15_listener(e){return n.loadMoreEntries(e)})),G.k0s()(),G.nrm(16,"core-course-module-navigation",12),G.DNE(17,AddonModGlossaryIndexComponent_ion_fab_17_Template,7,6,"ion-fab",13),G.k0s()),2&e&&(G.R7$(),G.Y8G("ngIf",!n.showLoading&&n.glossary&&n.glossary.browsemodes&&n.glossary.browsemodes.length>1),G.R7$(),G.Y8G("ngIf",!n.showLoading&&n.glossary),G.R7$(),G.vxM(3,n.courseContentsPage?4:3),G.R7$(3),G.Y8G("disabled",n.showLoading),G.R7$(),G.FS9("pullingText",G.bMT(8,18,"core.pulltorefresh")),G.R7$(2),G.Y8G("ngIf",n.isSearch),G.R7$(),G.Y8G("hideUntil",!n.showLoading)("message",n.loadingMessage),G.R7$(),G.Y8G("ngIf",!n.isSearch),G.R7$(),G.Y8G("ngIf",!n.isSearch&&n.entries&&n.entries.offlineEntries.length>0),G.R7$(),G.Y8G("ngIf",n.entries&&n.entries.onlineEntries.length>0),G.R7$(),G.Y8G("ngIf",(!n.entries||!n.entries.hasEntries)&&(!n.isSearch||n.hasSearched)),G.R7$(),G.Y8G("enabled",n.entries&&!n.entries.completed&&(!n.isSearch||n.hasSearched))("error",n.loadMoreError),G.R7$(),G.Y8G("hidden",n.showLoading)("courseId",n.courseId)("currentModuleId",n.module.id),G.R7$(),G.Y8G("ngIf",n.canAdd&&!n.showLoading))},dependencies:[T.Sq,T.bT,R.B,w.Q,k.h,$.b,D.R,O.c,a.M,j.A,L.t,P.B,Y.i,B.T,x.Jm,x.Q8,x.YW,x.iq,x.uz,x.Dg,x.he,x.nf,x.To,x.Ki,F.Y,N.Q,V.M,X.D9],styles:["[_nghost-%COMP%]   .addon-mod-glossary-index--offline-entries[_ngcontent-%COMP%]{border-bottom:1px solid var(--stroke)}[_nghost-%COMP%]   .addon-mod-glossary-index--offline-entry[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}"]}),AddonModGlossaryIndexComponent})();class AddonModGlossaryEntriesManager extends s.R{constructor(e,n){super(e,n.route.component),this.page=n}get offlineEntries(){return this.getSource().offlineEntries}get onlineEntries(){return this.getSource().onlineEntries}getDefaultItem(){return this.getSource().onlineEntries[0]||null}logActivity(){var e=this;return(0,t.A)((function*(){const n=e.getSource().glossary,o=e.getSource().viewMode;if(n&&o){try{yield v.$.logView(n.id,o),l.CoreCourse.checkModuleCompletion(e.page.courseId,e.page.module.completiondata)}catch{}e.page.analyticsLogEvent("mod_glossary_view_glossary",{data:{mode:o}})}}))()}get hasEntries(){return this.getSource().onlineEntries.length>0||this.getSource().offlineEntries.length>0}}}}]);