"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5814],{26424:(e,r,s)=>{s.r(r),s.d(r,{default:()=>A});var t=s(21182),o=s(94114),a=s(93417),n=s(3353),i=s(92790),c=s(27565),l=s(10467),u=s(2401),d=s(83696),_=s(29492),C=s(99891),p=s(27338),g=s(22693),I=s(52749),m=s(89911),f=s(55554),h=s(79555),G=s(54438),T=s(60177),P=s(16986),y=s(64422),R=s(58197),b=s(88246),S=s(73465),M=s(73955);function CoreGradesCoursesPage_core_empty_box_15_Template(e,r){1&e&&(G.nrm(0,"core-empty-box",7),G.nI1(1,"translate")),2&e&&G.Y8G("message",G.bMT(1,1,"core.grades.nogradesreturned"))}function CoreGradesCoursesPage_ion_list_16_ion_item_1_span_5_Template(e,r){1&e&&(G.j41(0,"span",14),G.EFF(1),G.nI1(2,"translate"),G.k0s()),2&e&&(G.R7$(),G.SpI(" ",G.bMT(2,1,"core.grades.grade")," "))}function CoreGradesCoursesPage_ion_list_16_ion_item_1_Template(e,r){if(1&e){const e=G.RV6();G.j41(0,"ion-item",9),G.bIt("click",(function CoreGradesCoursesPage_ion_list_16_ion_item_1_Template_ion_item_click_0_listener(){const r=G.eBV(e).$implicit,s=G.XpG(2);return G.Njj(s.courses.select(r))})),G.j41(1,"ion-label")(2,"p",10),G.nrm(3,"core-format-text",11),G.k0s()(),G.j41(4,"ion-badge",12),G.DNE(5,CoreGradesCoursesPage_ion_list_16_ion_item_1_span_5_Template,3,3,"span",13),G.EFF(6),G.k0s()()}if(2&e){const e=r.$implicit,s=G.XpG(2);G.Y8G("detail",!0),G.BMQ("aria-label",e.courseFullName)("aria-current",s.courses.getItemAriaCurrent(e)),G.R7$(3),G.Y8G("text",e.courseFullName)("contextInstanceId",e.courseid),G.R7$(2),G.Y8G("ngIf",e.grade&&"-"!==e.grade),G.R7$(),G.SpI(" ",e.grade," ")}}function CoreGradesCoursesPage_ion_list_16_Template(e,r){if(1&e&&(G.j41(0,"ion-list"),G.DNE(1,CoreGradesCoursesPage_ion_list_16_ion_item_1_Template,7,7,"ion-item",8),G.k0s()),2&e){const e=G.XpG();G.R7$(),G.Y8G("ngForOf",e.courses.items)}}let v=(()=>{var e;class CoreGradesCoursesPage{constructor(){const e=d.u.getOrCreateSource(C.b,[]);this.courses=new CoreGradesCoursesManager(e,CoreGradesCoursesPage)}ngAfterViewInit(){var e=this;return(0,l.A)((function*(){yield e.fetchInitialCourses(),e.courses.start(e.splitView)}))()}ngOnDestroy(){this.courses.destroy()}refreshCourses(e){var r=this;return(0,l.A)((function*(){yield f.g.ignoreErrors(p.CoreGrades.invalidateCoursesGradesData()),yield f.g.ignoreErrors(r.courses.reload()),null==e||e.complete()}))()}fetchInitialCourses(){var e=this;return(0,l.A)((function*(){try{yield e.courses.load()}catch(e){m.CoreDomUtils.showErrorModalDefault(e,"Error loading courses")}}))()}}return(e=CoreGradesCoursesPage).ɵfac=function CoreGradesCoursesPage_Factory(r){return new(r||e)},e.ɵcmp=G.VBU({type:e,selectors:[["page-core-grades-courses"]],viewQuery:function CoreGradesCoursesPage_Query(e,r){if(1&e&&G.GBs(_.M,5),2&e){let e;G.mGM(e=G.lsd())&&(r.splitView=e.first)}},decls:17,vars:13,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],["icon","fas-chart-bar",3,"message",4,"ngIf"],[4,"ngIf"],["icon","fas-chart-bar",3,"message"],["class","ion-text-wrap","button","",3,"detail","click",4,"ngFor","ngForOf"],["button","",1,"ion-text-wrap",3,"click","detail"],[1,"item-heading"],["contextLevel","course",3,"text","contextInstanceId"],["slot","end","color","light"],["class","sr-only",4,"ngIf"],[1,"sr-only"]],template:function CoreGradesCoursesPage_Template(e,r){1&e&&(G.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),G.nrm(3,"ion-back-button",1),G.nI1(4,"translate"),G.k0s(),G.j41(5,"ion-title")(6,"h1"),G.EFF(7),G.nI1(8,"translate"),G.k0s()()()(),G.j41(9,"ion-content")(10,"core-split-view")(11,"ion-refresher",2),G.bIt("ionRefresh",(function CoreGradesCoursesPage_Template_ion_refresher_ionRefresh_11_listener(e){return r.refreshCourses(e.target)})),G.nrm(12,"ion-refresher-content",3),G.nI1(13,"translate"),G.k0s(),G.j41(14,"core-loading",4),G.DNE(15,CoreGradesCoursesPage_core_empty_box_15_Template,2,3,"core-empty-box",5)(16,CoreGradesCoursesPage_ion_list_16_Template,2,1,"ion-list",6),G.k0s()()()),2&e&&(G.R7$(3),G.Y8G("text",G.bMT(4,7,"core.back")),G.R7$(4),G.JRh(G.bMT(8,9,"core.grades.grades")),G.R7$(4),G.Y8G("disabled",!r.courses.loaded),G.R7$(),G.FS9("pullingText",G.bMT(13,11,"core.pulltorefresh")),G.R7$(2),G.Y8G("hideUntil",r.courses.loaded),G.R7$(),G.Y8G("ngIf",r.courses.empty),G.R7$(),G.Y8G("ngIf",!r.courses.empty))},dependencies:[T.Sq,T.bT,P.h,y.R,_.M,R.B,b.i,S.In,S.QW,S.W9,S.eU,S.uz,S.he,S.nf,S.To,S.Ki,S.BC,S.ai,S.el,M.D9],encapsulation:2}),CoreGradesCoursesPage})();class CoreGradesCoursesManager extends u.R{logActivity(){return(0,l.A)((function*(){yield p.CoreGrades.logCoursesGradesView(),g.OF.logEvent({type:g.qr.VIEW_ITEM_LIST,ws:"gradereport_overview_view_grade_report",name:h.HT.instant("core.grades.grades"),data:{courseId:I.CoreSites.getCurrentSiteHomeId(),category:"grades"},url:"/grade/report/overview/index.php"})}))()}}const E=[{path:"",component:v,children:[{path:":courseId",component:i.y}]}],x=[...(0,o.VI)([{path:"",component:v},{path:":courseId",component:i.y}],(()=>a.CoreScreen.isMobile)),...(0,o.VI)(E,(()=>a.CoreScreen.isTablet))];let A=(()=>{var e;class CoreGradesCoursesLazyModule{}return(e=CoreGradesCoursesLazyModule).ɵfac=function CoreGradesCoursesLazyModule_Factory(r){return new(r||e)},e.ɵmod=G.$C({type:e}),e.ɵinj=G.G2t({imports:[t.iI.forChild(x),n.n,c.i]}),CoreGradesCoursesLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&G.Obh(A,{declarations:[v],imports:[t.iI,n.n,c.i]}))},32379:(e,r,s)=>{s.d(r,{u:()=>CoreUserParticipantsSource});var t=s(10467),o=s(99522),a=s(98870);class CoreUserParticipantsSource extends o.F{static getSourceId(e,r=null){var s;return`participants-${e}-${r=null!==(s=r)&&void 0!==s?s:"__empty__"}`}constructor(e,r=null){super(),this.COURSE_ID=e,this.SEARCH_QUERY=r}getItemPath(e){return e.id.toString()}getItemQueryParams(){return{search:this.SEARCH_QUERY}}loadPageItems(e){var r=this;return(0,t.A)((function*(){if(r.SEARCH_QUERY){const{participants:s,canLoadMore:t}=yield a.CoreUser.searchParticipants(r.COURSE_ID,r.SEARCH_QUERY,!0,e,a.CoreUserProvider.PARTICIPANTS_LIST_LIMIT);return{items:s,hasMoreItems:t}}const{participants:s,canLoadMore:t}=yield a.CoreUser.getParticipants(r.COURSE_ID,e*a.CoreUserProvider.PARTICIPANTS_LIST_LIMIT,a.CoreUserProvider.PARTICIPANTS_LIST_LIMIT);return{items:s,hasMoreItems:t}}))()}getPageLength(){return a.CoreUserProvider.PARTICIPANTS_LIST_LIMIT}}}}]);