"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8497],{65045:(n,e,i)=>{i.d(e,{N:()=>b,W:()=>AddonModAssignSubmissionsSource});var s=i(10467),t=i(99522),o=i(15221),d=i(52749),a=i(55554),_=i(79555),m=i(55351),r=i(49882),g=i(5505),l=i(20218),u=i(4175),p=i(75217),c=i(66016);class AddonModAssignSubmissionsSource extends t.F{static getSourceId(n,e,i){return`submissions-${n}-${e}-${null!=i?i:"__empty__"}`}constructor(n,e,i){super(),this.groupId=0,this.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1,defaultGroupId:0,canAccessAllGroups:!1},this.submissionsData={canviewsubmissions:!1},this.COURSE_ID=n,this.MODULE_ID=e,this.SELECTED_STATUS=i}getItemPath(n){return String(n.submitid)}getItemQueryParams(n){return{blindId:n.blindid,groupId:this.groupId,selectedStatus:this.SELECTED_STATUS}}invalidateCache(){var n=this;return(0,s.A)((function*(){yield Promise.all([g.AddonModAssign.invalidateAssignmentData(n.COURSE_ID),n.assign&&g.AddonModAssign.invalidateAllSubmissionData(n.assign.id),n.assign&&g.AddonModAssign.invalidateAssignmentUserMappingsData(n.assign.id),n.assign&&g.AddonModAssign.invalidateAssignmentGradesData(n.assign.id),n.assign&&g.AddonModAssign.invalidateListParticipantsData(n.assign.id)])}))()}loadAssignment(n=!1){var e=this;return(0,s.A)((function*(){if(e.assign=yield g.AddonModAssign.getAssignment(e.COURSE_ID,e.MODULE_ID),n)try{const n=yield p.AddonModAssignSync.syncAssign(e.assign.id);n&&n.updated&&r.z.trigger(c.Cu,{assignId:e.assign.id,warnings:n.warnings,gradesBlocked:n.gradesBlocked,context:"submission-list"},d.CoreSites.getCurrentSiteId())}catch{}if(e.submissionsData=yield g.AddonModAssign.getSubmissions(e.assign.id,{cmId:e.assign.cmid}),!e.submissionsData.canviewsubmissions)throw new Error("Cannot view submissions.");e.groupInfo=yield o.CoreGroups.getActivityGroupInfo(e.assign.cmid,!1),e.groupId=o.CoreGroups.validateGroupId(e.groupId,e.groupInfo),yield e.reload()}))()}loadPageItems(){var n=this;return(0,s.A)((function*(){const e=n.assign;if(!e)throw new Error("Can't load submissions without assignment");let i=yield l.AddonModAssignHelper.getSubmissionsUserData(e,n.submissionsData.submissions,n.groupId),t=e.markingworkflow?[]:yield g.AddonModAssign.getAssignmentGrades(e.id,{cmId:e.cmid});if(t=t.filter((n=>parseInt(n.grade,10)>=0)).sort(((n,e)=>e.timemodified-n.timemodified)),n.SELECTED_STATUS==b.NEED_GRADING){const n=i.map(function(){var n=(0,s.A)((function*(n){n.needsGrading=yield g.AddonModAssign.needsSubmissionToBeGraded(n,e.id)}));return function(e){return n.apply(this,arguments)}}());yield Promise.all(n),i=i.filter((n=>n.needsGrading))}else if(n.SELECTED_STATUS){const e=n.SELECTED_STATUS==b.DRAFT?g.AddonModAssignSubmissionStatusValues.DRAFT:g.AddonModAssignSubmissionStatusValues.SUBMITTED;i=i.filter((n=>n.status==e))}const o=yield Promise.all(i.map(function(){var i=(0,s.A)((function*(i){const s=yield a.g.ignoreErrors(u.AddonModAssignOffline.getSubmissionGrade(e.id,i.userid)),o=!!s&&i.timemodified<s.timemodified;if(e.markingworkflow){if(e.teamsubmission){var d,r;const e=null===(d=n.submissionsData.submissions)||void 0===d?void 0:d.find((n=>i.userid===n.userid));i.gradingstatus=null!==(r=null==e?void 0:e.gradingstatus)&&void 0!==r?r:i.gradingstatus}}else{const n=t.find((n=>n.userid==i.userid));n&&(i.gradingstatus=n.timemodified<i.timemodified?g.AddonModAssignGradingStates.GRADED_FOLLOWUP_SUBMIT:g.AddonModAssignGradingStates.GRADED)}return i.statusColor=g.AddonModAssign.getSubmissionStatusColor(i.status),i.gradingColor=g.AddonModAssign.getSubmissionGradingStatusColor(i.gradingstatus),i.statusTranslated=_.HT.instant("addon.mod_assign.submissionstatus_"+i.status),o?(i.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",i.gradingColor=""):i.gradingStatusTranslationId=i.statusColor!=m.$.DANGER||i.gradingColor!=m.$.DANGER?g.AddonModAssign.getSubmissionGradingStatusTranslationId(i.gradingstatus):"",i}));return function(n){return i.apply(this,arguments)}}()));return{items:o}}))()}}var b=function(n){return n.ALL="",n.NEED_GRADING="needgrading",n.DRAFT="draft",n.SUBMITTED="submitted",n}(b||{})},29905:(n,e,i)=>{i.d(e,{f:()=>f});var s=i(10467),t=i(68162),o=i(5505),d=i(20218),a=i(62007),_=i(66016),m=i(91416),r=i(54438),g=i(60177),l=i(6128),u=i(64422),p=i(58197),c=i(35407),b=i(73465),A=i(73955);function AddonModAssignFeedbackPluginComponent_ion_item_2_ion_badge_4_Template(n,e){1&n&&(r.j41(0,"ion-badge",7),r.EFF(1),r.nI1(2,"translate"),r.k0s()),2&n&&(r.R7$(),r.SpI(" ",r.bMT(2,1,"addon.mod_assign.feedbacknotsupported")," "))}function AddonModAssignFeedbackPluginComponent_ion_item_2_p_5_Template(n,e){if(1&n&&(r.j41(0,"p"),r.nrm(1,"core-format-text",8),r.k0s()),2&n){const n=r.XpG(2);r.R7$(),r.Y8G("component",n.component)("componentId",n.assign.cmid)("text",n.text)("contextInstanceId",n.assign.cmid)("courseId",n.assign.course)}}function AddonModAssignFeedbackPluginComponent_ion_item_2_core_file_6_Template(n,e){if(1&n&&r.nrm(0,"core-file",9),2&n){const n=e.$implicit,i=r.XpG(2);r.Y8G("file",n)("component",i.component)("componentId",i.assign.cmid)("alwaysDownload",!0)}}function AddonModAssignFeedbackPluginComponent_ion_item_2_Template(n,e){if(1&n&&(r.j41(0,"ion-item",3)(1,"ion-label")(2,"h2"),r.EFF(3),r.k0s(),r.DNE(4,AddonModAssignFeedbackPluginComponent_ion_item_2_ion_badge_4_Template,3,3,"ion-badge",4)(5,AddonModAssignFeedbackPluginComponent_ion_item_2_p_5_Template,2,5,"p",5)(6,AddonModAssignFeedbackPluginComponent_ion_item_2_core_file_6_Template,1,4,"core-file",6),r.k0s()()),2&n){const n=r.XpG();r.R7$(3),r.JRh(n.plugin.name),r.R7$(),r.Y8G("ngIf",n.notSupported),r.R7$(),r.Y8G("ngIf",n.text),r.R7$(),r.Y8G("ngForOf",n.files)}}let f=(()=>{var n;class AddonModAssignFeedbackPluginComponent{constructor(){this.canEdit=!1,this.edit=!1,this.component=_.AC,this.text="",this.files=[],this.notSupported=!1,this.pluginLoaded=!1}ngOnInit(){var n=this;return(0,s.A)((function*(){if(!n.plugin)return n.pluginLoaded=!0,void 0;const e=a.AddonModAssignFeedbackDelegate.getPluginName(n.plugin);if(!e)return n.pluginLoaded=!0,void 0;n.plugin.name=e,n.pluginComponent=yield a.AddonModAssignFeedbackDelegate.getComponentForPlugin(n.plugin),n.pluginComponent?n.data={assign:n.assign,submission:n.submission,plugin:n.plugin,userId:n.userId,configs:d.AddonModAssignHelper.getPluginConfig(n.assign,"assignfeedback",n.plugin.type),edit:n.edit,canEdit:n.canEdit}:(n.text=o.AddonModAssign.getSubmissionPluginText(n.plugin),n.files=o.AddonModAssign.getSubmissionPluginAttachments(n.plugin),n.notSupported=a.AddonModAssignFeedbackDelegate.isPluginSupported(n.plugin.type),n.pluginLoaded=!0)}))()}invalidate(){var n=this;return(0,s.A)((function*(){yield n.dynamicComponent.callComponentMethod("invalidate")}))()}}return(n=AddonModAssignFeedbackPluginComponent).ɵfac=function AddonModAssignFeedbackPluginComponent_Factory(e){return new(e||n)},n.ɵcmp=r.VBU({type:n,selectors:[["addon-mod-assign-feedback-plugin"]],viewQuery:function AddonModAssignFeedbackPluginComponent_Query(n,e){if(1&n&&r.GBs(t.m,5),2&n){let n;r.mGM(n=r.lsd())&&(e.dynamicComponent=n.first)}},inputs:{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",canEdit:[r.Mj6.HasDecoratorInputTransform,"canEdit","canEdit",m.G],edit:[r.Mj6.HasDecoratorInputTransform,"edit","edit",m.G]},features:[r.GFd],decls:3,vars:4,consts:[[3,"component","data"],[3,"hideUntil"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],["color","primary",4,"ngIf"],[4,"ngIf"],[3,"file","component","componentId","alwaysDownload",4,"ngFor","ngForOf"],["color","primary"],["collapsible-item","","contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],[3,"file","component","componentId","alwaysDownload"]],template:function AddonModAssignFeedbackPluginComponent_Template(n,e){1&n&&(r.j41(0,"core-dynamic-component",0)(1,"core-loading",1),r.DNE(2,AddonModAssignFeedbackPluginComponent_ion_item_2_Template,7,4,"ion-item",2),r.k0s()()),2&n&&(r.Y8G("component",e.pluginComponent)("data",e.data),r.R7$(),r.Y8G("hideUntil",e.pluginLoaded),r.R7$(),r.Y8G("ngIf",e.text.length>0||e.files.length>0))},dependencies:[g.Sq,g.bT,t.m,l.t,u.R,p.B,c.K,b.In,b.uz,b.he,A.D9],encapsulation:2}),AddonModAssignFeedbackPluginComponent})()},78497:(n,e,i)=>{i.r(e),i.d(e,{AddonModAssignIndexComponent:()=>Y});var s=i(10467),t=i(75629),o=i(69006),d=i(15221),a=i(15324),_=i(52749),m=i(89911),r=i(16474),g=i(55554),l=i(79555),u=i(49882),p=i(24742),c=i(65045),b=i(5505),A=i(4175),f=i(75217),I=i(81679),h=i(66016),S=i(54438),M=i(73465),T=i(51024),C=i(60177),v=i(69502),G=i(17388),R=i(6128),k=i(97818),E=i(64422),F=i(13988),$=i(86198),y=i(66731),w=i(43570),x=i(6736),j=i(30864),D=i(73955);const _c0=n=>({count:n});function AddonModAssignIndexComponent_Conditional_1_Template(n,e){if(1&n){const n=S.RV6();S.j41(0,"ion-button",7),S.nI1(1,"translate"),S.bIt("click",(function AddonModAssignIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){S.eBV(n);const e=S.XpG();return S.Njj(e.openModuleSummary())})),S.nrm(2,"ion-icon",8),S.k0s()}2&n&&S.Y8G("ariaLabel",S.bMT(1,1,"core.info"))}function AddonModAssignIndexComponent_Conditional_2_Template(n,e){if(1&n){const n=S.RV6();S.j41(0,"core-context-menu")(1,"core-context-menu-item",9),S.nI1(2,"translate"),S.bIt("action",(function AddonModAssignIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){S.eBV(n);const e=S.XpG();return S.Njj(e.openModuleSummary())})),S.k0s()()}2&n&&(S.R7$(),S.Y8G("priority",5e3)("content",S.bMT(2,2,"core.info")))}function AddonModAssignIndexComponent_div_5_core_file_1_Template(n,e){if(1&n&&S.nrm(0,"core-file",12),2&n){const n=e.$implicit,i=S.XpG(2);S.Y8G("file",n)("component",i.component)("componentId",i.componentId)}}function AddonModAssignIndexComponent_div_5_Template(n,e){if(1&n&&(S.j41(0,"div",10),S.DNE(1,AddonModAssignIndexComponent_div_5_core_file_1_Template,1,3,"core-file",11),S.k0s()),2&n){const n=S.XpG();S.R7$(),S.Y8G("ngForOf",n.assign.introattachments)}}function AddonModAssignIndexComponent_ng_container_6_p_8_Template(n,e){1&n&&(S.j41(0,"p"),S.EFF(1),S.nI1(2,"translate"),S.k0s()),2&n&&(S.R7$(),S.JRh(S.bMT(2,1,"core.no")))}function AddonModAssignIndexComponent_ng_container_6_p_9_Template(n,e){1&n&&(S.j41(0,"p"),S.EFF(1),S.nI1(2,"translate"),S.k0s()),2&n&&(S.R7$(),S.JRh(S.bMT(2,1,"core.yes")))}function AddonModAssignIndexComponent_ng_container_6_ion_item_10_Template(n,e){if(1&n&&(S.j41(0,"ion-item",15)(1,"ion-label")(2,"p",16),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.j41(5,"p"),S.EFF(6),S.k0s()()()),2&n){const n=S.XpG(2);S.R7$(3),S.JRh(S.bMT(4,2,"addon.mod_assign.timeremaining")),S.R7$(3),S.JRh(n.timeRemaining)}}function AddonModAssignIndexComponent_ng_container_6_ion_item_11_Template(n,e){if(1&n&&(S.j41(0,"ion-item",15)(1,"ion-label")(2,"p",16),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.j41(5,"p"),S.EFF(6),S.k0s()()()),2&n){const n=S.XpG(2);S.R7$(3),S.JRh(S.bMT(4,2,"addon.mod_assign.latesubmissions")),S.R7$(3),S.JRh(n.lateSubmissions)}}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_p_2_Template(n,e){1&n&&(S.j41(0,"p",16),S.EFF(1),S.nI1(2,"translate"),S.k0s()),2&n&&(S.R7$(),S.JRh(S.bMT(2,1,"addon.mod_assign.numberofteams")))}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_p_3_Template(n,e){1&n&&(S.j41(0,"p",16),S.EFF(1),S.nI1(2,"translate"),S.k0s()),2&n&&(S.R7$(),S.JRh(S.bMT(2,1,"addon.mod_assign.numberofparticipants")))}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_span_7_Template(n,e){if(1&n&&(S.j41(0,"span",27),S.EFF(1),S.nI1(2,"translate"),S.k0s()),2&n){const n=S.XpG(3);S.R7$(),S.SpI(" ",S.i5U(2,1,"addon.mod_assign.numberofparticipantscountdescription",S.eq3(4,_c0,n.summary.participantcount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_span_8_Template(n,e){if(1&n&&(S.j41(0,"span",27),S.EFF(1),S.nI1(2,"translate"),S.k0s()),2&n){const n=S.XpG(3);S.R7$(),S.SpI(" ",S.i5U(2,1,"addon.mod_assign.numberofteamscountdescription",S.eq3(4,_c0,n.summary.participantcount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_item_12_Template(n,e){if(1&n){const n=S.RV6();S.j41(0,"ion-item",22),S.bIt("click",(function AddonModAssignIndexComponent_ng_container_6_ion_item_12_Template_ion_item_click_0_listener(){S.eBV(n);const e=S.XpG(2);return S.Njj(e.goToSubmissionList())})),S.j41(1,"ion-label"),S.DNE(2,AddonModAssignIndexComponent_ng_container_6_ion_item_12_p_2_Template,3,3,"p",23)(3,AddonModAssignIndexComponent_ng_container_6_ion_item_12_p_3_Template,3,3,"p",23),S.k0s(),S.j41(4,"ion-badge",24)(5,"span",25),S.EFF(6),S.k0s(),S.DNE(7,AddonModAssignIndexComponent_ng_container_6_ion_item_12_span_7_Template,3,6,"span",26)(8,AddonModAssignIndexComponent_ng_container_6_ion_item_12_span_8_Template,3,6,"span",26),S.k0s()()}if(2&n){const n=S.XpG(2);S.Y8G("detail",!0),S.R7$(2),S.Y8G("ngIf",n.assign.teamsubmission),S.R7$(),S.Y8G("ngIf",!n.assign.teamsubmission),S.R7$(3),S.JRh(n.summary.participantcount),S.R7$(),S.Y8G("ngIf",!n.assign.teamsubmission),S.R7$(),S.Y8G("ngIf",n.assign.teamsubmission)}}function AddonModAssignIndexComponent_ng_container_6_ion_item_13_Template(n,e){if(1&n){const n=S.RV6();S.j41(0,"ion-item",28),S.bIt("click",(function AddonModAssignIndexComponent_ng_container_6_ion_item_13_Template_ion_item_click_0_listener(){S.eBV(n);const e=S.XpG(2);return S.Njj(e.goToSubmissionList(e.submissionStatusDraft,!!e.summary.submissiondraftscount))})),S.j41(1,"ion-label")(2,"p",16),S.EFF(3),S.nI1(4,"translate"),S.k0s()(),S.j41(5,"ion-badge",24)(6,"span",25),S.EFF(7),S.k0s(),S.j41(8,"span",27),S.EFF(9),S.nI1(10,"translate"),S.k0s()()()}if(2&n){const n=S.XpG(2);S.AVh("hide-detail",!n.summary.submissiondraftscount),S.Y8G("detail",!0)("button",n.summary.submissiondraftscount),S.R7$(3),S.JRh(S.bMT(4,7,"addon.mod_assign.numberofdraftsubmissions")),S.R7$(4),S.JRh(n.summary.submissiondraftscount),S.R7$(2),S.SpI(" ",S.i5U(10,9,"addon.mod_assign.numberofdraftsubmissionscountdescription",S.eq3(12,_c0,n.summary.submissiondraftscount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_item_14_Template(n,e){if(1&n){const n=S.RV6();S.j41(0,"ion-item",28),S.bIt("click",(function AddonModAssignIndexComponent_ng_container_6_ion_item_14_Template_ion_item_click_0_listener(){S.eBV(n);const e=S.XpG(2);return S.Njj(e.goToSubmissionList(e.submissionStatusSubmitted,!!e.summary.submissionssubmittedcount))})),S.j41(1,"ion-label")(2,"p",16),S.EFF(3),S.nI1(4,"translate"),S.k0s()(),S.j41(5,"ion-badge",24)(6,"span",25),S.EFF(7),S.k0s(),S.j41(8,"span",27),S.EFF(9),S.nI1(10,"translate"),S.k0s()()()}if(2&n){const n=S.XpG(2);S.AVh("hide-detail",!n.summary.submissionssubmittedcount),S.Y8G("detail",!0)("button",n.summary.submissionssubmittedcount),S.R7$(3),S.JRh(S.bMT(4,7,"addon.mod_assign.numberofsubmittedassignments")),S.R7$(4),S.JRh(n.summary.submissionssubmittedcount),S.R7$(2),S.SpI(" ",S.i5U(10,9,"addon.mod_assign.numberofsubmittedassignmentscountdescription",S.eq3(12,_c0,n.summary.submissionssubmittedcount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_item_15_Template(n,e){if(1&n){const n=S.RV6();S.j41(0,"ion-item",28),S.bIt("click",(function AddonModAssignIndexComponent_ng_container_6_ion_item_15_Template_ion_item_click_0_listener(){S.eBV(n);const e=S.XpG(2);return S.Njj(e.goToSubmissionList(e.needGrading,e.needsGradingAvailable))})),S.j41(1,"ion-label")(2,"p",16),S.EFF(3),S.nI1(4,"translate"),S.k0s()(),S.j41(5,"ion-badge",24)(6,"span",25),S.EFF(7),S.k0s(),S.j41(8,"span",27),S.EFF(9),S.nI1(10,"translate"),S.k0s()()()}if(2&n){const n=S.XpG(2);S.AVh("hide-detail",!n.needsGradingAvailable),S.Y8G("detail",!0)("button",n.needsGradingAvailable),S.R7$(3),S.JRh(S.bMT(4,7,"addon.mod_assign.numberofsubmissionsneedgrading")),S.R7$(4),S.JRh(n.summary.submissionsneedgradingcount),S.R7$(2),S.SpI(" ",S.i5U(10,9,"addon.mod_assign.numberofsubmissionsneedgradingcountdescription",S.eq3(12,_c0,n.summary.submissionsneedgradingcount))," ")}}function AddonModAssignIndexComponent_ng_container_6_ion_card_16_Template(n,e){if(1&n&&(S.j41(0,"ion-card",29)(1,"ion-item"),S.nrm(2,"ion-icon",30),S.j41(3,"ion-label"),S.EFF(4),S.nI1(5,"translate"),S.k0s()()()),2&n){const n=S.XpG(2);S.R7$(4),S.JRh(S.bMT(5,1,"addon.mod_assign."+n.summary.warnofungroupedusers))}}function AddonModAssignIndexComponent_ng_container_6_div_17_Template(n,e){if(1&n&&(S.j41(0,"div",31),S.nrm(1,"core-course-module-navigation",32),S.k0s()),2&n){const n=S.XpG(2);S.R7$(),S.Y8G("courseId",n.courseId)("currentModuleId",n.module.id)}}function AddonModAssignIndexComponent_ng_container_6_Template(n,e){if(1&n){const n=S.RV6();S.qex(0),S.j41(1,"ion-list",13)(2,"core-group-selector",14),S.mxI("selectedChange",(function AddonModAssignIndexComponent_ng_container_6_Template_core_group_selector_selectedChange_2_listener(e){S.eBV(n);const i=S.XpG();return S.DH7(i.group,e)||(i.group=e),S.Njj(e)})),S.bIt("selectedChange",(function AddonModAssignIndexComponent_ng_container_6_Template_core_group_selector_selectedChange_2_listener(){S.eBV(n);const e=S.XpG();return S.Njj(e.setGroup(e.group))})),S.k0s(),S.j41(3,"ion-item",15)(4,"ion-label")(5,"p",16),S.EFF(6),S.nI1(7,"translate"),S.k0s(),S.DNE(8,AddonModAssignIndexComponent_ng_container_6_p_8_Template,3,3,"p",5)(9,AddonModAssignIndexComponent_ng_container_6_p_9_Template,3,3,"p",5),S.k0s()(),S.DNE(10,AddonModAssignIndexComponent_ng_container_6_ion_item_10_Template,7,4,"ion-item",17)(11,AddonModAssignIndexComponent_ng_container_6_ion_item_11_Template,7,4,"ion-item",17)(12,AddonModAssignIndexComponent_ng_container_6_ion_item_12_Template,9,6,"ion-item",18)(13,AddonModAssignIndexComponent_ng_container_6_ion_item_13_Template,11,14,"ion-item",19)(14,AddonModAssignIndexComponent_ng_container_6_ion_item_14_Template,11,14,"ion-item",19)(15,AddonModAssignIndexComponent_ng_container_6_ion_item_15_Template,11,14,"ion-item",19),S.k0s(),S.DNE(16,AddonModAssignIndexComponent_ng_container_6_ion_card_16_Template,6,3,"ion-card",20)(17,AddonModAssignIndexComponent_ng_container_6_div_17_Template,2,2,"div",21),S.bVm()}if(2&n){const n=S.XpG();S.R7$(2),S.Y8G("groupInfo",n.groupInfo),S.R50("selected",n.group),S.Y8G("courseId",n.courseId),S.R7$(4),S.JRh(S.bMT(7,14,"core.course.hiddenfromstudents")),S.R7$(2),S.Y8G("ngIf",n.module.visible),S.R7$(),S.Y8G("ngIf",!n.module.visible),S.R7$(),S.Y8G("ngIf",n.timeRemaining),S.R7$(),S.Y8G("ngIf",n.lateSubmissions),S.R7$(),S.Y8G("ngIf",n.summary&&n.summary.participantcount),S.R7$(),S.Y8G("ngIf",n.assign.submissiondrafts&&n.summary&&n.summary.submissionsenabled),S.R7$(),S.Y8G("ngIf",n.summary&&n.summary.submissionsenabled),S.R7$(),S.Y8G("ngIf",n.summary&&n.summary.submissionsenabled&&!n.assign.teamsubmission),S.R7$(),S.Y8G("ngIf",n.assign.teamsubmission&&n.summary&&n.summary.warnofungroupedusers),S.R7$(),S.Y8G("ngIf",!n.showLoading)}}function AddonModAssignIndexComponent_addon_mod_assign_submission_7_Template(n,e){if(1&n&&S.nrm(0,"addon-mod-assign-submission",33),2&n){const n=S.XpG();S.Y8G("courseId",n.courseId)("moduleId",n.module.id)}}let Y=(()=>{var n;class AddonModAssignIndexComponent extends o.y{constructor(n,e){super("AddonModLessonIndexComponent",n,e),this.content=n,this.component=h.AC,this.pluginName="assign",this.canViewAllSubmissions=!1,this.canViewOwnSubmission=!1,this.needsGradingAvailable=!1,this.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1,defaultGroupId:0,canAccessAllGroups:!1},this.submissionStatusSubmitted=c.N.SUBMITTED,this.submissionStatusDraft=c.N.DRAFT,this.needGrading=c.N.NEED_GRADING,this.syncEventName=h.zi,this.currentSite=_.CoreSites.getRequiredCurrentSite(),this.currentUserId=this.currentSite.getUserId()}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,n=this;return(0,s.A)((function*(){_superprop_getNgOnInit().call(n),n.savedObserver=u.z.on(h.Ad,(e=>{n.assign&&e.assignmentId==n.assign.id&&e.userId==n.currentUserId&&n.showLoadingAndRefresh(!0,!1)}),n.siteId),n.savedObserver=u.z.on(h.ze,(e=>{n.assign&&e.assignmentId==n.assign.id&&e.userId==n.currentUserId&&n.showLoadingAndRefresh(!0,!1)}),n.siteId),n.submittedObserver=u.z.on(h._K,(e=>{n.assign&&e.assignmentId==n.assign.id&&e.userId==n.currentUserId&&(n.checkCompletion(),n.showLoadingAndRefresh(!0,!1))}),n.siteId),n.gradedObserver=u.z.on(h.$P,(e=>{n.assign&&e.assignmentId==n.assign.id&&e.userId==n.currentUserId&&n.showLoadingAndRefresh(!0,!1)}),n.siteId),n.startedObserver=u.z.on(h.dl,(e=>{n.assign&&e.assignmentId==n.assign.id&&n.showLoadingAndRefresh(!1,!1)}),n.siteId),yield n.loadContent(!1,!0)}))()}fetchContent(n,e=!1,i=!1){var t=this;return(0,s.A)((function*(){t.assign=yield b.AddonModAssign.getAssignment(t.courseId,t.module.id),t.dataRetrieved.emit(t.assign),t.description=t.assign.intro,e&&(yield g.g.ignoreErrors(t.syncActivity(i))),t.hasOffline=yield A.AddonModAssignOffline.hasAssignOfflineData(t.assign.id);const n=yield b.AddonModAssign.getSubmissions(t.assign.id,{cmId:t.module.id}),s=r.CoreTimeUtils.timestamp();if(t.canViewAllSubmissions=n.canviewsubmissions,n.canviewsubmissions)return t.timeRemaining="",t.lateSubmissions="",t.assign.duedate>0&&(t.timeRemaining=t.assign.duedate-s<=0?l.HT.instant("addon.mod_assign.assignmentisdue"):p.j.formatTime(t.assign.duedate-s),t.assign.duedate<s&&t.assign.cutoffdate&&(t.lateSubmissions=t.assign.cutoffdate>s?l.HT.instant("addon.mod_assign.latesubmissionsaccepted",{$a:r.CoreTimeUtils.userDate(1e3*t.assign.cutoffdate)}):l.HT.instant("addon.mod_assign.nomoresubmissionsaccepted"))),t.groupInfo=yield d.CoreGroups.getActivityGroupInfo(t.assign.cmid,!1),yield t.setGroup(d.CoreGroups.validateGroupId(t.group,t.groupInfo)),void 0;try{yield b.AddonModAssign.getSubmissionStatus(t.assign.id,{cmId:t.module.id}),t.canViewOwnSubmission=!0}catch(n){if(t.canViewOwnSubmission=!1,"nopermission"!==n.errorcode)throw n}}))()}logActivity(){var n=this;return(0,s.A)((function*(){n.assign&&(yield g.g.ignoreErrors(b.AddonModAssign.logView(n.assign.id)),n.analyticsLogEvent("mod_assign_view_assign"),n.canViewAllSubmissions?(yield g.g.ignoreErrors(b.AddonModAssign.logGradingView(n.assign.id)),n.analyticsLogEvent("mod_assign_view_grading_table",{sendUrl:!1})):n.canViewOwnSubmission&&(yield g.g.ignoreErrors(b.AddonModAssign.logSubmissionView(n.assign.id)),n.analyticsLogEvent("mod_assign_view_submission_status",{sendUrl:!1})))}))()}setGroup(n=0){var e=this;return(0,s.A)((function*(){if(e.group=n,!e.assign)return;const i=yield b.AddonModAssign.getSubmissionStatus(e.assign.id,{groupId:e.group,cmId:e.module.id});if(e.summary=i.gradingsummary,!e.summary)return e.needsGradingAvailable=!1,void 0;if(!0===e.summary.warnofungroupedusers)e.summary.warnofungroupedusers="ungroupedusers";else switch(e.summary.warnofungroupedusers){case h.aE:e.summary.warnofungroupedusers="ungroupedusers";break;case h.hq:e.summary.warnofungroupedusers="ungroupedusersoptional";break;default:e.summary.warnofungroupedusers=""}e.needsGradingAvailable=e.summary.submissionsneedgradingcount>0}))()}goToSubmissionList(n,e=!1){if(void 0!==n&&!e)return;const i={groupId:this.group||0,moduleName:this.moduleName};void 0!==n&&(i.status=n),a.CoreNavigator.navigateToSitePath(h.gU+`/${this.courseId}/${this.module.id}/submission`,{params:i})}hasSyncSucceed(n){var e;n.updated&&(null===(e=this.submissionComponent)||void 0===e||e.invalidateAndRefresh(!1));return n.updated}invalidateContent(){var n=this;return(0,s.A)((function*(){var e;const i=[];i.push(b.AddonModAssign.invalidateAssignmentData(n.courseId)),i.push((null===(e=n.submissionComponent)||void 0===e?void 0:e.invalidateAndRefresh(!0))||Promise.resolve()),n.assign&&(i.push(b.AddonModAssign.invalidateAllSubmissionData(n.assign.id)),n.canViewAllSubmissions&&i.push(b.AddonModAssign.invalidateSubmissionStatusData(n.assign.id,void 0,n.group))),yield Promise.all(i)}))()}ionViewDidEnter(){var n;super.ionViewDidEnter(),null===(n=this.submissionComponent)||void 0===n||n.ionViewDidEnter()}ionViewDidLeave(){var n;super.ionViewDidLeave(),null===(n=this.submissionComponent)||void 0===n||n.ionViewDidLeave()}isRefreshSyncNeeded(n){return!(!this.assign||n.assignId!=this.assign.id)&&(n.warnings&&n.warnings.length&&m.CoreDomUtils.showAlert(void 0,n.warnings[0]),!0)}sync(){var n=this;return(0,s.A)((function*(){if(!n.assign)throw new t.CoreError("Cannot sync without a assign.");return f.AddonModAssignSync.syncAssign(n.assign.id)}))()}ngOnDestroy(){var n,e,i,s;super.ngOnDestroy(),null===(n=this.savedObserver)||void 0===n||n.off(),null===(e=this.submittedObserver)||void 0===e||e.off(),null===(i=this.gradedObserver)||void 0===i||i.off(),null===(s=this.startedObserver)||void 0===s||s.off()}}return(n=AddonModAssignIndexComponent).ɵfac=function AddonModAssignIndexComponent_Factory(e){return new(e||n)(S.rXU(M.W9),S.rXU(T.k,8))},n.ɵcmp=S.VBU({type:n,selectors:[["addon-mod-assign-index"]],viewQuery:function AddonModAssignIndexComponent_Query(n,e){if(1&n&&S.GBs(I.B,5),2&n){let n;S.mGM(n=S.lsd())&&(e.submissionComponent=n.first)}},features:[S.Vt3],decls:8,vars:11,consts:[["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],["description","",4,"ngIf"],[4,"ngIf"],[3,"courseId","moduleId",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],["description",""],[3,"file","component","componentId",4,"ngFor","ngForOf"],[3,"file","component","componentId"],[1,"core-list-align-detail-right"],[3,"selectedChange","groupInfo","selected","courseId"],[1,"ion-text-wrap"],[1,"item-heading"],["class","ion-text-wrap",4,"ngIf"],["class","ion-text-wrap","button","",3,"detail","click",4,"ngIf"],["class","ion-text-wrap",3,"hide-detail","detail","button","click",4,"ngIf"],["class","core-info-card",4,"ngIf"],["collapsible-footer","","slot","fixed",4,"ngIf"],["button","",1,"ion-text-wrap",3,"click","detail"],["class","item-heading",4,"ngIf"],["slot","end","color","primary"],["aria-hidden","true"],["class","sr-only",4,"ngIf"],[1,"sr-only"],[1,"ion-text-wrap",3,"click","detail","button"],[1,"core-info-card"],["name","fas-circle-question","slot","start","aria-hidden","true"],["collapsible-footer","","slot","fixed"],[3,"courseId","currentModuleId"],[3,"courseId","moduleId"]],template:function AddonModAssignIndexComponent_Template(n,e){1&n&&(S.j41(0,"core-navbar-buttons",0),S.DNE(1,AddonModAssignIndexComponent_Conditional_1_Template,3,3,"ion-button",1)(2,AddonModAssignIndexComponent_Conditional_2_Template,3,4),S.k0s(),S.j41(3,"core-loading",2)(4,"core-course-module-info",3),S.bIt("completionChanged",(function AddonModAssignIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return e.onCompletionChange()})),S.DNE(5,AddonModAssignIndexComponent_div_5_Template,2,1,"div",4),S.k0s(),S.DNE(6,AddonModAssignIndexComponent_ng_container_6_Template,18,16,"ng-container",5)(7,AddonModAssignIndexComponent_addon_mod_assign_submission_7_Template,1,2,"addon-mod-assign-submission",6),S.k0s()),2&n&&(S.R7$(),S.vxM(1,e.courseContentsPage?2:1),S.R7$(2),S.Y8G("hideUntil",!e.showLoading),S.R7$(),S.Y8G("module",e.module)("description",e.description)("component",e.component)("componentId",e.componentId)("courseId",e.courseId)("hasDataToSync",e.hasOffline),S.R7$(),S.Y8G("ngIf",e.assign&&(null==e.assign.introattachments?null:e.assign.introattachments.length)&&!e.assign.submissionattachments),S.R7$(),S.Y8G("ngIf",e.assign&&e.canViewAllSubmissions),S.R7$(),S.Y8G("ngIf",!e.showLoading&&!e.canViewAllSubmissions&&e.canViewOwnSubmission))},dependencies:[C.Sq,C.bT,v.B,G.Q,R.t,k.F,E.R,F.c,$.t,y.i,w.T,M.In,M.Jm,M.b_,M.iq,M.uz,M.he,M.nf,x.Y,j.Q,I.B,D.D9],encapsulation:2}),AddonModAssignIndexComponent})()},58841:(n,e,i)=>{i.d(e,{w:()=>f});var s=i(10467),t=i(68162),o=i(5505),d=i(20218),a=i(95790),_=i(66016),m=i(91416),r=i(54438),g=i(60177),l=i(6128),u=i(64422),p=i(58197),c=i(35407),b=i(73465),A=i(73955);function AddonModAssignSubmissionPluginComponent_ion_item_2_ion_badge_4_Template(n,e){1&n&&(r.j41(0,"ion-badge",7),r.EFF(1),r.nI1(2,"translate"),r.k0s()),2&n&&(r.R7$(),r.SpI(" ",r.bMT(2,1,"addon.mod_assign.submissionnotsupported")," "))}function AddonModAssignSubmissionPluginComponent_ion_item_2_p_5_Template(n,e){if(1&n&&(r.j41(0,"p"),r.nrm(1,"core-format-text",8),r.k0s()),2&n){const n=r.XpG(2);r.R7$(),r.Y8G("component",n.component)("componentId",n.assign.cmid)("text",n.text)("contextInstanceId",n.assign.cmid)("courseId",n.assign.course)}}function AddonModAssignSubmissionPluginComponent_ion_item_2_core_file_6_Template(n,e){if(1&n&&r.nrm(0,"core-file",9),2&n){const n=e.$implicit,i=r.XpG(2);r.Y8G("file",n)("component",i.component)("componentId",i.assign.cmid)("alwaysDownload",!0)}}function AddonModAssignSubmissionPluginComponent_ion_item_2_Template(n,e){if(1&n&&(r.j41(0,"ion-item",3)(1,"ion-label")(2,"h2"),r.EFF(3),r.k0s(),r.DNE(4,AddonModAssignSubmissionPluginComponent_ion_item_2_ion_badge_4_Template,3,3,"ion-badge",4)(5,AddonModAssignSubmissionPluginComponent_ion_item_2_p_5_Template,2,5,"p",5)(6,AddonModAssignSubmissionPluginComponent_ion_item_2_core_file_6_Template,1,4,"core-file",6),r.k0s()()),2&n){const n=r.XpG();r.R7$(3),r.JRh(n.plugin.name),r.R7$(),r.Y8G("ngIf",n.notSupported),r.R7$(),r.Y8G("ngIf",n.text),r.R7$(),r.Y8G("ngForOf",n.files)}}let f=(()=>{var n;class AddonModAssignSubmissionPluginComponent{constructor(){this.edit=!1,this.allowOffline=!1,this.component=_.AC,this.text="",this.files=[],this.notSupported=!1,this.pluginLoaded=!1}ngOnChanges(n){var e=this;return(0,s.A)((function*(){if(!e.plugin)return e.pluginLoaded=!0,void 0;const i=a.AddonModAssignSubmissionDelegate.getPluginName(e.plugin);if(!i)return e.pluginLoaded=!0,void 0;e.plugin.name=i,(n.plugin||n.edit)&&(e.pluginComponent=yield a.AddonModAssignSubmissionDelegate.getComponentForPlugin(e.plugin,e.edit),e.pluginLoaded=!e.pluginComponent,e.pluginComponent||(e.text=o.AddonModAssign.getSubmissionPluginText(e.plugin),e.files=o.AddonModAssign.getSubmissionPluginAttachments(e.plugin),e.notSupported=a.AddonModAssignSubmissionDelegate.isPluginSupported(e.plugin.type))),e.pluginComponent&&(e.data={assign:e.assign,submission:e.submission,plugin:e.plugin,configs:d.AddonModAssignHelper.getPluginConfig(e.assign,"assignsubmission",e.plugin.type),edit:e.edit,allowOffline:e.allowOffline})}))()}invalidate(){var n=this;return(0,s.A)((function*(){yield n.dynamicComponent.callComponentMethod("invalidate")}))()}}return(n=AddonModAssignSubmissionPluginComponent).ɵfac=function AddonModAssignSubmissionPluginComponent_Factory(e){return new(e||n)},n.ɵcmp=r.VBU({type:n,selectors:[["addon-mod-assign-submission-plugin"]],viewQuery:function AddonModAssignSubmissionPluginComponent_Query(n,e){if(1&n&&r.GBs(t.m,5),2&n){let n;r.mGM(n=r.lsd())&&(e.dynamicComponent=n.first)}},inputs:{assign:"assign",submission:"submission",plugin:"plugin",edit:[r.Mj6.HasDecoratorInputTransform,"edit","edit",m.G],allowOffline:[r.Mj6.HasDecoratorInputTransform,"allowOffline","allowOffline",m.G]},features:[r.GFd,r.OA$],decls:3,vars:4,consts:[[3,"component","data"],[3,"hideUntil"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],["color","primary",4,"ngIf"],[4,"ngIf"],[3,"file","component","componentId","alwaysDownload",4,"ngFor","ngForOf"],["color","primary"],["collapsible-item","","contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],[3,"file","component","componentId","alwaysDownload"]],template:function AddonModAssignSubmissionPluginComponent_Template(n,e){1&n&&(r.j41(0,"core-dynamic-component",0)(1,"core-loading",1),r.DNE(2,AddonModAssignSubmissionPluginComponent_ion_item_2_Template,7,4,"ion-item",2),r.k0s()()),2&n&&(r.Y8G("component",e.pluginComponent)("data",e.data),r.R7$(),r.Y8G("hideUntil",e.pluginLoaded),r.R7$(),r.Y8G("ngIf",e.text.length>0||e.files.length>0))},dependencies:[g.Sq,g.bT,t.m,l.t,u.R,p.B,c.K,b.In,b.uz,b.he,A.D9],encapsulation:2}),AddonModAssignSubmissionPluginComponent})()},81679:(n,e,i)=>{i.d(e,{B:()=>nn});var s=i(10467),t=i(49882),o=i(52749),d=i(5505),a=i(75217),_=i(73564),m=i(97383),r=i(81690),g=i(20218),l=i(89911),u=i(79555),p=i(75383),c=i(44682),b=i(4175),A=i(98870),f=i(16474),I=i(15324),h=i(94455),S=i(64847),M=i(72881),T=i(75629),C=i(15221),v=i(48966),G=i(58841),R=i(24742),k=i(20523),E=i(55351),F=i(66016),$=i(69534),y=i(23780),w=i(55554),x=i(54438),j=i(29492),D=i(60177),Y=i(64422),N=i(72597),O=i(34198),U=i(16658),X=i(86198),P=i(58197),V=i(23007),L=i(37557),B=i(66731),J=i(43570),H=i(89417),q=i(73465),z=i(30864),Q=i(29905),W=i(49780),K=i(59528),Z=i(73955);const _c0=(n,e)=>({current:n,total:e}),_c1=n=>({$a:n}),_c2=n=>[n],_c3=()=>[300,900],_c4=(n,e)=>({submissioneditable:n,submissionnoteditable:e}),_c5=()=>({$a:""}),_c6=n=>({$a:n}),_c7=n=>({header:n});function AddonModAssignSubmissionComponent_ion_card_2_Template(n,e){1&n&&(x.j41(0,"ion-card",9)(1,"ion-item",10),x.nrm(2,"ion-icon",11),x.j41(3,"ion-label")(4,"p"),x.EFF(5),x.nI1(6,"translate"),x.k0s()()()()),2&n&&(x.R7$(5),x.JRh(x.bMT(6,1,"addon.mod_assign.caneditsubmission")))}function AddonModAssignSubmissionComponent_ion_item_3_ng_container_5_Template(n,e){1&n&&x.eu8(0)}function AddonModAssignSubmissionComponent_ion_item_3_Template(n,e){if(1&n&&(x.j41(0,"ion-item",12),x.nrm(1,"core-user-avatar",13),x.j41(2,"ion-label")(3,"p",14),x.EFF(4),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_ion_item_3_ng_container_5_Template,1,0,"ng-container",15),x.k0s()()),2&n){const n=x.XpG(),e=x.sdS(12);x.Y8G("userId",n.submitId)("courseId",n.courseId),x.BMQ("aria-label",n.user.fullname),x.R7$(),x.Y8G("user",n.user)("linkProfile",!1),x.R7$(3),x.JRh(n.user.fullname),x.R7$(),x.Y8G("ngTemplateOutlet",e)}}function AddonModAssignSubmissionComponent_ion_item_4_ng_container_5_Template(n,e){1&n&&x.eu8(0)}function AddonModAssignSubmissionComponent_ion_item_4_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_ion_item_4_ng_container_5_Template,1,0,"ng-container",15),x.k0s()()),2&n){const n=x.XpG(),e=x.sdS(12);x.R7$(3),x.Lme("",x.bMT(4,3,"addon.mod_assign.hiddenuser")," ",n.blindId,""),x.R7$(2),x.Y8G("ngTemplateOutlet",e)}}function AddonModAssignSubmissionComponent_ion_item_5_ng_container_5_Template(n,e){1&n&&x.eu8(0)}function AddonModAssignSubmissionComponent_ion_item_5_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_ion_item_5_ng_container_5_Template,1,0,"ng-container",15),x.k0s()()),2&n){x.XpG();const n=x.sdS(12);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.submissionstatus")),x.R7$(2),x.Y8G("ngTemplateOutlet",n)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_0_p_5_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n){const n=x.XpG(3);x.R7$(),x.SpI(" ",x.i5U(2,1,"addon.mod_assign.outof",x.eq3(7,_c1,x.l_i(4,_c0,n.currentAttempt,n.maxAttemptsText)))," ")}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_0_p_6_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n){const n=x.XpG(3);x.R7$(),x.SpI(" ",x.i5U(2,1,"addon.mod_assign.outof",x.eq3(7,_c1,x.l_i(4,_c0,n.currentAttempt,n.assign.maxattempts)))," ")}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_0_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_ng_template_9_ion_item_0_p_5_Template,3,9,"p",18)(6,AddonModAssignSubmissionComponent_ng_template_9_ion_item_0_p_6_Template,3,9,"p",18),x.k0s()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,3,"addon.mod_assign.attemptnumber")),x.R7$(2),x.Y8G("ngIf",n.assign.maxattempts===n.unlimitedAttempts),x.R7$(),x.Y8G("ngIf",n.assign.maxattempts!==n.unlimitedAttempts)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_1_Template(n,e){1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s()()()),2&n&&(x.R7$(3),x.JRh(x.bMT(4,1,"addon.mod_assign.submissionslocked")))}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_2_p_2_Template(n,e){if(1&n&&(x.nrm(0,"p",22),x.nI1(1,"translate")),2&n){const n=x.XpG(3);x.Y8G("innerHTML",x.i5U(1,1,"addon.mod_assign.allowsubmissionsfromdatesummary",x.eq3(4,_c1,n.fromDate)),x.npT)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_2_p_3_Template(n,e){if(1&n&&(x.nrm(0,"p",22),x.nI1(1,"translate")),2&n){const n=x.XpG(3);x.Y8G("innerHTML",x.i5U(1,1,"addon.mod_assign.allowsubmissionsanddescriptionfromdatesummary",x.eq3(4,_c1,n.fromDate)),x.npT)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_2_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label"),x.DNE(2,AddonModAssignSubmissionComponent_ng_template_9_ion_item_2_p_2_Template,2,6,"p",21)(3,AddonModAssignSubmissionComponent_ng_template_9_ion_item_2_p_3_Template,2,6,"p",21),x.k0s()()),2&n){const n=x.XpG(2);x.R7$(2),x.Y8G("ngIf",n.assign.intro),x.R7$(),x.Y8G("ngIf",!n.assign.intro)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_3_p_5_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"coreFormatDate"),x.k0s()),2&n){const n=x.XpG(3);x.R7$(),x.JRh(x.bMT(2,1,1e3*n.assign.duedate))}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_3_p_6_Template(n,e){1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_assign.duedateno")))}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_3_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_ng_template_9_ion_item_3_p_5_Template,3,3,"p",18)(6,AddonModAssignSubmissionComponent_ng_template_9_ion_item_3_p_6_Template,3,3,"p",18),x.k0s()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,3,"addon.mod_assign.duedate")),x.R7$(2),x.Y8G("ngIf",n.assign.duedate),x.R7$(),x.Y8G("ngIf",!n.assign.duedate)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_4_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.EFF(6),x.nI1(7,"coreFormatDate"),x.k0s()()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.cutoffdate")),x.R7$(3),x.JRh(x.bMT(7,4,1e3*n.assign.cutoffdate))}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_5_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.EFF(6),x.nI1(7,"coreFormatDate"),x.k0s()()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.extensionduedate")),x.R7$(3),x.JRh(x.bMT(7,4,1e3*n.lastAttempt.extensionduedate))}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_6_p_5_Template(n,e){if(1&n&&x.nrm(0,"p",22),2&n){const n=x.XpG(3);x.Y8G("innerHTML",n.timeRemaining,x.npT)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_6_core_timer_6_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"core-timer",25),x.bIt("finished",(function AddonModAssignSubmissionComponent_ng_template_9_ion_item_6_core_timer_6_Template_core_timer_finished_0_listener(){x.eBV(n);const e=x.XpG(3);return x.Njj(e.timeUp())})),x.k0s()}if(2&n){const n=x.XpG(3);x.Y8G("endTime",n.timeLimitEndTime)("timeLeftClassThreshold",-1)("underTimeClassThresholds",x.lJ4(3,_c3))}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_6_Template(n,e){if(1&n&&(x.j41(0,"ion-item",23)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_ng_template_9_ion_item_6_p_5_Template,1,1,"p",21)(6,AddonModAssignSubmissionComponent_ng_template_9_ion_item_6_core_timer_6_Template,1,4,"core-timer",24),x.k0s()()),2&n){const n=x.XpG(2);x.Y8G("ngClass",x.eq3(6,_c2,n.timeRemainingClass)),x.R7$(3),x.JRh(x.bMT(4,4,"addon.mod_assign.timeremaining")),x.R7$(2),x.Y8G("ngIf",!n.timeLimitEndTime),x.R7$(),x.Y8G("ngIf",n.timeLimitEndTime>0)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_7_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.EFF(6),x.nI1(7,"coreDuration"),x.k0s()()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.timelimit")),x.R7$(3),x.JRh(x.bMT(7,4,n.assign.timelimit))}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_8_p_5_Template(n,e){1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_assign.submissioneditable")))}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_8_p_6_Template(n,e){1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n&&(x.R7$(),x.JRh(x.bMT(2,1,"addon.mod_assign.submissionnoteditable")))}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_8_Template(n,e){if(1&n&&(x.j41(0,"ion-item",23)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_ng_template_9_ion_item_8_p_5_Template,3,3,"p",18)(6,AddonModAssignSubmissionComponent_ng_template_9_ion_item_8_p_6_Template,3,3,"p",18),x.k0s()()),2&n){const n=x.XpG(2);x.Y8G("ngClass",x.l_i(6,_c4,n.lastAttempt.caneditowner,!n.lastAttempt.caneditowner)),x.R7$(3),x.JRh(x.bMT(4,4,"addon.mod_assign.editingstatus")),x.R7$(2),x.Y8G("ngIf",n.lastAttempt.caneditowner),x.R7$(),x.Y8G("ngIf",!n.lastAttempt.caneditowner)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_9_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.EFF(6),x.nI1(7,"coreFormatDate"),x.k0s()()()),2&n){const n=x.XpG(2);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.timemodified")),x.R7$(3),x.JRh(x.bMT(7,4,1e3*n.userSubmission.timemodified))}}function AddonModAssignSubmissionComponent_ng_template_9_addon_mod_assign_submission_plugin_10_Template(n,e){if(1&n&&x.nrm(0,"addon-mod-assign-submission-plugin",26),2&n){const n=e.$implicit,i=x.XpG(2);x.Y8G("assign",i.assign)("submission",i.userSubmission)("plugin",n)}}function AddonModAssignSubmissionComponent_ng_template_9_ion_item_divider_11_Template(n,e){1&n&&(x.j41(0,"ion-item-divider",10)(1,"ion-label")(2,"h2"),x.EFF(3),x.nI1(4,"translate"),x.k0s()()()),2&n&&(x.R7$(3),x.JRh(x.i5U(4,1,"addon.mod_assign.userswhoneedtosubmit",x.lJ4(4,_c5))))}function AddonModAssignSubmissionComponent_ng_template_9_ng_container_12_ng_container_1_Template(n,e){if(1&n&&(x.qex(0),x.j41(1,"ion-item",12),x.nrm(2,"core-user-avatar",13),x.j41(3,"ion-label")(4,"p",14),x.EFF(5),x.k0s()()(),x.bVm()),2&n){const n=e.$implicit,i=x.XpG(3);x.R7$(),x.Y8G("userId",n.id)("courseId",i.courseId),x.BMQ("aria-label",n.fullname),x.R7$(),x.Y8G("user",n)("linkProfile",!1),x.R7$(3),x.JRh(n.fullname)}}function AddonModAssignSubmissionComponent_ng_template_9_ng_container_12_Template(n,e){if(1&n&&(x.qex(0),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_ng_container_12_ng_container_1_Template,6,6,"ng-container",27),x.bVm()),2&n){const n=x.XpG(2);x.R7$(),x.Y8G("ngForOf",n.membersToSubmit)}}function AddonModAssignSubmissionComponent_ng_template_9_ng_container_13_ng_container_1_Template(n,e){if(1&n&&(x.qex(0),x.j41(1,"ion-item",10)(2,"ion-label"),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.bVm()),2&n){const n=e.$implicit;x.R7$(3),x.Lme("",x.bMT(4,2,"addon.mod_assign.hiddenuser")," ",n,"")}}function AddonModAssignSubmissionComponent_ng_template_9_ng_container_13_Template(n,e){if(1&n&&(x.qex(0),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_ng_container_13_ng_container_1_Template,5,4,"ng-container",27),x.bVm()),2&n){const n=x.XpG(2);x.R7$(),x.Y8G("ngForOf",n.membersToSubmitBlind)}}function AddonModAssignSubmissionComponent_ng_template_9_div_14_ion_button_6_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-button",32),x.bIt("click",(function AddonModAssignSubmissionComponent_ng_template_9_div_14_ion_button_6_Template_ion_button_click_0_listener(){x.eBV(n);const e=x.XpG(3);return x.Njj(e.remove())})),x.nrm(1,"ion-icon",33),x.EFF(2),x.nI1(3,"translate"),x.k0s()}2&n&&(x.R7$(2),x.SpI(" ",x.bMT(3,1,"addon.mod_assign.removesubmission")," "))}function AddonModAssignSubmissionComponent_ng_template_9_div_14_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"div",2)(1,"div",28)(2,"ion-button",29),x.bIt("click",(function AddonModAssignSubmissionComponent_ng_template_9_div_14_Template_ion_button_click_2_listener(){x.eBV(n);const e=x.XpG(2);return x.Njj(e.goToEdit())})),x.nrm(3,"ion-icon",30),x.EFF(4),x.nI1(5,"translate"),x.k0s(),x.DNE(6,AddonModAssignSubmissionComponent_ng_template_9_div_14_ion_button_6_Template,4,3,"ion-button",31),x.k0s()()}if(2&n){const n=x.XpG(2);x.R7$(4),x.SpI(" ",x.bMT(5,2,"addon.mod_assign.editsubmission")," "),x.R7$(2),x.Y8G("ngIf",n.isRemoveAvailable)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ion_button_1_ng_container_1_Template(n,e){1&n&&(x.qex(0),x.EFF(1),x.nI1(2,"translate"),x.bVm()),2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_assign.addsubmission")," "))}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ion_button_1_ng_container_2_Template(n,e){1&n&&(x.qex(0),x.EFF(1),x.nI1(2,"translate"),x.bVm()),2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_assign.beginassignment")," "))}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ion_button_1_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-button",39),x.bIt("click",(function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ion_button_1_Template_ion_button_click_0_listener(){x.eBV(n);const e=x.XpG(6);return x.Njj(e.goToEdit())})),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ion_button_1_ng_container_1_Template,3,3,"ng-container",18)(2,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ion_button_1_ng_container_2_Template,3,3,"ng-container",18),x.k0s()}if(2&n){const n=x.XpG(6);x.R7$(),x.Y8G("ngIf",!(null!=n.assign&&n.assign.timelimit)||(null==n.userSubmission?null:n.userSubmission.timestarted)),x.R7$(),x.Y8G("ngIf",(null==n.assign?null:n.assign.timelimit)&&(!n.userSubmission||!n.userSubmission.timestarted))}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ng_container_2_ion_button_1_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-button",39),x.bIt("click",(function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ng_container_2_ion_button_1_Template_ion_button_click_0_listener(){x.eBV(n);const e=x.XpG(7);return x.Njj(e.copyPrevious())})),x.EFF(1),x.nI1(2,"translate"),x.k0s()}2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_assign.addnewattemptfromprevious")," "))}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ng_container_2_Template(n,e){if(1&n){const n=x.RV6();x.qex(0),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ng_container_2_ion_button_1_Template,3,3,"ion-button",38),x.j41(2,"ion-button",39),x.bIt("click",(function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ng_container_2_Template_ion_button_click_2_listener(){x.eBV(n);const e=x.XpG(6);return x.Njj(e.goToEdit())})),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.bVm()}if(2&n){const n=x.XpG(6);x.R7$(),x.Y8G("ngIf",!n.isPreviousAttemptEmpty),x.R7$(2),x.SpI(" ",x.bMT(4,2,"addon.mod_assign.addnewattempt")," ")}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_Template(n,e){if(1&n&&(x.j41(0,"div",28),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ion_button_1_Template,3,2,"ion-button",38)(2,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_ng_container_2_Template,5,4,"ng-container",18),x.k0s()),2&n){const n=x.XpG(5);x.R7$(),x.Y8G("ngIf",!n.editedOffline&&(n.removedOffline||!n.userSubmission||!n.userSubmission.status||n.userSubmission.status===n.statusNew)),x.R7$(),x.Y8G("ngIf",!n.editedOffline&&!n.removedOffline&&(null==n.userSubmission?null:n.userSubmission.status)===n.statusReopened)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_ng_container_2_li_5_Template(n,e){if(1&n&&(x.j41(0,"li"),x.EFF(1),x.k0s()),2&n){const n=e.$implicit;x.R7$(),x.JRh(n)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_ng_container_2_ion_button_6_Template(n,e){if(1&n&&(x.j41(0,"ion-button",43),x.EFF(1),x.nI1(2,"translate"),x.nrm(3,"ion-icon",44),x.k0s()),2&n){const n=x.XpG(7);x.Y8G("href",n.submissionUrl)("showBrowserWarning",!1),x.R7$(),x.SpI(" ",x.bMT(2,3,"core.openinbrowser")," ")}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_ng_container_2_Template(n,e){if(1&n&&(x.qex(0),x.j41(1,"p",41),x.EFF(2),x.nI1(3,"translate"),x.k0s(),x.j41(4,"ul"),x.DNE(5,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_ng_container_2_li_5_Template,2,1,"li",27),x.k0s(),x.DNE(6,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_ng_container_2_ion_button_6_Template,4,5,"ion-button",42),x.bVm()),2&n){const n=x.XpG(6);x.R7$(2),x.SpI(" ",x.bMT(3,3,"addon.mod_assign.erroreditpluginsnotsupported"),""),x.R7$(3),x.Y8G("ngForOf",n.unsupportedEditPlugins),x.R7$(),x.Y8G("ngIf",n.submissionUrl)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_ng_container_3_Template(n,e){1&n&&(x.qex(0),x.j41(1,"p"),x.EFF(2),x.nI1(3,"translate"),x.k0s(),x.bVm()),2&n&&(x.R7$(2),x.JRh(x.bMT(3,1,"addon.mod_assign.cannoteditduetostatementsubmission")))}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_Template(n,e){if(1&n&&(x.j41(0,"ion-item",40)(1,"ion-label"),x.DNE(2,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_ng_container_2_Template,7,5,"ng-container",18)(3,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_ng_container_3_Template,4,3,"ng-container",18),x.k0s()()),2&n){const n=x.XpG(5);x.R7$(2),x.Y8G("ngIf",n.unsupportedEditPlugins&&n.unsupportedEditPlugins.length&&!n.showErrorStatementEdit),x.R7$(),x.Y8G("ngIf",n.showErrorStatementEdit)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_Template(n,e){if(1&n&&(x.qex(0),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_div_1_Template,3,2,"div",36)(2,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_ion_item_2_Template,4,2,"ion-item",37),x.bVm()),2&n){const n=x.XpG(4);x.R7$(),x.Y8G("ngIf",!n.unsupportedEditPlugins.length&&!n.showErrorStatementEdit),x.R7$(),x.Y8G("ngIf",n.unsupportedEditPlugins.length&&!n.showErrorStatementEdit||n.showErrorStatementEdit)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_ion_item_1_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-item",10)(1,"ion-checkbox",45),x.mxI("ngModelChange",(function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_ion_item_1_Template_ion_checkbox_ngModelChange_1_listener(e){x.eBV(n);const i=x.XpG(5);return x.DH7(i.acceptStatement,e)||(i.acceptStatement=e),x.Njj(e)})),x.nrm(2,"core-format-text",46),x.k0s()()}if(2&n){const n=x.XpG(5);x.R7$(),x.R50("ngModel",n.acceptStatement),x.R7$(),x.Y8G("text",n.submissionStatement)("filter",!1)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_ion_item_2_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-item",10)(1,"ion-label")(2,"ion-button",47),x.bIt("click",(function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_ion_item_2_Template_ion_button_click_2_listener(){x.eBV(n);const e=x.XpG(5);return x.Njj(e.submitForGrading(e.acceptStatement))})),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.nrm(6,"ion-icon",48),x.EFF(7),x.nI1(8,"translate"),x.k0s()()()}2&n&&(x.R7$(3),x.SpI(" ",x.bMT(4,2,"addon.mod_assign.submitassignment")," "),x.R7$(4),x.SpI(" ",x.bMT(8,4,"addon.mod_assign.submitassignment_help")," "))}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_ion_item_3_Template(n,e){1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",49),x.EFF(3),x.nI1(4,"translate"),x.k0s()()()),2&n&&(x.R7$(3),x.SpI(" ",x.bMT(4,1,"addon.mod_assign.cannotsubmitduetostatementsubmission")," "))}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_Template(n,e){if(1&n&&(x.qex(0),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_ion_item_1_Template,3,3,"ion-item",5)(2,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_ion_item_2_Template,9,6,"ion-item",5)(3,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_ion_item_3_Template,5,3,"ion-item",5),x.bVm()),2&n){const n=x.XpG(4);x.R7$(),x.Y8G("ngIf",n.submissionStatement),x.R7$(),x.Y8G("ngIf",!n.showErrorStatementSubmit),x.R7$(),x.Y8G("ngIf",n.showErrorStatementSubmit)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_Template(n,e){if(1&n&&(x.j41(0,"div",2),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_1_Template,3,2,"ng-container",18)(2,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_ng_container_2_Template,4,3,"ng-container",18),x.k0s()),2&n){const n=x.XpG(3);x.R7$(),x.Y8G("ngIf",n.canEdit),x.R7$(),x.Y8G("ngIf",n.canSubmit)}}function AddonModAssignSubmissionComponent_ng_template_9_div_15_Template(n,e){if(1&n&&(x.j41(0,"div",34),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_9_div_15_div_1_Template,3,2,"div",19),x.nrm(2,"core-course-module-navigation",35),x.k0s()),2&n){const n=x.XpG(2);x.Y8G("hidden","submission"!==n.selectedTab),x.R7$(),x.Y8G("ngIf",n.canEdit||n.canSubmit),x.R7$(),x.Y8G("courseId",n.courseId)("currentModuleId",n.moduleId)}}function AddonModAssignSubmissionComponent_ng_template_9_Template(n,e){if(1&n&&x.DNE(0,AddonModAssignSubmissionComponent_ng_template_9_ion_item_0_Template,7,5,"ion-item",5)(1,AddonModAssignSubmissionComponent_ng_template_9_ion_item_1_Template,5,3,"ion-item",5)(2,AddonModAssignSubmissionComponent_ng_template_9_ion_item_2_Template,4,2,"ion-item",5)(3,AddonModAssignSubmissionComponent_ng_template_9_ion_item_3_Template,7,5,"ion-item",5)(4,AddonModAssignSubmissionComponent_ng_template_9_ion_item_4_Template,8,6,"ion-item",5)(5,AddonModAssignSubmissionComponent_ng_template_9_ion_item_5_Template,8,6,"ion-item",5)(6,AddonModAssignSubmissionComponent_ng_template_9_ion_item_6_Template,7,8,"ion-item",16)(7,AddonModAssignSubmissionComponent_ng_template_9_ion_item_7_Template,8,6,"ion-item",5)(8,AddonModAssignSubmissionComponent_ng_template_9_ion_item_8_Template,7,9,"ion-item",16)(9,AddonModAssignSubmissionComponent_ng_template_9_ion_item_9_Template,8,6,"ion-item",5)(10,AddonModAssignSubmissionComponent_ng_template_9_addon_mod_assign_submission_plugin_10_Template,1,3,"addon-mod-assign-submission-plugin",17)(11,AddonModAssignSubmissionComponent_ng_template_9_ion_item_divider_11_Template,5,5,"ion-item-divider",5)(12,AddonModAssignSubmissionComponent_ng_template_9_ng_container_12_Template,2,1,"ng-container",18)(13,AddonModAssignSubmissionComponent_ng_template_9_ng_container_13_Template,2,1,"ng-container",18)(14,AddonModAssignSubmissionComponent_ng_template_9_div_14_Template,7,4,"div",19)(15,AddonModAssignSubmissionComponent_ng_template_9_div_15_Template,3,4,"div",20),2&n){const n=x.XpG();x.Y8G("ngIf",n.currentAttempt&&!n.isGrading),x.R7$(),x.Y8G("ngIf",null==n.lastAttempt?null:n.lastAttempt.locked),x.R7$(),x.Y8G("ngIf",n.showDates&&n.fromDate&&!n.isSubmittedForGrading),x.R7$(),x.Y8G("ngIf",n.showDates&&n.assign.duedate&&!n.isSubmittedForGrading),x.R7$(),x.Y8G("ngIf",n.assign.duedate&&n.assign.cutoffdate&&n.isSubmittedForGrading),x.R7$(),x.Y8G("ngIf",n.assign.duedate&&(null==n.lastAttempt?null:n.lastAttempt.extensionduedate)&&!n.isSubmittedForGrading),x.R7$(),x.Y8G("ngIf",n.timeRemaining||n.timeLimitEndTime>0),x.R7$(),x.Y8G("ngIf",n.assign&&n.assign.timelimit),x.R7$(),x.Y8G("ngIf",n.lastAttempt&&n.isSubmittedForGrading&&void 0!==n.lastAttempt.caneditowner),x.R7$(),x.Y8G("ngIf",n.userSubmission&&n.userSubmission.status!==n.statusNew&&n.userSubmission.timemodified),x.R7$(),x.Y8G("ngForOf",n.submissionPlugins),x.R7$(),x.Y8G("ngIf",n.membersToSubmit&&n.membersToSubmit.length>0),x.R7$(),x.Y8G("ngIf",n.membersToSubmit&&n.membersToSubmit.length>0&&!n.blindMarking),x.R7$(),x.Y8G("ngIf",n.membersToSubmit&&n.membersToSubmit.length>0&&n.blindMarking),x.R7$(),x.Y8G("ngIf",n.loaded&&!n.isSubmittedForGrading&&n.canEdit&&!n.unsupportedEditPlugins.length&&!n.showErrorStatementEdit&&(n.editedOffline||!n.removedOffline&&(null==n.userSubmission?null:n.userSubmission.status)&&(null==n.userSubmission?null:n.userSubmission.status)!==n.statusNew&&(null==n.userSubmission?null:n.userSubmission.status)!==n.statusReopened)),x.R7$(),x.Y8G("ngIf",n.loaded&&!n.isSubmittedForGrading)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_0_ion_button_7_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-button",56),x.nI1(1,"translate"),x.bIt("click",(function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_0_ion_button_7_Template_ion_button_click_0_listener(){x.eBV(n);const e=x.XpG(4);return x.Njj(e.showAdvancedGrade())})),x.nrm(2,"ion-icon",57),x.k0s()}2&n&&x.Y8G("ariaLabel",x.bMT(1,1,"core.showadvanced"))}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_0_Template(n,e){if(1&n&&(x.j41(0,"ion-item",54)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.nrm(6,"core-format-text",46),x.k0s()(),x.DNE(7,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_0_ion_button_7_Template,3,3,"ion-button",55),x.k0s()),2&n){const n=x.XpG(3);x.R7$(3),x.JRh(x.bMT(4,4,"addon.mod_assign.currentgrade")),x.R7$(3),x.Y8G("text",n.feedback.gradefordisplay)("filter",!1),x.R7$(),x.Y8G("ngIf",n.feedback.advancedgrade)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_1_ion_input_1_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-input",60),x.nI1(1,"translate"),x.nI1(2,"translate"),x.mxI("ngModelChange",(function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_1_ion_input_1_Template_ion_input_ngModelChange_0_listener(e){x.eBV(n);const i=x.XpG(5);return x.DH7(i.grade.grade,e)||(i.grade.grade=e),x.Njj(e)})),x.k0s()}if(2&n){const n=x.XpG(5);x.R50("ngModel",n.grade.grade),x.Y8G("max",n.gradeInfo.grade)("lang",n.grade.lang)("label",x.i5U(1,5,"addon.mod_assign.gradeoutof",x.eq3(10,_c6,n.gradeInfo.grade)))("helperText",n.grade.disabled?x.bMT(2,8,"addon.mod_assign.gradelocked"):null)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_1_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10),x.DNE(1,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_1_ion_input_1_Template,3,12,"ion-input",59),x.k0s()),2&n){const n=x.XpG(4);x.R7$(),x.Y8G("ngIf",!n.grade.disabled)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_2_ion_select_option_7_Template(n,e){if(1&n&&(x.j41(0,"ion-select-option",64),x.EFF(1),x.k0s()),2&n){const n=e.$implicit;x.Y8G("value",n.value),x.R7$(),x.SpI(" ",n.label," ")}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_2_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-item",10)(1,"ion-select",61),x.nI1(2,"translate"),x.nI1(3,"translate"),x.mxI("ngModelChange",(function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_2_Template_ion_select_ngModelChange_1_listener(e){x.eBV(n);const i=x.XpG(4);return x.DH7(i.grade.grade,e)||(i.grade.grade=e),x.Njj(e)})),x.j41(4,"p",62),x.EFF(5),x.nI1(6,"translate"),x.k0s(),x.DNE(7,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_2_ion_select_option_7_Template,2,2,"ion-select-option",63),x.k0s()()}if(2&n){const n=x.XpG(4);x.R7$(),x.R50("ngModel",n.grade.grade),x.Y8G("disabled",n.grade.disabled)("cancelText",x.bMT(2,6,"core.cancel"))("interfaceOptions",x.eq3(12,_c7,x.bMT(3,8,"addon.mod_assign.grade"))),x.R7$(4),x.JRh(x.bMT(6,10,"addon.mod_assign.grade")),x.R7$(2),x.Y8G("ngForOf",n.grade.scale)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_ion_select_1_ion_select_option_4_Template(n,e){if(1&n&&(x.j41(0,"ion-select-option",64),x.EFF(1),x.k0s()),2&n){const n=e.$implicit;x.Y8G("value",n.value),x.R7$(),x.SpI(" ",n.label," ")}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_ion_select_1_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-select",61),x.nI1(1,"translate"),x.mxI("ngModelChange",(function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_ion_select_1_Template_ion_select_ngModelChange_0_listener(e){x.eBV(n);const i=x.XpG().$implicit;return x.DH7(i.selectedId,e)||(i.selectedId=e),x.Njj(e)})),x.j41(2,"p",62),x.EFF(3),x.k0s(),x.DNE(4,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_ion_select_1_ion_select_option_4_Template,2,2,"ion-select-option",63),x.k0s()}if(2&n){const n=x.XpG().$implicit,e=x.XpG(4);x.R50("ngModel",n.selectedId),x.Y8G("disabled",!!e.gradeInfo.disabled)("cancelText",x.bMT(1,6,"core.cancel"))("interfaceOptions",x.eq3(8,_c7,n.name)),x.R7$(3),x.JRh(n.name),x.R7$(),x.Y8G("ngForOf",n.options)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_p_2_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&n){const n=x.XpG().$implicit;x.R7$(),x.JRh(n.selected)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10),x.DNE(1,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_ion_select_1_Template,5,10,"ion-select",65)(2,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_p_2_Template,2,1,"p",18),x.k0s()),2&n){const n=e.$implicit,i=x.XpG(4);x.R7$(),x.Y8G("ngIf",i.canSaveGrades&&n.itemNumber),x.R7$(),x.Y8G("ngIf",!i.canSaveGrades||!n.itemNumber)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_4_p_5_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&n){const n=x.XpG(5);x.R7$(),x.Lme("",n.grade.unreleasedGrade," / ",n.gradeInfo.grade,"")}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_4_p_6_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&n){const n=x.XpG(5);x.R7$(),x.JRh(n.grade.unreleasedGrade)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_4_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_4_p_5_Template,2,2,"p",18)(6,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_4_p_6_Template,2,1,"p",18),x.k0s()()),2&n){const n=x.XpG(4);x.R7$(3),x.JRh(x.bMT(4,3,"addon.mod_assign.currentassigngrade")),x.R7$(2),x.Y8G("ngIf","simple"!==n.grade.method||!n.grade.scale),x.R7$(),x.Y8G("ngIf","simple"===n.grade.method&&n.grade.scale)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_5_p_5_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&n){const n=x.XpG(5);x.R7$(),x.SpI(" ",n.grade.gradebookGrade," ")}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_5_p_6_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.k0s()),2&n){const n=x.XpG(5);x.R7$(),x.SpI(" ",n.grade.scale[n.grade.gradebookGrade].label," ")}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_5_p_7_Template(n,e){1&n&&(x.j41(0,"p"),x.EFF(1,"-"),x.k0s())}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_5_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.DNE(5,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_5_p_5_Template,2,1,"p",18)(6,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_5_p_6_Template,2,1,"p",18)(7,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_5_p_7_Template,2,0,"p",18),x.k0s()()),2&n){const n=x.XpG(4);x.R7$(3),x.JRh(x.bMT(4,4,"addon.mod_assign.currentgrade")),x.R7$(2),x.Y8G("ngIf",n.grade.gradebookGrade&&!n.grade.scale),x.R7$(),x.Y8G("ngIf",n.grade.gradebookGrade&&n.grade.scale),x.R7$(),x.Y8G("ngIf",!n.grade.gradebookGrade)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_Template(n,e){if(1&n&&(x.qex(0),x.DNE(1,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_1_Template,2,1,"ion-item",5)(2,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_2_Template,8,14,"ion-item",5)(3,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_3_Template,3,2,"ion-item",58)(4,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_4_Template,7,5,"ion-item",5)(5,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_ion_item_5_Template,8,6,"ion-item",5),x.bVm()),2&n){const n=x.XpG(3);x.R7$(),x.Y8G("ngIf","simple"===n.grade.method&&!n.grade.scale),x.R7$(),x.Y8G("ngIf","simple"===n.grade.method&&n.grade.scale),x.R7$(),x.Y8G("ngForOf",n.gradeInfo.outcomes),x.R7$(),x.Y8G("ngIf",n.gradeInfo&&void 0!==n.grade.unreleasedGrade),x.R7$(),x.Y8G("ngIf","simple"===n.grade.method)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_2_addon_mod_assign_feedback_plugin_1_Template(n,e){if(1&n&&x.nrm(0,"addon-mod-assign-feedback-plugin",67),2&n){const n=e.$implicit,i=x.XpG(4);x.Y8G("assign",i.assign)("submission",i.userSubmission)("userId",i.submitId)("plugin",n)("canEdit",i.canSaveGrades)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_2_Template(n,e){if(1&n&&(x.qex(0),x.DNE(1,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_2_addon_mod_assign_feedback_plugin_1_Template,1,5,"addon-mod-assign-feedback-plugin",66),x.bVm()),2&n){const n=x.XpG(3);x.R7$(),x.Y8G("ngForOf",n.feedback.plugins)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_3_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.EFF(6),x.nI1(7,"translate"),x.k0s()()()),2&n){const n=x.XpG(3);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.markingworkflowstate")),x.R7$(3),x.JRh(x.bMT(7,4,n.workflowStatusTranslationId))}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_4_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-item",10)(1,"ion-toggle",68),x.mxI("ngModelChange",(function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_4_Template_ion_toggle_ngModelChange_1_listener(e){x.eBV(n);const i=x.XpG(3);return x.DH7(i.grade.applyToAll,e)||(i.grade.applyToAll=e),x.Njj(e)})),x.j41(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.EFF(6),x.nI1(7,"translate"),x.k0s()()()}if(2&n){const n=x.XpG(3);x.R7$(),x.R50("ngModel",n.grade.applyToAll),x.R7$(2),x.JRh(x.bMT(4,3,"addon.mod_assign.groupsubmissionsettings")),x.R7$(3),x.JRh(x.bMT(7,5,"addon.mod_assign.applytoteam"))}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_p_6_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n){const n=x.XpG(4);x.R7$(),x.SpI(" ",x.i5U(2,1,"addon.mod_assign.outof",x.eq3(7,_c1,x.l_i(4,_c0,n.currentAttempt,n.maxAttemptsText)))," ")}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_p_7_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n){const n=x.XpG(4);x.R7$(),x.SpI(" ",x.i5U(2,1,"addon.mod_assign.outof",x.eq3(7,_c1,x.l_i(4,_c0,n.currentAttempt,n.assign.maxattempts)))," ")}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_ion_item_12_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"ion-item")(1,"ion-toggle",68),x.mxI("ngModelChange",(function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_ion_item_12_Template_ion_toggle_ngModelChange_1_listener(e){x.eBV(n);const i=x.XpG(4);return x.DH7(i.grade.addAttempt,e)||(i.grade.addAttempt=e),x.Njj(e)})),x.j41(2,"p"),x.EFF(3),x.nI1(4,"translate"),x.k0s()()()}if(2&n){const n=x.XpG(4);x.R7$(),x.R50("ngModel",n.grade.addAttempt),x.R7$(2),x.JRh(x.bMT(4,2,"addon.mod_assign.addattempt"))}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_Template(n,e){if(1&n&&(x.qex(0),x.j41(1,"ion-item",10)(2,"ion-label")(3,"p",14),x.EFF(4),x.nI1(5,"translate"),x.k0s(),x.DNE(6,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_p_6_Template,3,9,"p",18)(7,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_p_7_Template,3,9,"p",18),x.j41(8,"p"),x.EFF(9),x.nI1(10,"translate"),x.nI1(11,"translate"),x.k0s()()(),x.DNE(12,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_ion_item_12_Template,5,4,"ion-item",18),x.bVm()),2&n){const n=x.XpG(3);x.R7$(4),x.JRh(x.bMT(5,6,"addon.mod_assign.attemptsettings")),x.R7$(2),x.Y8G("ngIf",n.assign.maxattempts===n.unlimitedAttempts),x.R7$(),x.Y8G("ngIf",n.assign.maxattempts!==n.unlimitedAttempts),x.R7$(2),x.Lme(" ",x.bMT(10,8,"addon.mod_assign.attemptreopenmethod"),": ",x.bMT(11,10,"addon.mod_assign.attemptreopenmethod_"+n.assign.attemptreopenmethod)," "),x.R7$(3),x.Y8G("ngIf",n.canSaveGrades&&n.allowAddAttempt)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_6_p_8_Template(n,e){if(1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"coreFormatDate"),x.k0s()),2&n){const n=x.XpG(4);x.R7$(),x.JRh(x.bMT(2,1,1e3*n.feedback.gradeddate))}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_6_Template(n,e){if(1&n&&(x.j41(0,"ion-item",69),x.nrm(1,"core-user-avatar",13),x.j41(2,"ion-label")(3,"p",14),x.EFF(4),x.nI1(5,"translate"),x.k0s(),x.j41(6,"p",14),x.EFF(7),x.k0s(),x.DNE(8,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_6_p_8_Template,3,3,"p",18),x.k0s()()),2&n){const n=x.XpG(3);x.Y8G("userId",n.grader.id)("courseId",n.courseId)("detail",!0),x.BMQ("aria-label",n.grader.fullname),x.R7$(),x.Y8G("user",n.grader)("linkProfile",!1),x.R7$(3),x.JRh(x.bMT(5,9,"addon.mod_assign.gradedby")),x.R7$(3),x.JRh(n.grader.fullname),x.R7$(),x.Y8G("ngIf",n.feedback.gradeddate)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_7_Template(n,e){if(1&n&&(x.j41(0,"ion-item",10)(1,"ion-label")(2,"p",14),x.EFF(3),x.nI1(4,"translate"),x.k0s(),x.j41(5,"p"),x.EFF(6),x.nI1(7,"coreFormatDate"),x.k0s()()()),2&n){const n=x.XpG(3);x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.gradedon")),x.R7$(3),x.JRh(x.bMT(7,4,1e3*n.feedback.gradeddate))}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_card_8_ion_button_7_Template(n,e){if(1&n&&(x.j41(0,"ion-button",43),x.EFF(1),x.nI1(2,"translate"),x.nrm(3,"ion-icon",44),x.k0s()),2&n){const n=x.XpG(4);x.Y8G("href",n.gradeUrl)("showBrowserWarning",!1),x.R7$(),x.SpI(" ",x.bMT(2,3,"core.openinbrowser")," ")}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_card_8_Template(n,e){if(1&n&&(x.j41(0,"ion-card",70)(1,"ion-item"),x.nrm(2,"ion-icon",11),x.j41(3,"ion-label")(4,"p"),x.EFF(5),x.nI1(6,"translate"),x.k0s(),x.DNE(7,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_card_8_ion_button_7_Template,4,5,"ion-button",42),x.k0s()()()),2&n){const n=x.XpG(3);x.R7$(5),x.JRh(x.bMT(6,2,"addon.mod_assign.cannotgradefromapp")),x.R7$(2),x.Y8G("ngIf",n.gradeUrl)}}function AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_Template(n,e){if(1&n&&x.DNE(0,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_0_Template,8,6,"ion-item",51)(1,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_1_Template,6,5,"ng-container",18)(2,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_2_Template,2,1,"ng-container",18)(3,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_3_Template,8,6,"ion-item",5)(4,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_4_Template,8,7,"ion-item",5)(5,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ng_container_5_Template,13,12,"ng-container",18)(6,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_6_Template,9,11,"ion-item",52)(7,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_item_7_Template,8,6,"ion-item",5)(8,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_ion_card_8_Template,8,4,"ion-card",53),2&n){const n=x.XpG(2);x.Y8G("ngIf",(null==n.feedback?null:n.feedback.gradefordisplay)&&(!n.isGrading||"simple"!==n.grade.method)),x.R7$(),x.Y8G("ngIf",n.isGrading),x.R7$(),x.Y8G("ngIf",n.feedback),x.R7$(),x.Y8G("ngIf",n.workflowStatusTranslationId),x.R7$(),x.Y8G("ngIf",n.assign.teamsubmission&&n.canSaveGrades),x.R7$(),x.Y8G("ngIf",n.isGrading&&n.assign.attemptreopenmethod!==n.attemptReopenMethodNone),x.R7$(),x.Y8G("ngIf",n.grader),x.R7$(),x.Y8G("ngIf",!n.grader&&(null==n.feedback?null:n.feedback.gradeddate)),x.R7$(),x.Y8G("ngIf",n.isGrading&&!n.canSaveGrades)}}function AddonModAssignSubmissionComponent_core_tab_10_Template(n,e){1&n&&(x.j41(0,"core-tab",50),x.nI1(1,"translate"),x.DNE(2,AddonModAssignSubmissionComponent_core_tab_10_ng_template_2_Template,9,9,"ng-template"),x.k0s()),2&n&&x.Y8G("title",x.bMT(1,1,"addon.mod_assign.grade"))}function AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_p_1_Template(n,e){if(1&n&&(x.j41(0,"p",73),x.nrm(1,"core-format-text",74),x.k0s()),2&n){const n=x.XpG(3);x.R7$(),x.Y8G("text",n.lastAttempt.submissiongroupname)("contextInstanceId",n.courseId)("wsNotFiltered",!0)}}function AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_ng_container_2_Template(n,e){1&n&&(x.qex(0),x.j41(1,"p",75)(2,"strong"),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.j41(5,"p",75),x.EFF(6),x.nI1(7,"translate"),x.k0s(),x.bVm()),2&n&&(x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.noteam")),x.R7$(3),x.JRh(x.bMT(7,4,"addon.mod_assign.noteam_desc")))}function AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_ng_container_3_Template(n,e){1&n&&(x.qex(0),x.j41(1,"p",75)(2,"strong"),x.EFF(3),x.nI1(4,"translate"),x.k0s()(),x.j41(5,"p",75),x.EFF(6),x.nI1(7,"translate"),x.k0s(),x.bVm()),2&n&&(x.R7$(3),x.JRh(x.bMT(4,2,"addon.mod_assign.multipleteams")),x.R7$(3),x.JRh(x.bMT(7,4,"addon.mod_assign.multipleteams_desc")))}function AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_p_4_Template(n,e){1&n&&(x.j41(0,"p"),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n&&(x.R7$(),x.SpI(" ",x.bMT(2,1,"addon.mod_assign.defaultteam")," "))}function AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_Template(n,e){if(1&n&&(x.qex(0),x.DNE(1,AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_p_1_Template,2,3,"p",72)(2,AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_ng_container_2_Template,8,6,"ng-container",18)(3,AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_ng_container_3_Template,8,6,"ng-container",18)(4,AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_p_4_Template,3,3,"p",18),x.bVm()),2&n){const n=x.XpG(2);x.R7$(),x.Y8G("ngIf",n.lastAttempt.submissiongroup&&n.lastAttempt.submissiongroupname),x.R7$(),x.Y8G("ngIf",n.assign.preventsubmissionnotingroup&&!n.lastAttempt.submissiongroup&&(!n.lastAttempt.usergroups||n.lastAttempt.usergroups.length<=0)),x.R7$(),x.Y8G("ngIf",n.assign.preventsubmissionnotingroup&&!n.lastAttempt.submissiongroup&&n.lastAttempt.usergroups&&n.lastAttempt.usergroups.length>1),x.R7$(),x.Y8G("ngIf",!n.assign.preventsubmissionnotingroup&&!n.lastAttempt.submissiongroup)}}function AddonModAssignSubmissionComponent_ng_template_11_ion_badge_2_Template(n,e){if(1&n&&(x.j41(0,"ion-badge",76),x.EFF(1),x.k0s()),2&n){const n=x.XpG(2);x.Y8G("color",n.statusColor),x.R7$(),x.SpI(" ",n.statusTranslated," ")}}function AddonModAssignSubmissionComponent_ng_template_11_ion_badge_3_Template(n,e){if(1&n&&(x.j41(0,"ion-badge",76),x.EFF(1),x.nI1(2,"translate"),x.k0s()),2&n){const n=x.XpG(2);x.Y8G("color",n.gradingColor),x.R7$(),x.SpI(" ",x.bMT(2,2,n.gradingStatusTranslationId)," ")}}function AddonModAssignSubmissionComponent_ng_template_11_Template(n,e){if(1&n&&(x.DNE(0,AddonModAssignSubmissionComponent_ng_template_11_ng_container_0_Template,5,4,"ng-container",18),x.j41(1,"p"),x.DNE(2,AddonModAssignSubmissionComponent_ng_template_11_ion_badge_2_Template,2,2,"ion-badge",71)(3,AddonModAssignSubmissionComponent_ng_template_11_ion_badge_3_Template,3,4,"ion-badge",71),x.k0s()),2&n){const n=x.XpG();x.Y8G("ngIf",n.assign&&n.assign.teamsubmission&&n.lastAttempt),x.R7$(2),x.Y8G("ngIf",n.statusTranslated),x.R7$(),x.Y8G("ngIf",n.gradingStatusTranslationId)}}let nn=(()=>{var n;class AddonModAssignSubmissionComponent{constructor(n){var e=this;this.splitviewCtrl=n,this.loaded=!1,this.selectedTab="submission",this.isSubmittedForGrading=!1,this.acceptStatement=!1,this.editedOffline=!1,this.submittedOffline=!1,this.removedOffline=!1,this.currentAttempt=0,this.blindMarking=!1,this.membersToSubmit=[],this.membersToSubmitBlind=[],this.canSubmit=!1,this.canEdit=!1,this.isRemoveAvailable=!1,this.showErrorStatementEdit=!1,this.showErrorStatementSubmit=!1,this.gradingColor="",this.submissionPlugins=[],this.timeRemaining="",this.timeRemainingClass="",this.timeLimitEndTime=0,this.statusColor="",this.unsupportedEditPlugins=[],this.grade={method:"",modified:0,addAttempt:!1,applyToAll:!1,lang:"en",disabled:!1},this.isGrading=!1,this.canSaveGrades=!1,this.allowAddAttempt=!1,this.isPreviousAttemptEmpty=!0,this.showDates=!1,this.timeLimitFinished=!1,this.statusNew=d.AddonModAssignSubmissionStatusValues.NEW,this.statusReopened=d.AddonModAssignSubmissionStatusValues.REOPENED,this.attemptReopenMethodNone=d.AddonModAssignAttemptReopenMethodValues.NONE,this.unlimitedAttempts=F.Bq,this.submissionStatusAvailable=!1,this.originalGrades={addAttempt:!1,applyToAll:!1,outcomes:{}},this.isDestroyed=!1,this.hasOfflineGrade=!1,this.siteId=o.CoreSites.getCurrentSiteId(),this.currentUserId=o.CoreSites.getCurrentSiteUserId(),this.maxAttemptsText=u.HT.instant("addon.mod_assign.unlimitedattempts");this.syncObserver=t.z.onMultiple([F.zi,F.Cu],function(){var n=(0,s.A)((function*(n){if(!e.loaded||!e.isGrading||-1!=n.gradesBlocked.indexOf(e.submitId))return;if("context"in n&&"submission"==n.context&&n.submitId==e.submitId)return;(yield e.hasDataToSave())||e.invalidateAndRefresh(!1)}));return function(e){return n.apply(this,arguments)}}(),this.siteId)}ngOnInit(){var n;this.isSubmittedForGrading=!!this.submitId,this.showDates=!(null!==(n=o.CoreSites.getCurrentSite())&&void 0!==n&&n.isVersionGreaterEqualThan("3.11")),this.loadData(!0)}calculateTimeRemaining(n){var e,i;if(!this.assign)return;const s=!(null===(e=this.userSubmission)||void 0===e||!e.timestarted);if(this.timeLimitEndTime=0,this.timeLimitFinished=!1,this.assign.duedate<=0&&!s)return this.timeRemaining="",this.timeRemainingClass="",void 0;const t=f.CoreTimeUtils.timestamp(),o=this.assign.timelimit&&s,a=null===(i=n.lastattempt)||void 0===i?void 0:i.extensionduedate,_=a?Math.max(this.assign.duedate,a):this.assign.duedate,m=_>0&&_-t<=0,r=o&&!m;if(this.userSubmission&&this.userSubmission.status===d.AddonModAssignSubmissionStatusValues.SUBMITTED){var l;const n=this.userSubmission.timemodified-(r&&null!==(l=this.userSubmission.timestarted)&&void 0!==l?l:0),e=r?this.assign.timelimit||0:_,i=n<=e;return this.timeRemaining=u.HT.instant("addon.mod_assign."+(i?r?"submittedundertime":"submittedearly":r?"submittedovertime":"submittedlate"),{$a:R.j.formatTime(Math.abs(n-e))}),this.timeRemainingClass=i?"earlysubmission":"latesubmission",void 0}if(m){var p,c;const e=(null===(p=n.lastattempt)||void 0===p?void 0:p.submissionsenabled)||(null===(c=n.gradingsummary)||void 0===c?void 0:c.submissionsenabled);return this.timeRemaining=u.HT.instant("addon.mod_assign."+(e?"overdue":"duedatereached"),{$a:R.j.formatTime(t-_)}),this.timeRemainingClass="overdue",this.timeLimitFinished=!0,void 0}if(o&&s)return this.timeRemaining="",this.timeRemainingClass="timeremaining",this.timeLimitEndTime=g.AddonModAssignHelper.calculateEndTime(this.assign,this.userSubmission),void 0;this.timeRemaining=R.j.formatTime(_-t),this.timeRemainingClass="timeremaining"}canLeave(){var n=this;return(0,s.A)((function*(){return(yield n.hasDataToSave())&&(yield l.CoreDomUtils.showConfirm(u.HT.instant("core.confirmcanceledit")),yield n.discardDrafts()),!0}))()}copyPrevious(){var n=this;return(0,s.A)((function*(){var e;if(!n.assign)return;if(!h.WE.isOnline())return l.CoreDomUtils.showErrorModal("core.networkerrormsg",!0),void 0;if(null===(e=n.previousAttempt)||void 0===e||!e.submission)return n.goToEdit(!0);const i=n.previousAttempt.submission;let s=yield y.CoreLoadings.show();const o=yield w.g.ignoreErrors(g.AddonModAssignHelper.getSubmissionSizeForCopy(n.assign,i),-1);s.dismiss();try{yield S.CoreFileUploaderHelper.confirmUploadFile(o,!0)}catch{return}s=yield y.CoreLoadings.show("core.sending",!0);try{yield g.AddonModAssignHelper.copyPreviousAttempt(n.assign,i),n.goToEdit(!0),!n.assign.submissiondrafts&&n.userSubmission?t.z.trigger(F._K,{assignmentId:n.assign.id,submissionId:n.userSubmission.id,userId:n.currentUserId},n.siteId):yield n.invalidateAndRefresh(!0)}catch(n){l.CoreDomUtils.showErrorModalDefault(n,"core.error",!0)}finally{s.dismiss()}}))()}discardDrafts(){var n=this;return(0,s.A)((function*(){n.assign&&n.feedback&&n.feedback.plugins&&(yield g.AddonModAssignHelper.discardFeedbackPluginData(n.assign.id,n.submitId,n.feedback))}))()}goToEdit(n=!1){var e=this;return(0,s.A)((function*(){var i;if(!n&&null!==(i=e.assign)&&void 0!==i&&i.timelimit&&(!e.userSubmission||!e.userSubmission.timestarted))try{yield l.CoreDomUtils.showConfirm(u.HT.instant("addon.mod_assign.confirmstart",{$a:R.j.formatTime(e.assign.timelimit)}),void 0,u.HT.instant("addon.mod_assign.beginassignment"))}catch{return}I.CoreNavigator.navigateToSitePath(F.gU+"/"+e.courseId+"/"+e.moduleId+"/edit",{params:{blindId:e.blindId}})}))()}remove(){var n=this;return(0,s.A)((function*(){var e;if(!n.assign||!n.userSubmission)return;const i=null!==(e=n.assign)&&void 0!==e&&e.timelimit?"addon.mod_assign.removesubmissionconfirmwithtimelimit":"addon.mod_assign.removesubmissionconfirm";try{yield l.CoreDomUtils.showDeleteConfirm(i)}catch{return}const s=yield y.CoreLoadings.show("core.sending",!0);try{(yield d.AddonModAssign.removeSubmission(n.assign,n.userSubmission))&&t.z.trigger(t.z.ACTIVITY_DATA_SENT,{module:"assign"}),t.z.trigger(F.ze,{assignmentId:n.assign.id,submissionId:n.userSubmission.id,userId:n.currentUserId},o.CoreSites.getCurrentSiteId())}catch(n){l.CoreDomUtils.showErrorModalDefault(n,"Error removing submission.")}finally{s.dismiss()}}))()}hasDataToSave(n=!1){var e=this;return(0,s.A)((function*(){var i,s;if(!e.canSaveGrades||!e.loaded||!e.assign)return!1;if(n&&e.hasOfflineGrade)return!0;if(e.originalGrades.grade!=e.grade.grade||e.originalGrades.addAttempt!=e.grade.addAttempt||e.originalGrades.applyToAll!=e.grade.applyToAll)return!0;if(null!==(i=e.gradeInfo)&&void 0!==i&&i.outcomes)for(const n in e.gradeInfo.outcomes){const i=e.gradeInfo.outcomes[n];if(void 0===e.originalGrades.outcomes[i.id]||e.originalGrades.outcomes[i.id]!=i.selectedId)return!0}if(null===(s=e.feedback)||void 0===s||!s.plugins)return!1;try{return g.AddonModAssignHelper.hasFeedbackDataChanged(e.assign,e.userSubmission,e.feedback,e.submitId)}catch{return!1}}))()}ionViewDidEnter(){var n;null===(n=this.tabs)||void 0===n||n.ionViewDidEnter()}ionViewDidLeave(){var n;null===(n=this.tabs)||void 0===n||n.ionViewDidLeave()}invalidateAndRefresh(n=!1){var e=this;return(0,s.A)((function*(){e.loaded=!1;const i=[];i.push(d.AddonModAssign.invalidateAssignmentData(e.courseId)),e.assign&&(i.push(d.AddonModAssign.invalidateSubmissionStatusData(e.assign.id,e.submitId,void 0,!!e.blindId)),i.push(d.AddonModAssign.invalidateAssignmentUserMappingsData(e.assign.id)),i.push(d.AddonModAssign.invalidateListParticipantsData(e.assign.id)),i.push(d.AddonModAssign.invalidateAssignmentGradesData(e.assign.id))),i.push(m.CoreGradesHelper.invalidateGradeModuleItems(e.courseId,e.submitId)),i.push(c.CoreCourse.invalidateModule(e.moduleId)),e.submissionComponents&&e.submissionComponents.length&&e.submissionComponents.forEach((n=>{i.push(n.invalidate())})),yield w.g.ignoreErrors(Promise.all(i)),yield e.loadData(n)}))()}loadData(n=!1){var e=this;return(0,s.A)((function*(){let i=!!e.blindId;e.previousAttempt=void 0,e.isPreviousAttemptEmpty=!0,e.submitId||(e.submitId=e.currentUserId,i=!1);try{if(e.assign=yield d.AddonModAssign.getAssignment(e.courseId,e.moduleId),e.submitId!=e.currentUserId&&n)try{const n=yield a.AddonModAssignSync.syncAssign(e.assign.id);n&&n.updated&&t.z.trigger(F.Cu,{assignId:e.assign.id,warnings:n.warnings,gradesBlocked:n.gradesBlocked,context:"submission",submitId:e.submitId},e.siteId)}catch{}const s=f.CoreTimeUtils.timestamp();let o=[];e.assign.allowsubmissionsfromdate&&e.assign.allowsubmissionsfromdate>=s&&(e.fromDate=f.CoreTimeUtils.userDate(1e3*e.assign.allowsubmissionsfromdate)),e.blindMarking=e.isSubmittedForGrading&&!!e.assign.blindmarking&&!e.assign.revealidentities,e.blindMarking||e.submitId==e.currentUserId||o.push(e.loadSubmissionUserProfile()),o.push(e.loadSubmissionOfflineData()),yield Promise.all(o);const _=yield d.AddonModAssign.getSubmissionStatusWithRetry(e.assign,{userId:e.submitId,isBlind:i});if(e.submissionStatusAvailable=!0,e.lastAttempt=_.lastattempt,e.membersToSubmit=[],e.membersToSubmitBlind=[],_.previousattempts&&_.previousattempts.length>0){const n=_.previousattempts.sort(((n,e)=>n.attemptnumber-e.attemptnumber));e.previousAttempt=n[n.length-1],e.isPreviousAttemptEmpty=g.AddonModAssignHelper.isSubmissionEmpty(e.assign,e.previousAttempt.submission)}o=e.treatLastAttempt(_,e.lastAttempt),e.calculateTimeRemaining(_),o.push(e.loadFeedback(e.assign,_.feedback)),e.userSubmission&&e.userSubmission.plugins||(e.userSubmission=g.AddonModAssignHelper.createEmptySubmission(),e.userSubmission.plugins=g.AddonModAssignHelper.getPluginsEnabled(e.assign,"assignsubmission")),o.push(e.loadUnsupportedPlugins()),yield Promise.all(o)}catch(n){l.CoreDomUtils.showErrorModalDefault(n,"Error getting assigment data.")}finally{e.loaded=!0}}))()}loadSubmissionUserProfile(){var n=this;return(0,s.A)((function*(){n.user=yield A.CoreUser.getProfile(n.submitId,n.courseId)}))()}loadSubmissionOfflineData(){var n=this;return(0,s.A)((function*(){if(n.assign)try{const e=yield b.AddonModAssignOffline.getSubmission(n.assign.id,n.submitId);n.removedOffline=e&&0==Object.keys(e.plugindata).length,n.editedOffline=e&&!n.removedOffline,n.submittedOffline=!(null==e||!e.submitted||n.removedOffline)}catch(e){n.editedOffline=!1,n.submittedOffline=!1,n.removedOffline=!1}}))()}loadFeedback(n,e){var i=this;return(0,s.A)((function*(){var s,t;if(i.grade={method:"",modified:0,addAttempt:!1,applyToAll:!1,lang:"",disabled:!1},i.originalGrades={addAttempt:!1,applyToAll:!1,outcomes:{}},e){if(i.feedback=e,e.grade&&e.grade.grader>0?i.grader=yield w.g.ignoreErrors(A.CoreUser.getProfile(e.grade.grader,i.courseId)):delete i.grader,e.gradefordisplay){e.gradefordisplay.indexOf('class="advancedgrade"')>-1&&(i.feedback.advancedgrade=!0)}if(e.grade&&e.grade.grade&&!i.grade.grade){const n=parseFloat(e.grade.grade);i.grade.grade=n>=0?n:void 0,i.grade.gradebookGrade=r.j.formatFloat(i.grade.grade),i.originalGrades.grade=i.grade.grade}}else i.selectedTab="submission",i.tabs.selectTab(i.selectedTab);if(i.grade.gradingStatus=null===(s=i.lastAttempt)||void 0===s?void 0:s.gradingstatus,i.gradeInfo=yield c.CoreCourse.getModuleBasicGradeInfo(i.moduleId),!i.gradeInfo)return;yield i.treatGradeInfo(n);if(i.allowAddAttempt=n.attemptreopenmethod==d.AddonModAssignAttemptReopenMethodValues.MANUAL&&(!i.userSubmission||n.maxattempts==F.Bq||!!i.userSubmission&&i.userSubmission.attemptnumber<n.maxattempts-1),n.teamsubmission&&(i.grade.applyToAll=!0,i.originalGrades.applyToAll=!0),n.markingworkflow&&i.grade.gradingStatus&&(i.workflowStatusTranslationId=d.AddonModAssign.getSubmissionGradingStatusTranslationId(i.grade.gradingStatus)),(null===(t=i.lastAttempt)||void 0===t?void 0:t.gradingstatus)===d.AddonModAssignGradingStates.GRADED&&!n.markingworkflow&&i.userSubmission&&e&&e.gradeddate<i.userSubmission.timemodified&&(i.lastAttempt.gradingstatus=d.AddonModAssignGradingStates.GRADED_FOLLOWUP_SUBMIT,i.gradingStatusTranslationId=d.AddonModAssign.getSubmissionGradingStatusTranslationId(i.lastAttempt.gradingstatus),i.gradingColor=d.AddonModAssign.getSubmissionGradingStatusColor(i.lastAttempt.gradingstatus)),i.feedback&&i.feedback.plugins||(i.feedback=g.AddonModAssignHelper.createEmptyFeedback(),i.feedback.plugins=g.AddonModAssignHelper.getPluginsEnabled(n,"assignfeedback")),!i.canSaveGrades){const n=yield c.CoreCourse.getModule(i.moduleId,i.courseId,void 0,!0);return i.gradeUrl=n.url+"&action=grader&userid="+i.submitId,void 0}const o=yield w.g.ignoreErrors(b.AddonModAssignOffline.getSubmissionGrade(n.id,i.submitId));var a;(i.hasOfflineGrade=!1,o&&(!e||!e.gradeddate||e.gradeddate<o.timemodified))&&((i.grade.modified||0)<o.timemodified&&(i.hasOfflineGrade=!0,i.grade.grade=i.grade.scale?o.grade:r.j.formatFloat(o.grade),i.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",i.gradingColor="",i.originalGrades.grade=i.grade.grade),i.grade.applyToAll=!!o.applytoall,i.grade.addAttempt=!!o.addattempt,i.originalGrades.applyToAll=!!i.grade.applyToAll,i.originalGrades.addAttempt=!!i.grade.addAttempt,o.outcomes&&Object.keys(o.outcomes).length&&null!==(a=i.gradeInfo)&&void 0!==a&&a.outcomes&&i.gradeInfo.outcomes.forEach((n=>{void 0!==n.itemNumber&&void 0!==o.outcomes[n.itemNumber]&&(n.modified||0)<o.timemodified&&(n.selectedId=o.outcomes[n.itemNumber],i.originalGrades.outcomes[n.id]=n.selectedId)})))}))()}loadUnsupportedPlugins(){var n=this;return(0,s.A)((function*(){var e;if(n.unsupportedEditPlugins=yield d.AddonModAssign.getUnsupportedEditPlugins((null===(e=n.userSubmission)||void 0===e?void 0:e.plugins)||[]),n.unsupportedEditPlugins&&!n.submissionUrl){const e=yield c.CoreCourse.getModule(n.moduleId,n.courseId,void 0,!0);n.submissionUrl=`${e.url}&action=editsubmission`}}))()}setStatusNameAndClass(n){if(this.assign)if(this.editedOffline||this.submittedOffline)this.statusTranslated=u.HT.instant("core.notsent"),this.statusColor=E.$.WARNING;else if(this.assign.teamsubmission){var e;if(null!==(e=n.lastattempt)&&void 0!==e&&e.submissiongroup||!this.assign.preventsubmissionnotingroup||this.removedOffline)if(this.userSubmission&&this.userSubmission.status!=this.statusNew&&!this.removedOffline)this.statusTranslated=u.HT.instant("addon.mod_assign.submissionstatus_"+this.userSubmission.status),this.statusColor=d.AddonModAssign.getSubmissionStatusColor(this.userSubmission.status);else{var i;null!==(i=n.lastattempt)&&void 0!==i&&i.submissionsenabled?(this.statusTranslated=u.HT.instant("addon.mod_assign.nosubmission"),this.statusColor=d.AddonModAssign.getSubmissionStatusColor(d.AddonModAssignSubmissionStatusValues.NO_SUBMISSION)):(this.statusTranslated=u.HT.instant("addon.mod_assign.noonlinesubmissions"),this.statusColor=d.AddonModAssign.getSubmissionStatusColor(d.AddonModAssignSubmissionStatusValues.NO_ONLINE_SUBMISSIONS))}else this.statusTranslated=u.HT.instant("addon.mod_assign.nosubmission"),this.statusColor=d.AddonModAssign.getSubmissionStatusColor(d.AddonModAssignSubmissionStatusValues.NO_SUBMISSION)}else{var s;if(this.userSubmission&&this.userSubmission.status!=this.statusNew&&!this.removedOffline)this.statusTranslated=u.HT.instant("addon.mod_assign.submissionstatus_"+this.userSubmission.status),this.statusColor=d.AddonModAssign.getSubmissionStatusColor(this.userSubmission.status);else null!==(s=n.lastattempt)&&void 0!==s&&s.submissionsenabled?(this.statusTranslated=u.HT.instant("addon.mod_assign.noattempt"),this.statusColor=d.AddonModAssign.getSubmissionStatusColor(d.AddonModAssignSubmissionStatusValues.NO_ATTEMPT)):(this.statusTranslated=u.HT.instant("addon.mod_assign.noonlinesubmissions"),this.statusColor=d.AddonModAssign.getSubmissionStatusColor(d.AddonModAssignSubmissionStatusValues.NO_ONLINE_SUBMISSIONS))}}showAdvancedGrade(){this.feedback&&this.feedback.advancedgrade&&$.m.viewText(u.HT.instant("core.grades.grade"),this.feedback.gradefordisplay,{component:F.AC,componentId:this.moduleId})}submitForGrading(n){var e=this;return(0,s.A)((function*(){if(e.assign&&e.userSubmission){if(e.assign.requiresubmissionstatement&&!n)return l.CoreDomUtils.showErrorModal("addon.mod_assign.acceptsubmissionstatement",!0),void 0;try{yield l.CoreDomUtils.showConfirm(u.HT.instant("addon.mod_assign.confirmsubmission"));const i=yield y.CoreLoadings.show("core.sending",!0);try{yield d.AddonModAssign.submitForGrading(e.assign.id,e.courseId,n,e.userSubmission.timemodified,e.editedOffline),t.z.trigger(F._K,{assignmentId:e.assign.id,submissionId:e.userSubmission.id,userId:e.currentUserId},e.siteId)}catch(n){l.CoreDomUtils.showErrorModalDefault(n,"core.error",!0)}finally{i.dismiss()}}catch{}}}))()}submitGrade(){var n=this;return(0,s.A)((function*(){var e;if(!(yield n.hasDataToSave(!0))||!n.assign)return;const i=n.userSubmission?n.userSubmission.attemptnumber:-1,s={},o=n.grade.scale&&0==n.grade.grade?-1:r.j.unformatFloat(n.grade.grade,!0);if(!1===o)throw new T.CoreError(u.HT.instant("core.grades.badgrade"));const a=yield y.CoreLoadings.show("core.sending",!0);((null===(e=n.gradeInfo)||void 0===e?void 0:e.outcomes)||[]).forEach((n=>{n.itemNumber&&n.selectedId&&(s[n.itemNumber]=n.selectedId)}));let _={};try{n.feedback&&n.feedback.plugins&&(_=yield g.AddonModAssignHelper.prepareFeedbackPluginData(n.assign.id,n.submitId,n.feedback));try{yield d.AddonModAssign.submitGradingForm(n.assign.id,n.submitId,n.courseId,o||0,i,n.grade.addAttempt,n.grade.gradingStatus||"",n.grade.applyToAll,s,_),yield n.discardDrafts()}finally{n.invalidateAndRefresh(!0),t.z.trigger(F.$P,{assignmentId:n.assign.id,submissionId:n.submitId,userId:n.currentUserId},n.siteId)}}finally{n.tabs.selectTab("submission"),a.dismiss()}}))()}treatGradeInfo(n){var e=this;return(0,s.A)((function*(){var i;if(!e.gradeInfo)return;e.isGrading=!0;const s=e.gradeInfo;s.outcomes=s.outcomes||[],e.grade.method=s.advancedgrading&&s.advancedgrading[0]&&void 0!==s.advancedgrading[0].method&&s.advancedgrading[0].method||"simple",e.canSaveGrades="simple"==e.grade.method;const t=n.markingworkflow&&e.grade.gradingStatus!==d.AddonModAssignGradingStates.MARKING_WORKFLOW_STATE_RELEASED,[o,a]=yield Promise.all([m.CoreGradesHelper.getGradeModuleItems(e.courseId,e.moduleId,e.submitId),t?w.g.ignoreErrors(d.AddonModAssign.getAssignmentGrades(n.id,{cmId:n.cmid})):void 0]),_=Number(null==a||null===(i=a.find((n=>n.userid===e.submitId)))||void 0===i?void 0:i.grade);var g;if(e.grade.unreleasedGrade=void 0,s.scale){if(e.grade.scale=r.j.makeMenuFromList(s.scale,u.HT.instant("core.nograde")),(0,k.L)(_)){var l;const n=e.grade.scale.find((n=>n.value===_));e.grade.unreleasedGrade=null==n?void 0:n.label,e.grade.grade=null===(l=null!=n?n:e.grade.scale[0])||void 0===l?void 0:l.value,e.originalGrades.grade=e.grade.grade}}else e.grade.unreleasedGrade=(0,k.L)(_)?_:void 0,e.grade.grade=r.j.formatFloat(null!==(g=e.grade.unreleasedGrade)&&void 0!==g?g:e.grade.grade),e.originalGrades.grade=e.grade.grade,e.grade.lang=yield M.CoreLang.getCurrentLanguage();s.outcomes&&s.outcomes.forEach((n=>{n.scale&&(n.options=r.j.makeMenuFromList(n.scale,u.HT.instant("core.grades.nooutcome"))),n.selectedId=0,e.originalGrades.outcomes[n.id]=n.selectedId}));const c=[];o.forEach((n=>{if(n.outcomeid||n.scaleid){if(n.outcomeid){var i;null===(i=s.outcomes)||void 0===i||i.forEach((i=>{i.id==String(n.outcomeid)&&(i.selected=p.Ni.cleanTags(n.gradeformatted||""),i.modified=n.gradedategraded,i.options&&(i.selectedId=m.CoreGradesHelper.getGradeValueFromLabel(i.options,i.selected),e.originalGrades.outcomes[i.id]=i.selectedId,i.itemNumber=n.itemnumber),c.push(i))})),s.disabled=n.gradeislocked||n.gradeisoverridden}}else{const i=p.Ni.cleanTags(n.gradeformatted||"");if(e.grade.scale)e.grade.gradebookGrade=r.j.formatFloat(m.CoreGradesHelper.getGradeValueFromLabel(e.grade.scale,i));else{const n=parseFloat(i);e.grade.gradebookGrade=n||0==n?r.j.formatFloat(n):void 0}e.grade.disabled=!!n.gradeislocked||!!n.gradeisoverridden,e.grade.modified=n.gradedategraded}})),s.outcomes=c}))()}treatLastAttempt(n,e){const i=[];if(!e||!this.assign)return[];const s=!!this.assign.requiresubmissionstatement&&void 0===this.assign.submissionstatement;var t;(this.assign.submissionstatement||void 0===this.assign.submissionstatement||(this.assign.requiresubmissionstatement=0),this.canSubmit=!this.isSubmittedForGrading&&!this.submittedOffline&&!this.removedOffline&&(e.cansubmit||this.editedOffline&&d.AddonModAssign.canSubmitOffline(this.assign,n)),this.canEdit=!this.isSubmittedForGrading&&e.canedit&&(!this.submittedOffline||!this.assign.submissiondrafts),this.isRemoveAvailable=d.AddonModAssign.isRemoveSubmissionAvailable(),this.assign.requiresubmissionstatement&&this.assign.submissiondrafts&&this.submitId==this.currentUserId?(this.submissionStatement=this.assign.submissionstatement,this.acceptStatement=!1):(this.submissionStatement=void 0,this.acceptStatement=!0),this.showErrorStatementEdit=s&&!this.assign.submissiondrafts&&this.submitId==this.currentUserId,this.showErrorStatementSubmit=s&&!!this.assign.submissiondrafts,this.userSubmission=d.AddonModAssign.getSubmissionObjectFromAttempt(this.assign,e),this.assign.attemptreopenmethod!=this.attemptReopenMethodNone&&this.userSubmission&&(this.currentAttempt=this.userSubmission.attemptnumber+1),this.setStatusNameAndClass(n),this.assign.teamsubmission&&(e.submissiongroup&&i.push(C.CoreGroups.getActivityAllowedGroups(this.assign.cmid).then((n=>{const i=n.groups.find((n=>n.id===e.submissiongroup));i&&(e.submissiongroupname=i.name)}))),this.userSubmission&&this.userSubmission.status!=this.statusNew&&e.submissiongroupmemberswhoneedtosubmit&&e.submissiongroupmemberswhoneedtosubmit.forEach((n=>{this.blindMarking||i.push(A.CoreUser.getProfile(n,this.courseId).then((n=>{this.membersToSubmit.push(n)})))}))),this.gradingStatusTranslationId=d.AddonModAssign.getSubmissionGradingStatusTranslationId(e.gradingstatus),this.gradingColor=d.AddonModAssign.getSubmissionGradingStatusColor(e.gradingstatus),this.userSubmission)&&(this.assign.teamsubmission&&e.submissiongroup&&this.assign.preventsubmissionnotingroup||(this.submissionPlugins=null!==(t=this.previousAttempt)&&void 0!==t&&null!==(t=t.submission)&&void 0!==t&&t.plugins&&this.userSubmission.status===this.statusReopened?this.previousAttempt.submission.plugins:this.userSubmission.plugins||[]));return i}setGradeSyncBlocked(n=!1){if(this.isDestroyed||!this.assign||!this.isGrading)return;const e=a.AddonModAssignSync.getGradeSyncId(this.assign.id,this.submitId);n?v.CoreSync.blockOperation(F.AC,e):v.CoreSync.unblockOperation(F.AC,e)}tabSelected(n){this.selectedTab=n.id,this.setGradeSyncBlocked("grade"===n.id)}timeUp(){this.timeLimitFinished=!0}ngOnDestroy(){var n;this.setGradeSyncBlocked(!1),this.isDestroyed=!0,null===(n=this.syncObserver)||void 0===n||n.off()}}return(n=AddonModAssignSubmissionComponent).ɵfac=function AddonModAssignSubmissionComponent_Factory(e){return new(e||n)(x.rXU(j.M,8))},n.ɵcmp=x.VBU({type:n,selectors:[["addon-mod-assign-submission"]],viewQuery:function AddonModAssignSubmissionComponent_Query(n,e){if(1&n&&(x.GBs(_.h,5),x.GBs(G.w,5)),2&n){let n;x.mGM(n=x.lsd())&&(e.tabs=n.first),x.mGM(n=x.lsd())&&(e.submissionComponents=n)}},inputs:{courseId:"courseId",moduleId:"moduleId",submitId:"submitId",blindId:"blindId"},decls:13,vars:10,consts:[["submissionStatus",""],[3,"hideUntil"],[1,"list-item-limited-width"],["class","core-danger-card",4,"ngIf"],["class","ion-text-wrap","core-user-link","",3,"userId","courseId",4,"ngIf"],["class","ion-text-wrap",4,"ngIf"],["parentScrollable","true",3,"ionChange","hideUntil"],["id","submission",3,"title"],["id","grade",3,"title",4,"ngIf"],[1,"core-danger-card"],[1,"ion-text-wrap"],["name","fas-triangle-exclamation","slot","start","aria-hidden","true"],["core-user-link","",1,"ion-text-wrap",3,"userId","courseId"],["slot","start",3,"user","linkProfile"],[1,"item-heading"],[4,"ngTemplateOutlet"],["class","ion-text-wrap",3,"ngClass",4,"ngIf"],[3,"assign","submission","plugin",4,"ngFor","ngForOf"],[4,"ngIf"],["class","list-item-limited-width",4,"ngIf"],["collapsible-footer","","slot","fixed",3,"hidden",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"ion-text-wrap",3,"ngClass"],["mode","basic","timeUpText","00:00:00",3,"endTime","timeLeftClassThreshold","underTimeClassThresholds","finished",4,"ngIf"],["mode","basic","timeUpText","00:00:00",3,"finished","endTime","timeLeftClassThreshold","underTimeClassThresholds"],[3,"assign","submission","plugin"],[4,"ngFor","ngForOf"],[1,"adaptable-buttons-row"],["expand","block","fill","outline",1,"ion-margin","ion-text-wrap",3,"click"],["name","fas-pen","slot","start","aria-hidden","true"],["fill","outline","expand","block","class","ion-margin ion-text-wrap",3,"click",4,"ngIf"],["fill","outline","expand","block",1,"ion-margin","ion-text-wrap",3,"click"],["name","fas-trash","color","danger","slot","start","aria-hidden","true"],["collapsible-footer","","slot","fixed",3,"hidden"],[3,"courseId","currentModuleId"],["class","adaptable-buttons-row",4,"ngIf"],["class","core-danger-item ion-text-wrap",4,"ngIf"],["expand","block","class","ion-margin ion-text-wrap",3,"click",4,"ngIf"],["expand","block",1,"ion-margin","ion-text-wrap",3,"click"],[1,"core-danger-item","ion-text-wrap"],[1,"ion-padding-horizontal"],["expand","block","core-link","",3,"href","showBrowserWarning",4,"ngIf"],["expand","block","core-link","",3,"href","showBrowserWarning"],["name","fas-up-right-from-square","slot","end","aria-hidden","true"],["name","submissionstatement",3,"ngModelChange","ngModel"],[3,"text","filter"],["expand","block",1,"ion-text-wrap","ion-no-margin","ion-margin-bottom",3,"click"],["name","fas-circle-info","color","info","aria-hidden"," true"],[1,"core-danger-item"],["id","grade",3,"title"],["class","ion-text-wrap core-grading-summary",4,"ngIf"],["class","ion-text-wrap","core-user-link","",3,"userId","courseId","detail",4,"ngIf"],["class","core-warning-card",4,"ngIf"],[1,"ion-text-wrap","core-grading-summary"],["slot","end",3,"ariaLabel","click",4,"ngIf"],["slot","end",3,"click","ariaLabel"],["name","fas-magnifying-glass","slot","icon-only","aria-hidden","true"],["class","ion-text-wrap",4,"ngFor","ngForOf"],["type","text","min","0","labelPlacement","stacked",3,"ngModel","max","lang","label","helperText","ngModelChange",4,"ngIf"],["type","text","min","0","labelPlacement","stacked",3,"ngModelChange","ngModel","max","lang","label","helperText"],["interface","action-sheet",3,"ngModelChange","ngModel","disabled","cancelText","interfaceOptions"],["slot","label",1,"item-heading"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["interface","action-sheet",3,"ngModel","disabled","cancelText","interfaceOptions","ngModelChange",4,"ngIf"],[3,"assign","submission","userId","plugin","canEdit",4,"ngFor","ngForOf"],[3,"assign","submission","userId","plugin","canEdit"],[3,"ngModelChange","ngModel"],["core-user-link","",1,"ion-text-wrap",3,"userId","courseId","detail"],[1,"core-warning-card"],["class","ion-text-wrap ion-text-start",3,"color",4,"ngIf"],["class","core-groupname",4,"ngIf"],[1,"core-groupname"],["contextLevel","course",3,"text","contextInstanceId","wsNotFiltered"],[1,"text-danger"],[1,"ion-text-wrap","ion-text-start",3,"color"]],template:function AddonModAssignSubmissionComponent_Template(n,e){if(1&n){const n=x.RV6();x.j41(0,"core-loading",1)(1,"div",2),x.DNE(2,AddonModAssignSubmissionComponent_ion_card_2_Template,7,3,"ion-card",3)(3,AddonModAssignSubmissionComponent_ion_item_3_Template,6,7,"ion-item",4)(4,AddonModAssignSubmissionComponent_ion_item_4_Template,6,5,"ion-item",5)(5,AddonModAssignSubmissionComponent_ion_item_5_Template,6,4,"ion-item",5),x.j41(6,"core-tabs",6),x.bIt("ionChange",(function AddonModAssignSubmissionComponent_Template_core_tabs_ionChange_6_listener(i){return x.eBV(n),x.Njj(e.tabSelected(i))})),x.j41(7,"core-tab",7),x.nI1(8,"translate"),x.DNE(9,AddonModAssignSubmissionComponent_ng_template_9_Template,16,16,"ng-template"),x.k0s(),x.DNE(10,AddonModAssignSubmissionComponent_core_tab_10_Template,3,3,"core-tab",8),x.k0s()()(),x.DNE(11,AddonModAssignSubmissionComponent_ng_template_11_Template,4,3,"ng-template",null,0,x.C5r)}2&n&&(x.Y8G("hideUntil",e.loaded),x.R7$(2),x.Y8G("ngIf",e.timeLimitFinished&&(e.canEdit||e.canSubmit)),x.R7$(),x.Y8G("ngIf",!e.blindMarking&&e.user),x.R7$(),x.Y8G("ngIf",e.blindMarking&&!e.user),x.R7$(),x.Y8G("ngIf",e.blindMarking&&e.user||!e.blindMarking&&!e.user),x.R7$(),x.Y8G("hideUntil",e.loaded),x.R7$(),x.Y8G("title",x.bMT(8,8,"addon.mod_assign.submission")),x.R7$(3),x.Y8G("ngIf",e.feedback||e.isGrading))},dependencies:[D.YU,D.Sq,D.bT,D.T3,Y.R,N.K,_.h,O.G,U.T,X.t,P.B,V.j,L.O,B.i,J.T,H.BC,H.vS,q.In,q.Jm,q.b_,q.eY,q.iq,q.$w,q.uz,q.Dg,q.he,q.Nm,q.Ip,q.BY,q.hB,q.Je,q.Gw,z.Q,G.w,Q.f,W.S,K.f,Z.D9],styles:["[_nghost-%COMP%]     ion-item.latesubmission, [_nghost-%COMP%]     ion-item.overdue{border-bottom:3px solid var(--danger)!important}[_nghost-%COMP%]     ion-item.latesubmission ion-icon, [_nghost-%COMP%]     ion-item.overdue ion-icon{color:var(--danger)}[_nghost-%COMP%]     ion-item.earlysubmission{border-bottom:3px solid var(--success)!important}[_nghost-%COMP%]     ion-item.earlysubmission ion-icon{color:var(--success)}[_nghost-%COMP%]     ion-item.submissioneditable p{color:var(--danger)}[_nghost-%COMP%]     .core-grading-summary .advancedgrade{display:none}[_nghost-%COMP%]     ion-badge{margin-left:2px;margin-right:2px}[_nghost-%COMP%]     core-timer.core-timer-under-300{--timer-background: var(--danger-tint);--timer-text-color: var(--danger-shade)}[_nghost-%COMP%]     core-timer.core-timer-under-900{--timer-background: var(--warning-tint);--timer-text-color: var(--warning-shade)}:root.dark[_nghost-%COMP%]     ion-item.submissioneditable p, :root.dark   [_nghost-%COMP%]     ion-item.submissioneditable p{color:var(--danger-tint)}"]}),AddonModAssignSubmissionComponent})()}}]);