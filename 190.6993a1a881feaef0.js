"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[190],{10190:(e,n,o)=>{o.r(n),o.d(n,{AddonModLessonIndexComponent:()=>B});var t=o(10467),_=o(74431),s=o(73564),a=o(69006),d=o(98870),i=o(15221),r=o(15324),l=o(89911),c=o(63153),p=o(75383),m=o(55554),u=o(49882),g=o(15712),f=o(21509),I=o(2907),h=o(35661),b=o(24742),v=o(75629),T=o(79555),R=o(55101),w=o(54438),M=o(73465),x=o(51024),C=o(60177),L=o(69502),A=o(17388),k=o(16986),G=o(97818),$=o(64422),E=o(13988),F=o(49234),y=o(72597),j=o(16658),N=o(69901),Y=o(86198),D=o(58197),S=o(66731),V=o(43570),X=o(89417),O=o(6736),P=o(30864),J=o(73955);const U=["passwordForm"],_c1=e=>({"ion-text-center":e}),_c2=e=>({$a:e}),_c3=e=>({"ion-margin-bottom":e});function AddonModLessonIndexComponent_Conditional_1_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"ion-button",11),w.nI1(1,"translate"),w.bIt("click",(function AddonModLessonIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){w.eBV(e);const n=w.XpG();return w.Njj(n.openModuleSummary())})),w.nrm(2,"ion-icon",12),w.k0s()}2&e&&w.Y8G("ariaLabel",w.bMT(1,1,"core.info"))}function AddonModLessonIndexComponent_Conditional_2_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"core-context-menu")(1,"core-context-menu-item",13),w.nI1(2,"translate"),w.bIt("action",(function AddonModLessonIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){w.eBV(e);const n=w.XpG();return w.Njj(n.openModuleSummary())})),w.k0s()()}2&e&&(w.R7$(),w.Y8G("priority",5e3)("content",w.bMT(2,2,"core.info")))}function AddonModLessonIndexComponent_ng_template_8_ion_card_0_Template(e,n){if(1&e&&(w.j41(0,"ion-card",17)(1,"ion-item"),w.nrm(2,"ion-icon",18)(3,"ion-label",19),w.k0s()()),2&e){const e=w.XpG(2);w.R7$(3),w.Y8G("innerHTML",e.preventReasons[0].message,w.npT)}}function AddonModLessonIndexComponent_ng_template_8_ion_card_1_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"ion-card")(1,"form",20,1),w.bIt("ngSubmit",(function AddonModLessonIndexComponent_ng_template_8_ion_card_1_Template_form_ngSubmit_1_listener(n){w.eBV(e);const o=w.sdS(5),t=w.XpG(2);return w.Njj(t.submitPassword(n,o))})),w.j41(3,"ion-item",21)(4,"ion-input",22,2),w.nI1(6,"translate"),w.nI1(7,"translate"),w.nrm(8,"ion-input-password-toggle",23),w.k0s()(),w.j41(9,"ion-button",24),w.EFF(10),w.nI1(11,"translate"),w.k0s(),w.nrm(12,"input",25),w.k0s()()}2&e&&(w.R7$(4),w.FS9("placeholder",w.bMT(6,4,"core.login.password")),w.Y8G("clearOnEdit",!1)("label",w.bMT(7,6,"addon.mod_lesson.enterpassword")),w.R7$(6),w.SpI(" ",w.bMT(11,8,"addon.mod_lesson.continue")," "))}function AddonModLessonIndexComponent_ng_template_8_core_loading_2_ion_list_1_ng_container_1_Template(e,n){1&e&&w.eu8(0)}function AddonModLessonIndexComponent_ng_template_8_core_loading_2_ion_list_1_Template(e,n){if(1&e&&(w.j41(0,"ion-list"),w.DNE(1,AddonModLessonIndexComponent_ng_template_8_core_loading_2_ion_list_1_ng_container_1_Template,1,0,"ng-container",26),w.k0s()),2&e){w.XpG(3);const e=w.sdS(12);w.R7$(),w.Y8G("ngTemplateOutlet",e)}}function AddonModLessonIndexComponent_ng_template_8_core_loading_2_Template(e,n){if(1&e&&(w.j41(0,"core-loading",5),w.DNE(1,AddonModLessonIndexComponent_ng_template_8_core_loading_2_ion_list_1_Template,2,1,"ion-list",15),w.k0s()),2&e){const e=w.XpG(2);w.Y8G("hideUntil",!e.showSpinner),w.R7$(),w.Y8G("ngIf",e.lesson&&!e.preventReasons.length||e.retakeToReview)}}function AddonModLessonIndexComponent_ng_template_8_Template(e,n){if(1&e&&w.DNE(0,AddonModLessonIndexComponent_ng_template_8_ion_card_0_Template,4,1,"ion-card",14)(1,AddonModLessonIndexComponent_ng_template_8_ion_card_1_Template,13,10,"ion-card",15)(2,AddonModLessonIndexComponent_ng_template_8_core_loading_2_Template,2,2,"core-loading",16),2&e){const e=w.XpG();w.Y8G("ngIf",e.lesson&&e.preventReasons.length),w.R7$(),w.Y8G("ngIf",e.askPassword),w.R7$(),w.Y8G("ngIf",e.canViewReports)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_core_empty_box_2_Template(e,n){if(1&e&&(w.j41(0,"core-empty-box",31),w.nrm(1,"core-format-text",32),w.k0s()),2&e){const e=w.XpG(3);w.R7$(),w.Y8G("text",e.selectedGroupEmptyMessage)("contextInstanceId",e.courseId)("wsNotFiltered",!0)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_core_empty_box_3_Template(e,n){1&e&&(w.nrm(0,"core-empty-box",33),w.nI1(1,"translate")),2&e&&w.Y8G("message",w.bMT(1,1,"addon.mod_lesson.nolessonattempts"))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_5_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e){const e=w.XpG(5);w.R7$(),w.SpI(" ",w.i5U(2,1,"core.percentagenumber",w.eq3(4,_c2,e.overview.avescore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_6_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_11_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e){const e=w.XpG(5);w.R7$(),w.SpI(" ",w.i5U(2,1,"core.percentagenumber",w.eq3(4,_c2,e.overview.highscore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_12_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_17_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e){const e=w.XpG(5);w.R7$(),w.SpI(" ",w.i5U(2,1,"core.percentagenumber",w.eq3(4,_c2,e.overview.lowscore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_18_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_Template(e,n){if(1&e&&(w.j41(0,"ion-row")(1,"ion-col",36)(2,"p",37),w.EFF(3),w.nI1(4,"translate"),w.k0s(),w.DNE(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_5_Template,3,6,"p",15)(6,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_6_Template,3,3,"p",15),w.k0s(),w.j41(7,"ion-col",36)(8,"p",37),w.EFF(9),w.nI1(10,"translate"),w.k0s(),w.DNE(11,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_11_Template,3,6,"p",15)(12,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_12_Template,3,3,"p",15),w.k0s(),w.j41(13,"ion-col",36)(14,"p",37),w.EFF(15),w.nI1(16,"translate"),w.k0s(),w.DNE(17,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_17_Template,3,6,"p",15)(18,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_p_18_Template,3,3,"p",15),w.k0s()()),2&e){const e=w.XpG(4);w.R7$(3),w.JRh(w.bMT(4,9,"addon.mod_lesson.averagescore")),w.R7$(2),w.Y8G("ngIf",e.overview.numofattempts>0),w.R7$(),w.Y8G("ngIf",e.overview.numofattempts<=0),w.R7$(3),w.JRh(w.bMT(10,11,"addon.mod_lesson.highscore")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.highscore),w.R7$(),w.Y8G("ngIf",null===e.overview.highscore),w.R7$(3),w.JRh(w.bMT(16,13,"addon.mod_lesson.lowscore")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.lowscore),w.R7$(),w.Y8G("ngIf",null===e.overview.lowscore)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_12_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.k0s()),2&e){const e=w.XpG(4);w.R7$(),w.JRh(e.avetimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_13_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.SpI(" ",w.bMT(2,1,"addon.mod_lesson.notcompleted")," "))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_18_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.k0s()),2&e){const e=w.XpG(4);w.R7$(),w.JRh(e.hightimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_19_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_24_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.k0s()),2&e){const e=w.XpG(4);w.R7$(),w.JRh(e.lowtimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_25_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_p_4_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e){const e=w.XpG(5);w.R7$(),w.SpI(" ",w.i5U(2,1,"core.percentagenumber",w.eq3(4,_c2,e.overview.avescore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_p_5_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_Template(e,n){if(1&e&&(w.j41(0,"ion-col",36)(1,"p",37),w.EFF(2),w.nI1(3,"translate"),w.k0s(),w.DNE(4,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_p_4_Template,3,6,"p",15)(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_p_5_Template,3,3,"p",15),w.k0s()),2&e){const e=w.XpG(4);w.R7$(2),w.JRh(w.bMT(3,3,"addon.mod_lesson.averagescore")),w.R7$(2),w.Y8G("ngIf",e.overview.numofattempts>0),w.R7$(),w.Y8G("ngIf",e.overview.numofattempts<=0)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_33_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.k0s()),2&e){const e=w.XpG(4);w.R7$(),w.JRh(e.avetimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_34_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.SpI(" ",w.bMT(2,1,"addon.mod_lesson.notcompleted")," "))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_p_4_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e){const e=w.XpG(5);w.R7$(),w.SpI(" ",w.i5U(2,1,"core.percentagenumber",w.eq3(4,_c2,e.overview.highscore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_p_5_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_Template(e,n){if(1&e&&(w.j41(0,"ion-col",36)(1,"p",37),w.EFF(2),w.nI1(3,"translate"),w.k0s(),w.DNE(4,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_p_4_Template,3,6,"p",15)(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_p_5_Template,3,3,"p",15),w.k0s()),2&e){const e=w.XpG(4);w.R7$(2),w.JRh(w.bMT(3,3,"addon.mod_lesson.highscore")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.highscore),w.R7$(),w.Y8G("ngIf",null===e.overview.highscore)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_41_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.k0s()),2&e){const e=w.XpG(4);w.R7$(),w.JRh(e.hightimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_42_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_p_4_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e){const e=w.XpG(5);w.R7$(),w.SpI(" ",w.i5U(2,1,"core.percentagenumber",w.eq3(4,_c2,e.overview.lowscore))," ")}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_p_5_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_Template(e,n){if(1&e&&(w.j41(0,"ion-col",36)(1,"p",37),w.EFF(2),w.nI1(3,"translate"),w.k0s(),w.DNE(4,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_p_4_Template,3,6,"p",15)(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_p_5_Template,3,3,"p",15),w.k0s()),2&e){const e=w.XpG(4);w.R7$(2),w.JRh(w.bMT(3,3,"addon.mod_lesson.lowscore")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.lowscore),w.R7$(),w.Y8G("ngIf",null===e.overview.lowscore)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_49_Template(e,n){if(1&e&&(w.j41(0,"p"),w.EFF(1),w.k0s()),2&e){const e=w.XpG(4);w.R7$(),w.JRh(e.lowtimeReadable)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_50_Template(e,n){1&e&&(w.j41(0,"p"),w.EFF(1),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.JRh(w.bMT(2,1,"addon.mod_lesson.notcompleted")))}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_Template(e,n){if(1&e&&(w.j41(0,"ion-card",34)(1,"ion-card-header",21)(2,"ion-card-title"),w.EFF(3),w.nI1(4,"translate"),w.k0s()(),w.j41(5,"ion-grid",35),w.DNE(6,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_row_6_Template,19,15,"ion-row",15),w.j41(7,"ion-row")(8,"ion-col",36)(9,"p",37),w.EFF(10),w.nI1(11,"translate"),w.k0s(),w.DNE(12,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_12_Template,2,1,"p",15)(13,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_13_Template,3,3,"p",15),w.k0s(),w.j41(14,"ion-col",36)(15,"p",37),w.EFF(16),w.nI1(17,"translate"),w.k0s(),w.DNE(18,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_18_Template,2,1,"p",15)(19,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_19_Template,3,3,"p",15),w.k0s(),w.j41(20,"ion-col",36)(21,"p",37),w.EFF(22),w.nI1(23,"translate"),w.k0s(),w.DNE(24,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_24_Template,2,1,"p",15)(25,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_25_Template,3,3,"p",15),w.k0s()()(),w.j41(26,"ion-grid",38)(27,"ion-row"),w.DNE(28,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_28_Template,6,5,"ion-col",39),w.j41(29,"ion-col",40)(30,"p",37),w.EFF(31),w.nI1(32,"translate"),w.k0s(),w.DNE(33,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_33_Template,2,1,"p",15)(34,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_34_Template,3,3,"p",15),w.k0s()(),w.j41(35,"ion-row"),w.DNE(36,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_36_Template,6,5,"ion-col",39),w.j41(37,"ion-col",40)(38,"p",37),w.EFF(39),w.nI1(40,"translate"),w.k0s(),w.DNE(41,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_41_Template,2,1,"p",15)(42,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_42_Template,3,3,"p",15),w.k0s()(),w.j41(43,"ion-row"),w.DNE(44,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_ion_col_44_Template,6,5,"ion-col",39),w.j41(45,"ion-col",40)(46,"p",37),w.EFF(47),w.nI1(48,"translate"),w.k0s(),w.DNE(49,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_49_Template,2,1,"p",15)(50,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_p_50_Template,3,3,"p",15),w.k0s()()()()),2&e){const e=w.XpG(3);w.R7$(3),w.JRh(w.bMT(4,26,"addon.mod_lesson.lessonstats")),w.R7$(3),w.Y8G("ngIf",e.overview.lessonscored),w.R7$(4),w.JRh(w.bMT(11,28,"addon.mod_lesson.averagetime")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.avetime&&e.overview.numofattempts),w.R7$(),w.Y8G("ngIf",null===e.overview.avetime||!e.overview.numofattempts),w.R7$(3),w.JRh(w.bMT(17,30,"addon.mod_lesson.hightime")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.hightime),w.R7$(),w.Y8G("ngIf",null===e.overview.hightime),w.R7$(3),w.JRh(w.bMT(23,32,"addon.mod_lesson.lowtime")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.lowtime),w.R7$(),w.Y8G("ngIf",null===e.overview.lowtime),w.R7$(3),w.Y8G("ngIf",e.overview.lessonscored),w.R7$(),w.Y8G("ngClass",w.eq3(40,_c1,e.overview.lessonscored)),w.R7$(2),w.JRh(w.bMT(32,34,"addon.mod_lesson.averagetime")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.avetime&&e.overview.numofattempts),w.R7$(),w.Y8G("ngIf",null===e.overview.avetime||!e.overview.numofattempts),w.R7$(2),w.Y8G("ngIf",e.overview.lessonscored),w.R7$(),w.Y8G("ngClass",w.eq3(42,_c1,e.overview.lessonscored)),w.R7$(2),w.JRh(w.bMT(40,36,"addon.mod_lesson.hightime")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.hightime),w.R7$(),w.Y8G("ngIf",null===e.overview.hightime),w.R7$(2),w.Y8G("ngIf",e.overview.lessonscored),w.R7$(),w.Y8G("ngClass",w.eq3(44,_c1,e.overview.lessonscored)),w.R7$(2),w.JRh(w.bMT(48,38,"addon.mod_lesson.lowtime")),w.R7$(2),w.Y8G("ngIf",null!==e.overview.lowtime),w.R7$(),w.Y8G("ngIf",null===e.overview.lowtime)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_ion_item_5_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"ion-item",42),w.bIt("click",(function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_ion_item_5_Template_ion_item_click_0_listener(){const n=w.eBV(e).$implicit,o=w.XpG(4);return w.Njj(o.openRetake(n.id))})),w.nrm(1,"core-user-avatar",43),w.j41(2,"ion-label")(3,"p",37),w.EFF(4),w.k0s(),w.nrm(5,"core-progress-bar",44),w.k0s()()}if(2&e){const e=n.$implicit,o=w.XpG(4);w.Y8G("detail",!0),w.R7$(),w.Y8G("user",e)("userId",e.id)("courseId",o.courseId),w.R7$(3),w.JRh(e.fullname),w.R7$(),w.Y8G("progress",e.bestgrade)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_Template(e,n){if(1&e&&(w.j41(0,"ion-card")(1,"ion-card-header",21)(2,"ion-card-title"),w.EFF(3),w.nI1(4,"translate"),w.k0s()(),w.DNE(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_ion_item_5_Template,6,6,"ion-item",41),w.k0s()),2&e){const e=w.XpG(3);w.R7$(3),w.JRh(w.bMT(4,2,"addon.mod_lesson.overview")),w.R7$(2),w.Y8G("ngForOf",e.overview.students)}}function AddonModLessonIndexComponent_core_tab_9_ng_template_2_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"core-loading",5)(1,"core-group-selector",27),w.mxI("selectedChange",(function AddonModLessonIndexComponent_core_tab_9_ng_template_2_Template_core_group_selector_selectedChange_1_listener(n){w.eBV(e);const o=w.XpG(2);return w.DH7(o.group,n)||(o.group=n),w.Njj(n)})),w.bIt("selectedChange",(function AddonModLessonIndexComponent_core_tab_9_ng_template_2_Template_core_group_selector_selectedChange_1_listener(){w.eBV(e);const n=w.XpG(2);return w.Njj(n.setGroup(n.group))})),w.k0s(),w.DNE(2,AddonModLessonIndexComponent_core_tab_9_ng_template_2_core_empty_box_2_Template,2,3,"core-empty-box",28)(3,AddonModLessonIndexComponent_core_tab_9_ng_template_2_core_empty_box_3_Template,2,3,"core-empty-box",29)(4,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_4_Template,51,46,"ion-card",30)(5,AddonModLessonIndexComponent_core_tab_9_ng_template_2_ion_card_5_Template,6,4,"ion-card",15),w.k0s()}if(2&e){const e=w.XpG(2);w.Y8G("hideUntil",e.reportLoaded),w.R7$(),w.Y8G("groupInfo",e.groupInfo),w.R50("selected",e.group),w.Y8G("courseId",e.courseId),w.R7$(),w.Y8G("ngIf",e.lesson&&!e.overview&&e.selectedGroupEmptyMessage),w.R7$(),w.Y8G("ngIf",!e.overview&&!e.selectedGroupEmptyMessage),w.R7$(),w.Y8G("ngIf",e.overview),w.R7$(),w.Y8G("ngIf",e.overview)}}function AddonModLessonIndexComponent_core_tab_9_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"core-tab",8),w.nI1(1,"translate"),w.bIt("ionSelect",(function AddonModLessonIndexComponent_core_tab_9_Template_core_tab_ionSelect_0_listener(){w.eBV(e);const n=w.XpG();return w.Njj(n.reportsSelected())})),w.DNE(2,AddonModLessonIndexComponent_core_tab_9_ng_template_2_Template,6,8,"ng-template"),w.k0s()}2&e&&w.Y8G("title",w.bMT(1,1,"addon.mod_lesson.reports"))}function AddonModLessonIndexComponent_div_10_div_1_ng_container_2_Template(e,n){1&e&&w.eu8(0)}function AddonModLessonIndexComponent_div_10_div_1_Template(e,n){if(1&e&&(w.j41(0,"div",48)(1,"core-loading",5),w.DNE(2,AddonModLessonIndexComponent_div_10_div_1_ng_container_2_Template,1,0,"ng-container",26),w.k0s()()),2&e){const e=w.XpG(2),n=w.sdS(12);w.R7$(),w.Y8G("hideUntil",!e.showSpinner),w.R7$(),w.Y8G("ngTemplateOutlet",n)}}function AddonModLessonIndexComponent_div_10_Template(e,n){if(1&e&&(w.j41(0,"div",45),w.DNE(1,AddonModLessonIndexComponent_div_10_div_1_Template,3,2,"div",46),w.nrm(2,"core-course-module-navigation",47),w.k0s()),2&e){const e=w.XpG();w.Y8G("ngClass",w.eq3(4,_c3,e.showSpinner)),w.R7$(),w.Y8G("ngIf",!e.canViewReports&&(e.lesson&&!e.preventReasons.length||e.retakeToReview)),w.R7$(),w.Y8G("courseId",e.courseId)("currentModuleId",e.module.id)}}function AddonModLessonIndexComponent_ng_template_11_ng_container_0_Template(e,n){if(1&e){const e=w.RV6();w.qex(0),w.j41(1,"ion-item",21)(2,"ion-label",49),w.EFF(3),w.nI1(4,"translate"),w.k0s()(),w.j41(5,"ion-button",50),w.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_0_Template_ion_button_click_5_listener(){w.eBV(e);const n=w.XpG(2);return w.Njj(n.review())})),w.EFF(6),w.nI1(7,"translate"),w.k0s(),w.bVm()}2&e&&(w.R7$(3),w.SpI(" ",w.bMT(4,2,"addon.mod_lesson.retakefinishedinsync")," "),w.R7$(3),w.SpI(" ",w.bMT(7,4,"addon.mod_lesson.review")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_1_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"ion-item",21)(1,"ion-label"),w.nrm(2,"p",19),w.nI1(3,"translate"),w.j41(4,"ion-row")(5,"ion-col")(6,"ion-button",53),w.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_1_Template_ion_button_click_6_listener(){w.eBV(e);const n=w.XpG(3);return w.Njj(n.start(!1))})),w.EFF(7),w.nI1(8,"translate"),w.k0s()(),w.j41(9,"ion-col")(10,"ion-button",54),w.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_1_Template_ion_button_click_10_listener(){w.eBV(e);const n=w.XpG(3);return w.Njj(n.start(!0))})),w.EFF(11),w.nI1(12,"translate"),w.k0s()()()()()}2&e&&(w.R7$(2),w.Y8G("innerHTML",w.bMT(3,3,"addon.mod_lesson.youhaveseen"),w.npT),w.R7$(5),w.SpI(" ",w.bMT(8,5,"core.no")," "),w.R7$(4),w.SpI(" ",w.bMT(12,7,"core.yes")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_2_Template(e,n){if(1&e){const e=w.RV6();w.qex(0),w.j41(1,"ion-item",21),w.nrm(2,"ion-label",19),w.nI1(3,"translate"),w.k0s(),w.j41(4,"ion-button",50),w.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_2_Template_ion_button_click_4_listener(){w.eBV(e);const n=w.XpG(3);return w.Njj(n.start(!1))})),w.EFF(5),w.nI1(6,"translate"),w.k0s(),w.bVm()}2&e&&(w.R7$(2),w.Y8G("innerHTML",w.bMT(3,2,"addon.mod_lesson.leftduringtimed"),w.npT),w.R7$(3),w.SpI(" ",w.bMT(6,4,"addon.mod_lesson.continue")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_3_Template(e,n){1&e&&(w.j41(0,"ion-item",21),w.nrm(1,"ion-label",19),w.nI1(2,"translate"),w.k0s()),2&e&&(w.R7$(),w.Y8G("innerHTML",w.bMT(2,1,"addon.mod_lesson.leftduringtimednoretake"),w.npT))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_1_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"ion-button",50),w.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_1_Template_ion_button_click_0_listener(){w.eBV(e);const n=w.XpG(4);return w.Njj(n.start(!1))})),w.EFF(1),w.nI1(2,"translate"),w.k0s()}2&e&&(w.R7$(),w.SpI(" ",w.bMT(2,1,"core.start")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_2_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"ion-button",56),w.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_2_Template_ion_button_click_0_listener(){w.eBV(e);const n=w.XpG(4);return w.Njj(n.start(!1))})),w.nrm(1,"ion-icon",57),w.EFF(2),w.nI1(3,"translate"),w.k0s()}2&e&&(w.R7$(2),w.SpI(" ",w.bMT(3,1,"addon.mod_lesson.preview")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_Template(e,n){if(1&e&&(w.qex(0),w.DNE(1,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_1_Template,3,3,"ion-button",52)(2,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_ion_button_2_Template,4,3,"ion-button",55),w.bVm()),2&e){const e=w.XpG(3);w.R7$(),w.Y8G("ngIf",!e.canManage),w.R7$(),w.Y8G("ngIf",e.canManage)}}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_button_5_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"ion-button",50),w.bIt("click",(function AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_button_5_Template_ion_button_click_0_listener(){w.eBV(e);const n=w.XpG(3);return w.Njj(n.start(!0))})),w.EFF(1),w.nI1(2,"translate"),w.k0s()}2&e&&(w.R7$(),w.SpI(" ",w.bMT(2,1,"addon.mod_lesson.continue")," "))}function AddonModLessonIndexComponent_ng_template_11_ng_container_1_Template(e,n){if(1&e&&(w.qex(0),w.DNE(1,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_1_Template,13,9,"ion-item",51)(2,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_2_Template,7,6,"ng-container",15)(3,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_item_3_Template,3,3,"ion-item",51)(4,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ng_container_4_Template,3,2,"ng-container",15)(5,AddonModLessonIndexComponent_ng_template_11_ng_container_1_ion_button_5_Template,3,3,"ion-button",52),w.bVm()),2&e){const e=w.XpG(2);w.R7$(),w.Y8G("ngIf",e.leftDuringTimed&&!e.lesson.timelimit&&!e.finishedOffline),w.R7$(),w.Y8G("ngIf",e.leftDuringTimed&&e.lesson.timelimit&&e.lesson.retake&&!e.finishedOffline),w.R7$(),w.Y8G("ngIf",e.leftDuringTimed&&e.lesson.timelimit&&!e.lesson.retake),w.R7$(),w.Y8G("ngIf",!e.leftDuringTimed&&!e.finishedOffline),w.R7$(),w.Y8G("ngIf",e.finishedOffline)}}function AddonModLessonIndexComponent_ng_template_11_Template(e,n){if(1&e&&w.DNE(0,AddonModLessonIndexComponent_ng_template_11_ng_container_0_Template,8,6,"ng-container",15)(1,AddonModLessonIndexComponent_ng_template_11_ng_container_1_Template,6,5,"ng-container",15),2&e){const e=w.XpG();w.Y8G("ngIf",e.retakeToReview),w.R7$(),w.Y8G("ngIf",e.lesson&&!e.preventReasons.length)}}let B=(()=>{var e;class AddonModLessonIndexComponent extends a.y{constructor(e,n){super("AddonModLessonIndexComponent",e,n),this.content=e,this.group=0,this.component=R.JL,this.pluginName="lesson",this.preventReasons=[],this.syncEventName=R.EI,this.hasPlayed=!1,this.dataSent=!1}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,t.A)((function*(){_superprop_getNgOnInit().call(e),e.selectedTab="report"==e.action?1:0,yield e.loadContent(!1,!0)}))()}changeGroup(e){var n=this;return(0,t.A)((function*(){n.reportLoaded=!1;try{yield n.setGroup(e)}catch(e){l.CoreDomUtils.showErrorModalDefault(e,"Error getting report.")}finally{n.reportLoaded=!0}}))()}fetchContent(e,n=!1,o=!1){var _=this;return(0,t.A)((function*(){let e=!0;_.askPassword=!1,_.lesson=yield f.N.getLesson(_.courseId,_.module.id),_.dataRetrieved.emit(_.lesson),_.description=_.lesson.intro,n&&(yield _.syncActivity(o)),_.accessInfo=yield f.N.getAccessInformation(_.lesson.id,{cmId:_.module.id}),_.canManage=_.accessInfo.canmanage,_.canViewReports=_.accessInfo.canviewreports,_.preventReasons=[];const t=[];if(f.N.isLessonOffline(_.lesson)&&(_.setStatusListener(),t.push(_.loadOfflineData())),_.accessInfo.preventaccessreasons.length){var s;let n=f.N.getPreventAccessReason(_.accessInfo,!1);if("passwordprotectedlesson"==(null===(s=n)||void 0===s?void 0:s.reason))try{const e=_.password?_.password:yield f.N.getStoredPassword(_.lesson.id);yield _.validatePassword(e),n=f.N.getPreventAccessReason(_.accessInfo,!0),n&&(_.preventReasons=[n])}catch{_.askPassword=!0,_.preventReasons=[n],e=!1}else _.preventReasons=[n],e=!1}1==_.selectedTab&&_.canViewReports&&t.push(_.fetchReportData()),yield Promise.all(t),e&&_.lessonReady()}))()}loadOfflineData(){var e=this;return(0,t.A)((function*(){if(!e.lesson||!e.accessInfo)return;const n=[],o={cmId:e.module.id};n.push(h._.hasDataToSync(e.lesson.id,e.accessInfo.attemptscount).then((n=>{e.hasOffline=n}))),n.push(h._.getRetakeFinishedInSync(e.lesson.id).then((n=>{n&&n.retake==e.accessInfo.attemptscount-1?e.retakeToReview=n:(e.retakeToReview=void 0,n&&h._.deleteRetakeFinishedInSync(e.lesson.id))}))),n.push(I.c.hasFinishedRetake(e.lesson.id).then((n=>{e.finishedOffline=n}))),n.push(f.N.getContentPagesViewedOnline(e.lesson.id,e.accessInfo.attemptscount,o)),n.push(f.N.getQuestionsAttemptsOnline(e.lesson.id,e.accessInfo.attemptscount,o)),yield Promise.all(n)}))()}fetchReportData(){var e=this;return(0,t.A)((function*(){if(e.module)try{e.groupInfo=yield i.CoreGroups.getActivityGroupInfo(e.module.id),yield e.setGroup(i.CoreGroups.validateGroupId(e.group,e.groupInfo))}finally{e.reportLoaded=!0}}))()}hasSyncSucceed(e){return(e.updated||this.dataSent)&&this.checkCompletion(),this.dataSent=!1,e.updated}ionViewDidEnter(){var e,n;super.ionViewDidEnter(),null===(e=this.tabsComponent)||void 0===e||e.ionViewDidEnter(),this.hasPlayed&&(this.hasPlayed=!1,null===(n=this.dataSentObserver)||void 0===n||n.off(),this.dataSentObserver=void 0,this.showLoadingAndRefresh(!0,!1))}ionViewDidLeave(){var e;super.ionViewDidLeave(),null===(e=this.tabsComponent)||void 0===e||e.ionViewDidLeave()}invalidateContent(){var e=this;return(0,t.A)((function*(){const n=[];n.push(f.N.invalidateLessonData(e.courseId)),e.lesson&&(n.push(f.N.invalidateAccessInformation(e.lesson.id)),n.push(f.N.invalidatePages(e.lesson.id)),n.push(f.N.invalidateLessonWithPassword(e.lesson.id)),n.push(f.N.invalidateTimers(e.lesson.id)),n.push(f.N.invalidateContentPagesViewed(e.lesson.id)),n.push(f.N.invalidateQuestionsAttempts(e.lesson.id)),n.push(f.N.invalidateRetakesOverview(e.lesson.id)),e.module&&n.push(i.CoreGroups.invalidateActivityGroupInfo(e.module.id))),yield Promise.all(n)}))()}isRefreshSyncNeeded(e){return!(!this.lesson||e.lessonId!=this.lesson.id)}lessonReady(){this.askPassword=!1,this.leftDuringTimed=this.hasOffline||f.N.leftDuringTimed(this.accessInfo),this.password&&f.N.storePassword(this.lesson.id,this.password)}logActivity(){var e=this;return(0,t.A)((function*(){e.lesson&&!e.preventReasons.length&&(yield m.g.ignoreErrors(f.N.logViewLesson(e.lesson.id,e.password)))}))()}callAnalyticsLogEvent(){this.analyticsLogEvent("mod_lesson_view_lesson",{url:1===this.selectedTab?`/mod/lesson/report.php?id=${this.module.id}&action=reportoverview`:void 0})}playLesson(e){var n=this;return(0,t.A)((function*(){var o;if(!n.lesson||!n.accessInfo)return;let t;n.hasOffline?t=e?yield f.N.getLastPageSeen(n.lesson.id,n.accessInfo.attemptscount,{cmId:n.module.id}):n.accessInfo.firstpageid:n.leftDuringTimed&&!n.lesson.timelimit&&(t=e?n.accessInfo.lastpageseen:n.accessInfo.firstpageid),yield r.CoreNavigator.navigateToSitePath(`${R.Lc}/${n.courseId}/${n.module.id}/player`,{params:{pageId:t,password:n.password}}),n.hasPlayed=!0,null===(o=n.dataSentObserver)||void 0===o||o.off(),n.dataSentObserver=u.z.on(R.y6,(e=>{var o;e.lessonId===(null===(o=n.lesson)||void 0===o?void 0:o.id)&&"launch"!==e.type&&("finish"===e.type?(n.dataSent=!1,n.checkCompletion()):n.dataSent=!0)}),n.siteId)}))()}indexSelected(){const e=0!==this.selectedTab;this.selectedTab=0,e&&this.callAnalyticsLogEvent()}reportsSelected(){const e=1!==this.selectedTab;this.selectedTab=1,this.groupInfo||this.fetchReportData().catch((e=>{l.CoreDomUtils.showErrorModalDefault(e,"Error getting report.")})),e&&this.callAnalyticsLogEvent()}review(){var e=this;return(0,t.A)((function*(){e.retakeToReview&&e.lesson&&(yield r.CoreNavigator.navigateToSitePath(`${R.Lc}/${e.courseId}/${e.module.id}/player`,{params:{pageId:e.retakeToReview.pageid,password:e.password,review:!0,retake:e.retakeToReview.retake}}),e.retakeToReview=void 0)}))()}setGroup(e){var n=this;return(0,t.A)((function*(){if(!n.lesson)return;if(n.group=e,n.selectedGroupEmptyMessage="",e&&n.groupInfo&&n.groupInfo.groups){const o=n.groupInfo.groups.find((n=>e==n.id));n.selectedGroupEmptyMessage=o?T.HT.instant("addon.mod_lesson.nolessonattemptsgroup",{$a:o.name}):""}const o=yield f.N.getRetakesOverview(n.lesson.id,{groupId:e,cmId:n.lesson.coursemodule});if(!o)return n.overview=o,void 0;const _=o;null!=_.avetime&&_.numofattempts&&(_.avetime=Math.floor(_.avetime/_.numofattempts),n.avetimeReadable=b.j.formatTime(_.avetime)),null!=_.hightime&&(n.hightimeReadable=b.j.formatTime(_.hightime)),null!=_.lowtime&&(n.lowtimeReadable=b.j.formatTime(_.lowtime)),_.lessonscored&&(_.numofattempts&&null!=_.avescore&&(_.avescore=p.Ni.roundToDecimals(_.avescore,2)),null!=_.highscore&&(_.highscore=p.Ni.roundToDecimals(_.highscore,2)),null!=_.lowscore&&(_.lowscore=p.Ni.roundToDecimals(_.lowscore,2))),_.students&&(yield m.g.allPromises(_.students.map(function(){var e=(0,t.A)((function*(e){e.bestgrade=p.Ni.roundToDecimals(e.bestgrade,2);const o=yield m.g.ignoreErrors(d.CoreUser.getProfile(e.id,n.courseId,!0));o&&(e.profileimageurl=o.profileimageurl)}));return function(n){return e.apply(this,arguments)}}()))),n.overview=_}))()}showStatus(e){this.showSpinner=e===_.DownloadStatus.DOWNLOADING}start(e){var n=this;return(0,t.A)((function*(){if(!n.showSpinner&&n.lesson){if(!f.N.isLessonOffline(n.lesson)||n.currentStatus==_.DownloadStatus.DOWNLOADED)return n.playLesson(e),void 0;n.showSpinner=!0;try{yield g.o.prefetch(n.module,n.courseId,!0),n.playLesson(e)}catch(o){n.hasOffline?n.playLesson(e):l.CoreDomUtils.showErrorModalDefault(o,"core.errordownloading",!0)}finally{n.showSpinner=!1}}}))()}submitPassword(e,n){var o=this;return(0,t.A)((function*(){e.preventDefault(),e.stopPropagation();const t=null==n?void 0:n.value;if(!t)return l.CoreDomUtils.showErrorModal("addon.mod_lesson.emptypassword",!0),void 0;o.showLoading=!0;try{yield o.validatePassword(t),o.lessonReady();const e=f.N.getPreventAccessReason(o.accessInfo,!0);o.preventReasons=e?[e]:[],o.logActivity()}catch(e){l.CoreDomUtils.showErrorModal(e)}finally{o.showLoading=!1,c.R.triggerFormSubmittedEvent(o.formElement,!0,o.siteId)}}))()}sync(){var e=this;return(0,t.A)((function*(){if(!e.lesson)throw new v.CoreError("Cannot sync without a lesson.");const n=yield h._.syncLesson(e.lesson.id,!0);return!n.updated&&e.dataSent&&e.isPrefetched()&&(yield m.g.ignoreErrors(h._.prefetchAfterUpdate(g.o.instance,e.module,e.courseId))),n}))()}validatePassword(e){var n=this;return(0,t.A)((function*(){try{n.lesson=yield f.N.getLessonWithPassword(n.lesson.id,{password:e,cmId:n.module.id}),n.password=e}catch(e){throw n.password="",e}}))()}openRetake(e){var n=this;return(0,t.A)((function*(){r.CoreNavigator.navigateToSitePath(`${R.Lc}/${n.courseId}/${n.module.id}/user-retake/${e}`)}))()}ngOnDestroy(){var e;super.ngOnDestroy(),null===(e=this.dataSentObserver)||void 0===e||e.off()}}return(e=AddonModLessonIndexComponent).ɵfac=function AddonModLessonIndexComponent_Factory(n){return new(n||e)(w.rXU(M.W9),w.rXU(x.k,8))},e.ɵcmp=w.VBU({type:e,selectors:[["addon-mod-lesson-index"]],viewQuery:function AddonModLessonIndexComponent_Query(e,n){if(1&e&&(w.GBs(s.h,5),w.GBs(U,5)),2&e){let e;w.mGM(e=w.lsd())&&(n.tabsComponent=e.first),w.mGM(e=w.lsd())&&(n.formElement=e.first)}},inputs:{group:"group",action:"action"},features:[w.Vt3],decls:13,vars:15,consts:[["buttons",""],["passwordForm",""],["passwordinput",""],["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],[3,"hideUntil","selectedIndex"],[3,"ionSelect","title"],[3,"title","ionSelect",4,"ngIf"],["collapsible-footer","","slot","fixed",3,"ngClass",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],["class","core-info-card",4,"ngIf"],[4,"ngIf"],[3,"hideUntil",4,"ngIf"],[1,"core-info-card"],["name","fas-circle-info","slot","start","aria-hidden","true"],[3,"innerHTML"],[3,"ngSubmit"],[1,"ion-text-wrap"],["labelPlacement","stacked","name","password","type","password","core-auto-focus","",3,"placeholder","clearOnEdit","label"],["slot","end","showIcon","fas-eye","hideIcon","fas-eye-slash"],["expand","block","type","submit"],["type","submit",1,"core-submit-hidden-enter"],[4,"ngTemplateOutlet"],[3,"selectedChange","groupInfo","selected","courseId"],["icon","fas-chart-bar",4,"ngIf"],["icon","fas-chart-bar",3,"message",4,"ngIf"],["class","addon-mod_lesson-lessonstats",4,"ngIf"],["icon","fas-chart-bar"],["contextLevel","course",3,"text","contextInstanceId","wsNotFiltered"],["icon","fas-chart-bar",3,"message"],[1,"addon-mod_lesson-lessonstats"],[1,"ion-text-wrap","ion-hide-md-down"],[1,"ion-text-center"],[1,"item-heading"],[1,"ion-text-wrap","ion-hide-md-up"],["class","ion-text-center",4,"ngIf"],[3,"ngClass"],["class","ion-text-wrap","button","",3,"detail","click",4,"ngFor","ngForOf"],["button","",1,"ion-text-wrap",3,"click","detail"],["slot","start",3,"user","userId","courseId"],["a11yText","addon.mod_lesson.grade",3,"progress"],["collapsible-footer","","slot","fixed",3,"ngClass"],["class","list-item-limited-width",4,"ngIf"],[3,"courseId","currentModuleId"],[1,"list-item-limited-width"],[1,"ion-padding-bottom"],["expand","block",1,"ion-text-wrap","ion-margin",3,"click"],["class","ion-text-wrap",4,"ngIf"],["class","ion-text-wrap ion-margin","expand","block",3,"click",4,"ngIf"],["expand","block","fill","outline",3,"click"],["expand","block",3,"click"],["class","ion-text-wrap ion-margin","expand","block","fill","outline",3,"click",4,"ngIf"],["expand","block","fill","outline",1,"ion-text-wrap","ion-margin",3,"click"],["name","fas-magnifying-glass","slot","start","aria-hidden","true"]],template:function AddonModLessonIndexComponent_Template(e,n){if(1&e){const e=w.RV6();w.j41(0,"core-navbar-buttons",3),w.DNE(1,AddonModLessonIndexComponent_Conditional_1_Template,3,3,"ion-button",4)(2,AddonModLessonIndexComponent_Conditional_2_Template,3,4),w.k0s(),w.j41(3,"core-loading",5)(4,"core-course-module-info",6),w.bIt("completionChanged",(function AddonModLessonIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return w.eBV(e),w.Njj(n.onCompletionChange())})),w.k0s(),w.j41(5,"core-tabs",7)(6,"core-tab",8),w.nI1(7,"translate"),w.bIt("ionSelect",(function AddonModLessonIndexComponent_Template_core_tab_ionSelect_6_listener(){return w.eBV(e),w.Njj(n.indexSelected())})),w.DNE(8,AddonModLessonIndexComponent_ng_template_8_Template,3,3,"ng-template"),w.k0s(),w.DNE(9,AddonModLessonIndexComponent_core_tab_9_Template,3,3,"core-tab",9),w.k0s(),w.DNE(10,AddonModLessonIndexComponent_div_10_Template,3,6,"div",10),w.k0s(),w.DNE(11,AddonModLessonIndexComponent_ng_template_11_Template,2,2,"ng-template",null,0,w.C5r)}2&e&&(w.R7$(),w.vxM(1,n.courseContentsPage?2:1),w.R7$(2),w.Y8G("hideUntil",!n.showLoading),w.R7$(),w.Y8G("module",n.module)("description",n.description)("component",n.component)("componentId",n.componentId)("courseId",n.courseId)("hasDataToSync",n.hasOffline),w.R7$(),w.Y8G("hideUntil",!n.showLoading)("selectedIndex",n.selectedTab),w.R7$(),w.Y8G("title",w.bMT(7,13,"addon.mod_lesson.preview")),w.R7$(3),w.Y8G("ngIf",n.canViewReports),w.R7$(),w.Y8G("ngIf",!n.showLoading))},dependencies:[C.YU,C.Sq,C.bT,C.T3,L.B,A.Q,k.h,G.F,$.R,E.c,F.z,y.K,s.h,j.T,N.i,Y.t,D.B,S.i,V.T,X.qT,X.cb,X.cV,M.Jm,M.b_,M.ME,M.tN,M.hU,M.lO,M.iq,M.$w,M.Wv,M.uz,M.he,M.nf,M.ln,M.Gw,O.Y,P.Q,J.D9],encapsulation:2}),AddonModLessonIndexComponent})()}}]);