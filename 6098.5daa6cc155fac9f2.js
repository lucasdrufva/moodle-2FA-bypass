"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6098],{56098:(e,n,t)=>{t.r(n),t.d(n,{default:()=>H});var o=t(3353),r=t(91120),i=t(66121),a=t(8444),s=t(21182),l=t(10467),d=t(18674),c=t(20119),g=t(83696),_=t(52266),m=t(81879),y=t(54638),u=t(41094),f=t(15324),p=t(94455),I=t(89911),E=t(55554),h=t(79555),v=t(49882),G=t(92010),R=t(21113),C=t(24742),b=t(22693),A=t(59829),M=t(45433),T=t(23780),P=t(54438),w=t(29492),$=t(51024),k=t(60177),x=t(6128),D=t(64422),S=t(50016),N=t(16658),O=t(86198),Y=t(58197),F=t(28988),j=t(88246),L=t(43570),U=t(73465),X=t(55608),B=t(76990),V=t(25367),z=t(2423),J=t(73955);const _c0=e=>({$a:e});function AddonModGlossaryEntryPage_h1_6_Template(e,n){if(1&e&&(P.j41(0,"h1"),P.nrm(1,"core-format-text",8),P.k0s()),2&e){const e=P.XpG();P.R7$(),P.Y8G("text",e.entry.concept)("contextInstanceId",e.componentId)("courseId",e.courseId)}}function AddonModGlossaryEntryPage_ng_container_12_ion_card_1_Template(e,n){1&e&&(P.j41(0,"ion-card",15)(1,"ion-item"),P.nrm(2,"ion-icon",16),P.j41(3,"ion-label"),P.EFF(4),P.nI1(5,"translate"),P.nI1(6,"translate"),P.k0s()()()),2&e&&(P.R7$(4),P.JRh(P.i5U(6,3,"core.hasdatatosync",P.eq3(6,_c0,P.bMT(5,1,"addon.mod_glossary.entry")))))}function AddonModGlossaryEntryPage_ng_container_12_ion_item_2_p_5_Template(e,n){if(1&e&&(P.j41(0,"p"),P.EFF(1),P.k0s()),2&e){const e=P.XpG(3);P.R7$(),P.JRh(e.onlineEntry.userfullname)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_2_ion_note_6_Template(e,n){if(1&e&&(P.j41(0,"ion-note",19),P.EFF(1),P.nI1(2,"coreDateDayOrTime"),P.k0s()),2&e){const e=P.XpG(3);P.R7$(),P.JRh(P.bMT(2,1,e.onlineEntry.timemodified))}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_2_Template(e,n){if(1&e&&(P.j41(0,"ion-item",10),P.nrm(1,"core-user-avatar",17),P.j41(2,"ion-label")(3,"h2"),P.nrm(4,"core-format-text",8),P.k0s(),P.DNE(5,AddonModGlossaryEntryPage_ng_container_12_ion_item_2_p_5_Template,2,1,"p",2),P.k0s(),P.DNE(6,AddonModGlossaryEntryPage_ng_container_12_ion_item_2_ion_note_6_Template,3,3,"ion-note",18),P.k0s()),2&e){const e=P.XpG(2);P.R7$(),P.Y8G("user",e.entry),P.R7$(3),P.Y8G("text",e.entry.concept)("contextInstanceId",e.componentId)("courseId",e.courseId),P.R7$(),P.Y8G("ngIf",e.onlineEntry),P.R7$(),P.Y8G("ngIf",e.showDate&&e.onlineEntry)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_3_ion_note_4_Template(e,n){if(1&e&&(P.j41(0,"ion-note",19),P.EFF(1),P.nI1(2,"coreDateDayOrTime"),P.k0s()),2&e){const e=P.XpG(3);P.R7$(),P.JRh(P.bMT(2,1,e.onlineEntry.timemodified))}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_3_Template(e,n){if(1&e&&(P.j41(0,"ion-item",10)(1,"ion-label")(2,"p",20),P.nrm(3,"core-format-text",21),P.k0s()(),P.DNE(4,AddonModGlossaryEntryPage_ng_container_12_ion_item_3_ion_note_4_Template,3,3,"ion-note",18),P.k0s()),2&e){const e=P.XpG(2);P.R7$(3),P.Y8G("text",e.entry.concept)("contextInstanceId",e.componentId),P.R7$(),P.Y8G("ngIf",e.showDate&&e.onlineEntry)}}function AddonModGlossaryEntryPage_ng_container_12_div_7_core_file_1_Template(e,n){if(1&e&&P.nrm(0,"core-file",23),2&e){const e=n.$implicit,t=P.XpG(3);P.Y8G("file",e)("component",t.component)("componentId",t.componentId)}}function AddonModGlossaryEntryPage_ng_container_12_div_7_Template(e,n){if(1&e&&(P.j41(0,"div"),P.DNE(1,AddonModGlossaryEntryPage_ng_container_12_div_7_core_file_1_Template,1,3,"core-file",22),P.k0s()),2&e){const e=P.XpG(2);P.R7$(),P.Y8G("ngForOf",e.onlineEntry.attachments)}}function AddonModGlossaryEntryPage_ng_container_12_div_8_core_file_1_Template(e,n){if(1&e&&P.nrm(0,"core-file",23),2&e){const e=n.$implicit,t=P.XpG(3);P.Y8G("file",e)("component",t.component)("componentId",t.componentId)}}function AddonModGlossaryEntryPage_ng_container_12_div_8_Template(e,n){if(1&e&&(P.j41(0,"div"),P.DNE(1,AddonModGlossaryEntryPage_ng_container_12_div_8_core_file_1_Template,1,3,"core-file",22),P.k0s()),2&e){const e=P.XpG(2);P.R7$(),P.Y8G("ngForOf",e.offlineEntry.attachments.online)}}function AddonModGlossaryEntryPage_ng_container_12_div_9_core_local_file_1_Template(e,n){if(1&e&&P.nrm(0,"core-local-file",25),2&e){P.Y8G("file",n.$implicit)}}function AddonModGlossaryEntryPage_ng_container_12_div_9_Template(e,n){if(1&e&&(P.j41(0,"div"),P.DNE(1,AddonModGlossaryEntryPage_ng_container_12_div_9_core_local_file_1_Template,1,1,"core-local-file",24),P.k0s()),2&e){const e=P.XpG(2);P.R7$(),P.Y8G("ngForOf",e.offlineEntryFiles)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_10_Template(e,n){if(1&e&&(P.j41(0,"ion-item",10)(1,"ion-label")(2,"div",0),P.EFF(3),P.nI1(4,"translate"),P.k0s(),P.nrm(5,"core-tag-list",26),P.k0s()()),2&e){const e=P.XpG(2);P.R7$(3),P.SpI("",P.bMT(4,2,"core.tag.tags"),":"),P.R7$(2),P.Y8G("tags",e.onlineEntry.tags)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_11_ion_button_2_Template(e,n){if(1&e){const e=P.RV6();P.j41(0,"ion-button",29),P.nI1(1,"translate"),P.bIt("click",(function AddonModGlossaryEntryPage_ng_container_12_ion_item_11_ion_button_2_Template_ion_button_click_0_listener(){P.eBV(e);const n=P.XpG(3);return P.Njj(n.deleteEntry())})),P.nrm(2,"ion-icon",30),P.k0s()}2&e&&P.Y8G("ariaLabel",P.bMT(1,1,"addon.mod_glossary.deleteentry"))}function AddonModGlossaryEntryPage_ng_container_12_ion_item_11_ion_button_3_Template(e,n){if(1&e){const e=P.RV6();P.j41(0,"ion-button",31),P.nI1(1,"translate"),P.bIt("click",(function AddonModGlossaryEntryPage_ng_container_12_ion_item_11_ion_button_3_Template_ion_button_click_0_listener(){P.eBV(e);const n=P.XpG(3);return P.Njj(n.editEntry())})),P.nrm(2,"ion-icon",32),P.k0s()}2&e&&P.Y8G("ariaLabel",P.bMT(1,1,"addon.mod_glossary.editentry"))}function AddonModGlossaryEntryPage_ng_container_12_ion_item_11_Template(e,n){if(1&e&&(P.j41(0,"ion-item")(1,"div",19),P.DNE(2,AddonModGlossaryEntryPage_ng_container_12_ion_item_11_ion_button_2_Template,3,3,"ion-button",27)(3,AddonModGlossaryEntryPage_ng_container_12_ion_item_11_ion_button_3_Template,3,3,"ion-button",28),P.k0s()()),2&e){const e=P.XpG(2);P.R7$(2),P.Y8G("ngIf",e.canDelete),P.R7$(),P.Y8G("ngIf",e.canEdit)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_12_Template(e,n){1&e&&(P.j41(0,"ion-item",10)(1,"ion-label")(2,"p")(3,"em"),P.EFF(4),P.nI1(5,"translate"),P.k0s()()()()),2&e&&(P.R7$(4),P.JRh(P.bMT(5,1,"addon.mod_glossary.entrypendingapproval")))}function AddonModGlossaryEntryPage_ng_container_12_core_comments_13_Template(e,n){if(1&e&&P.nrm(0,"core-comments",33),2&e){const e=P.XpG(2);P.Y8G("instanceId",e.glossary.coursemodule)("itemId",e.onlineEntry.id)("courseId",e.glossary.course)("showItem",!0)}}function AddonModGlossaryEntryPage_ng_container_12_core_rating_rate_14_Template(e,n){if(1&e){const e=P.RV6();P.j41(0,"core-rating-rate",34),P.bIt("onUpdate",(function AddonModGlossaryEntryPage_ng_container_12_core_rating_rate_14_Template_core_rating_rate_onUpdate_0_listener(){P.eBV(e);const n=P.XpG(2);return P.Njj(n.ratingUpdated())})),P.k0s()}if(2&e){const e=P.XpG(2);P.Y8G("ratingInfo",e.ratingInfo)("instanceId",e.glossary.coursemodule)("itemId",e.onlineEntry.id)("itemSetId",0)("courseId",e.glossary.course)("aggregateMethod",e.glossary.assessed)("scaleId",e.glossary.scale)("userId",e.entry.userid)}}function AddonModGlossaryEntryPage_ng_container_12_core_rating_aggregate_15_Template(e,n){if(1&e&&P.nrm(0,"core-rating-aggregate",35),2&e){const e=P.XpG(2);P.Y8G("ratingInfo",e.ratingInfo)("instanceId",e.glossary.coursemodule)("itemId",e.onlineEntry.id)("courseId",e.glossary.course)("aggregateMethod",e.glossary.assessed)("scaleId",e.glossary.scale)}}function AddonModGlossaryEntryPage_ng_container_12_Template(e,n){if(1&e&&(P.qex(0),P.DNE(1,AddonModGlossaryEntryPage_ng_container_12_ion_card_1_Template,7,8,"ion-card",7)(2,AddonModGlossaryEntryPage_ng_container_12_ion_item_2_Template,7,6,"ion-item",9)(3,AddonModGlossaryEntryPage_ng_container_12_ion_item_3_Template,5,3,"ion-item",9),P.j41(4,"ion-item",10)(5,"ion-label"),P.nrm(6,"core-format-text",11),P.k0s()(),P.DNE(7,AddonModGlossaryEntryPage_ng_container_12_div_7_Template,2,1,"div",2)(8,AddonModGlossaryEntryPage_ng_container_12_div_8_Template,2,1,"div",2)(9,AddonModGlossaryEntryPage_ng_container_12_div_9_Template,2,1,"div",2)(10,AddonModGlossaryEntryPage_ng_container_12_ion_item_10_Template,6,4,"ion-item",9)(11,AddonModGlossaryEntryPage_ng_container_12_ion_item_11_Template,4,2,"ion-item",2)(12,AddonModGlossaryEntryPage_ng_container_12_ion_item_12_Template,6,3,"ion-item",9)(13,AddonModGlossaryEntryPage_ng_container_12_core_comments_13_Template,1,4,"core-comments",12)(14,AddonModGlossaryEntryPage_ng_container_12_core_rating_rate_14_Template,1,8,"core-rating-rate",13)(15,AddonModGlossaryEntryPage_ng_container_12_core_rating_aggregate_15_Template,1,6,"core-rating-aggregate",14),P.bVm()),2&e){const e=P.XpG();P.R7$(),P.Y8G("ngIf",e.offlineEntry),P.R7$(),P.Y8G("ngIf",e.showAuthor),P.R7$(),P.Y8G("ngIf",!e.showAuthor),P.R7$(3),P.Y8G("component",e.component)("componentId",e.componentId)("text",e.entry.definition)("contextInstanceId",e.componentId)("courseId",e.courseId),P.R7$(),P.Y8G("ngIf",e.onlineEntry&&e.onlineEntry.attachment),P.R7$(),P.Y8G("ngIf",e.offlineEntry&&e.offlineEntry.attachments),P.R7$(),P.Y8G("ngIf",e.offlineEntry&&e.offlineEntryFiles),P.R7$(),P.Y8G("ngIf",e.onlineEntry&&e.tagsEnabled&&e.entry&&e.onlineEntry.tags&&e.onlineEntry.tags.length>0),P.R7$(),P.Y8G("ngIf",e.canDelete||e.canEdit),P.R7$(),P.Y8G("ngIf",e.onlineEntry&&!e.onlineEntry.approved),P.R7$(),P.Y8G("ngIf",e.glossary&&e.glossary.allowcomments&&e.onlineEntry&&e.onlineEntry.id>0&&e.commentsEnabled),P.R7$(),P.Y8G("ngIf",e.glossary&&e.ratingInfo&&e.onlineEntry),P.R7$(),P.Y8G("ngIf",e.glossary&&e.ratingInfo&&e.onlineEntry)}}function AddonModGlossaryEntryPage_ion_card_13_Template(e,n){1&e&&(P.j41(0,"ion-card",15)(1,"ion-item")(2,"ion-label"),P.EFF(3),P.nI1(4,"translate"),P.k0s()()()),2&e&&(P.R7$(3),P.JRh(P.bMT(4,1,"addon.mod_glossary.errorloadingentry")))}let q=(()=>{var e;class AddonModGlossaryEntryPage{constructor(e,n,t){var o=this;this.splitView=e,this.route=n,this.courseContentsPage=t,this.component=A.XG,this.loaded=!1,this.showAuthor=!1,this.showDate=!1,this.tagsEnabled=!1,this.canEdit=!1,this.canDelete=!1,this.commentsEnabled=!1,this.logView=C.j.once((0,l.A)((function*(){o.onlineEntry&&o.glossary&&o.componentId&&(yield E.g.ignoreErrors(R.$.logEntryView(o.onlineEntry.id,o.componentId)),o.analyticsLogEvent("mod_glossary_get_entry_by_id",`/mod/glossary/showentry.php?eid=${o.onlineEntry.id}`))})))}get entry(){var e;return null!==(e=this.onlineEntry)&&void 0!==e?e:this.offlineEntry}ngOnInit(){var e=this;return(0,l.A)((function*(){let n=null,t=null;try{var o;e.courseId=f.CoreNavigator.getRequiredRouteNumberParam("courseId"),e.tagsEnabled=u.CoreTag.areTagsAvailableInSite(),e.commentsEnabled=y.CoreComments.areCommentsEnabledInSite(),e.cmId=f.CoreNavigator.getRequiredRouteNumberParam("cmId"),e.entrySlug=f.CoreNavigator.getRequiredRouteParam("entrySlug");const r=f.CoreNavigator.getRouteData(e.route),i=g.u.getOrCreateSource(G.E,[e.courseId,e.cmId,null!==(o=r.glossaryPathPrefix)&&void 0!==o?o:""]);e.entries=new AddonModGlossaryEntryEntriesSwipeManager(i),yield e.entries.start(),e.entrySlug.startsWith("new-")?t=Number(e.entrySlug.slice(4)):n=Number(e.entrySlug)}catch(n){return I.CoreDomUtils.showErrorModal(n),e.goBack(),void 0}e.entryUpdatedObserver=v.z.on(A.uw,(n=>{var t;n.glossaryId===(null===(t=e.glossary)||void 0===t?void 0:t.id)&&(e.onlineEntry&&e.onlineEntry.id===n.entryId||e.offlineEntry&&e.offlineEntry.timecreated===n.timecreated)&&e.doRefresh()}));try{n?yield e.loadOnlineEntry(n):t&&(yield e.loadOfflineEntry(t))}finally{e.loaded=!0}}))()}ngOnDestroy(){var e;this.entries.destroy(),null===(e=this.entryUpdatedObserver)||void 0===e||e.off()}editEntry(){var e=this;return(0,l.A)((function*(){yield f.CoreNavigator.navigateToSitePath(`${A.Z9}/${e.courseId}/${e.cmId}/entry/${e.entrySlug}/edit`)}))()}deleteEntry(){var e=this;return(0,l.A)((function*(){var n,t,o;e.analyticsLogEvent("mod_glossary_delete_entry",`/mod/glossary/deleteentry.php?id=${null===(n=e.glossary)||void 0===n?void 0:n.id}&mode=delete&entry=${null===(t=e.onlineEntry)||void 0===t?void 0:t.id}`);const r=null===(o=e.glossary)||void 0===o?void 0:o.id,i=yield E.g.promiseFails(I.CoreDomUtils.showConfirm(h.HT.instant("addon.mod_glossary.areyousuredelete")));if(!r||i)return;const a=yield T.CoreLoadings.show();try{if(e.onlineEntry){const n=e.onlineEntry.id;yield R.$.deleteEntry(r,n),yield Promise.all([E.g.ignoreErrors(R.$.invalidateEntry(n)),E.g.ignoreErrors(R.$.invalidateEntriesByLetter(r)),E.g.ignoreErrors(R.$.invalidateEntriesByAuthor(r)),E.g.ignoreErrors(R.$.invalidateEntriesByCategory(r)),E.g.ignoreErrors(R.$.invalidateEntriesByDate(r,"CREATION")),E.g.ignoreErrors(R.$.invalidateEntriesByDate(r,"UPDATE")),E.g.ignoreErrors(e.entries.getSource().invalidateCache(!1))])}else if(e.offlineEntry){const n=e.offlineEntry.concept,t=e.offlineEntry.timecreated;yield c.e.deleteOfflineEntry(r,t),yield d.n.deleteStoredFiles(r,n,t)}M.CoreToasts.show({message:"addon.mod_glossary.entrydeleted",translateMessage:!0,duration:M.ToastDuration.LONG}),yield e.goBack()}catch(e){I.CoreDomUtils.showErrorModalDefault(e,"addon.mod_glossary.errordeleting",!0)}finally{a.dismiss()}}))()}doRefresh(e){var n=this;return(0,l.A)((function*(){var t;n.onlineEntry&&null!==(t=n.glossary)&&void 0!==t&&t.allowcomments&&n.onlineEntry.id>0&&n.commentsEnabled&&n.comments&&E.g.ignoreErrors(n.comments.doRefresh());try{if(n.onlineEntry)yield E.g.ignoreErrors(R.$.invalidateEntry(n.onlineEntry.id)),yield n.loadOnlineEntry(n.onlineEntry.id);else if(n.offlineEntry){const e=Number(n.entrySlug.slice(4));yield n.loadOfflineEntry(e)}}finally{null==e||e.complete()}}))()}loadOnlineEntry(e){var n=this;return(0,l.A)((function*(){try{var t,o;const r=yield R.$.getEntry(e),i=p.WE.isOnline()&&(yield R.$.canDeleteEntries()),a=p.WE.isOnline()&&(yield R.$.canUpdateEntries());n.onlineEntry=r.entry,n.ratingInfo=r.ratinginfo,n.canDelete=i&&!(null===(t=r.permissions)||void 0===t||!t.candelete),n.canEdit=a&&!(null===(o=r.permissions)||void 0===o||!o.canupdate),yield n.loadGlossary(),n.logView()}catch(e){I.CoreDomUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentry",!0)}}))()}loadOfflineEntry(e){var n=this;return(0,l.A)((function*(){try{const t=yield n.loadGlossary();n.offlineEntry=yield c.e.getOfflineEntry(t.id,e),n.offlineEntryFiles=n.offlineEntry.attachments&&n.offlineEntry.attachments.offline>0?yield d.n.getStoredFiles(t.id,n.offlineEntry.concept,e):void 0,n.canEdit=!0,n.canDelete=!0}catch(e){I.CoreDomUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentry",!0)}}))()}loadGlossary(){var e=this;return(0,l.A)((function*(){if(e.glossary)return e.glossary;switch(e.glossary=yield R.$.getGlossary(e.courseId,e.cmId),e.componentId=e.glossary.coursemodule,e.glossary.displayformat){case"fullwithauthor":case"encyclopedia":e.showAuthor=!0,e.showDate=!0;break;case"fullwithoutauthor":e.showAuthor=!1,e.showDate=!0;break;default:e.showAuthor=!1,e.showDate=!1}return e.glossary}))()}ratingUpdated(){this.onlineEntry&&R.$.invalidateEntry(this.onlineEntry.id)}analyticsLogEvent(e,n){this.onlineEntry&&this.glossary&&b.OF.logEvent({type:b.qr.VIEW_ITEM,ws:e,name:this.onlineEntry.concept,data:{id:this.onlineEntry.id,glossaryid:this.glossary.id,category:"glossary"},url:n})}goBack(){var e=this;return(0,l.A)((function*(){var n;null!==(n=e.splitView)&&void 0!==n&&n.outletActivated?yield f.CoreNavigator.navigate((e.courseContentsPage?"../":"")+"../../"):yield f.CoreNavigator.back()}))()}}return(e=AddonModGlossaryEntryPage).ɵfac=function AddonModGlossaryEntryPage_Factory(n){return new(n||e)(P.rXU(w.M,8),P.rXU(s.nX),P.rXU($.k,8))},e.ɵcmp=P.VBU({type:e,selectors:[["page-addon-mod-glossary-entry"]],viewQuery:function AddonModGlossaryEntryPage_Query(e,n){if(1&e&&P.GBs(m.L,5),2&e){let e;P.mGM(e=P.lsd())&&(n.comments=e.first)}},decls:14,vars:12,consts:[["slot","start"],[3,"text"],[4,"ngIf"],[1,"limited-width",3,"core-swipe-navigation"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],["class","core-warning-card",4,"ngIf"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],["contextLevel","module","component","mod_glossary","area","glossary_entry",3,"instanceId","itemId","courseId","showItem",4,"ngIf"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","itemSetId","courseId","aggregateMethod","scaleId","userId","onUpdate",4,"ngIf"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","courseId","aggregateMethod","scaleId",4,"ngIf"],[1,"core-warning-card"],["name","fas-triangle-exclamation","slot","start","aria-hidden","true"],["slot","start",3,"user"],["slot","end",4,"ngIf"],["slot","end"],[1,"item-heading"],["contextLevel","module",3,"text","contextInstanceId"],[3,"file","component","componentId",4,"ngFor","ngForOf"],[3,"file","component","componentId"],[3,"file",4,"ngFor","ngForOf"],[3,"file"],[3,"tags"],["fill","clear","color","danger",3,"ariaLabel","click",4,"ngIf"],["fill","clear",3,"ariaLabel","click",4,"ngIf"],["fill","clear","color","danger",3,"click","ariaLabel"],["slot","icon-only","name","fas-trash","aria-hidden","true"],["fill","clear",3,"click","ariaLabel"],["slot","icon-only","name","fas-pen","aria-hidden","true"],["contextLevel","module","component","mod_glossary","area","glossary_entry",3,"instanceId","itemId","courseId","showItem"],["contextLevel","module",3,"onUpdate","ratingInfo","instanceId","itemId","itemSetId","courseId","aggregateMethod","scaleId","userId"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","courseId","aggregateMethod","scaleId"]],template:function AddonModGlossaryEntryPage_Template(e,n){1&e&&(P.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),P.nrm(3,"ion-back-button",1),P.nI1(4,"translate"),P.k0s(),P.j41(5,"ion-title"),P.DNE(6,AddonModGlossaryEntryPage_h1_6_Template,2,3,"h1",2),P.k0s()()(),P.j41(7,"ion-content",3)(8,"ion-refresher",4),P.bIt("ionRefresh",(function AddonModGlossaryEntryPage_Template_ion_refresher_ionRefresh_8_listener(e){return n.doRefresh(e.target)})),P.nrm(9,"ion-refresher-content",5),P.nI1(10,"translate"),P.k0s(),P.j41(11,"core-loading",6),P.DNE(12,AddonModGlossaryEntryPage_ng_container_12_Template,16,17,"ng-container",2)(13,AddonModGlossaryEntryPage_ion_card_13_Template,5,3,"ion-card",7),P.k0s()()),2&e&&(P.R7$(3),P.Y8G("text",P.bMT(4,8,"core.back")),P.R7$(3),P.Y8G("ngIf",n.entry),P.R7$(),P.Y8G("core-swipe-navigation",n.entries),P.R7$(),P.Y8G("disabled",!n.loaded),P.R7$(),P.FS9("pullingText",P.bMT(10,10,"core.pulltorefresh")),P.R7$(2),P.Y8G("hideUntil",n.loaded),P.R7$(),P.Y8G("ngIf",n.entry&&n.loaded),P.R7$(),P.Y8G("ngIf",!n.entry))},dependencies:[k.Sq,k.bT,x.t,D.R,S.a,N.T,O.t,Y.B,F.n,j.i,L.T,U.Jm,U.QW,U.b_,U.W9,U.eU,U.iq,U.uz,U.he,U.JI,U.To,U.Ki,U.BC,U.ai,U.el,m.L,X.z,B.w,V.v,z.Y,J.D9],encapsulation:2}),AddonModGlossaryEntryPage})();class AddonModGlossaryEntryEntriesSwipeManager extends _.Z{getSelectedItemPathFromRoute(e){const n=f.CoreNavigator.getRouteParams(e);return`${this.getSource().GLOSSARY_PATH_PREFIX}entry/${n.entrySlug}`}}const K=[{path:"",component:q}];let H=(()=>{var e;class AddonModGlossaryEntryLazyModule{}return(e=AddonModGlossaryEntryLazyModule).ɵfac=function AddonModGlossaryEntryLazyModule_Factory(n){return new(n||e)},e.ɵmod=P.$C({type:e}),e.ɵinj=P.G2t({imports:[s.iI.forChild(K),o.n,r.G,i.H,a.O]}),AddonModGlossaryEntryLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&P.Obh(H,{declarations:[q],imports:[s.iI,o.n,r.G,i.H,a.O]}))},52266:(e,n,t)=>{t.d(n,{Z:()=>CoreSwipeNavigationItemsManager});var o=t(10467),r=t(15324),i=t(95990);class CoreSwipeNavigationItemsManager extends i.u{start(){var e=this;return(0,o.A)((function*(){e.updateSelectedItem()}))()}navigateToNextItem(){var e=this;return(0,o.A)((function*(){yield e.navigateToItemBy(1,"forward")}))()}navigateToPreviousItem(){var e=this;return(0,o.A)((function*(){yield e.navigateToItemBy(-1,"back")}))()}hasNextItem(){var e=this;return(0,o.A)((function*(){return!!(yield e.getItemBy(1))}))()}hasPreviousItem(){var e=this;return(0,o.A)((function*(){return!!(yield e.getItemBy(-1))}))()}getCurrentPageRoute(){return r.CoreNavigator.getCurrentRoute()}getSelectedItemPathFromRoute(e){const n=[];for(;e&&(n.push(...r.CoreNavigator.getRouteUrl(e)),e.firstChild);)e=e.firstChild;return n.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}navigateToItemBy(e,n){var t=this;return(0,o.A)((function*(){const o=yield t.getItemBy(e);o&&(yield t.navigateToItem(o,{animationDirection:n,replace:!0}))}))()}getItemBy(e){var n=this;return(0,o.A)((function*(){var t;const o=n.getSource().getItems(),r=null!==(t=n.selectedItem&&(null==o?void 0:o.indexOf(n.selectedItem)))&&void 0!==t?t:-1;if(-1===r||null===o)return null;const i=e>0?1:-1;let a=r,s=0;for(;s!==e;){if(a+=i,a<0)return null;if(a>=o.length)break;n.skipItemInSwipe(o[a])||(s+=i)}return s===e?o[a]:n.getSource().isCompleted()?null:(yield n.getSource().load(),n.getItemBy(e))}))()}skipItemInSwipe(e){return!1}}},55608:(e,n,t)=>{t.d(n,{z:()=>_});var o=t(10467),r=t(87326),i=t(6319),a=t(52749),s=t(49882),l=t(54438),d=t(60177),c=t(73465),g=t(73955);function CoreRatingAggregateComponent_ion_item_0_span_5_Template(e,n){if(1&e&&(l.j41(0,"span"),l.EFF(1),l.k0s()),2&e){const e=l.XpG(2);l.R7$(),l.SpI("(",e.item.count,")")}}function CoreRatingAggregateComponent_ion_item_0_Template(e,n){if(1&e){const e=l.RV6();l.j41(0,"ion-item",1),l.bIt("click",(function CoreRatingAggregateComponent_ion_item_0_Template_ion_item_click_0_listener(){l.eBV(e);const n=l.XpG();return l.Njj(n.openRatings())})),l.j41(1,"ion-label"),l.EFF(2),l.nI1(3,"translate"),l.nI1(4,"translate"),l.DNE(5,CoreRatingAggregateComponent_ion_item_0_span_5_Template,2,1,"span",2),l.k0s()()}if(2&e){const e=l.XpG();l.Y8G("detail",e.ratingInfo.canviewall&&e.item.count)("button",e.ratingInfo.canviewall&&e.item.count),l.R7$(2),l.E5c(" ",l.bMT(3,6,e.labelKey),"",l.bMT(4,8,"core.labelsep")," ",e.item.aggregatestr||"-"," "),l.R7$(3),l.Y8G("ngIf",e.showCount&&e.item.count&&e.item.count>0)}}let _=(()=>{var e;class CoreRatingAggregateComponent{constructor(){this.showCount=!1,this.disabled=!1,this.labelKey="",this.disabled=r.CoreRating.isRatingDisabledInSite(),this.updateSiteObserver=s.z.on(s.z.SITE_UPDATED,(()=>{this.disabled=r.CoreRating.isRatingDisabledInSite()}),a.CoreSites.getCurrentSiteId())}ngOnChanges(){var e;if(null===(e=this.aggregateObserver)||void 0===e||e.off(),delete this.aggregateObserver,this.item=(this.ratingInfo.ratings||[]).find((e=>e.itemid===this.itemId)),this.item){switch(this.aggregateMethod){case r.CoreRatingProvider.AGGREGATE_AVERAGE:this.labelKey="core.rating.aggregateavg";break;case r.CoreRatingProvider.AGGREGATE_COUNT:this.labelKey="core.rating.aggregatecount";break;case r.CoreRatingProvider.AGGREGATE_MAXIMUM:this.labelKey="core.rating.aggregatemax";break;case r.CoreRatingProvider.AGGREGATE_MINIMUM:this.labelKey="core.rating.aggregatemin";break;case r.CoreRatingProvider.AGGREGATE_SUM:this.labelKey="core.rating.aggregatesum";break;default:return this.labelKey="",void 0}this.showCount=this.aggregateMethod!=r.CoreRatingProvider.AGGREGATE_COUNT,this.aggregateObserver=s.z.on(r.CoreRatingProvider.AGGREGATE_CHANGED_EVENT,(e=>{this.item&&e.contextLevel===this.contextLevel&&e.instanceId===this.instanceId&&e.component===this.ratingInfo.component&&e.ratingArea===this.ratingInfo.ratingarea&&e.itemId===this.itemId&&(this.item.aggregatestr=e.aggregate,this.item.count=e.count)}))}}openRatings(){var e=this;return(0,o.A)((function*(){var n;if(!e.ratingInfo.canviewall||null===(n=e.item)||void 0===n||!n.count||e.disabled)return;const{CoreRatingRatingsComponent:o}=yield t.e(24).then(t.bind(t,80024));yield i.I.openModal({component:o,componentProps:{contextLevel:e.contextLevel,instanceId:e.instanceId,ratingComponent:e.ratingInfo.component,ratingArea:e.ratingInfo.ratingarea,itemId:e.itemId,scaleId:e.scaleId,courseId:e.courseId}})}))()}ngOnDestroy(){var e;null===(e=this.aggregateObserver)||void 0===e||e.off(),this.updateSiteObserver.off()}}return(e=CoreRatingAggregateComponent).ɵfac=function CoreRatingAggregateComponent_Factory(n){return new(n||e)},e.ɵcmp=l.VBU({type:e,selectors:[["core-rating-aggregate"]],inputs:{ratingInfo:"ratingInfo",contextLevel:"contextLevel",instanceId:"instanceId",itemId:"itemId",aggregateMethod:"aggregateMethod",scaleId:"scaleId",courseId:"courseId"},features:[l.OA$],decls:1,vars:1,consts:[["class","ion-text-wrap",3,"detail","button","click",4,"ngIf"],[1,"ion-text-wrap",3,"click","detail","button"],[4,"ngIf"]],template:function CoreRatingAggregateComponent_Template(e,n){1&e&&l.DNE(0,CoreRatingAggregateComponent_ion_item_0_Template,6,10,"ion-item",0),2&e&&l.Y8G("ngIf",n.item&&n.item.canviewaggregate&&n.labelKey&&!n.disabled)},dependencies:[d.bT,c.uz,c.he,g.D9],encapsulation:2}),CoreRatingAggregateComponent})()},66121:(e,n,t)=>{t.d(n,{H:()=>s});var o=t(55608),r=t(76990),i=t(3353),a=t(54438);let s=(()=>{var e;class CoreRatingComponentsModule{}return(e=CoreRatingComponentsModule).ɵfac=function CoreRatingComponentsModule_Factory(n){return new(n||e)},e.ɵmod=a.$C({type:e}),e.ɵinj=a.G2t({imports:[i.n]}),CoreRatingComponentsModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&a.Obh(s,{declarations:[o.z,r.w],imports:[i.n],exports:[o.z,r.w]}))},76990:(e,n,t)=>{t.d(n,{w:()=>p});var o=t(10467),r=t(54438),i=t(87326),a=t(32440),s=t(52749),l=t(89911),d=t(45433),c=t(79555),g=t(49882),_=t(23780),m=t(60177),y=t(89417),u=t(73465),f=t(73955);const _c0=e=>({header:e});function CoreRatingRateComponent_ion_item_0_ion_select_option_5_Template(e,n){if(1&e&&(r.j41(0,"ion-select-option",4),r.EFF(1),r.k0s()),2&e){const e=n.$implicit;r.Y8G("value",e.value),r.R7$(),r.JRh(e.name)}}function CoreRatingRateComponent_ion_item_0_Template(e,n){if(1&e){const e=r.RV6();r.j41(0,"ion-item",1)(1,"ion-select",2),r.nI1(2,"translate"),r.nI1(3,"translate"),r.nI1(4,"translate"),r.mxI("ngModelChange",(function CoreRatingRateComponent_ion_item_0_Template_ion_select_ngModelChange_1_listener(n){r.eBV(e);const t=r.XpG();return r.DH7(t.rating,n)||(t.rating=n),r.Njj(n)})),r.bIt("ngModelChange",(function CoreRatingRateComponent_ion_item_0_Template_ion_select_ngModelChange_1_listener(){r.eBV(e);const n=r.XpG();return r.Njj(n.userRatingChanged())})),r.DNE(5,CoreRatingRateComponent_ion_item_0_ion_select_option_5_Template,2,2,"ion-select-option",3),r.k0s()()}if(2&e){const e=r.XpG();r.R7$(),r.R50("ngModel",e.rating),r.Y8G("cancelText",r.bMT(2,6,"core.cancel"))("disabled",!e.item.canrate)("interfaceOptions",r.eq3(12,_c0,r.bMT(3,8,"core.rating.rating")))("label",r.bMT(4,10,"core.rating.rating")),r.R7$(4),r.Y8G("ngForOf",e.scale.items)}}let p=(()=>{var e;class CoreRatingRateComponent{constructor(){this.disabled=!1,this.onLoading=new r.bkB,this.onUpdate=new r.bkB,this.disabled=i.CoreRating.isRatingDisabledInSite(),this.updateSiteObserver=g.z.on(g.z.SITE_UPDATED,(()=>{this.disabled=i.CoreRating.isRatingDisabledInSite()}),s.CoreSites.getCurrentSiteId())}ngOnChanges(){var e=this;return(0,o.A)((function*(){if(e.item=(e.ratingInfo.ratings||[]).find((n=>n.itemid==e.itemId)),e.scale=(e.ratingInfo.scales||[]).find((n=>n.id==e.scaleId)),!e.item||!e.scale)return e.item=void 0,void 0;if(!e.scale.items&&(e.scale.items=[],e.scale.isnumeric))for(let n=0;n<=e.scale.max;n++)e.scale.items.push({name:String(n),value:n});e.scale.items[0]&&e.scale.items[0].value==i.CoreRatingProvider.UNSET_RATING||e.scale.items.unshift({name:c.HT.instant("core.none"),value:i.CoreRatingProvider.UNSET_RATING}),e.onLoading.emit(!0);try{const n=yield a.CoreRatingOffline.getRating(e.contextLevel,e.instanceId,e.ratingInfo.component,e.ratingInfo.ratingarea,e.itemId);e.rating=n.rating}catch{e.rating=e.item&&null!=e.item.rating?e.item.rating:i.CoreRatingProvider.UNSET_RATING}finally{e.onLoading.emit(!1)}}))()}userRatingChanged(){var e=this;return(0,o.A)((function*(){if(void 0===e.rating)return;const n=yield _.CoreLoadings.show("core.sending",!0);try{void 0===(yield i.CoreRating.addRating(e.ratingInfo.component,e.ratingInfo.ratingarea,e.contextLevel,e.instanceId,e.itemId,e.itemSetId,e.courseId,e.scaleId,e.rating,e.userId,e.aggregateMethod))?d.CoreToasts.show({message:"core.datastoredoffline",translateMessage:!0,duration:d.ToastDuration.LONG}):e.onUpdate.emit()}catch(e){l.CoreDomUtils.showErrorModal(e)}finally{n.dismiss()}}))()}ngOnDestroy(){this.updateSiteObserver.off()}}return(e=CoreRatingRateComponent).ɵfac=function CoreRatingRateComponent_Factory(n){return new(n||e)},e.ɵcmp=r.VBU({type:e,selectors:[["core-rating-rate"]],inputs:{ratingInfo:"ratingInfo",contextLevel:"contextLevel",instanceId:"instanceId",itemId:"itemId",itemSetId:"itemSetId",courseId:"courseId",aggregateMethod:"aggregateMethod",scaleId:"scaleId",userId:"userId"},outputs:{onLoading:"onLoading",onUpdate:"onUpdate"},features:[r.OA$],decls:1,vars:1,consts:[["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],["interface","action-sheet",1,"ion-text-start",3,"ngModelChange","ngModel","cancelText","disabled","interfaceOptions","label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function CoreRatingRateComponent_Template(e,n){1&e&&r.DNE(0,CoreRatingRateComponent_ion_item_0_Template,6,14,"ion-item",0),2&e&&r.Y8G("ngIf",n.item&&(n.item.canrate||null!==n.item.rating)&&!n.disabled)},dependencies:[m.Sq,m.bT,y.BC,y.vS,u.uz,u.Nm,u.Ip,u.Je,f.D9],encapsulation:2}),CoreRatingRateComponent})()}}]);