"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1983],{91983:(e,n,t)=>{t.r(n),t.d(n,{AddonModFeedbackIndexComponent:()=>V});var o=t(10467),a=t(75629),i=t(73564),d=t(69006),_=t(15221),c=t(15324),s=t(52749),l=t(75383),r=t(16474),m=t(55554),p=t(49882),b=t(4593),u=t(26463),f=t(99073),g=t(71585),I=t(19634),k=t(54438),h=t(73465),v=t(51024),F=t(60177),T=t(47222),C=t(69502),x=t(17388),A=t(97818),M=t(64422),R=t(13988),y=t(72597),w=t(86198),G=t(58197),$=t(66731),E=t(43570),j=t(6736),N=t(30864),Y=t(73955);const _c0=e=>({count:e});function AddonModFeedbackIndexComponent_Conditional_1_Template(e,n){if(1&e){const e=k.RV6();k.j41(0,"ion-button",11),k.nI1(1,"translate"),k.bIt("click",(function AddonModFeedbackIndexComponent_Conditional_1_Template_ion_button_click_0_listener(){k.eBV(e);const n=k.XpG();return k.Njj(n.openModuleSummary())})),k.nrm(2,"ion-icon",12),k.k0s()}2&e&&k.Y8G("ariaLabel",k.bMT(1,1,"core.info"))}function AddonModFeedbackIndexComponent_Conditional_2_Template(e,n){if(1&e){const e=k.RV6();k.j41(0,"core-context-menu")(1,"core-context-menu-item",13),k.nI1(2,"translate"),k.bIt("action",(function AddonModFeedbackIndexComponent_Conditional_2_Template_core_context_menu_item_action_1_listener(){k.eBV(e);const n=k.XpG();return k.Njj(n.openModuleSummary())})),k.k0s()()}2&e&&(k.R7$(),k.Y8G("priority",5e3)("content",k.bMT(2,2,"core.info")))}function AddonModFeedbackIndexComponent_ng_template_8_ng_container_0_Template(e,n){1&e&&k.eu8(0)}function AddonModFeedbackIndexComponent_ng_template_8_Template(e,n){if(1&e&&k.DNE(0,AddonModFeedbackIndexComponent_ng_template_8_ng_container_0_Template,1,0,"ng-container",14),2&e){k.XpG();const e=k.sdS(14);k.Y8G("ngTemplateOutlet",e)}}function AddonModFeedbackIndexComponent_core_tab_9_ng_template_2_ng_container_0_Template(e,n){1&e&&k.eu8(0)}function AddonModFeedbackIndexComponent_core_tab_9_ng_template_2_Template(e,n){if(1&e&&k.DNE(0,AddonModFeedbackIndexComponent_core_tab_9_ng_template_2_ng_container_0_Template,1,0,"ng-container",14),2&e){k.XpG(2);const e=k.sdS(16);k.Y8G("ngTemplateOutlet",e)}}function AddonModFeedbackIndexComponent_core_tab_9_Template(e,n){if(1&e){const e=k.RV6();k.j41(0,"core-tab",15),k.nI1(1,"translate"),k.bIt("ionSelect",(function AddonModFeedbackIndexComponent_core_tab_9_Template_core_tab_ionSelect_0_listener(){k.eBV(e);const n=k.XpG();return k.Njj(n.tabChanged(n.tabs.analysis.name))})),k.DNE(2,AddonModFeedbackIndexComponent_core_tab_9_ng_template_2_Template,1,1,"ng-template"),k.k0s()}if(2&e){const e=k.XpG();k.Y8G("id",e.tabs.analysis.name)("title",k.bMT(1,2,e.tabs.analysis.label))}}function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_1_Template(e,n){if(1&e){const e=k.RV6();k.j41(0,"ion-button",22),k.bIt("click",(function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_1_Template_ion_button_click_0_listener(){k.eBV(e);const n=k.XpG(3);return k.Njj(n.gotoAnswerQuestions(!0))})),k.nrm(1,"ion-icon",23),k.EFF(2),k.nI1(3,"translate"),k.k0s()}2&e&&(k.R7$(2),k.SpI(" ",k.bMT(3,1,"addon.mod_feedback.preview")," "))}function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_ng_container_1_Template(e,n){1&e&&(k.qex(0),k.EFF(1),k.nI1(2,"translate"),k.bVm()),2&e&&(k.R7$(),k.SpI(" ",k.bMT(2,1,"addon.mod_feedback.complete_the_form")," "))}function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_ng_container_2_Template(e,n){1&e&&(k.qex(0),k.EFF(1),k.nI1(2,"translate"),k.bVm()),2&e&&(k.R7$(),k.SpI(" ",k.bMT(2,1,"addon.mod_feedback.continue_the_form")," "))}function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_Template(e,n){if(1&e){const e=k.RV6();k.j41(0,"ion-button",24),k.bIt("click",(function AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_Template_ion_button_click_0_listener(){k.eBV(e);const n=k.XpG(3);return k.Njj(n.gotoAnswerQuestions())})),k.DNE(1,AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_ng_container_1_Template,3,3,"ng-container",25)(2,AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_ng_container_2_Template,3,3,"ng-container",25),k.k0s()}if(2&e){const e=k.XpG(3);k.R7$(),k.Y8G("ngIf",!e.goPage),k.R7$(),k.Y8G("ngIf",e.goPage)}}function AddonModFeedbackIndexComponent_div_10_div_1_Template(e,n){if(1&e&&(k.j41(0,"div",19),k.DNE(1,AddonModFeedbackIndexComponent_div_10_div_1_ion_button_1_Template,4,3,"ion-button",20)(2,AddonModFeedbackIndexComponent_div_10_div_1_ion_button_2_Template,3,2,"ion-button",21),k.k0s()),2&e){const e=k.XpG(2);k.R7$(),k.Y8G("ngIf",e.access.canedititems||e.access.canviewreports),k.R7$(),k.Y8G("ngIf",e.access.cancomplete&&e.access.cansubmit&&e.access.isopen)}}function AddonModFeedbackIndexComponent_div_10_Template(e,n){if(1&e&&(k.j41(0,"div",16),k.DNE(1,AddonModFeedbackIndexComponent_div_10_div_1_Template,3,2,"div",17),k.nrm(2,"core-course-module-navigation",18),k.k0s()),2&e){const e=k.XpG();k.R7$(),k.Y8G("ngIf",e.access&&(e.access.canedititems||e.access.canviewreports||!e.access.isempty)),k.R7$(),k.Y8G("courseId",e.courseId)("currentModuleId",e.module.id)}}function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_ion_item_13_Template(e,n){if(1&e){const e=k.RV6();k.j41(0,"ion-item",33),k.bIt("click",(function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_ion_item_13_Template_ion_item_click_0_listener(){k.eBV(e);const n=k.XpG(3);return k.Njj(n.openNonRespondents())})),k.j41(1,"ion-label")(2,"p",28),k.EFF(3),k.nI1(4,"translate"),k.k0s()()()}2&e&&(k.Y8G("detail",!0),k.R7$(3),k.JRh(k.bMT(4,2,"addon.mod_feedback.show_nonrespondents")))}function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template(e,n){if(1&e){const e=k.RV6();k.j41(0,"ion-list")(1,"core-group-selector",26),k.mxI("selectedChange",(function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template_core_group_selector_selectedChange_1_listener(n){k.eBV(e);const t=k.XpG(2);return k.DH7(t.group,n)||(t.group=n),k.Njj(n)})),k.bIt("selectedChange",(function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template_core_group_selector_selectedChange_1_listener(){k.eBV(e);const n=k.XpG(2);return k.Njj(n.setGroup(n.group))})),k.k0s(),k.j41(2,"ion-item",27),k.bIt("click",(function AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template_ion_item_click_2_listener(){k.eBV(e);const n=k.XpG(2);return k.Njj(n.openAttempts())})),k.j41(3,"ion-label")(4,"p",28),k.EFF(5),k.nI1(6,"translate"),k.k0s()(),k.j41(7,"ion-badge",3)(8,"span",29),k.EFF(9),k.k0s(),k.j41(10,"span",30),k.EFF(11),k.nI1(12,"translate"),k.k0s()()(),k.DNE(13,AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_ion_item_13_Template,5,4,"ion-item",31),k.j41(14,"ion-item",32)(15,"ion-label")(16,"p",28),k.EFF(17),k.nI1(18,"translate"),k.k0s()(),k.j41(19,"ion-badge",3)(20,"span",29),k.EFF(21),k.k0s(),k.j41(22,"span",30),k.EFF(23),k.nI1(24,"translate"),k.k0s()()()()}if(2&e){const e=k.XpG(2);k.R7$(),k.Y8G("groupInfo",e.groupInfo),k.R50("selected",e.group),k.Y8G("courseId",e.courseId),k.R7$(),k.AVh("hide-detail",!(e.access.canviewreports&&e.completedCount>0)),k.Y8G("detail",!0)("button",e.access.canviewreports&&e.completedCount>0),k.R7$(3),k.JRh(k.bMT(6,14,"addon.mod_feedback.completed_feedbacks")),k.R7$(4),k.JRh(e.completedCount),k.R7$(2),k.SpI(" ",k.i5U(12,16,"addon.mod_feedback.completedfeedbackscountdescription",k.eq3(24,_c0,e.completedCount))," "),k.R7$(2),k.Y8G("ngIf",!e.access.isanonymous&&e.access.canviewreports),k.R7$(4),k.JRh(k.bMT(18,19,"addon.mod_feedback.questions")),k.R7$(4),k.JRh(e.itemsCount),k.R7$(2),k.SpI(" ",k.i5U(24,21,"addon.mod_feedback.questionscountdescription",k.eq3(26,_c0,e.itemsCount))," ")}}function AddonModFeedbackIndexComponent_ng_template_11_Template(e,n){if(1&e&&k.DNE(0,AddonModFeedbackIndexComponent_ng_template_11_ion_list_0_Template,25,28,"ion-list",25),2&e){const e=k.XpG();k.Y8G("ngIf",e.access&&e.access.canviewanalysis&&!e.access.isempty)}}function AddonModFeedbackIndexComponent_ng_template_13_ng_container_1_Template(e,n){1&e&&k.eu8(0)}function AddonModFeedbackIndexComponent_ng_template_13_ion_card_2_Template(e,n){1&e&&(k.j41(0,"ion-card",36)(1,"ion-item"),k.nrm(2,"ion-icon",37),k.j41(3,"ion-label"),k.EFF(4),k.nI1(5,"translate"),k.k0s()()()),2&e&&(k.R7$(4),k.JRh(k.bMT(5,1,"addon.mod_feedback.feedback_is_not_open")))}function AddonModFeedbackIndexComponent_ng_template_13_ion_card_3_Template(e,n){1&e&&(k.j41(0,"ion-card",38)(1,"ion-item"),k.nrm(2,"ion-icon",39),k.j41(3,"ion-label"),k.EFF(4),k.nI1(5,"translate"),k.k0s()()()),2&e&&(k.R7$(4),k.JRh(k.bMT(5,1,"addon.mod_feedback.this_feedback_is_already_submitted")))}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_1_Template(e,n){if(1&e&&(k.j41(0,"ion-item",32)(1,"ion-label")(2,"p",28),k.EFF(3),k.nI1(4,"translate"),k.k0s(),k.j41(5,"p"),k.EFF(6),k.k0s()()()),2&e){const e=k.XpG(3);k.R7$(3),k.JRh(k.bMT(4,2,"addon.mod_feedback.feedbackopen")),k.R7$(3),k.JRh(e.overview.openTimeReadable)}}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_2_Template(e,n){if(1&e&&(k.j41(0,"ion-item",32)(1,"ion-label")(2,"p",28),k.EFF(3),k.nI1(4,"translate"),k.k0s(),k.j41(5,"p"),k.EFF(6),k.k0s()()()),2&e){const e=k.XpG(3);k.R7$(3),k.JRh(k.bMT(4,2,"addon.mod_feedback.feedbackclose")),k.R7$(3),k.JRh(e.overview.closeTimeReadable)}}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_3_Template(e,n){if(1&e&&(k.j41(0,"ion-item",32)(1,"ion-label")(2,"p",28),k.EFF(3),k.nI1(4,"translate"),k.k0s(),k.nrm(5,"core-format-text",41),k.k0s()()),2&e){const e=k.XpG(3);k.R7$(3),k.JRh(k.bMT(4,6,"addon.mod_feedback.page_after_submit")),k.R7$(2),k.Y8G("component",e.component)("componentId",e.componentId)("text",e.feedback.page_after_submit)("contextInstanceId",e.module.id)("courseId",e.courseId)}}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_p_6_Template(e,n){1&e&&(k.j41(0,"p"),k.EFF(1),k.nI1(2,"translate"),k.k0s()),2&e&&(k.R7$(),k.JRh(k.bMT(2,1,"addon.mod_feedback.anonymous")))}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_p_7_Template(e,n){1&e&&(k.j41(0,"p"),k.EFF(1),k.nI1(2,"translate"),k.k0s()),2&e&&(k.R7$(),k.JRh(k.bMT(2,1,"addon.mod_feedback.non_anonymous")))}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_Template(e,n){if(1&e&&(k.qex(0),k.j41(1,"ion-item",32)(2,"ion-label")(3,"p",28),k.EFF(4),k.nI1(5,"translate"),k.k0s(),k.DNE(6,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_p_6_Template,3,3,"p",25)(7,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_p_7_Template,3,3,"p",25),k.k0s()(),k.bVm()),2&e){const e=k.XpG(3);k.R7$(4),k.JRh(k.bMT(5,3,"addon.mod_feedback.mode")),k.R7$(2),k.Y8G("ngIf",e.access.isanonymous),k.R7$(),k.Y8G("ngIf",!e.access.isanonymous)}}function AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_Template(e,n){if(1&e&&(k.j41(0,"ion-list"),k.DNE(1,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_1_Template,7,4,"ion-item",40)(2,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_2_Template,7,4,"ion-item",40)(3,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ion_item_3_Template,6,8,"ion-item",40)(4,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_ng_container_4_Template,8,5,"ng-container",25),k.k0s()),2&e){const e=k.XpG(2);k.R7$(),k.Y8G("ngIf",e.access.canedititems&&e.overview.timeopen),k.R7$(),k.Y8G("ngIf",e.access.canedititems&&e.overview.timeclose),k.R7$(),k.Y8G("ngIf",e.access.canedititems&&e.feedback&&e.feedback.page_after_submit),k.R7$(),k.Y8G("ngIf",!e.access.isempty)}}function AddonModFeedbackIndexComponent_ng_template_13_Template(e,n){if(1&e&&(k.j41(0,"core-loading",5),k.DNE(1,AddonModFeedbackIndexComponent_ng_template_13_ng_container_1_Template,1,0,"ng-container",14)(2,AddonModFeedbackIndexComponent_ng_template_13_ion_card_2_Template,6,3,"ion-card",34)(3,AddonModFeedbackIndexComponent_ng_template_13_ion_card_3_Template,6,3,"ion-card",35)(4,AddonModFeedbackIndexComponent_ng_template_13_ion_list_4_Template,5,4,"ion-list",25),k.k0s()),2&e){const e=k.XpG(),n=k.sdS(12);k.Y8G("hideUntil",e.tabs.overview.loaded),k.R7$(),k.Y8G("ngTemplateOutlet",n),k.R7$(),k.Y8G("ngIf",e.access&&e.access.cancomplete&&!e.access.isopen),k.R7$(),k.Y8G("ngIf",e.access&&e.access.cancomplete&&e.access.isopen&&!e.access.cansubmit),k.R7$(),k.Y8G("ngIf",e.access&&(e.access.canedititems||e.access.canviewreports||!e.access.isempty))}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_1_Template(e,n){1&e&&k.eu8(0)}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_card_1_Template(e,n){if(1&e&&(k.j41(0,"ion-card",36)(1,"ion-item"),k.nrm(2,"ion-icon",37),k.j41(3,"ion-label"),k.EFF(4),k.k0s()()()),2&e){const e=k.XpG(3);k.R7$(4),k.JRh(e.warning)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_8_li_2_Template(e,n){if(1&e&&(k.j41(0,"li"),k.EFF(1),k.k0s()),2&e){const e=n.$implicit;k.R7$(),k.JRh(e)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_8_Template(e,n){if(1&e&&(k.qex(0),k.j41(1,"ul"),k.DNE(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_8_li_2_Template,2,1,"li",46),k.k0s(),k.j41(3,"p"),k.EFF(4),k.nI1(5,"translate"),k.nI1(6,"number"),k.k0s(),k.bVm()),2&e){const e=k.XpG().$implicit;k.R7$(2),k.Y8G("ngForOf",e.data),k.R7$(2),k.Lme("",k.bMT(5,3,"addon.mod_feedback.average"),": ",k.i5U(6,5,e.average,"1.2-2"),"")}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_li_1_Template(e,n){if(1&e&&(k.j41(0,"li"),k.EFF(1),k.k0s()),2&e){const e=k.XpG().$implicit;k.R7$(),k.JRh(e)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_Template(e,n){if(1&e&&(k.qex(0),k.DNE(1,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_li_1_Template,2,1,"li",25),k.bVm()),2&e){const e=n.$implicit;k.R7$(),k.Y8G("ngIf",e)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_Template(e,n){if(1&e&&(k.qex(0),k.j41(1,"ul"),k.DNE(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_Template,2,1,"ng-container",46),k.k0s(),k.bVm()),2&e){const e=k.XpG().$implicit;k.R7$(2),k.Y8G("ngForOf",e.data)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_10_p_2_Template(e,n){if(1&e&&(k.j41(0,"p"),k.EFF(1),k.nI1(2,"translate"),k.nI1(3,"number"),k.k0s()),2&e){const e=k.XpG(2).$implicit;k.R7$(),k.Lme(" ",k.bMT(2,2,"addon.mod_feedback.average"),": ",k.i5U(3,4,e.average,"1.2-2")," ")}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_10_Template(e,n){if(1&e&&(k.qex(0),k.nrm(1,"core-chart",47),k.DNE(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_10_p_2_Template,4,7,"p",25),k.bVm()),2&e){const e=k.XpG().$implicit,n=k.XpG(4);k.R7$(),k.Y8G("type",e.chartType)("data",e.chartData)("labels",e.labels)("contextInstanceId",n.module.id)("wsNotFiltered",!0)("courseId",n.courseId),k.R7$(),k.Y8G("ngIf",e.average)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_Template(e,n){if(1&e&&(k.j41(0,"ion-item",43)(1,"ion-label")(2,"p",28),k.EFF(3),k.nrm(4,"core-format-text",41),k.k0s(),k.j41(5,"p"),k.nrm(6,"core-format-text",41),k.k0s(),k.qex(7,44),k.DNE(8,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_8_Template,7,8,"ng-container",45)(9,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_9_Template,3,1,"ng-container",45)(10,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_ng_container_10_Template,3,7,"ng-container",45),k.bVm(),k.k0s()()),2&e){const e=n.$implicit,t=k.XpG(4);k.R7$(3),k.SpI(" ",e.num,". "),k.R7$(),k.Y8G("component",t.component)("componentId",t.componentId)("text",e.name)("contextInstanceId",t.module.id)("courseId",t.courseId),k.R7$(2),k.Y8G("component",t.component)("componentId",t.componentId)("text",e.label)("contextInstanceId",t.module.id)("courseId",t.courseId),k.R7$(),k.Y8G("ngSwitch",e.templateName),k.R7$(),k.Y8G("ngSwitchCase","numeric"),k.R7$(),k.Y8G("ngSwitchCase","list"),k.R7$(),k.Y8G("ngSwitchCase","chart")}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_Template(e,n){if(1&e&&(k.j41(0,"ion-list"),k.DNE(1,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_ion_item_1_Template,11,15,"ion-item",42),k.k0s()),2&e){const e=k.XpG(3);k.R7$(),k.Y8G("ngForOf",e.items)}}function AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_Template(e,n){if(1&e&&(k.qex(0),k.DNE(1,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_card_1_Template,5,1,"ion-card",34)(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_ion_list_2_Template,2,1,"ion-list",25),k.bVm()),2&e){const e=k.XpG(2);k.R7$(),k.Y8G("ngIf",e.warning),k.R7$(),k.Y8G("ngIf",e.items&&e.items.length)}}function AddonModFeedbackIndexComponent_ng_template_15_Template(e,n){if(1&e&&(k.j41(0,"core-loading",5),k.DNE(1,AddonModFeedbackIndexComponent_ng_template_15_ng_container_1_Template,1,0,"ng-container",14)(2,AddonModFeedbackIndexComponent_ng_template_15_ng_container_2_Template,3,2,"ng-container",25),k.k0s()),2&e){const e=k.XpG(),n=k.sdS(12);k.Y8G("hideUntil",e.tabs.analysis.loaded),k.R7$(),k.Y8G("ngTemplateOutlet",n),k.R7$(),k.Y8G("ngIf",e.access&&(e.access.canedititems||!e.access.isempty))}}let V=(()=>{var e;class AddonModFeedbackIndexComponent extends d.y{constructor(e,n){var t;super("AddonModLessonIndexComponent",e,n),t=this,this.content=e,this.selectedTab=I.sT.OVERVIEW,this.group=0,this.component=I.SK,this.pluginName="feedback",this.items=[],this.showAnalysis=!1,this.tabsReady=!1,this.completedCount=0,this.itemsCount=0,this.overview={timeopen:0,openTimeReadable:"",timeclose:0,closeTimeReadable:""},this.tabs={overview:{name:I.sT.OVERVIEW,label:"addon.mod_feedback.overview",loaded:!1},analysis:{name:I.sT.ANALYSIS,label:"addon.mod_feedback.analysis",loaded:!1}},this.syncEventName=I.$5,this.checkCompletionAfterLog=!1,this.submitObserver=p.z.on(I.bN,function(){var e=(0,o.A)((function*(e){t.feedback&&e.feedbackId===t.feedback.id&&(t.tabs.analysis.loaded=!1,t.tabs.overview.loaded=!1,t.showLoading=!0,!e.offline&&t.isPrefetched()&&(yield m.g.ignoreErrors(f.V.prefetchAfterUpdate(g.f.instance,t.module,t.courseId))),e.tab!==t.selectedTab?t.tabChanged(e.tab):t.loadContent(!0))}));return function(n){return e.apply(this,arguments)}}(),this.siteId)}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,e=this;return(0,o.A)((function*(){_superprop_getNgOnInit().call(e);try{yield e.loadContent(!1,!0)}finally{e.tabsReady=!0}}))()}logActivity(){var e=this;return(0,o.A)((function*(){e.feedback&&(yield b.o.logView(e.feedback.id),e.callAnalyticsLogEvent())}))()}callAnalyticsLogEvent(){this.analyticsLogEvent("mod_feedback_view_feedback",{url:this.selectedTab===I.sT.ANALYSIS?`/mod/feedback/analysis.php?id=${this.module.id}`:void 0})}invalidateContent(){var e=this;return(0,o.A)((function*(){const n=[];n.push(b.o.invalidateFeedbackData(e.courseId)),e.feedback&&(n.push(b.o.invalidateFeedbackAccessInformationData(e.feedback.id)),n.push(b.o.invalidateAnalysisData(e.feedback.id)),n.push(_.CoreGroups.invalidateActivityAllowedGroups(e.feedback.coursemodule)),n.push(_.CoreGroups.invalidateActivityGroupMode(e.feedback.coursemodule)),n.push(b.o.invalidateResumePageData(e.feedback.id))),e.tabs.analysis.loaded=!1,e.tabs.overview.loaded=!1,yield Promise.all(n)}))()}isRefreshSyncNeeded(e){var n,t;return e.feedbackId===(null===(n=this.feedback)||void 0===n?void 0:n.id)&&(null===(t=this.content)||void 0===t||t.scrollToTop(),!0)}fetchContent(e,n=!1,t=!1){var a=this;return(0,o.A)((function*(){try{if(a.feedback=yield b.o.getFeedback(a.courseId,a.module.id),yield a.fixPageAfterSubmitFileUrls(),a.description=a.feedback.intro,a.dataRetrieved.emit(a.feedback),n&&(yield a.syncActivity(t)),a.access=yield b.o.getFeedbackAccessInformation(a.feedback.id,{cmId:a.module.id}),a.showAnalysis=(a.access.canviewreports||a.access.canviewanalysis)&&!a.access.isempty,a.tabs.analysis.label=a.access.canviewreports?"addon.mod_feedback.analysis":"addon.mod_feedback.completed_feedbacks",a.firstSelectedTab=0,a.showAnalysis||(a.selectedTab=I.sT.OVERVIEW),a.selectedTab===I.sT.ANALYSIS)return a.firstSelectedTab=1,yield a.fetchFeedbackAnalysisData();yield a.fetchFeedbackOverviewData()}finally{var e,o;if(a.feedback&&(a.hasOffline=yield u.X.hasFeedbackOfflineData(a.feedback.id)),a.tabsReady)null===(e=a.tabsComponent)||void 0===e||e.selectTab(null!==(o=a.selectedTab)&&void 0!==o?o:I.sT.OVERVIEW)}}))()}fixPageAfterSubmitFileUrls(){var e=this;return(0,o.A)((function*(){var n;if((yield s.CoreSites.getSite(e.siteId)).isVersionGreaterEqualThan("4.2")&&null!==(n=e.feedback)&&void 0!==n&&n.page_after_submit&&e.feedback.pageaftersubmitfiles)for(const n of e.feedback.pageaftersubmitfiles){const t=n.fileurl.replace("/page_after_submit/0/","/page_after_submit/"),o=new RegExp(l.Ni.escapeForRegex(t),"g");e.feedback.page_after_submit=e.feedback.page_after_submit.replace(o,n.fileurl)}}))()}fetchFeedbackOverviewData(){var e=this;return(0,o.A)((function*(){if(!e.access||!e.feedback)return;const n=[];e.access.cancomplete&&e.access.cansubmit&&e.access.isopen&&n.push(b.o.getResumePage(e.feedback.id,{cmId:e.module.id}).then((n=>{e.goPage=n>0?n:void 0}))),e.access.canedititems&&(e.overview.timeopen=1e3*(e.feedback.timeopen||0),e.overview.openTimeReadable=e.overview.timeopen?r.CoreTimeUtils.userDate(e.overview.timeopen):"",e.overview.timeclose=1e3*(e.feedback.timeclose||0),e.overview.closeTimeReadable=e.overview.timeclose?r.CoreTimeUtils.userDate(e.overview.timeclose):""),e.access.canviewanalysis&&n.push(e.fetchGroupInfo(e.module.id));try{yield Promise.all(n)}finally{e.tabs.overview.loaded=!0}}))()}fetchFeedbackAnalysisData(){var e=this;return(0,o.A)((function*(){try{var n;null!==(n=e.access)&&void 0!==n&&n.canviewanalysis?yield e.fetchGroupInfo(e.module.id):e.tabChanged(I.sT.OVERVIEW)}finally{e.tabs.analysis.loaded=!0}}))()}fetchGroupInfo(e){var n=this;return(0,o.A)((function*(){n.groupInfo=yield _.CoreGroups.getActivityGroupInfo(e),yield n.setGroup(_.CoreGroups.validateGroupId(n.group,n.groupInfo))}))()}parseAnalysisInfo(e){switch(e.typ){case"numeric":e.average=e.data.reduce(((e,n)=>e+Number(n)),0)/e.data.length,e.templateName="numeric";break;case"info":e.data=e.data.map((e=>{const n=l.Ni.parseJSON(e);return void 0!==n.show&&n.show})).filter((e=>e));case"textfield":case"textarea":e.templateName="list";break;case"multichoicerated":case"multichoice":{const n=e.data.map((e=>{const n=l.Ni.parseJSON(e);return void 0!==n.answertext&&n})).filter((e=>e));e.labels=n.map((e=>{e.quotient=(100*e.quotient).toFixed(2);let n="";return void 0!==e.value&&(n="("+e.value+") "),n+=e.answertext,n+=Number(e.quotient)>0?" ("+e.quotient+"%)":"",n})),e.chartData=n.map((e=>Number(e.answercount))),"multichoicerated"===e.typ&&(e.average=n.reduce(((e,n)=>e+Number(n.avg)),0));const t="c"!==e.presentation.charAt(0)&&e.chartData.some((e=>e>0));e.chartType=t?"doughnut":"bar",e.templateName="chart";break}}return e}gotoAnswerQuestions(e=!1){c.CoreNavigator.navigateToSitePath(I.qY+`/${this.courseId}/${this.module.id}/form`,{params:{preview:e,fromIndex:!0}})}ionViewDidEnter(){var e;super.ionViewDidEnter(),null===(e=this.tabsComponent)||void 0===e||e.ionViewDidEnter()}ionViewDidLeave(){var e;super.ionViewDidLeave(),null===(e=this.tabsComponent)||void 0===e||e.ionViewDidLeave()}openNonRespondents(){c.CoreNavigator.navigateToSitePath(I.qY+`/${this.courseId}/${this.module.id}/nonrespondents`,{params:{group:this.group}})}openAttempts(){!this.access||!this.access.canviewreports||this.completedCount<=0||c.CoreNavigator.navigateToSitePath(I.qY+`/${this.courseId}/${this.module.id}/attempts`,{params:{group:this.group}})}tabChanged(e){const n=void 0!==this.selectedTab&&this.selectedTab!==e;this.selectedTab=e,this.tabs[this.selectedTab].loaded||this.loadContent(!1,!1,!0),n&&this.callAnalyticsLogEvent()}setGroup(e){var n=this;return(0,o.A)((function*(){if(!n.feedback)return;n.group=e;const t=yield b.o.getAnalysis(n.feedback.id,{groupId:e,cmId:n.module.id});if(n.completedCount=t.completedcount,n.itemsCount=t.itemscount,n.selectedTab===I.sT.ANALYSIS){var o;let e=1;if(n.items=t.itemsdata.map((t=>{const o=Object.assign(t.item,{data:t.data,num:e++});return!(!o.data||!o.data.length)&&n.parseAnalysisInfo(o)})).filter((e=>e)),n.warning="",null!==(o=t.warnings)&&void 0!==o&&o.length){const e=t.warnings.find((e=>"insufficientresponsesforthisgroup"==e.warningcode));n.warning=null==e?void 0:e.message}}}))()}sync(){if(!this.feedback)throw new a.CoreError("Cannot sync without a feedback.");return f.V.syncFeedback(this.feedback.id)}ngOnDestroy(){var e;super.ngOnDestroy(),null===(e=this.submitObserver)||void 0===e||e.off()}}return(e=AddonModFeedbackIndexComponent).ɵfac=function AddonModFeedbackIndexComponent_Factory(n){return new(n||e)(k.rXU(h.W9),k.rXU(v.k,8))},e.ɵcmp=k.VBU({type:e,selectors:[["addon-mod-feedback-index"]],viewQuery:function AddonModFeedbackIndexComponent_Query(e,n){if(1&e&&k.GBs(i.h,5),2&e){let e;k.mGM(e=k.lsd())&&(n.tabsComponent=e.first)}},inputs:{selectedTab:"selectedTab",group:"group"},features:[k.Vt3],decls:17,vars:16,consts:[["basicInfo",""],["tabOverview",""],["tabAnalysis",""],["slot","end"],["fill","clear","aria-haspopup","true",3,"ariaLabel"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],[3,"hideUntil","selectedIndex"],[3,"ionSelect","title","id"],[3,"id","title","ionSelect",4,"ngIf"],["collapsible-footer","","slot","fixed",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],[4,"ngTemplateOutlet"],[3,"ionSelect","id","title"],["collapsible-footer","","slot","fixed"],["class","list-item-limited-width adaptable-buttons-row",4,"ngIf"],[3,"courseId","currentModuleId"],[1,"list-item-limited-width","adaptable-buttons-row"],["expand","block","fill","outline","class","ion-margin ion-text-wrap",3,"click",4,"ngIf"],["expand","block","class","ion-margin ion-text-wrap",3,"click",4,"ngIf"],["expand","block","fill","outline",1,"ion-margin","ion-text-wrap",3,"click"],["name","fas-magnifying-glass","slot","start","aria-hidden","true"],["expand","block",1,"ion-margin","ion-text-wrap",3,"click"],[4,"ngIf"],[3,"selectedChange","groupInfo","selected","courseId"],[1,"ion-text-wrap",3,"click","detail","button"],[1,"item-heading"],["aria-hidden","true"],[1,"sr-only"],["class","ion-text-wrap","button","",3,"detail","click",4,"ngIf"],[1,"ion-text-wrap"],["button","",1,"ion-text-wrap",3,"click","detail"],["class","core-info-card",4,"ngIf"],["class","core-success-card",4,"ngIf"],[1,"core-info-card"],["name","fas-circle-question","slot","start","aria-hidden","true"],[1,"core-success-card"],["name","fas-check","slot","start","aria-hidden","true"],["class","ion-text-wrap",4,"ngIf"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],["class","ion-text-wrap core-analysis",4,"ngFor","ngForOf"],[1,"ion-text-wrap","core-analysis"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngFor","ngForOf"],["height","300","contextLevel","module",3,"type","data","labels","contextInstanceId","wsNotFiltered","courseId"]],template:function AddonModFeedbackIndexComponent_Template(e,n){if(1&e){const e=k.RV6();k.j41(0,"core-navbar-buttons",3),k.DNE(1,AddonModFeedbackIndexComponent_Conditional_1_Template,3,3,"ion-button",4)(2,AddonModFeedbackIndexComponent_Conditional_2_Template,3,4),k.k0s(),k.j41(3,"core-loading",5)(4,"core-course-module-info",6),k.bIt("completionChanged",(function AddonModFeedbackIndexComponent_Template_core_course_module_info_completionChanged_4_listener(){return k.eBV(e),k.Njj(n.onCompletionChange())})),k.k0s(),k.j41(5,"core-tabs",7)(6,"core-tab",8),k.nI1(7,"translate"),k.bIt("ionSelect",(function AddonModFeedbackIndexComponent_Template_core_tab_ionSelect_6_listener(){return k.eBV(e),k.Njj(n.tabChanged(n.tabs.overview.name))})),k.DNE(8,AddonModFeedbackIndexComponent_ng_template_8_Template,1,1,"ng-template"),k.k0s(),k.DNE(9,AddonModFeedbackIndexComponent_core_tab_9_Template,3,4,"core-tab",9),k.k0s(),k.DNE(10,AddonModFeedbackIndexComponent_div_10_Template,3,3,"div",10),k.k0s(),k.DNE(11,AddonModFeedbackIndexComponent_ng_template_11_Template,1,1,"ng-template",null,0,k.C5r)(13,AddonModFeedbackIndexComponent_ng_template_13_Template,5,5,"ng-template",null,1,k.C5r)(15,AddonModFeedbackIndexComponent_ng_template_15_Template,3,3,"ng-template",null,2,k.C5r)}2&e&&(k.R7$(),k.vxM(1,n.courseContentsPage?2:1),k.R7$(2),k.Y8G("hideUntil",!n.showLoading),k.R7$(),k.Y8G("module",n.module)("description",n.description)("component",n.component)("componentId",n.componentId)("courseId",n.courseId)("hasDataToSync",n.hasOffline),k.R7$(),k.Y8G("hideUntil",n.tabsReady)("selectedIndex",n.firstSelectedTab),k.R7$(),k.Y8G("title",k.bMT(7,14,n.tabs.overview.label))("id",n.tabs.overview.name),k.R7$(3),k.Y8G("ngIf",n.showAnalysis&&n.access),k.R7$(),k.Y8G("ngIf",!n.showLoading))},dependencies:[F.Sq,F.bT,F.T3,F.ux,F.e1,T.B,C.B,x.Q,A.F,M.R,R.c,y.K,i.h,w.t,G.B,$.i,E.T,h.In,h.Jm,h.b_,h.iq,h.uz,h.he,h.nf,j.Y,N.Q,F.QX,Y.D9],encapsulation:2}),AddonModFeedbackIndexComponent})()}}]);