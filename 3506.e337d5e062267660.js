"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3506],{23506:(e,n,o)=>{o.r(n),o.d(n,{CoreCourseCourseIndexComponent:()=>v});var t=o(10467),i=o(3353),r=o(44682),_=o(94247),a=o(14001),s=o(83219),c=o(52749),l=o(53794),d=o(79555),m=o(82907),u=o(86123),C=o(54438),p=o(60177),g=o(64422),x=o(86198),I=o(58197),f=o(8199),b=o(88246),h=o(43570),T=o(73465),M=o(73955);const _c0=e=>({section:e});function CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_ion_item_1_Template(e,n){if(1&e){const e=C.RV6();C.j41(0,"ion-item",11),C.bIt("click",(function CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_ion_item_1_Template_ion_item_click_0_listener(n){C.eBV(e);const o=C.XpG().$implicit,t=C.XpG(2);return C.Njj(t.selectSectionOrModule(n,o.id))})),C.j41(1,"ion-label")(2,"h2"),C.nrm(3,"core-format-text",12),C.k0s()()()}if(2&e){const e=C.XpG().$implicit,n=C.XpG(2);C.AVh("item-current",n.selectedId===e.id),C.Y8G("detail",!1),C.R7$(3),C.Y8G("text",e.name)("contextInstanceId",null==n.course?null:n.course.id)}}function CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_ng_container_2_ng_container_1_Template(e,n){1&e&&C.eu8(0)}function CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_ng_container_2_Template(e,n){if(1&e&&(C.qex(0),C.DNE(1,CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_ng_container_2_ng_container_1_Template,1,0,"ng-container",13),C.bVm()),2&e){const e=C.XpG().$implicit;C.XpG(2);const n=C.sdS(14);C.R7$(),C.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",C.eq3(2,_c0,e))}}function CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_Template(e,n){if(1&e&&(C.qex(0),C.DNE(1,CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_ion_item_1_Template,4,5,"ion-item",9)(2,CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_ng_container_2_Template,2,4,"ng-container",10),C.bVm()),2&e){const e=n.$implicit,o=C.XpG(2);C.R7$(),C.Y8G("ngIf",o.allSectionId===e.id),C.R7$(),C.Y8G("ngIf",o.allSectionId!==e.id)}}function CoreCourseCourseIndexComponent_ion_list_12_Template(e,n){if(1&e&&(C.j41(0,"ion-list",7),C.DNE(1,CoreCourseCourseIndexComponent_ion_list_12_ng_container_1_Template,3,2,"ng-container",8),C.k0s()),2&e){const e=C.XpG();C.R7$(),C.Y8G("ngForOf",e.sectionsToRender)}}function CoreCourseCourseIndexComponent_ng_template_13_ion_icon_1_Template(e,n){if(1&e){const e=C.RV6();C.j41(0,"ion-icon",21),C.nI1(1,"translate"),C.bIt("ariaButtonClick",(function CoreCourseCourseIndexComponent_ng_template_13_ion_icon_1_Template_ion_icon_ariaButtonClick_0_listener(n){C.eBV(e);const o=C.XpG().section,t=C.XpG();return C.Njj(t.toggleExpand(n,o))})),C.k0s()}if(2&e){const e=C.XpG().section;C.AVh("expandable-status-icon-expanded",e.expanded),C.BMQ("aria-label",C.bMT(1,5,e.expanded?"core.collapse":"core.expand"))("aria-expanded",e.expanded)("aria-controls","core-course-index-section-"+e.id)}}function CoreCourseCourseIndexComponent_ng_template_13_ion_icon_2_Template(e,n){1&e&&C.nrm(0,"ion-icon",22)}function CoreCourseCourseIndexComponent_ng_template_13_ion_badge_6_Template(e,n){if(1&e&&(C.j41(0,"ion-badge",2),C.EFF(1),C.k0s()),2&e){const e=C.XpG(2);C.R7$(),C.JRh(e.highlighted)}}function CoreCourseCourseIndexComponent_ng_template_13_ion_icon_7_Template(e,n){1&e&&(C.nrm(0,"ion-icon",23),C.nI1(1,"translate")),2&e&&C.BMQ("aria-label",C.bMT(1,1,"core.restricted"))}function CoreCourseCourseIndexComponent_ng_template_13_ion_icon_8_Template(e,n){1&e&&(C.nrm(0,"ion-icon",24),C.nI1(1,"translate")),2&e&&C.BMQ("aria-label",C.bMT(1,1,"core.notavailable"))}function CoreCourseCourseIndexComponent_ng_template_13_ion_icon_9_Template(e,n){1&e&&(C.nrm(0,"ion-icon",24),C.nI1(1,"translate")),2&e&&C.BMQ("aria-label",C.bMT(1,1,"core.course.hiddenfromstudents"))}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_1_ng_container_1_Template(e,n){1&e&&C.eu8(0)}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_1_Template(e,n){if(1&e&&(C.j41(0,"div",25),C.DNE(1,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_1_ng_container_1_Template,1,0,"ng-container",13),C.k0s()),2&e){const e=C.XpG().$implicit;C.XpG(3);const n=C.sdS(14);C.R7$(),C.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",C.eq3(2,_c0,e))}}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_1_Template(e,n){1&e&&C.nrm(0,"ion-icon",33)}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_2_Template(e,n){1&e&&(C.nrm(0,"ion-icon",34),C.nI1(1,"translate")),2&e&&C.BMQ("aria-label",C.bMT(1,1,"core.course.todo"))}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_3_Template(e,n){1&e&&(C.nrm(0,"ion-icon",35),C.nI1(1,"translate")),2&e&&C.BMQ("aria-label",C.bMT(1,1,"core.course.done"))}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_4_Template(e,n){1&e&&(C.nrm(0,"ion-icon",36),C.nI1(1,"translate")),2&e&&C.BMQ("aria-label",C.bMT(1,1,"core.course.failed"))}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_8_Template(e,n){1&e&&(C.nrm(0,"ion-icon",23),C.nI1(1,"translate")),2&e&&C.BMQ("aria-label",C.bMT(1,1,"core.restricted"))}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_Template(e,n){if(1&e){const e=C.RV6();C.j41(0,"ion-item",26),C.bIt("click",(function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_Template_ion_item_click_0_listener(n){C.eBV(e);const o=C.XpG().$implicit,t=C.XpG(2).section,i=C.XpG();return C.Njj(i.selectSectionOrModule(n,t.id,o.id))})),C.DNE(1,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_1_Template,1,0,"ion-icon",27)(2,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_2_Template,2,3,"ion-icon",28)(3,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_3_Template,2,3,"ion-icon",29)(4,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_4_Template,2,3,"ion-icon",30),C.j41(5,"ion-label")(6,"p",31),C.nrm(7,"core-format-text",32),C.k0s()(),C.DNE(8,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_ion_icon_8_Template,2,3,"ion-icon",18),C.k0s()}if(2&e){const e=C.XpG().$implicit,n=C.XpG(2).section;C.AVh("item-dimmed",!e.visible)("indented",e.indented)("item-hightlighted",n.highlighted),C.R7$(),C.Y8G("ngIf",void 0===e.completionStatus),C.R7$(),C.Y8G("ngIf",0===e.completionStatus),C.R7$(),C.Y8G("ngIf",1===e.completionStatus||2===e.completionStatus),C.R7$(),C.Y8G("ngIf",3===e.completionStatus),C.R7$(3),C.Y8G("text",e.name)("contextInstanceId",e.id)("courseId",e.course),C.R7$(),C.Y8G("ngIf",!e.uservisible)}}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Template(e,n){if(1&e&&(C.qex(0),C.DNE(1,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_1_Template,2,4,"div",25)(2,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Conditional_2_Template,9,14),C.bVm()),2&e){const e=n.$implicit,o=C.XpG(3);C.R7$(),C.vxM(1,o.isModule(e)?2:1)}}function CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_Template(e,n){if(1&e&&(C.qex(0),C.DNE(1,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_ng_container_1_Template,3,1,"ng-container",8),C.bVm()),2&e){const e=C.XpG().section;C.R7$(),C.Y8G("ngForOf",e.contents)}}function CoreCourseCourseIndexComponent_ng_template_13_Template(e,n){if(1&e){const e=C.RV6();C.j41(0,"ion-item",14),C.bIt("click",(function CoreCourseCourseIndexComponent_ng_template_13_Template_ion_item_click_0_listener(n){const o=C.eBV(e).section,t=C.XpG();return C.Njj(t.selectSectionOrModule(n,o.id))})),C.DNE(1,CoreCourseCourseIndexComponent_ng_template_13_ion_icon_1_Template,2,7,"ion-icon",15)(2,CoreCourseCourseIndexComponent_ng_template_13_ion_icon_2_Template,1,0,"ion-icon",16),C.j41(3,"ion-label")(4,"h2"),C.nrm(5,"core-format-text",12),C.k0s()(),C.DNE(6,CoreCourseCourseIndexComponent_ng_template_13_ion_badge_6_Template,2,1,"ion-badge",17)(7,CoreCourseCourseIndexComponent_ng_template_13_ion_icon_7_Template,2,3,"ion-icon",18)(8,CoreCourseCourseIndexComponent_ng_template_13_ion_icon_8_Template,2,3,"ion-icon",19)(9,CoreCourseCourseIndexComponent_ng_template_13_ion_icon_9_Template,2,3,"ion-icon",19),C.k0s(),C.j41(10,"div",20),C.DNE(11,CoreCourseCourseIndexComponent_ng_template_13_ng_container_11_Template,2,1,"ng-container",10),C.k0s()}if(2&e){const e=n.section,o=C.XpG();C.AVh("item-current",o.selectedId===e.id)("item-dimmed",!e.visible)("item-hightlighted",e.highlighted),C.Y8G("detail",!1),C.R7$(),C.Y8G("ngIf",e.hasVisibleModules),C.R7$(),C.Y8G("ngIf",!e.hasVisibleModules),C.R7$(3),C.Y8G("text",e.name)("contextInstanceId",null==o.course?null:o.course.id),C.R7$(),C.Y8G("ngIf",e.highlighted&&o.highlighted),C.R7$(),C.Y8G("ngIf",e.availabilityinfo),C.R7$(),C.Y8G("ngIf",!e.visible&&!e.uservisible),C.R7$(),C.Y8G("ngIf",!e.visible&&e.uservisible),C.R7$(),C.Mz_("id","core-course-index-section-",e.id,""),C.R7$(),C.Y8G("ngIf",e.expanded)}}let v=(()=>{var e;class CoreCourseCourseIndexComponent{constructor(e){this.elementRef=e,this.sections=[],this.allSectionId=u.CORE_COURSE_ALL_SECTIONS_ID,this.sectionsToRender=[],this.loaded=!1,this.isModule=r.sectionContentIsModule}ngOnInit(){var e=this;return(0,t.A)((function*(){if(!e.course||!e.sections)return e.closeModal(),void 0;let n=s.CoreCoursesHelper.isCompletionEnabledInCourse(e.course);n&&"completionusertracked"in e.course&&void 0!==e.course.completionusertracked&&(n=e.course.completionusertracked),n&&"showcompletionconditions"in e.course&&void 0!==e.course.showcompletionconditions&&(n=e.course.showcompletionconditions);const o=yield a.CoreCourseFormatDelegate.getCurrentSection(e.course,e.sections);void 0===e.selectedId&&(e.selectedId=o.section.id);const t=c.CoreSites.getRequiredCurrentSite(),i=yield r.CoreCourse.isCourseIndentationEnabled(t,e.course.id);e.sectionsToRender=e.sections.filter((e=>!_.CoreCourseHelper.isSectionStealth(e))).map((t=>e.mapSectionToRender(t,n,i,o))),e.highlighted=a.CoreCourseFormatDelegate.getSectionHightlightedName(e.course),yield l.H.wait(400),e.loaded=!0,yield l.H.nextTick(),m.y.scrollToElement(e.elementRef.nativeElement,".item.item-current",{addYAxis:-10})}))()}toggleExpand(e,n){n.expanded=!n.expanded,e.stopPropagation(),e.preventDefault()}closeModal(){d.W3.dismiss()}selectSectionOrModule(e,n,o){d.W3.dismiss({event:e,sectionId:n,moduleId:o})}renderModule(e,n){if(_.CoreCourseHelper.isModuleStealth(n,e))return!1;return!!c.CoreSites.getRequiredCurrentSite().isVersionGreaterEqualThan("4.2")||!n.noviewlink}mapSectionToRender(e,n,o,t){const i=e.contents.filter((n=>!(0,r.sectionContentIsModule)(n)||this.renderModule(e,n))).map((t=>{if(!(0,r.sectionContentIsModule)(t))return this.mapSectionToRender(t,n,o);const i=n?_.CoreCourseHelper.getCompletionStatus(t.completiondata):void 0;return{id:t.id,name:t.name,modname:t.modname,course:t.course,visible:!!t.visible,uservisible:_.CoreCourseHelper.canUserViewModule(t,e),indented:o&&t.indent>0,completionStatus:i}}));return{id:e.id,name:e.name,availabilityinfo:!!e.availabilityinfo,visible:!!e.visible,uservisible:_.CoreCourseHelper.canUserViewSection(e),expanded:e.id===this.selectedId,highlighted:(null==t?void 0:t.section.id)===e.id,hasVisibleModules:i.length>0,contents:i}}}return(e=CoreCourseCourseIndexComponent).ɵfac=function CoreCourseCourseIndexComponent_Factory(n){return new(n||e)(C.rXU(C.aKT))},e.ɵcmp=C.VBU({type:e,selectors:[["core-course-course-index"]],inputs:{sections:"sections",selectedId:"selectedId",course:"course"},standalone:!0,features:[C.aNF],decls:15,vars:8,consts:[["sectionTemplate",""],["id","core-course-section-selector-label"],["slot","end"],["fill","clear",3,"click","ariaLabel"],["slot","icon-only","name","fas-xmark","aria-hidden","true"],[3,"hideUntil"],["id","core-course-section-selector","role","listbox","aria-labelledby","core-course-section-selector-label",4,"ngIf"],["id","core-course-section-selector","role","listbox","aria-labelledby","core-course-section-selector-label"],[4,"ngFor","ngForOf"],["class","divider core-course-index-all","button","",3,"item-current","detail","click",4,"ngIf"],[4,"ngIf"],["button","",1,"divider","core-course-index-all",3,"click","detail"],["contextLevel","course",3,"text","contextInstanceId"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["button","",1,"divider","section",3,"click","detail"],["name","fas-chevron-right","flip-rtl","","slot","start","class","expandable-status-icon",3,"expandable-status-icon-expanded","ariaButtonClick",4,"ngIf"],["name","","slot","start","aria-hidden","true","class","expandable-status-icon",4,"ngIf"],["slot","end",4,"ngIf"],["name","fas-lock","slot","end","class","restricted",4,"ngIf"],["name","fas-eye-slash","slot","end","class","restricted",4,"ngIf"],[1,"core-course-index-section-content",3,"id"],["name","fas-chevron-right","flip-rtl","","slot","start",1,"expandable-status-icon",3,"ariaButtonClick"],["name","","slot","start","aria-hidden","true",1,"expandable-status-icon"],["name","fas-lock","slot","end",1,"restricted"],["name","fas-eye-slash","slot","end",1,"restricted"],[1,"core-course-index-subsection"],["button","",1,"module",3,"click"],["class","completioninfo completion_none","name","","slot","start","aria-hidden","true",4,"ngIf"],["class","completioninfo completion_incomplete","name","far-circle","slot","start",4,"ngIf"],["class","completioninfo completion_complete","name","fas-circle","color","success","slot","start",4,"ngIf"],["class","completioninfo completion_fail","name","fas-xmark","color","danger","slot","start",4,"ngIf"],[1,"item-heading"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["name","","slot","start","aria-hidden","true",1,"completioninfo","completion_none"],["name","far-circle","slot","start",1,"completioninfo","completion_incomplete"],["name","fas-circle","color","success","slot","start",1,"completioninfo","completion_complete"],["name","fas-xmark","color","danger","slot","start",1,"completioninfo","completion_fail"]],template:function CoreCourseCourseIndexComponent_Template(e,n){if(1&e){const e=C.RV6();C.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title")(3,"h1",1),C.EFF(4),C.nI1(5,"translate"),C.k0s()(),C.j41(6,"ion-buttons",2)(7,"ion-button",3),C.nI1(8,"translate"),C.bIt("click",(function CoreCourseCourseIndexComponent_Template_ion_button_click_7_listener(){return C.eBV(e),C.Njj(n.closeModal())})),C.nrm(9,"ion-icon",4),C.k0s()()()(),C.j41(10,"ion-content")(11,"core-loading",5),C.DNE(12,CoreCourseCourseIndexComponent_ion_list_12_Template,2,1,"ion-list",6),C.k0s()(),C.DNE(13,CoreCourseCourseIndexComponent_ng_template_13_Template,12,18,"ng-template",null,0,C.C5r)}2&e&&(C.R7$(4),C.JRh(C.bMT(5,4,"core.course.courseindex")),C.R7$(3),C.Y8G("ariaLabel",C.bMT(8,6,"core.close")),C.R7$(4),C.Y8G("hideUntil",n.loaded),C.R7$(),C.Y8G("ngIf",n.loaded))},dependencies:[i.n,p.Sq,p.bT,p.T3,g.R,x.t,I.B,f.a,b.i,h.T,T.In,T.Jm,T.QW,T.W9,T.eU,T.iq,T.uz,T.he,T.nf,T.BC,T.ai,M.D9],styles:["core-progress-bar[_ngcontent-%COMP%]{--bar-margin: 8px 0px 4px 0px;--line-height: 20px;--background: var(--contrast-background)}ion-item.item.core-course-index-all[_ngcontent-%COMP%]::part(native){--padding-start: 16px}ion-item.item.item-current[_ngcontent-%COMP%]{--background: var(--primary-tint);--color: var(--gray-900);border:0px}ion-item.item.item-hightlighted[_ngcontent-%COMP%]{border-inline-start:calc(var(--ion-safe-area-left) + var(--selected-item-border-width)) solid var(--selected-item-color)}ion-item.item.divider.section[_ngcontent-%COMP%]{--padding-start: 0px}ion-item.item.divider.section.item-current[_ngcontent-%COMP%]   ion-icon.expandable-status-icon[_ngcontent-%COMP%]{color:var(--primary-contrast)}ion-item.item.divider.section.item-current[_ngcontent-%COMP%]   ion-icon.expandable-status-icon[_ngcontent-%COMP%]:hover{background:var(--primary-shade);color:var(--gray-100)}ion-item.item.divider.section[_ngcontent-%COMP%]   ion-icon.expandable-status-icon[_ngcontent-%COMP%]{padding:13px;margin:3px;border-radius:50%}ion-item.item.divider.section[_ngcontent-%COMP%]   ion-icon.expandable-status-icon[_ngcontent-%COMP%]:hover{background:var(--secondary)}ion-item.item.divider.section.item-hightlighted[_ngcontent-%COMP%]   ion-icon.expandable-status-icon[_ngcontent-%COMP%]{margin-inline-start:-2px}ion-item.item.module[_ngcontent-%COMP%]::part(native){--padding-start: 0px}ion-item.item.module.item-hightlighted[_ngcontent-%COMP%]   ion-icon.completioninfo[_ngcontent-%COMP%]{padding-inline-start:11px}ion-item.item.module.indented[_ngcontent-%COMP%]{margin-inline-start:1rem}ion-item.item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;padding:12px 16px}ion-item.item[_ngcontent-%COMP%]   ion-icon.completioninfo[_ngcontent-%COMP%]{font-size:.625rem;width:18px}ion-item.item[_ngcontent-%COMP%]   ion-icon.restricted[_ngcontent-%COMP%]{font-size:var(--text-size)}ion-item.item[_ngcontent-%COMP%]   ion-icon[role=button][_ngcontent-%COMP%]{min-height:auto;min-width:auto}div.core-course-index-subsection[_ngcontent-%COMP%]{padding-inline-start:16px}"]}),CoreCourseCourseIndexComponent})()}}]);