"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7565],{52266:(e,n,t)=>{t.d(n,{Z:()=>CoreSwipeNavigationItemsManager});var r=t(10467),a=t(15324),o=t(95990);class CoreSwipeNavigationItemsManager extends o.u{start(){var e=this;return(0,r.A)((function*(){e.updateSelectedItem()}))()}navigateToNextItem(){var e=this;return(0,r.A)((function*(){yield e.navigateToItemBy(1,"forward")}))()}navigateToPreviousItem(){var e=this;return(0,r.A)((function*(){yield e.navigateToItemBy(-1,"back")}))()}hasNextItem(){var e=this;return(0,r.A)((function*(){return!!(yield e.getItemBy(1))}))()}hasPreviousItem(){var e=this;return(0,r.A)((function*(){return!!(yield e.getItemBy(-1))}))()}getCurrentPageRoute(){return a.CoreNavigator.getCurrentRoute()}getSelectedItemPathFromRoute(e){const n=[];for(;e&&(n.push(...a.CoreNavigator.getRouteUrl(e)),e.firstChild);)e=e.firstChild;return n.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}navigateToItemBy(e,n){var t=this;return(0,r.A)((function*(){const r=yield t.getItemBy(e);r&&(yield t.navigateToItem(r,{animationDirection:n,replace:!0}))}))()}getItemBy(e){var n=this;return(0,r.A)((function*(){var t;const r=n.getSource().getItems(),a=null!==(t=n.selectedItem&&(null==r?void 0:r.indexOf(n.selectedItem)))&&void 0!==t?t:-1;if(-1===a||null===r)return null;const o=e>0?1:-1;let i=a,_=0;for(;_!==e;){if(i+=o,i<0)return null;if(i>=r.length)break;n.skipItemInSwipe(r[i])||(_+=o)}return _===e?r[i]:n.getSource().isCompleted()?null:(yield n.getSource().load(),n.getItemBy(e))}))()}skipItemInSwipe(e){return!1}}},99891:(e,n,t)=>{t.d(n,{b:()=>CoreGradesCoursesSource});var r=t(10467),a=t(99522),o=t(27338),i=t(97383);class CoreGradesCoursesSource extends a.F{loadPageItems(){return(0,r.A)((function*(){const e=yield o.CoreGrades.getCoursesGrades();return{items:yield i.CoreGradesHelper.getGradesCourseData(e)}}))()}getItemPath(e){return e.courseid.toString()}}},27565:(e,n,t)=>{t.d(n,{i:()=>i});var r=t(3353),a=t(92790),o=t(54438);let i=(()=>{var e;class CoreGradesCoursePageModule{}return(e=CoreGradesCoursePageModule).ɵfac=function CoreGradesCoursePageModule_Factory(n){return new(n||e)},e.ɵmod=o.$C({type:e}),e.ɵinj=o.G2t({imports:[r.n]}),CoreGradesCoursePageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&o.Obh(i,{declarations:[a.y],imports:[r.n]}))},92790:(e,n,t)=>{t.d(n,{y:()=>F});var r=t(10467),a=t(89911),o=t(27338),i=t(97383),_=t(52749),s=t(55554),c=t(15324),d=t(93417),g=t(79555),l=t(52266),m=t(83696),u=t(32379),p=t(99891),C=t(82907),b=t(24742),f=t(22693),h=t(54438),G=t(21182),P=t(60177),v=t(16986),M=t(66198),I=t(64422),T=t(32572),w=t(10892),O=t(86198),$=t(58197),R=t(8199),x=t(28988),y=t(35407),k=t(88246),Y=t(73465),S=t(73955);function CoreGradesCoursePage_core_empty_box_13_Template(e,n){1&e&&(h.nrm(0,"core-empty-box",8),h.nI1(1,"translate")),2&e&&h.Y8G("message",h.bMT(1,1,"core.grades.nogradesreturned"))}function CoreGradesCoursePage_div_14_th_4_Template(e,n){if(1&e&&(h.j41(0,"th",14),h.EFF(1),h.nI1(2,"translate"),h.k0s()),2&e){const e=n.$implicit;h.AVh("ion-hide-md-down",e.hiddenPhone),h.FS9("id",e.name),h.BMQ("colspan",e.colspan),h.R7$(),h.SpI(" ",h.bMT(2,5,"core.grades."+e.name)," ")}}function CoreGradesCoursePage_div_14_ng_container_6_tr_1_Template(e,n){if(1&e&&(h.j41(0,"tr"),h.nrm(1,"td",18),h.k0s()),2&e){const e=h.XpG().$implicit;h.R7$(),h.BMQ("rowspan",e.rowspan)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_td_1_Template(e,n){if(1&e&&h.nrm(0,"td",27),2&e){const e=h.XpG(3).$implicit;h.BMQ("rowspan",e.rowspan)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ion_icon_3_Template(e,n){if(1&e&&h.nrm(0,"ion-icon",28),2&e){const e=h.XpG(3).$implicit;h.AVh("expandable-status-icon-expanded",e.expanded)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ion_icon_4_Template(e,n){if(1&e&&h.nrm(0,"ion-icon",29),2&e){const e=h.XpG(3).$implicit;h.FS9("name",e.icon),h.BMQ("aria-label",e.iconAlt)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_img_5_Template(e,n){if(1&e&&h.nrm(0,"img",30),2&e){const e=h.XpG(3).$implicit;h.Y8G("src",e.image,h.B4B)("alt",e.iconAlt)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_core_mod_icon_6_Template(e,n){if(1&e&&h.nrm(0,"core-mod-icon",31),2&e){const e=h.XpG(3).$implicit;h.Y8G("modicon",e.image)("modname",e.itemmodule)("colorize",!1)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_1_Template(e,n){if(1&e&&h.nrm(0,"td",26),2&e){const e=h.XpG().$implicit,n=h.XpG(4).$implicit;h.HbH("ion-text-start core-grades-table-"+e.name),h.AVh("ion-hide-md-down",e.hiddenPhone),h.Y8G("innerHTML",n[e.name],h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_2_Template(e,n){if(1&e&&(h.j41(0,"td",35),h.nrm(1,"core-format-text",36),h.k0s()),2&e){const e=h.XpG().$implicit,n=h.XpG(4).$implicit,t=h.XpG(2);h.AVh("ion-hide-md-down",e.hiddenPhone),h.R7$(),h.Y8G("text",n.feedback)("contextInstanceId",t.courseId)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_3_ion_icon_1_Template(e,n){if(1&e&&h.nrm(0,"ion-icon",38),2&e){const e=h.XpG(6).$implicit;h.Y8G("name",e.gradeIcon),h.BMQ("aria-label",e.gradeIconAlt)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_3_Template(e,n){if(1&e&&(h.j41(0,"td"),h.DNE(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_3_ion_icon_1_Template,1,2,"ion-icon",37),h.nrm(2,"span",26),h.k0s()),2&e){const e=h.XpG().$implicit,n=h.XpG(4).$implicit;h.ZvI("ion-text-start core-grades-table-grade ",n.gradeClass,""),h.AVh("ion-hide-md-down",e.hiddenPhone),h.R7$(),h.Y8G("ngIf",n.gradeIcon),h.R7$(),h.Y8G("innerHTML",n[e.name],h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_Template(e,n){if(1&e&&(h.qex(0),h.DNE(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_1_Template,1,5,"td",32)(2,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_2_Template,2,4,"td",33)(3,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_td_3_Template,3,7,"td",34),h.bVm()),2&e){const e=n.$implicit,t=h.XpG(4).$implicit;h.R7$(),h.Y8G("ngIf","gradeitem"!==e.name&&"feedback"!==e.name&&"grade"!==e.name&&void 0!==t[e.name]),h.R7$(),h.Y8G("ngIf","feedback"===e.name&&void 0!==t.feedback),h.R7$(),h.Y8G("ngIf","grade"===e.name)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_Template(e,n){if(1&e&&(h.qex(0),h.DNE(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_ng_container_1_Template,4,3,"ng-container",12),h.bVm()),2&e){const e=h.XpG(5);h.R7$(),h.Y8G("ngForOf",e.columns)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_Template(e,n){if(1&e&&(h.qex(0),h.DNE(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_td_1_Template,1,1,"td",20),h.j41(2,"th",21),h.DNE(3,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ion_icon_3_Template,1,2,"ion-icon",22)(4,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ion_icon_4_Template,1,2,"ion-icon",23)(5,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_img_5_Template,1,2,"img",24)(6,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_core_mod_icon_6_Template,1,3,"core-mod-icon",25),h.nrm(7,"span",26),h.k0s(),h.DNE(8,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_ng_container_8_Template,2,1,"ng-container",15),h.bVm()),2&e){const e=h.XpG(2).$implicit,n=h.XpG(2);h.R7$(),h.Y8G("ngIf","category"===e.itemtype),h.R7$(),h.BMQ("colspan",e.colspan),h.R7$(),h.Y8G("ngIf",e.expandable&&n.showSummary),h.R7$(),h.Y8G("ngIf",e.icon),h.R7$(),h.Y8G("ngIf",e.image&&!e.itemmodule),h.R7$(),h.Y8G("ngIf",e.image&&e.itemmodule),h.R7$(),h.Y8G("innerHTML",e.gradeitem,h.npT),h.R7$(),h.Y8G("ngIf","category"!==e.itemtype)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_2_Template(e,n){if(1&e){const e=h.RV6();h.j41(0,"tr",19),h.bIt("ariaButtonClick",(function CoreGradesCoursePage_div_14_ng_container_6_tr_2_Template_tr_ariaButtonClick_0_listener(){h.eBV(e);const n=h.XpG().$implicit,t=h.XpG(2);return h.Njj(n.expandable&&t.showSummary&&t.toggleRow(n))})),h.DNE(1,CoreGradesCoursePage_div_14_ng_container_6_tr_2_ng_container_1_Template,9,8,"ng-container",15),h.k0s()}if(2&e){const e=h.XpG().$implicit,n=h.XpG(2);h.HbH(e.rowclass),h.AVh("core-grades-grade-clickable",e.expandable&&n.showSummary),h.Y8G("id","grade-"+e.id),h.BMQ("role",e.expandable&&n.showSummary?"button row":"row")("tabindex",e.expandable&&n.showSummary&&0)("aria-expanded",e.expanded)("aria-label",n.rowAriaLabel(e))("aria-controls",e.detailsid),h.R7$(),h.Y8G("ngIf",e.itemtype)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_3_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"p",26),h.k0s()()),2&e){const e=h.XpG(2).$implicit;h.R7$(3),h.JRh(h.bMT(4,2,"core.grades.weight")),h.R7$(2),h.Y8G("innerHTML",e.weight,h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_4_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"p",26),h.k0s()()),2&e){const e=h.XpG(2).$implicit;h.R7$(3),h.JRh(h.bMT(4,2,"core.grades.grade")),h.R7$(2),h.Y8G("innerHTML",e.grade,h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_5_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"p",26),h.k0s()()),2&e){const e=h.XpG(2).$implicit;h.R7$(3),h.JRh(h.bMT(4,2,"core.grades.range")),h.R7$(2),h.Y8G("innerHTML",e.range,h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_6_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"p",26),h.k0s()()),2&e){const e=h.XpG(2).$implicit;h.R7$(3),h.JRh(h.bMT(4,2,"core.grades.percentage")),h.R7$(2),h.Y8G("innerHTML",e.percentage,h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_7_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"p",26),h.k0s()()),2&e){const e=h.XpG(2).$implicit;h.R7$(3),h.JRh(h.bMT(4,2,"core.grades.lettergrade")),h.R7$(2),h.Y8G("innerHTML",e.lettergrade,h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_8_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"p",26),h.k0s()()),2&e){const e=h.XpG(2).$implicit;h.R7$(3),h.JRh(h.bMT(4,2,"core.grades.rank")),h.R7$(2),h.Y8G("innerHTML",e.rank,h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_9_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"p",26),h.k0s()()),2&e){const e=h.XpG(2).$implicit;h.R7$(3),h.JRh(h.bMT(4,2,"core.grades.average")),h.R7$(2),h.Y8G("innerHTML",e.average,h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_10_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.j41(5,"p"),h.nrm(6,"core-format-text",36),h.k0s()()()),2&e){const e=h.XpG(2).$implicit,n=h.XpG(2);h.R7$(3),h.JRh(h.bMT(4,3,"core.grades.feedback")),h.R7$(3),h.Y8G("text",e.feedback)("contextInstanceId",n.courseId)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_11_Template(e,n){if(1&e&&(h.j41(0,"ion-item",41)(1,"ion-label")(2,"p",42),h.EFF(3),h.nI1(4,"translate"),h.k0s(),h.nrm(5,"p",26),h.k0s()()),2&e){const e=h.XpG(2).$implicit;h.R7$(3),h.JRh(h.bMT(4,2,"core.grades.contributiontocoursetotal")),h.R7$(2),h.Y8G("innerHTML",e.contributiontocoursetotal,h.npT)}}function CoreGradesCoursePage_div_14_ng_container_6_tr_3_Template(e,n){if(1&e&&(h.j41(0,"tr",39)(1,"td")(2,"ion-list"),h.DNE(3,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_3_Template,6,4,"ion-item",40)(4,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_4_Template,6,4,"ion-item",40)(5,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_5_Template,6,4,"ion-item",40)(6,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_6_Template,6,4,"ion-item",40)(7,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_7_Template,6,4,"ion-item",40)(8,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_8_Template,6,4,"ion-item",40)(9,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_9_Template,6,4,"ion-item",40)(10,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_10_Template,7,5,"ion-item",40)(11,CoreGradesCoursePage_div_14_ng_container_6_tr_3_ion_item_11_Template,6,4,"ion-item",40),h.k0s()()()),2&e){const e=h.XpG().$implicit,n=h.XpG(2);h.HbH(e.rowclass),h.Y8G("id",e.detailsid),h.R7$(),h.BMQ("colspan",n.totalColumnsSpan),h.R7$(2),h.Y8G("ngIf",e.weight),h.R7$(),h.Y8G("ngIf",e.grade),h.R7$(),h.Y8G("ngIf",e.range),h.R7$(),h.Y8G("ngIf",e.percentage),h.R7$(),h.Y8G("ngIf",e.lettergrade),h.R7$(),h.Y8G("ngIf",e.rank),h.R7$(),h.Y8G("ngIf",e.average),h.R7$(),h.Y8G("ngIf",e.feedback),h.R7$(),h.Y8G("ngIf",e.contributiontocoursetotal)}}function CoreGradesCoursePage_div_14_ng_container_6_Template(e,n){if(1&e&&(h.qex(0),h.DNE(1,CoreGradesCoursePage_div_14_ng_container_6_tr_1_Template,2,1,"tr",15)(2,CoreGradesCoursePage_div_14_ng_container_6_tr_2_Template,2,11,"tr",16)(3,CoreGradesCoursePage_div_14_ng_container_6_tr_3_Template,12,13,"tr",17),h.bVm()),2&e){const e=n.$implicit;h.R7$(),h.Y8G("ngIf","leader"===e.itemtype),h.R7$(),h.Y8G("ngIf","leader"!==e.itemtype),h.R7$(),h.Y8G("ngIf",e.expandable&&e.expanded)}}function CoreGradesCoursePage_div_14_Template(e,n){if(1&e){const e=h.RV6();h.j41(0,"div",9)(1,"table",10)(2,"thead")(3,"tr"),h.DNE(4,CoreGradesCoursePage_div_14_th_4_Template,3,7,"th",11),h.k0s()(),h.j41(5,"tbody"),h.DNE(6,CoreGradesCoursePage_div_14_ng_container_6_Template,4,3,"ng-container",12),h.nI1(7,"slice"),h.k0s()(),h.j41(8,"core-infinite-loading",13),h.bIt("action",(function CoreGradesCoursePage_div_14_Template_core_infinite_loading_action_8_listener(n){h.eBV(e);const t=h.XpG();return h.Njj(t.loadMore(n))})),h.k0s()()}if(2&e){const e=h.XpG();h.R7$(),h.AVh("summary",e.showSummary),h.R7$(3),h.Y8G("ngForOf",e.columns),h.R7$(2),h.Y8G("ngForOf",h.brH(7,5,e.rows,0,e.rowsOnView)),h.R7$(2),h.Y8G("enabled",e.rowsOnView<e.rows.length)}}let F=(()=>{var e;class CoreGradesCoursePage{constructor(e,n){this.route=e,this.element=n,this.columns=[],this.rows=[],this.rowsOnView=0,this.loaded=!1,this.logView=b.j.once((()=>this.performLogView()));try{var t,r,o,i;switch(this.courseId=c.CoreNavigator.getRequiredRouteNumberParam("courseId",{route:e}),this.userId=null!==(t=c.CoreNavigator.getRouteNumberParam("userId",{route:e}))&&void 0!==t?t:_.CoreSites.getCurrentSiteUserId(),this.gradeId=c.CoreNavigator.getRouteNumberParam("gradeId",{route:e}),this.expandLabel=g.HT.instant("core.expand"),this.collapseLabel=g.HT.instant("core.collapse"),this.useLegacyLayout=!_.CoreSites.getRequiredCurrentSite().isVersionGreaterEqualThan("4.1"),null!==(r=null===(o=e.snapshot)||void 0===o?void 0:o.data.swipeManagerSource)&&void 0!==r?r:null===(i=e.snapshot)||void 0===i||null===(i=i.parent)||void 0===i?void 0:i.data.swipeManagerSource){case"courses":this.swipeManager=new CoreGradesCourseCoursesSwipeManager(m.u.getOrCreateSource(p.b,[]));break;case"participants":{const e=c.CoreNavigator.getRouteParam("search");this.swipeManager=new CoreGradesCourseParticipantsSwipeManager(m.u.getOrCreateSource(u.u,[this.courseId,e]))}}}catch(e){return a.CoreDomUtils.showErrorModal(e),c.CoreNavigator.back(),void 0}}get showSummary(){return d.CoreScreen.isMobile||!!this.withinSplitView}ngAfterViewInit(){var e=this;return(0,r.A)((function*(){var n,t;e.withinSplitView=!(null===(n=e.element.nativeElement.parentElement)||void 0===n||!n.closest("core-split-view")),yield null===(t=e.swipeManager)||void 0===t?void 0:t.start(),yield e.fetchInitialGrades(),e.loaded=!0}))()}ngOnDestroy(){var e;null===(e=this.swipeManager)||void 0===e||e.destroy()}rowAriaLabel(e){if(!e.expandable||!this.showSummary)return;return`${e.expanded?this.collapseLabel:this.expandLabel} ${e.ariaLabel}`}toggleRow(e,n){var t;if(!this.rows||!this.columns)return;e.expanded=null!=n?n:!e.expanded;let r=this.columns.length+(null!==(t=e.colspan)&&void 0!==t?t:0);this.useLegacyLayout&&r--;for(let n=this.rows.indexOf(e)-1;n>=0;n--){const t=this.rows[n];!t.rowspan||!t.colspan||t.colspan!==r||!this.useLegacyLayout&&"leader"!==t.itemtype||this.useLegacyLayout&&t.expandable||(r++,t.rowspan+=e.expanded?1:-1)}}refreshGrades(e){var n=this;return(0,r.A)((function*(){yield s.g.ignoreErrors(o.CoreGrades.invalidateCourseGradesData(n.courseId,n.userId)),yield s.g.ignoreErrors(n.fetchGrades()),null==e||e.complete()}))()}fetchInitialGrades(){var e=this;return(0,r.A)((function*(){try{if(yield e.fetchGrades(),e.gradeId&&e.rows){const n=e.rows.find((n=>n.id==e.gradeId));n&&(e.toggleRow(n,!0),C.y.scrollToElement(e.element.nativeElement,"#grade-"+n.id),e.gradeId=void 0)}}catch(n){a.CoreDomUtils.showErrorModalDefault(n,"Error loading course"),e.columns=[],e.rows=[],e.rowsOnView=0}}))()}fetchGrades(){var e=this;return(0,r.A)((function*(){var n,t,r,a;const _=yield o.CoreGrades.getCourseGradesTable(e.courseId,e.userId),s=yield i.CoreGradesHelper.formatGradesTable(_);e.title=null!==(n=null!==(t=null===(r=e.swipeManager)||void 0===r?void 0:r.getPageTitle())&&void 0!==t?t:null===(a=s.rows[0])||void 0===a?void 0:a.gradeitem)&&void 0!==n?n:g.HT.instant("core.grades.grades"),e.columns=s.columns,e.rows=s.rows,e.rowsOnView=e.getRowsOnHeight(),e.totalColumnsSpan=s.columns.reduce(((e,n)=>e+n.colspan),0),e.logView()}))()}getRowsOnHeight(){return Math.floor(window.innerHeight/44)}loadMore(e){this.rowsOnView+=this.getRowsOnHeight(),e&&e()}performLogView(){var e=this;return(0,r.A)((function*(){var n;yield s.g.ignoreErrors(o.CoreGrades.logCourseGradesView(e.courseId,e.userId)),f.OF.logEvent({type:f.qr.VIEW_ITEM,ws:"gradereport_user_view_grade_report",name:null!==(n=e.title)&&void 0!==n?n:"",data:{id:e.courseId,userid:e.userId,category:"grades"},url:`/grade/report/user/index.php?id=${e.courseId}`+(e.userId!==_.CoreSites.getCurrentSiteUserId()?`&userid=${e.userId}`:"")})}))()}}return(e=CoreGradesCoursePage).ɵfac=function CoreGradesCoursePage_Factory(n){return new(n||e)(h.rXU(G.nX),h.rXU(h.aKT))},e.ɵcmp=h.VBU({type:e,selectors:[["page-core-grades-course"]],decls:15,vars:12,consts:[["slot","start"],[3,"text"],[3,"core-swipe-navigation"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],["icon","fas-chart-bar",3,"message",4,"ngIf"],["class","core-grades-container",4,"ngIf"],["icon","fas-chart-bar",3,"message"],[1,"core-grades-container"],[1,"core-table","core-grades-table"],["class","ion-text-start",3,"id","ion-hide-md-down",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"action","enabled"],[1,"ion-text-start",3,"id"],[4,"ngIf"],[3,"class","core-grades-grade-clickable","id","ariaButtonClick",4,"ngIf"],[3,"id","class",4,"ngIf"],[1,"core-grades-table-leader"],[3,"ariaButtonClick","id"],["class","core-grades-table-category",4,"ngIf"],[1,"core-grades-table-gradeitem","ion-text-start"],["aria-hidden","true","slot","start","name","fas-chevron-right","class","expandable-status-icon",3,"expandable-status-icon-expanded",4,"ngIf"],["slot","start",3,"name",4,"ngIf"],["slot","start","class","core-module-icon","core-external-content","",3,"src","alt",4,"ngIf"],["slot","start",3,"modicon","modname","colorize",4,"ngIf"],[3,"innerHTML"],[1,"core-grades-table-category"],["aria-hidden","true","slot","start","name","fas-chevron-right",1,"expandable-status-icon"],["slot","start",3,"name"],["slot","start","core-external-content","",1,"core-module-icon",3,"src","alt"],["slot","start",3,"modicon","modname","colorize"],[3,"class","ion-hide-md-down","innerHTML",4,"ngIf"],["class","ion-text-start core-grades-table-feedback",3,"ion-hide-md-down",4,"ngIf"],[3,"ion-hide-md-down","class",4,"ngIf"],[1,"ion-text-start","core-grades-table-feedback"],["collapsible-item","","contextLevel","course",3,"text","contextInstanceId"],[3,"name",4,"ngIf"],[3,"name"],[3,"id"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],[1,"item-heading"]],template:function CoreGradesCoursePage_Template(e,n){1&e&&(h.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),h.nrm(3,"ion-back-button",1),h.nI1(4,"translate"),h.k0s(),h.j41(5,"ion-title")(6,"h1"),h.EFF(7),h.k0s()()()(),h.j41(8,"ion-content",2)(9,"ion-refresher",3),h.bIt("ionRefresh",(function CoreGradesCoursePage_Template_ion_refresher_ionRefresh_9_listener(e){return n.refreshGrades(e.target)})),h.nrm(10,"ion-refresher-content",4),h.nI1(11,"translate"),h.k0s(),h.j41(12,"core-loading",5),h.DNE(13,CoreGradesCoursePage_core_empty_box_13_Template,2,3,"core-empty-box",6)(14,CoreGradesCoursePage_div_14_Template,9,9,"div",7),h.k0s()()),2&e&&(h.R7$(3),h.Y8G("text",h.bMT(4,8,"core.back")),h.R7$(4),h.JRh(n.title),h.R7$(),h.Y8G("core-swipe-navigation",n.swipeManager),h.R7$(),h.Y8G("disabled",!n.columns||!n.rows),h.R7$(),h.FS9("pullingText",h.bMT(11,10,"core.pulltorefresh")),h.R7$(2),h.Y8G("hideUntil",n.loaded),h.R7$(),h.Y8G("ngIf",!n.rows.length),h.R7$(),h.Y8G("ngIf",n.rows.length))},dependencies:[P.Sq,P.bT,v.h,M.b,I.R,T.I,w.l,O.t,$.B,R.a,x.n,y.K,k.i,Y.QW,Y.W9,Y.eU,Y.iq,Y.uz,Y.he,Y.nf,Y.To,Y.Ki,Y.BC,Y.ai,Y.el,P.P9,S.D9],styles:["[_nghost-%COMP%]{--icon-color: var(--gray-500);--core-table-border-color: var(--stroke)}:root.dark[_nghost-%COMP%], :root.dark   [_nghost-%COMP%]{--icon-color: var(--gray-200)}table.core-table.core-grades-table[_ngcontent-%COMP%]{width:100%;margin:0}table.core-table.core-grades-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   #gradeitem[_ngcontent-%COMP%]{padding-inline-start:24px}table.core-table.core-grades-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.core-bold[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:inherit}table.core-table.core-grades-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   #gradeitem[_ngcontent-%COMP%]{padding-inline-start:4px}table.core-table.core-grades-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.core-table.core-grades-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-inline-start:0px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;vertical-align:top}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]{padding-inline-start:4px}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem.column-itemname[_ngcontent-%COMP%]{padding-inline-start:0}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;height:16px}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   core-mod-icon[_ngcontent-%COMP%]{--module-icon-padding: 0px;--module-legacy-icon-padding: 0px;--module-icon-size: 16px;--module-legacy-icon-size: 16px}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--icon-color)}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-inline-start:4px}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   .expandable-status-icon[_ngcontent-%COMP%]{font-size:var(--text-size);margin-inline-start:0;margin-inline-end:2px;transition:transform .2s ease-in-out}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-gradeitem[_ngcontent-%COMP%]   .expandable-status-icon.expandable-status-icon-expanded[_ngcontent-%COMP%]{transform:var(--rotate-expandable)}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-feedback[_ngcontent-%COMP%]{padding-inline-start:4px}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-feedback[_ngcontent-%COMP%]   .no-overflow[_ngcontent-%COMP%]{overflow:auto}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-grade[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-inline-end:4px}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-table-leader[_ngcontent-%COMP%]{width:0}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]{cursor:pointer}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%], table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]:hover   th[_ngcontent-%COMP%], table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]:hover   th[aria-current=page][_ngcontent-%COMP%]{background-color:var(--cell-hover)}table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.core-table.core-grades-table[_ngcontent-%COMP%]   .core-grades-grade-clickable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:var(--a11y-sizing-minTargetSize);vertical-align:middle}table.core-table.core-grades-table[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%], table.core-table.core-grades-table[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){background-color:transparent}table.core-table.core-grades-table.summary[_ngcontent-%COMP%]   .ion-hide-md-down[_ngcontent-%COMP%]{display:none;opacity:0}@media (max-width: 767.98px){.core-grades-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.85em}}"]}),CoreGradesCoursePage})();class CoreGradesCourseCoursesSwipeManager extends l.Z{constructor(e){super(e)}getPageTitle(){const e=this.getSelectedItem();return null==e?void 0:e.courseFullName}}class CoreGradesCourseParticipantsSwipeManager extends l.Z{constructor(e){super(e)}getPageTitle(){const e=this.getSelectedItem();return null==e?void 0:e.fullname}getSelectedItemPathFromRoute(e){return c.CoreNavigator.getRouteParams(e).userId}}}}]);