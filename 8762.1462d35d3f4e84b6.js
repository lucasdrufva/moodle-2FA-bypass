"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8762],{88762:(e,o,t)=>{t.r(o),t.d(o,{default:()=>te});var r=t(3353),n=t(54438),s=t(21182),i=t(31249),a=t(69342),c=t(73932),u=t(10467),l=t(47142),d=t(14001),m=t(78765),p=t(49882),g=t(44682),_=t(94247),C=t(55554),h=t(15324),f=t(86123),b=t(89911),v=t(83219),P=t(55351),I=t(8756),M=t(52749),T=t(53794),y=t(60177),x=t(69502),w=t(17388),R=t(49234),O=t(10892),G=t(86198),N=t(58197),E=t(68273),D=t(43570),S=t(73465),k=t(73955);const L=["courseThumb"];function CoreCourseIndexPage_Conditional_9_Template(e,o){if(1&e){const e=n.RV6();n.j41(0,"ion-button",11),n.nI1(1,"translate"),n.bIt("click",(function CoreCourseIndexPage_Conditional_9_Template_ion_button_click_0_listener(){n.eBV(e);const o=n.XpG();return n.Njj(o.openCourseSummary())})),n.nrm(2,"ion-icon",12),n.k0s(),n.nrm(3,"core-context-menu")}2&e&&n.Y8G("ariaLabel",n.bMT(1,1,"core.course.coursesummary"))}function CoreCourseIndexPage_Conditional_10_Template(e,o){if(1&e){const e=n.RV6();n.j41(0,"core-context-menu")(1,"core-context-menu-item",13),n.nI1(2,"translate"),n.bIt("action",(function CoreCourseIndexPage_Conditional_10_Template_core_context_menu_item_action_1_listener(){n.eBV(e);const o=n.XpG();return n.Njj(o.openCourseSummary())})),n.k0s()()}2&e&&(n.R7$(),n.Y8G("priority",1)("content",n.bMT(2,2,"core.course.coursesummary")))}function CoreCourseIndexPage_ng_container_13_div_1_Template(e,o){1&e&&(n.j41(0,"div",15,0),n.nrm(2,"ion-icon",16),n.k0s())}function CoreCourseIndexPage_ng_container_13_ion_avatar_2_Template(e,o){if(1&e&&(n.j41(0,"ion-avatar",15),n.nrm(1,"img",17),n.k0s()),2&e){const e=n.XpG(2);n.R7$(),n.Y8G("url",e.course.courseimage)}}function CoreCourseIndexPage_ng_container_13_Template(e,o){if(1&e&&(n.qex(0),n.DNE(1,CoreCourseIndexPage_ng_container_13_div_1_Template,3,0,"div",14)(2,CoreCourseIndexPage_ng_container_13_ion_avatar_2_Template,2,1,"ion-avatar",14),n.bVm()),2&e){const e=n.XpG();n.R7$(),n.Y8G("ngIf",!e.course.courseimage),n.R7$(),n.Y8G("ngIf",e.course.courseimage)}}function CoreCourseIndexPage_div_17_Template(e,o){if(1&e&&(n.j41(0,"div",18),n.nrm(1,"core-progress-bar",19),n.k0s()),2&e){const e=n.XpG();n.R7$(),n.Y8G("progress",e.progress)}}let $=(()=>{var e;class CoreCourseIndexPage{constructor(e){this.route=e,this.title="",this.category="",this.tabs=[],this.loaded=!1,this.fullScreenEnabled=!1,this.currentPagePath="",this.sections=[],this.isGuest=!1,this.openModule=!0,this.contentsTab={page:f.CORE_COURSE_CONTENTS_PAGE_NAME,title:"core.course",pageParams:{}},this.selectTabObserver=p.z.on(p.z.SELECT_COURSE_TAB,(e=>{var o;if(e.name){if(this.tabs){const o=this.tabs.findIndex((o=>o.name==e.name));var t;if(o>=0)null===(t=this.tabsComponent)||void 0===t||t.selectByIndex(o)}}else e.sectionId&&(this.contentsTab.pageParams.sectionId=e.sectionId),void 0!==e.sectionNumber&&(this.contentsTab.pageParams.sectionNumber=e.sectionNumber),null===(o=this.tabsComponent)||void 0===o||o.selectByIndex(0)}));const o=M.CoreSites.getCurrentSiteId();this.progressObserver=p.z.on(f.CORE_COURSE_PROGRESS_UPDATED_EVENT,(e=>{this.course&&this.course.id===e.courseId&&"progress"in this.course&&(this.course.progress=e.progress,this.updateProgress())}),o),this.fullScreenObserver=p.z.on(p.z.FULL_SCREEN_CHANGED,(e=>{this.fullScreenEnabled=e.enabled}))}ngOnInit(){var e=this;return(0,u.A)((function*(){var o,t;const r=h.CoreNavigator.getRouteFullPath(e.route);h.CoreNavigator.increaseRouteDepth(r.replace(/(\/deep)+/,""));try{e.course=h.CoreNavigator.getRequiredRouteParam("course")}catch(o){return b.CoreDomUtils.showErrorModal(o),h.CoreNavigator.back(),e.loaded=!0,void 0}e.firstTabName=h.CoreNavigator.getRouteParam("selectedTab"),e.module=h.CoreNavigator.getRouteParam("module"),e.isGuest=null!==(o=h.CoreNavigator.getRouteBooleanParam("isGuest"))&&void 0!==o?o:!!e.course&&(yield _.CoreCourseHelper.courseUsesGuestAccessInfo(e.course.id)).guestAccess,e.modNavOptions=h.CoreNavigator.getRouteParam("modNavOptions"),e.openModule=null===(t=h.CoreNavigator.getRouteBooleanParam("openModule"))||void 0===t||t,e.currentPagePath=h.CoreNavigator.getCurrentPath(),e.contentsTab.page=I.$.concatenatePaths(e.currentPagePath,e.contentsTab.page),e.contentsTab.pageParams={course:e.course,sectionId:h.CoreNavigator.getRouteNumberParam("sectionId"),sectionNumber:h.CoreNavigator.getRouteNumberParam("sectionNumber"),blockInstanceId:h.CoreNavigator.getRouteNumberParam("blockInstanceId"),isGuest:e.isGuest},e.module&&(e.contentsTab.pageParams.moduleId=e.module.id,e.contentsTab.pageParams.sectionId||void 0!==e.contentsTab.pageParams.sectionNumber||(e.contentsTab.pageParams.sectionId=e.module.section)),e.tabs.push(e.contentsTab),e.loaded=!0,yield Promise.all([e.loadCourseHandlers(),e.loadBasinInfo()])}))()}tabSelected(){this.module&&this.course&&this.openModule&&(_.CoreCourseHelper.openModule(this.module,this.course.id,{sectionId:this.contentsTab.pageParams.sectionId,modNavOptions:this.modNavOptions}),delete this.module)}loadCourseHandlers(){var e=this;return(0,u.A)((function*(){if(!e.course)return;const o=yield m.CoreCourseOptionsDelegate.getHandlersToDisplay(e.course,!1,e.isGuest);let t;var r;(o.forEach(((o,r)=>{o.data.page=I.$.concatenatePaths(e.currentPagePath,o.data.page),o.data.pageParams=o.data.pageParams||{},e.firstTabName&&o.name==e.firstTabName&&(t=r+1)})),e.tabs=[...e.tabs,...o.map((e=>({...e.data,name:e.name})))],e.firstTabName=void 0,t)&&(yield T.H.nextTick(),null===(r=e.tabsComponent)||void 0===r||r.selectByIndex(t))}))()}loadBasinInfo(){var e=this;return(0,u.A)((function*(){e.course&&(e.title=d.CoreCourseFormatDelegate.getCourseTitle(e.course),yield e.setCourseColor(),e.updateProgress(),e.sections=yield C.g.ignoreErrors(g.CoreCourse.getSections(e.course.id,!1,!0),[]),e.sections&&(e.title=d.CoreCourseFormatDelegate.getCourseTitle(e.course,e.sections)))}))()}ngOnDestroy(){var e,o,t;const r=h.CoreNavigator.getRouteFullPath(this.route);h.CoreNavigator.decreaseRouteDepth(r.replace(/(\/deep)+/,"")),null===(e=this.selectTabObserver)||void 0===e||e.off(),null===(o=this.progressObserver)||void 0===o||o.off(),null===(t=this.fullScreenObserver)||void 0===t||t.off()}ionViewDidEnter(){var e;null===(e=this.tabsComponent)||void 0===e||e.ionViewDidEnter()}ionViewDidLeave(){var e;null===(e=this.tabsComponent)||void 0===e||e.ionViewDidLeave()}openCourseSummary(){this.course&&_.CoreCourseHelper.openCourseSummary(this.course)}updateProgress(){if(!this.course||!("progress"in this.course)||"number"!=typeof this.course.progress||this.course.progress<0||!1===this.course.completionusertracked)return this.progress=void 0,void 0;this.progress=this.course.progress}setCourseColor(){var e=this;return(0,u.A)((function*(){if(e.course&&(yield v.CoreCoursesHelper.loadCourseColorAndImage(e.course),e.courseThumb))if(e.course.color){e.courseThumb.nativeElement.style.setProperty("--course-color",e.course.color);const o=P.a.lighter(e.course.color,50);e.courseThumb.nativeElement.style.setProperty("--course-color-tint",o)}else void 0!==e.course.colorNumber&&e.courseThumb.nativeElement.classList.add("course-color-"+e.course.colorNumber)}))()}}return(e=CoreCourseIndexPage).ɵfac=function CoreCourseIndexPage_Factory(o){return new(o||e)(n.rXU(s.nX))},e.ɵcmp=n.VBU({type:e,selectors:[["page-core-course-index"]],viewQuery:function CoreCourseIndexPage_Query(e,o){if(1&e&&(n.GBs(l.k,5),n.GBs(L,5)),2&e){let e;n.mGM(e=n.lsd())&&(o.tabsComponent=e.first),n.mGM(e=n.lsd())&&(o.courseThumb=e.first)}},decls:19,vars:13,consts:[["courseThumb",""],[3,"collapsible"],["slot","start"],[3,"text"],["contextLevel","course",3,"text","contextInstanceId"],["slot","end"],[1,"core-course-header"],["collapsible","",1,"core-format-progress-list","ion-text-wrap","list-item-limited-width"],[4,"ngIf"],["class","core-course-progress",4,"ngIf"],[3,"ionChange","tabs","hideUntil"],["fill","clear",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-graduation-cap",3,"action","priority","content"],["slot","start","class","core-course-thumb",4,"ngIf"],["slot","start",1,"core-course-thumb"],["name","fas-graduation-cap","aria-hidden","true",1,"course-icon"],["core-external-content","","alt","",3,"url"],[1,"core-course-progress"],["a11yText","core.course.aria:sectionprogress",3,"progress"]],template:function CoreCourseIndexPage_Template(e,o){1&e&&(n.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),n.nrm(3,"ion-back-button",3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-title")(6,"h1"),n.nrm(7,"core-format-text",4),n.k0s()(),n.j41(8,"ion-buttons",5),n.DNE(9,CoreCourseIndexPage_Conditional_9_Template,4,3)(10,CoreCourseIndexPage_Conditional_10_Template,3,4),n.k0s()()(),n.j41(11,"div",6)(12,"ion-item",7),n.DNE(13,CoreCourseIndexPage_ng_container_13_Template,3,2,"ng-container",8),n.j41(14,"ion-label")(15,"h1"),n.nrm(16,"core-format-text",4),n.k0s(),n.DNE(17,CoreCourseIndexPage_div_17_Template,2,1,"div",9),n.k0s()()(),n.j41(18,"core-tabs-outlet",10),n.bIt("ionChange",(function CoreCourseIndexPage_Template_core_tabs_outlet_ionChange_18_listener(){return o.tabSelected()})),n.k0s()),2&e&&(n.Y8G("collapsible",(0===(null==o.tabsComponent?null:o.tabsComponent.selectedIndex)||void 0===(null==o.tabsComponent?null:o.tabsComponent.selectedIndex))&&!o.fullScreenEnabled),n.R7$(3),n.Y8G("text",n.bMT(4,11,"core.back")),n.R7$(4),n.Y8G("text",o.title)("contextInstanceId",null==o.course?null:o.course.id),n.R7$(2),n.vxM(9,"singleactivity"!==(null==o.course?null:o.course.format)?9:10),n.R7$(4),n.Y8G("ngIf",o.course),n.R7$(3),n.Y8G("text",o.title)("contextInstanceId",null==o.course?null:o.course.id),n.R7$(),n.Y8G("ngIf",void 0!==o.progress),n.R7$(),n.Y8G("tabs",o.tabs)("hideUntil",o.loaded))},dependencies:[y.bT,x.B,w.Q,R.z,l.k,O.l,G.t,N.B,E.M,D.T,S.mC,S.Jm,S.QW,S.eU,S.iq,S.uz,S.he,S.BC,S.ai,S.el,k.D9],styles:['[_nghost-%COMP%]   .core-format-progress-list[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .core-course-thumb[_ngcontent-%COMP%]{height:var(--core-courseimage-on-course-size);min-height:var(--core-courseimage-on-course-size);width:var(--core-courseimage-on-course-size);min-width:var(--core-courseimage-on-course-size);--border-radius: var(--core-courseimage-radius);margin-inline-start:0px;margin-inline-end:16px;margin-top:8px;margin-bottom:8px}[_nghost-%COMP%]   .core-course-thumb.course-color-0[_ngcontent-%COMP%]{--course-color: var(--core-course-color-0);--course-color-tint: var(--core-course-color-0-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-1[_ngcontent-%COMP%]{--course-color: var(--core-course-color-1);--course-color-tint: var(--core-course-color-1-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-2[_ngcontent-%COMP%]{--course-color: var(--core-course-color-2);--course-color-tint: var(--core-course-color-2-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-3[_ngcontent-%COMP%]{--course-color: var(--core-course-color-3);--course-color-tint: var(--core-course-color-3-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-4[_ngcontent-%COMP%]{--course-color: var(--core-course-color-4);--course-color-tint: var(--core-course-color-4-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-5[_ngcontent-%COMP%]{--course-color: var(--core-course-color-5);--course-color-tint: var(--core-course-color-5-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-6[_ngcontent-%COMP%]{--course-color: var(--core-course-color-6);--course-color-tint: var(--core-course-color-6-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-7[_ngcontent-%COMP%]{--course-color: var(--core-course-color-7);--course-color-tint: var(--core-course-color-7-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-8[_ngcontent-%COMP%]{--course-color: var(--core-course-color-8);--course-color-tint: var(--core-course-color-8-tint)}[_nghost-%COMP%]   .core-course-thumb.course-color-9[_ngcontent-%COMP%]{--course-color: var(--core-course-color-9);--course-color-tint: var(--core-course-color-9-tint)}[_nghost-%COMP%]   .core-course-thumb[_ngcontent-%COMP%]   ion-icon.course-icon[_ngcontent-%COMP%]{padding:12px;font-size:calc(var(--core-courseimage-on-course-size) - 24px);border-radius:var(--border-radius);color:var(--course-color-tint);background:var(--course-color, transparent)}[_nghost-%COMP%]   .core-course-thumb[_ngcontent-%COMP%]   img[src$=".svg"][_ngcontent-%COMP%]{min-width:100%}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--mdl-typography-heading4-fontSize)}[_nghost-%COMP%]   .core-course-header[_ngcontent-%COMP%]{background:var(--ion-item-background)}']}),CoreCourseIndexPage})();var Y=t(97086),A=t(74431),j=t(24742),B=t(22693),U=t(16986),F=t(66198),H=t(64422),V=t(88246),z=t(98054);const list_mod_type_c0=e=>({section:e});function CoreCourseListModTypePage_core_empty_box_13_Template(e,o){1&e&&(n.nrm(0,"core-empty-box",11),n.nI1(1,"translate")),2&e&&n.Y8G("message",n.bMT(1,1,"core.course.nocontentavailable"))}function CoreCourseListModTypePage_ng_container_15_ng_container_1_ng_container_1_Template(e,o){1&e&&n.eu8(0)}function CoreCourseListModTypePage_ng_container_15_ng_container_1_Template(e,o){if(1&e&&(n.qex(0),n.DNE(1,CoreCourseListModTypePage_ng_container_15_ng_container_1_ng_container_1_Template,1,0,"ng-container",13),n.bVm()),2&e){const e=n.XpG().$implicit;n.XpG();const o=n.sdS(18);n.R7$(),n.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",n.eq3(2,list_mod_type_c0,e))}}function CoreCourseListModTypePage_ng_container_15_Template(e,o){if(1&e&&(n.qex(0),n.DNE(1,CoreCourseListModTypePage_ng_container_15_ng_container_1_Template,2,4,"ng-container",12),n.bVm()),2&e){const e=o.index,t=n.XpG();n.R7$(),n.Y8G("ngIf",e<=t.lastShownSectionIndex)}}function CoreCourseListModTypePage_ng_template_17_ion_item_divider_1_Template(e,o){if(1&e&&(n.j41(0,"ion-item-divider",15)(1,"ion-label")(2,"h2"),n.nrm(3,"core-format-text",16),n.k0s()()()),2&e){const e=n.XpG().section,o=n.XpG();n.R7$(3),n.Y8G("text",e.name)("contextInstanceId",o.courseId)}}function CoreCourseListModTypePage_ng_template_17_ng_container_2_Conditional_1_Template(e,o){if(1&e&&n.nrm(0,"core-course-module",17),2&e){const e=n.XpG().$implicit,o=n.XpG().section;n.Y8G("module",e)("section",o)("showActivityDates",!1)("showAvailability",!1)("showExtra",!1)("showDownloadStatus",!1)("showCompletion",!1)("showIndentation",!1)}}function CoreCourseListModTypePage_ng_template_17_ng_container_2_Conditional_2_ng_container_0_Template(e,o){1&e&&n.eu8(0)}function CoreCourseListModTypePage_ng_template_17_ng_container_2_Conditional_2_Template(e,o){if(1&e&&n.DNE(0,CoreCourseListModTypePage_ng_template_17_ng_container_2_Conditional_2_ng_container_0_Template,1,0,"ng-container",13),2&e){const e=n.XpG().$implicit;n.XpG(2);const o=n.sdS(18);n.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",n.eq3(2,list_mod_type_c0,e))}}function CoreCourseListModTypePage_ng_template_17_ng_container_2_Template(e,o){if(1&e&&(n.qex(0),n.DNE(1,CoreCourseListModTypePage_ng_template_17_ng_container_2_Conditional_1_Template,1,8,"core-course-module",17)(2,CoreCourseListModTypePage_ng_template_17_ng_container_2_Conditional_2_Template,1,4),n.bVm()),2&e){const e=o.$implicit,t=n.XpG(2);n.R7$(),n.vxM(1,t.isModule(e)?1:2)}}function CoreCourseListModTypePage_ng_template_17_Template(e,o){if(1&e&&(n.j41(0,"ion-card"),n.DNE(1,CoreCourseListModTypePage_ng_template_17_ion_item_divider_1_Template,4,2,"ion-item-divider",14)(2,CoreCourseListModTypePage_ng_template_17_ng_container_2_Template,3,1,"ng-container",9),n.k0s()),2&e){const e=o.section;n.R7$(),n.Y8G("ngIf",e.name),n.R7$(),n.Y8G("ngForOf",e.contents)}}let X=(()=>{var e;class CoreCourseListModTypePage{constructor(){var e=this;this.sections=[],this.title="",this.loaded=!1,this.courseId=0,this.canLoadMore=!1,this.lastShownSectionIndex=-1,this.isModule=g.sectionContentIsModule,this.archetypes={},this.logView=j.j.once((0,u.A)((function*(){e.modName&&B.OF.logEvent({type:B.qr.VIEW_ITEM_LIST,ws:"core_course_get_contents",name:e.title,data:{category:e.modName},url:("resources"===e.modName?"/course/resources.php":`/mod/${e.modName}/index.php`)+`?id=${e.courseId}`})})))}ngOnInit(){var e=this;return(0,u.A)((function*(){try{e.title=h.CoreNavigator.getRouteParam("title")||"",e.courseId=h.CoreNavigator.getRequiredRouteParam("courseId"),e.modName=h.CoreNavigator.getRequiredRouteParam("modName")}catch(e){return b.CoreDomUtils.showErrorModal(e),h.CoreNavigator.back(),void 0}try{yield e.fetchData()}finally{e.loaded=!0}}))()}fetchData(){var e=this;return(0,u.A)((function*(){if(e.courseId)try{let o=yield g.CoreCourse.getSections(e.courseId,!1,!0);o=e.filterSectionsAndContents(o);const t=yield _.CoreCourseHelper.addHandlerDataForModules(o,e.courseId);e.sections=t.sections,e.lastShownSectionIndex=-1,e.showMoreActivities()}catch(e){b.CoreDomUtils.showErrorModalDefault(e,"Error getting data")}}))()}filterSectionsAndContents(e){return e.filter((e=>!(!e.contents.length||e.hiddenbynumsections)&&(e.contents=e.contents.filter((o=>{if(!(0,g.sectionContentIsModule)(o)){return!!this.filterSectionsAndContents([o]).length}if(!_.CoreCourseHelper.canUserViewModule(o,e)||!g.CoreCourse.moduleHasView(o)||0===o.visibleoncoursepage)return!1;if("resources"===this.modName){if(void 0===this.archetypes[o.modname]&&(this.archetypes[o.modname]=Y.CoreCourseModuleDelegate.supportsFeature(o.modname,A.CoreConstants.FEATURE_MOD_ARCHETYPE,A.CoreConstants.MOD_ARCHETYPE_OTHER)),this.archetypes[o.modname]===A.CoreConstants.MOD_ARCHETYPE_RESOURCE)return!0}else if(o.modname===this.modName)return!0})),e.contents.length>0)))}showMoreActivities(e){let o=0;for(;this.lastShownSectionIndex<this.sections.length-1&&o<CoreCourseListModTypePage.PAGE_LENGTH;){this.lastShownSectionIndex++;o+=g.CoreCourse.getSectionsModules([this.sections[this.lastShownSectionIndex]]).length}this.canLoadMore=this.lastShownSectionIndex<this.sections.length-1,null==e||e()}refreshData(e){var o=this;return(0,u.A)((function*(){yield C.g.ignoreErrors(g.CoreCourse.invalidateSections(o.courseId));try{yield o.fetchData()}finally{e.complete()}}))()}}return(e=CoreCourseListModTypePage).PAGE_LENGTH=10,e.ɵfac=function CoreCourseListModTypePage_Factory(o){return new(o||e)},e.ɵcmp=n.VBU({type:e,selectors:[["page-core-course-list-mod-type"]],decls:19,vars:12,consts:[["sectionTemplate",""],["slot","start"],[3,"text"],[1,"limited-width"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],["icon","fas-box-open",3,"message",4,"ngIf"],[1,"core-course-module-list-wrapper"],[4,"ngFor","ngForOf"],[3,"action","enabled"],["icon","fas-box-open",3,"message"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","course-section ion-text-wrap",4,"ngIf"],[1,"course-section","ion-text-wrap"],["contextLevel","course",3,"text","contextInstanceId"],[3,"module","section","showActivityDates","showAvailability","showExtra","showDownloadStatus","showCompletion","showIndentation"]],template:function CoreCourseListModTypePage_Template(e,o){if(1&e){const e=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-title")(6,"h1"),n.EFF(7),n.k0s()()()(),n.j41(8,"ion-content",3)(9,"ion-refresher",4),n.bIt("ionRefresh",(function CoreCourseListModTypePage_Template_ion_refresher_ionRefresh_9_listener(t){return n.eBV(e),n.Njj(o.refreshData(t.target))})),n.nrm(10,"ion-refresher-content",5),n.nI1(11,"translate"),n.k0s(),n.j41(12,"core-loading",6),n.DNE(13,CoreCourseListModTypePage_core_empty_box_13_Template,2,3,"core-empty-box",7),n.j41(14,"ion-list",8),n.DNE(15,CoreCourseListModTypePage_ng_container_15_Template,2,1,"ng-container",9),n.k0s(),n.j41(16,"core-infinite-loading",10),n.bIt("action",(function CoreCourseListModTypePage_Template_core_infinite_loading_action_16_listener(t){return n.eBV(e),n.Njj(o.showMoreActivities(t))})),n.k0s()()(),n.DNE(17,CoreCourseListModTypePage_ng_template_17_Template,3,2,"ng-template",null,0,n.C5r)}2&e&&(n.R7$(3),n.Y8G("text",n.bMT(4,8,"core.back")),n.R7$(4),n.JRh(o.title),n.R7$(2),n.Y8G("disabled",!o.loaded),n.R7$(),n.FS9("pullingText",n.bMT(11,10,"core.pulltorefresh")),n.R7$(2),n.Y8G("hideUntil",o.loaded),n.R7$(),n.Y8G("ngIf",!o.sections||!o.sections.length),n.R7$(2),n.Y8G("ngForOf",o.sections),n.R7$(),n.Y8G("enabled",o.canLoadMore))},dependencies:[y.Sq,y.bT,y.T3,U.h,F.b,H.R,N.B,V.i,S.QW,S.b_,S.W9,S.eU,S.Dg,S.he,S.nf,S.To,S.Ki,S.BC,S.ai,S.el,z.c,k.D9],styles:["core-course-module[_ngcontent-%COMP%]:last-child{--activity-border: 0px;--card-padding-bottom: 0px}"]}),CoreCourseListModTypePage})();var q=t(6319),W=t(81690),Q=t(23007),J=t(66731),K=t(6736),Z=t(39218),ee=t(30864);function CoreCourseModulePreviewPage_ion_button_9_Template(e,o){if(1&e&&(n.j41(0,"ion-button",18),n.nI1(1,"translate"),n.nrm(2,"ion-icon",19),n.k0s()),2&e){const e=n.XpG();n.Y8G("href",e.module.url)("showBrowserWarning",!1)("ariaLabel",n.bMT(1,3,"core.openinbrowser"))}}function CoreCourseModulePreviewPage_p_20_Template(e,o){if(1&e&&n.nrm(0,"p",20),2&e){const e=n.XpG();n.Y8G("innerHTML",null==e.module.handlerData?null:e.module.handlerData.extraBadge,n.npT)}}function CoreCourseModulePreviewPage_ion_badge_21_Template(e,o){1&e&&(n.j41(0,"ion-badge",21),n.nrm(1,"ion-icon",22),n.EFF(2),n.nI1(3,"translate"),n.k0s()),2&e&&(n.R7$(2),n.SpI(" ",n.bMT(3,1,"core.course.hiddenfromstudents")," "))}function CoreCourseModulePreviewPage_ion_badge_22_Template(e,o){1&e&&(n.j41(0,"ion-badge",21),n.nrm(1,"ion-icon",23),n.EFF(2),n.nI1(3,"translate"),n.k0s()),2&e&&(n.R7$(2),n.SpI(" ",n.bMT(3,1,"core.course.hiddenoncoursepage")," "))}function CoreCourseModulePreviewPage_core_course_unsupported_module_23_Template(e,o){if(1&e&&n.nrm(0,"core-course-unsupported-module",24),2&e){const e=n.XpG();n.Y8G("module",e.module)}}let oe=(()=>{var e;class CoreCourseModulePreviewPage{constructor(){this.loaded=!1,this.unsupported=!1,this.isDisabledInSite=!1,this.showManualCompletion=!1,this.displayOpenInBrowser=!1}ngOnInit(){var e=this;return(0,u.A)((function*(){var o;try{e.module=h.CoreNavigator.getRequiredRouteParam("module"),e.courseId=h.CoreNavigator.getRequiredRouteNumberParam("courseId")}catch(e){return b.CoreDomUtils.showErrorModal(e),h.CoreNavigator.back(),void 0}e.displayOpenInBrowser=!(null===(o=M.CoreSites.getCurrentSite())||void 0===o||!o.shouldDisplayInformativeLinks()),e.debouncedUpdateModule=W.j.debounce((()=>{e.doRefresh()}),1e4),yield e.fetchModule()}))()}fetchModule(e=!1){var o=this;return(0,u.A)((function*(){e&&(o.module=yield g.CoreCourse.getModule(o.module.id,o.courseId)),yield _.CoreCourseHelper.loadModuleOfflineCompletion(o.courseId,o.module),o.unsupported=!Y.CoreCourseModuleDelegate.getHandlerName(o.module.modname),o.unsupported?o.isDisabledInSite=Y.CoreCourseModuleDelegate.isModuleDisabledInSite(o.module.modname):o.module.handlerData=yield Y.CoreCourseModuleDelegate.getModuleDataFor(o.module.modname,o.module,o.courseId),o.title=o.module.name,o.showManualCompletion=yield Y.CoreCourseModuleDelegate.manualCompletionAlwaysShown(o.module),o.loaded=!0}))()}openModuleSummary(){var e=this;return(0,u.A)((function*(){if(!e.module)return;const{CoreCourseModuleSummaryComponent:o}=yield t.e(8536).then(t.bind(t,68536)),r=yield q.I.openSideModal({component:o,componentProps:{moduleId:e.module.id,module:e.module,description:e.module.description,component:e.module.modname,courseId:e.courseId,displayOptions:{displayDescription:!1,displayBlog:!1}}});if(r&&e.loaded&&"refresh"==r.action){e.loaded=!1;try{yield e.doRefresh(void 0)}finally{e.loaded=!0}}}))()}doRefresh(e){var o=this;return(0,u.A)((function*(){yield g.CoreCourse.invalidateModule(o.module.id),o.fetchModule(!0),null==e||e.complete()}))()}onCompletionChange(){var e=this;return(0,u.A)((function*(){var o;null===(o=e.debouncedUpdateModule)||void 0===o||o.call(e)}))()}}return(e=CoreCourseModulePreviewPage).ɵfac=function CoreCourseModulePreviewPage_Factory(o){return new(o||e)},e.ɵcmp=n.VBU({type:e,selectors:[["page-core-course-module-preview"]],decls:25,vars:30,consts:[["collapsible",""],["slot","start"],[3,"text"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["slot","end"],["fill","clear","core-link","",3,"href","showBrowserWarning","ariaLabel",4,"ngIf"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],[1,"limited-width"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[1,"has-spacer",3,"hideUntil"],[3,"completionChanged","module","courseId","description","component","componentId","expandDescription","showAvailabilityInfo","showManualCompletion"],[1,"core-module-additional-info"],["class","ion-text-wrap",3,"innerHTML",4,"ngIf"],["color","secondary","class","ion-text-wrap",4,"ngIf"],[3,"module",4,"ngIf"],["collapsible-footer","","appearOnBottom","",3,"hidden","courseId","currentModuleId"],["fill","clear","core-link","",3,"href","showBrowserWarning","ariaLabel"],["name","fas-up-right-from-square","slot","icon-only","aria-hidden","true"],[1,"ion-text-wrap",3,"innerHTML"],["color","secondary",1,"ion-text-wrap"],["name","far-eye-slash","aria-hidden","true"],["name","fas-eye-low-vision","aria-hidden","true"],[3,"module"]],template:function CoreCourseModulePreviewPage_Template(e,o){1&e&&(n.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-title")(6,"h1"),n.nrm(7,"core-format-text",3),n.k0s()(),n.j41(8,"ion-buttons",4),n.DNE(9,CoreCourseModulePreviewPage_ion_button_9_Template,3,5,"ion-button",5),n.j41(10,"ion-button",6),n.nI1(11,"translate"),n.bIt("click",(function CoreCourseModulePreviewPage_Template_ion_button_click_10_listener(){return o.openModuleSummary()})),n.nrm(12,"ion-icon",7),n.k0s()()()(),n.j41(13,"ion-content",8)(14,"ion-refresher",9),n.bIt("ionRefresh",(function CoreCourseModulePreviewPage_Template_ion_refresher_ionRefresh_14_listener(e){return o.doRefresh(e.target)})),n.nrm(15,"ion-refresher-content",10),n.nI1(16,"translate"),n.k0s(),n.j41(17,"core-loading",11)(18,"core-course-module-info",12),n.bIt("completionChanged",(function CoreCourseModulePreviewPage_Template_core_course_module_info_completionChanged_18_listener(){return o.onCompletionChange()})),n.j41(19,"div",13),n.DNE(20,CoreCourseModulePreviewPage_p_20_Template,1,1,"p",14)(21,CoreCourseModulePreviewPage_ion_badge_21_Template,4,3,"ion-badge",15)(22,CoreCourseModulePreviewPage_ion_badge_22_Template,4,3,"ion-badge",15),n.k0s()(),n.DNE(23,CoreCourseModulePreviewPage_core_course_unsupported_module_23_Template,1,1,"core-course-unsupported-module",16),n.k0s(),n.nrm(24,"core-course-module-navigation",17),n.k0s()),2&e&&(n.R7$(3),n.Y8G("text",n.bMT(4,24,"core.back")),n.R7$(4),n.Y8G("text",o.title)("contextInstanceId",o.module.id)("courseId",o.courseId),n.R7$(2),n.Y8G("ngIf",o.displayOpenInBrowser&&o.module.url&&o.module.uservisible&&!o.unsupported),n.R7$(),n.Y8G("ariaLabel",n.bMT(11,26,"core.info")),n.R7$(4),n.Y8G("disabled",!o.loaded),n.R7$(),n.FS9("pullingText",n.bMT(16,28,"core.pulltorefresh")),n.R7$(2),n.Y8G("hideUntil",o.loaded),n.R7$(),n.Y8G("module",o.module)("courseId",o.courseId)("description",o.module.description)("component",o.module.modname)("componentId",o.module.id)("expandDescription",!0)("showAvailabilityInfo",!0)("showManualCompletion",o.showManualCompletion),n.R7$(2),n.Y8G("ngIf",null==o.module.handlerData?null:o.module.handlerData.extraBadge),n.R7$(),n.Y8G("ngIf",0===o.module.visible),n.R7$(),n.Y8G("ngIf",0!==o.module.visible&&o.module.isStealth),n.R7$(),n.Y8G("ngIf",o.unsupported),n.R7$(),n.Y8G("hidden",!o.loaded)("courseId",o.courseId)("currentModuleId",o.module.id))},dependencies:[y.bT,H.R,G.t,N.B,Q.j,E.M,J.i,V.i,D.T,S.In,S.Jm,S.QW,S.W9,S.eU,S.iq,S.To,S.Ki,S.BC,S.ai,S.el,K.Y,Z.CoreCourseUnsupportedModuleComponent,ee.Q,k.D9],styles:[".core-module-availabilityinfo[_ngcontent-%COMP%]{background:var(--light);border-radius:var(--mdl-shape-borderRadius-xs);padding:8px;font-size:90%}.core-module-availabilityinfo[_ngcontent-%COMP%]     ul{margin-top:.5em}.core-module-availabilityinfo[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-inline-end:8px}"]}),CoreCourseModulePreviewPage})();function buildRoutes(e){const o=(0,a.P)(e);return[{path:f.CORE_COURSE_INDEX_PATH,children:[{path:"",component:$,data:{isCourseIndex:!0},children:o.children},...o.siblings]},{path:":courseId/:cmId/module-preview",component:oe},{path:":courseId/list-mod-type",component:X},{path:":courseId/summary",loadChildren:()=>_.CoreCourseHelper.getCourseSummaryRouteModule()}]}let te=(()=>{var e;class CoreCourseLazyModule{}return(e=CoreCourseLazyModule).ɵfac=function CoreCourseLazyModule_Factory(o){return new(o||e)},e.ɵmod=n.$C({type:e}),e.ɵinj=n.G2t({providers:[{provide:s.bw,multi:!0,deps:[n.zZn],useFactory:buildRoutes}],imports:[r.n,i.r,c.w]}),CoreCourseLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&n.Obh(te,{declarations:[X,$,oe],imports:[r.n,i.r,c.w]}))}}]);