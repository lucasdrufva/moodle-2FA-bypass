"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[766],{40766:(e,o,r)=>{r.r(o),r.d(o,{default:()=>Y});var s=r(21182),t=r(3353),a=r(78463),n=r(47720),i=r(10467),l=r(58530),c=r(25124),d=r(44666),u=r(63114),g=r(50572),C=r(52749),b=r(89911),m=r(55554),_=r(49882),y=r(66110),v=r(24742),h=r(22693),p=r(79555),f=r(53794),k=r(54438),M=r(60177),B=r(16986),I=r(64422),P=r(86198),w=r(58197),T=r(88246),D=r(43570),R=r(73465),S=r(42922),O=r(19547),x=r(73955);function CoreCoursesMyPage_div_22_ion_button_1_Template(e,o){if(1&e){const e=k.RV6();k.j41(0,"ion-button",19),k.nI1(1,"translate"),k.bIt("click",(function CoreCoursesMyPage_div_22_ion_button_1_Template_ion_button_click_0_listener(){k.eBV(e);const o=k.XpG(2);return k.Njj(o.myOverviewBlock.prefetchCourses())})),k.nrm(2,"ion-icon",20),k.k0s()}if(2&e){const e=k.XpG(2);k.BMQ("aria-label",k.bMT(1,2,e.myOverviewBlock.prefetchCoursesData.statusTranslatable)),k.R7$(2),k.Y8G("name",e.myOverviewBlock.prefetchCoursesData.icon)}}function CoreCoursesMyPage_div_22_ion_badge_2_Template(e,o){if(1&e&&(k.j41(0,"ion-badge",21),k.EFF(1),k.k0s()),2&e){const e=k.XpG(2);k.BMQ("aria-valuemax",e.myOverviewBlock.prefetchCoursesData.total)("aria-valuenow",e.myOverviewBlock.prefetchCoursesData.count)("aria-valuetext",e.myOverviewBlock.prefetchCoursesData.badgeA11yText),k.R7$(),k.SpI(" ",e.myOverviewBlock.prefetchCoursesData.badge," ")}}function CoreCoursesMyPage_div_22_ion_spinner_3_Template(e,o){1&e&&(k.nrm(0,"ion-spinner"),k.nI1(1,"translate")),2&e&&k.BMQ("aria-label",k.bMT(1,1,"core.loading"))}function CoreCoursesMyPage_div_22_Template(e,o){if(1&e&&(k.j41(0,"div",15),k.DNE(1,CoreCoursesMyPage_div_22_ion_button_1_Template,3,4,"ion-button",16)(2,CoreCoursesMyPage_div_22_ion_badge_2_Template,2,4,"ion-badge",17)(3,CoreCoursesMyPage_div_22_ion_spinner_3_Template,2,3,"ion-spinner",18),k.k0s()),2&e){const e=k.XpG();k.R7$(),k.Y8G("ngIf",!e.myOverviewBlock.prefetchCoursesData.loading),k.R7$(),k.Y8G("ngIf",e.myOverviewBlock.prefetchCoursesData.badge),k.R7$(),k.Y8G("ngIf",e.myOverviewBlock.prefetchCoursesData.loading)}}function CoreCoursesMyPage_core_block_24_Template(e,o){if(1&e&&k.nrm(0,"core-block",22),2&e){const e=k.XpG();k.Y8G("block",e.loadedBlock)("instanceId",e.userId)}}function CoreCoursesMyPage_core_block_side_blocks_button_25_Template(e,o){if(1&e&&k.nrm(0,"core-block-side-blocks-button",23),2&e){const e=k.XpG();k.Y8G("instanceId",e.userId)("myDashboardPage",e.myPageCourses)}}function CoreCoursesMyPage_core_empty_box_26_Template(e,o){1&e&&(k.nrm(0,"core-empty-box",24),k.nI1(1,"translate")),2&e&&k.Y8G("message",k.bMT(1,1,"core.course.nocontentavailable"))}let G=(()=>{var e;class CoreCoursesMyPage{constructor(e){var o=this;this.loadsManager=e,this.siteName="",this.downloadCoursesEnabled=!1,this.loaded=!1,this.myPageCourses=g.CoreCoursesDashboardProvider.MY_PAGE_COURSES,this.hasSideBlocks=!1,this.onReadyPromise=new c._,this.updateSiteObserver=_.z.on(_.z.SITE_UPDATED,(0,i.A)((function*(){o.downloadCoursesEnabled=!y.CoreCourses.isDownloadCoursesDisabledInSite(),yield o.loadSiteName()})),C.CoreSites.getCurrentSiteId()),this.userId=C.CoreSites.getCurrentSiteUserId(),this.loadsManagerSubscription=this.loadsManager.onRefreshPage.subscribe((()=>{this.loaded=!1,this.loadContent()})),this.logView=v.j.once((0,i.A)((function*(){yield m.g.ignoreErrors(y.CoreCourses.logView("my")),h.OF.logEvent({type:h.qr.VIEW_ITEM,ws:"core_my_view_page",name:p.HT.instant("core.courses.mycourses"),data:{category:"course",page:"my"},url:"/my/courses.php"})})))}ngOnInit(){var e=this;return(0,i.A)((function*(){e.downloadCoursesEnabled=!y.CoreCourses.isDownloadCoursesDisabledInSite(),C.CoreSites.loginNavigationFinished(),yield e.loadSiteName(),e.loadContent(!0)}))()}loadContent(e=!1){var o=this;return(0,i.A)((function*(){var r;const s=o.loadsManager.startPageLoad(o,!!e),t=yield g.CoreCoursesDashboard.isAvailable(),a=yield y.CoreCourses.isMyCoursesDisabled(),n=!(null===(r=C.CoreSites.getCurrentSite())||void 0===r||!r.isVersionGreaterEqualThan("4.0"));if(t&&!a)try{var i;const e=yield s.watchRequest(g.CoreCoursesDashboard.getDashboardBlocksObservable({myPage:n?o.myPageCourses:void 0,readingStrategy:s.getReadingStrategy()}));o.loadedBlock=e.mainBlocks.concat(e.sideBlocks).find((e=>"myoverview"==e.name)),o.hasSideBlocks=n&&u.CoreBlockDelegate.hasSupportedBlock(e.sideBlocks),yield f.H.nextTicks(2),o.myOverviewBlock=null===(i=o.block)||void 0===i||null===(i=i.dynamicComponent)||void 0===i?void 0:i.instance,o.loadedBlock||n||o.loadFallbackBlock()}catch(e){b.CoreDomUtils.showErrorModal(e),o.loadFallbackBlock()}else t?o.loadedBlock=void 0:o.loadFallbackBlock();o.loaded=!0,o.onReadyPromise.resolve(),o.logView()}))()}loadSiteName(){var e=this;return(0,i.A)((function*(){const o=C.CoreSites.getRequiredCurrentSite();e.siteName=(yield o.getSiteName())||""}))()}loadFallbackBlock(){this.loadedBlock={name:"myoverview",visible:!0}}refresh(e){var o=this;return(0,i.A)((function*(){const r=[];r.push(g.CoreCoursesDashboard.invalidateDashboardBlocks(g.CoreCoursesDashboardProvider.MY_PAGE_COURSES)),o.myOverviewBlock&&r.push(m.g.ignoreErrors(o.myOverviewBlock.invalidateContent())),Promise.all(r).finally((()=>{o.loadContent().finally((()=>{null==e||e.complete()}))}))}))()}ngOnDestroy(){var e;null===(e=this.updateSiteObserver)||void 0===e||e.off(),this.loadsManagerSubscription.unsubscribe()}ready(){var e=this;return(0,i.A)((function*(){return yield e.onReadyPromise}))()}}return(e=CoreCoursesMyPage).ɵfac=function CoreCoursesMyPage_Factory(o){return new(o||e)(k.rXU(l.o))},e.ɵcmp=k.VBU({type:e,selectors:[["page-core-courses-my"]],viewQuery:function CoreCoursesMyPage_Query(e,o){if(1&e&&k.GBs(d.A,5),2&e){let e;k.mGM(e=k.lsd())&&(o.block=e.first)}},features:[k.Jv_([{provide:l.o,useClass:l.o}])],decls:27,vars:18,consts:[["slot","start"],[3,"text"],["contextLevel","system",1,"core-header-sitename",3,"text","contextInstanceId"],["src","assets/img/top_logo.png",1,"core-header-logo",3,"alt"],["slot","end"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],[1,"ion-text-wrap","divider"],["id","core-courses-my-title",1,"big"],["slot","end",1,"flex-row"],["class","core-button-spinner",4,"ngIf"],["contextLevel","user","labelledBy","core-courses-my-title",3,"block","instanceId",4,"ngIf"],["slot","fixed","contextLevel","user",3,"instanceId","myDashboardPage",4,"ngIf"],["icon","fas-cubes",3,"message",4,"ngIf"],[1,"core-button-spinner"],["fill","clear","size","default",3,"click",4,"ngIf"],["class","core-course-download-courses-progress","role","progressbar",4,"ngIf"],[4,"ngIf"],["fill","clear","size","default",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],["role","progressbar",1,"core-course-download-courses-progress"],["contextLevel","user","labelledBy","core-courses-my-title",3,"block","instanceId"],["slot","fixed","contextLevel","user",3,"instanceId","myDashboardPage"],["icon","fas-cubes",3,"message"]],template:function CoreCoursesMyPage_Template(e,o){1&e&&(k.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),k.nrm(3,"ion-back-button",1),k.nI1(4,"translate"),k.k0s(),k.j41(5,"ion-title")(6,"h1"),k.nrm(7,"core-format-text",2)(8,"img",3),k.k0s()(),k.j41(9,"ion-buttons",4),k.nrm(10,"core-user-menu-button"),k.k0s()()(),k.j41(11,"ion-content")(12,"ion-refresher",5),k.bIt("ionRefresh",(function CoreCoursesMyPage_Template_ion_refresher_ionRefresh_12_listener(e){return o.refresh(e.target)})),k.nrm(13,"ion-refresher-content",6),k.nI1(14,"translate"),k.k0s(),k.j41(15,"core-loading",7)(16,"ion-item",8)(17,"ion-label")(18,"h2",9),k.EFF(19),k.nI1(20,"translate"),k.k0s()(),k.j41(21,"div",10),k.DNE(22,CoreCoursesMyPage_div_22_Template,4,3,"div",11),k.k0s()(),k.j41(23,"ion-list"),k.DNE(24,CoreCoursesMyPage_core_block_24_Template,1,2,"core-block",12),k.k0s(),k.DNE(25,CoreCoursesMyPage_core_block_side_blocks_button_25_Template,1,2,"core-block-side-blocks-button",13)(26,CoreCoursesMyPage_core_empty_box_26_Template,2,3,"core-empty-box",14),k.k0s()()),2&e&&(k.R7$(3),k.Y8G("text",k.bMT(4,12,"core.back")),k.R7$(4),k.Y8G("text",o.siteName)("contextInstanceId",0),k.R7$(),k.Y8G("alt",o.siteName),k.R7$(4),k.Y8G("disabled",!o.loaded),k.R7$(),k.FS9("pullingText",k.bMT(14,14,"core.pulltorefresh")),k.R7$(2),k.Y8G("hideUntil",o.loaded),k.R7$(4),k.JRh(k.bMT(20,16,"core.courses.mycourses")),k.R7$(3),k.Y8G("ngIf",o.downloadCoursesEnabled&&o.myOverviewBlock&&o.myOverviewBlock.filteredCourses.length>0),k.R7$(2),k.Y8G("ngIf",null==o.loadedBlock?null:o.loadedBlock.visible),k.R7$(),k.Y8G("ngIf",o.hasSideBlocks),k.R7$(),k.Y8G("ngIf",!o.loadedBlock))},dependencies:[M.bT,B.h,I.R,P.t,w.B,T.i,D.T,R.In,R.Jm,R.QW,R.W9,R.eU,R.iq,R.uz,R.he,R.nf,R.To,R.Ki,R.w2,R.BC,R.ai,R.el,d.A,S.n,O.U,x.D9],styles:["[_nghost-%COMP%]     ion-item-divider{display:none!important}[_nghost-%COMP%]     core-loading{--internal-loading-inline-min-height: calc(100vh - var(--core-header-toolbar-height))}ion-tabs.placement-bottom[_nghost-%COMP%]     core-loading, ion-tabs.placement-bottom   [_nghost-%COMP%]     core-loading{--internal-loading-inline-min-height: calc(100vh - var(--core-header-toolbar-height) - var(--bottom-tabs-size) - 2px)}core-block[_ngcontent-%COMP%]     ion-card.addon-block-myoverview{--border-width: 0;margin:0}"]}),CoreCoursesMyPage})();const E=[{path:"",component:G}];let Y=(()=>{var e;class CoreCoursesMyLazyModule{}return(e=CoreCoursesMyLazyModule).ɵfac=function CoreCoursesMyLazyModule_Factory(o){return new(o||e)},e.ɵmod=k.$C({type:e}),e.ɵinj=k.G2t({imports:[s.iI.forChild(E),t.n,a.R,n.E]}),CoreCoursesMyLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&k.Obh(Y,{declarations:[G],imports:[s.iI,t.n,a.R,n.E]}))}}]);