"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8536],{68536:(e,o,n)=>{n.r(o),n.d(o,{CoreCourseModuleSummaryComponent:()=>L});var t=n(10467),i=n(74431),r=n(23732),a=n(37184),l=n(44682),_=n(94247),d=n(97086),s=n(8979),m=n(97383),c=n(94455),u=n(88793),p=n(15324),C=n(52749),g=n(89911),f=n(75383),b=n(81690),h=n(79555),I=n(49882),y=n(3353),M=n(91416),T=n(55554),S=n(54438),G=n(60177),k=n(64422),R=n(32572),$=n(10892),v=n(86198),x=n(58197),O=n(23007),F=n(35407),w=n(88246),D=n(43570),Y=n(73465),j=n(78913),E=n(73955);const _c0=e=>({$a:e}),_c1=e=>({name:e});function CoreCourseModuleSummaryComponent_ion_item_8_p_2_Template(e,o){if(1&e&&(S.j41(0,"p",14),S.nrm(1,"core-mod-icon",15),S.EFF(2),S.k0s()),2&e){const e=S.XpG(2);S.R7$(),S.Y8G("modicon",e.modicon)("modname",e.module.modname)("componentId",e.module.instance)("fallbackTranslation",e.module.modplural)("purpose",e.module.purpose)("isBranded",e.module.branded),S.R7$(),S.SpI(" ",e.moduleNameTranslated," ")}}function CoreCourseModuleSummaryComponent_ion_item_8_ion_button_5_Template(e,o){if(1&e&&(S.j41(0,"ion-button",16),S.nI1(1,"translate"),S.nrm(2,"ion-icon",17),S.k0s()),2&e){const e=S.XpG(2);S.AVh("hidden",!e.isTeacher),S.Y8G("href",e.externalUrl)("showBrowserWarning",!1)("ariaLabel",S.bMT(1,5,"core.openinbrowser"))}}function CoreCourseModuleSummaryComponent_ion_item_8_Template(e,o){if(1&e&&(S.j41(0,"ion-item",10)(1,"ion-label"),S.DNE(2,CoreCourseModuleSummaryComponent_ion_item_8_p_2_Template,3,7,"p",11),S.j41(3,"h1"),S.nrm(4,"core-format-text",12),S.k0s()(),S.DNE(5,CoreCourseModuleSummaryComponent_ion_item_8_ion_button_5_Template,3,7,"ion-button",13),S.k0s()),2&e){const e=S.XpG();S.R7$(2),S.Y8G("ngIf",e.moduleNameTranslated),S.R7$(2),S.Y8G("text",e.module.name)("component",e.component)("componentId",e.componentId)("contextInstanceId",e.module.id)("courseId",e.courseId),S.R7$(),S.Y8G("ngIf",e.displayOptions.displayOpenInBrowser&&e.externalUrl)}}function CoreCourseModuleSummaryComponent_ion_item_9_Template(e,o){if(1&e){const e=S.RV6();S.j41(0,"ion-item",18),S.bIt("click",(function CoreCourseModuleSummaryComponent_ion_item_9_Template_ion_item_click_0_listener(){S.eBV(e);const o=S.XpG();return S.Njj(o.openCourse())})),S.j41(1,"ion-label")(2,"p",19),S.nrm(3,"ion-icon",20),S.EFF(4),S.nI1(5,"translate"),S.k0s(),S.j41(6,"p"),S.nrm(7,"core-format-text",21),S.k0s()()()}if(2&e){const e=S.XpG();S.Y8G("detail",!0),S.R7$(4),S.SpI(" ",S.bMT(5,4,"core.course")," "),S.R7$(3),S.Y8G("text",e.course.fullname)("contextInstanceId",e.courseId)}}function CoreCourseModuleSummaryComponent_ion_item_10_Template(e,o){if(1&e&&(S.j41(0,"ion-item",10)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.nrm(5,"core-format-text",22),S.k0s()()),2&e){const e=S.XpG();S.R7$(3),S.SpI(" ",S.bMT(4,6,"core.description")," "),S.R7$(2),S.Y8G("text",e.description)("component",e.component)("componentId",e.componentId)("contextInstanceId",e.module.id)("courseId",e.courseId)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_4_Template(e,o){if(1&e&&(S.j41(0,"p",19),S.nrm(1,"core-format-text",21),S.k0s()),2&e){const e=S.XpG(2).$implicit,o=S.XpG(2);S.R7$(),S.Y8G("text",e.gradeitem)("contextInstanceId",o.courseId)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_5_Template(e,o){1&e&&(S.j41(0,"p",19),S.EFF(1),S.nI1(2,"translate"),S.k0s()),2&e&&(S.R7$(),S.SpI(" ",S.bMT(2,1,"core.grades.grade")," "))}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_6_Template(e,o){if(1&e&&S.nrm(0,"p",36),2&e){const e=S.XpG(2).$implicit;S.Y8G("innerHTML",e.grade,S.npT)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_badge_7_Template(e,o){1&e&&(S.j41(0,"ion-badge",37),S.EFF(1),S.nI1(2,"translate"),S.k0s()),2&e&&(S.R7$(),S.SpI(" ",S.bMT(2,1,"core.grades.notgraded")," "))}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_8_Template(e,o){if(1&e&&S.nrm(0,"ion-icon",38),2&e){const e=S.XpG(2).$implicit;S.FS9("name",e.icon),S.BMQ("aria-label",e.iconAlt)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_img_9_Template(e,o){if(1&e&&S.nrm(0,"img",39),2&e){const e=S.XpG(2).$implicit;S.Y8G("src",e.image,S.B4B)("alt",e.iconAlt)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_10_Template(e,o){if(1&e&&S.nrm(0,"ion-icon",40),2&e){const e=S.XpG(2).$implicit;S.BMQ("aria-label",e.iconAlt)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_Template(e,o){if(1&e){const e=S.RV6();S.j41(0,"ion-item",28),S.nI1(1,"translate"),S.bIt("click",(function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_Template_ion_item_click_0_listener(){S.eBV(e);const o=S.XpG().$implicit,n=S.XpG(2);return S.Njj(n.toggleGrade(o))})),S.nrm(2,"ion-icon",29),S.j41(3,"ion-label"),S.DNE(4,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_4_Template,2,2,"p",30)(5,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_5_Template,3,3,"p",30)(6,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_6_Template,1,1,"p",31)(7,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_badge_7_Template,3,3,"ion-badge",32),S.k0s(),S.DNE(8,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_8_Template,1,2,"ion-icon",33)(9,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_img_9_Template,1,2,"img",34)(10,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_10_Template,1,1,"ion-icon",35),S.k0s()}if(2&e){const e=S.XpG().$implicit;S.Y8G("detail",!1),S.BMQ("aria-label",S.bMT(1,13,e.expanded?"core.collapse":"core.expand"))("aria-expanded",e.expanded)("aria-controls","grade-"+e.id),S.R7$(2),S.AVh("expandable-status-icon-expanded",e.expanded),S.R7$(2),S.Y8G("ngIf",!e.itemmodule),S.R7$(),S.Y8G("ngIf",e.itemmodule),S.R7$(),S.Y8G("ngIf",e.grade&&"-"!==e.grade),S.R7$(),S.Y8G("ngIf",!e.grade||"-"===e.grade),S.R7$(),S.Y8G("ngIf",e.icon),S.R7$(),S.Y8G("ngIf",e.image&&!e.itemmodule),S.R7$(),S.Y8G("ngIf",e.image&&e.itemmodule)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_1_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.nrm(5,"p",36),S.k0s()()),2&e){const e=S.XpG(2).$implicit;S.R7$(3),S.JRh(S.bMT(4,2,"core.grades.weight")),S.R7$(2),S.Y8G("innerHTML",e.weight,S.npT)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_2_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.nrm(5,"p",36),S.k0s()()),2&e){const e=S.XpG(2).$implicit;S.R7$(3),S.JRh(S.bMT(4,2,"core.grades.range")),S.R7$(2),S.Y8G("innerHTML",e.range,S.npT)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_3_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.nrm(5,"p",36),S.k0s()()),2&e){const e=S.XpG(2).$implicit;S.R7$(3),S.JRh(S.bMT(4,2,"core.grades.percentage")),S.R7$(2),S.Y8G("innerHTML",e.percentage,S.npT)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_4_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.nrm(5,"p",36),S.k0s()()),2&e){const e=S.XpG(2).$implicit;S.R7$(3),S.JRh(S.bMT(4,2,"core.grades.lettergrade")),S.R7$(2),S.Y8G("innerHTML",e.lettergrade,S.npT)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_5_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.nrm(5,"p",36),S.k0s()()),2&e){const e=S.XpG(2).$implicit;S.R7$(3),S.JRh(S.bMT(4,2,"core.grades.rank")),S.R7$(2),S.Y8G("innerHTML",e.rank,S.npT)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_6_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.nrm(5,"p",36),S.k0s()()),2&e){const e=S.XpG(2).$implicit;S.R7$(3),S.JRh(S.bMT(4,2,"core.grades.average")),S.R7$(2),S.Y8G("innerHTML",e.average,S.npT)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_7_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.j41(5,"p"),S.nrm(6,"core-format-text",44),S.k0s()()()),2&e){const e=S.XpG(2).$implicit,o=S.XpG(2);S.R7$(3),S.JRh(S.bMT(4,3,"core.grades.feedback")),S.R7$(3),S.Y8G("text",e.feedback)("contextInstanceId",o.courseId)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_8_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",19),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.nrm(5,"p",36),S.k0s()()),2&e){const e=S.XpG(2).$implicit;S.R7$(3),S.JRh(S.bMT(4,2,"core.grades.contributiontocoursetotal")),S.R7$(2),S.Y8G("innerHTML",e.contributiontocoursetotal,S.npT)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_Template(e,o){if(1&e&&(S.j41(0,"div",41),S.DNE(1,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_1_Template,6,4,"ion-item",42)(2,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_2_Template,6,4,"ion-item",42)(3,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_3_Template,6,4,"ion-item",42)(4,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_4_Template,6,4,"ion-item",42)(5,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_5_Template,6,4,"ion-item",42)(6,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_6_Template,6,4,"ion-item",42)(7,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_7_Template,7,5,"ion-item",42)(8,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_8_Template,6,4,"ion-item",42),S.k0s()),2&e){const e=S.XpG().$implicit;S.Y8G("id","grade-"+e.id),S.R7$(),S.Y8G("ngIf",(null==e.weight?null:e.weight.length)>0&&"-"!==e.weight),S.R7$(),S.Y8G("ngIf",(null==e.range?null:e.range.length)>0&&"-"!==e.range),S.R7$(),S.Y8G("ngIf",(null==e.percentage?null:e.percentage.length)>0&&"-"!==e.percentage),S.R7$(),S.Y8G("ngIf",(null==e.lettergrade?null:e.lettergrade.length)>0&&"-"!==e.lettergrade),S.R7$(),S.Y8G("ngIf",(null==e.rank?null:e.rank.length)>0&&"-"!==e.rank),S.R7$(),S.Y8G("ngIf",(null==e.average?null:e.average.length)>0&&"-"!==e.average),S.R7$(),S.Y8G("ngIf",(null==e.feedback?null:e.feedback.length)>0&&"-"!==e.feedback),S.R7$(),S.Y8G("ngIf",(null==e.contributiontocoursetotal?null:e.contributiontocoursetotal.length)>0&&"-"!==e.contributiontocoursetotal)}}function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_Template(e,o){if(1&e&&(S.qex(0),S.DNE(1,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_Template,11,15,"ion-item",26)(2,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_Template,9,9,"div",27),S.bVm()),2&e){const e=o.$implicit;S.R7$(),S.Y8G("ngIf",e.gradeitem),S.R7$(),S.Y8G("ngIf",e.expanded)}}function CoreCourseModuleSummaryComponent_ion_card_11_Template(e,o){if(1&e&&(S.j41(0,"ion-card")(1,"ion-list")(2,"ion-item",23)(3,"ion-label")(4,"h2"),S.nrm(5,"ion-icon",24),S.EFF(6),S.nI1(7,"translate"),S.k0s()()(),S.DNE(8,CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_Template,3,2,"ng-container",25),S.k0s()()),2&e){const e=S.XpG();S.R7$(6),S.SpI("",S.bMT(7,2,"core.grades.gradebook")," "),S.R7$(2),S.Y8G("ngForOf",e.grades)}}function CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_button_8_Template(e,o){if(1&e){const e=S.RV6();S.j41(0,"ion-button",50),S.nI1(1,"coreBytesToSize"),S.nI1(2,"translate"),S.bIt("click",(function CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_button_8_Template_ion_button_click_0_listener(){S.eBV(e);const o=S.XpG(3);return S.Njj(o.removeFiles())})),S.nrm(3,"ion-icon",51),S.k0s()}if(2&e){const e=S.XpG(3);S.Y8G("disabled",e.prefetchLoading)("ariaLabel",S.i5U(2,4,"core.clearstoreddata",S.eq3(7,_c0,S.bMT(1,2,e.size))))}}function CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_spinner_9_Template(e,o){1&e&&S.nrm(0,"ion-spinner",52)}function CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",47),S.EFF(3),S.nI1(4,"translate"),S.k0s(),S.j41(5,"ion-badge",37),S.EFF(6),S.nI1(7,"coreBytesToSize"),S.k0s()(),S.DNE(8,CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_button_8_Template,4,9,"ion-button",48)(9,CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_spinner_9_Template,1,0,"ion-spinner",49),S.k0s()),2&e){const e=S.XpG(2);S.R7$(3),S.JRh(S.bMT(4,4,"addon.storagemanager.totalspaceusage")),S.R7$(3),S.JRh(S.bMT(7,6,e.size)),S.R7$(2),S.Y8G("ngIf",!e.removeFilesLoading),S.R7$(),S.Y8G("ngIf",e.removeFilesLoading)}}function CoreCourseModuleSummaryComponent_ion_card_12_ion_item_8_Template(e,o){if(1&e&&(S.j41(0,"ion-item",43)(1,"ion-label")(2,"p",43),S.EFF(3),S.nI1(4,"translate"),S.k0s()()()),2&e){const e=S.XpG(2);S.R7$(3),S.Lme("",S.bMT(4,2,"core.lastdownloaded")," ",e.downloadTimeReadable,"")}}function CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_icon_2_Template(e,o){1&e&&S.nrm(0,"ion-icon",56)}function CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_spinner_3_Template(e,o){1&e&&S.nrm(0,"ion-spinner",57)}function CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_Template(e,o){if(1&e){const e=S.RV6();S.j41(0,"ion-button",53),S.nI1(1,"translate"),S.bIt("click",(function CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_Template_ion_button_click_0_listener(){S.eBV(e);const o=S.XpG(2);return S.Njj(o.prefetch())})),S.DNE(2,CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_icon_2_Template,1,0,"ion-icon",54)(3,CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_spinner_3_Template,1,0,"ion-spinner",55),S.j41(4,"ion-label"),S.EFF(5),S.nI1(6,"translate"),S.k0s()()}if(2&e){const e=S.XpG(2);S.Y8G("disabled",e.prefetchDisabled),S.BMQ("aria-label",S.i5U(1,5,"addon.storagemanager.downloaddatafrom",S.eq3(10,_c1,null==e.module?null:e.module.name))),S.R7$(2),S.Y8G("ngIf",!e.prefetchLoading),S.R7$(),S.Y8G("ngIf",e.prefetchLoading),S.R7$(2),S.SpI(" ",S.bMT(6,8,"core.download")," ")}}function CoreCourseModuleSummaryComponent_ion_card_12_Template(e,o){if(1&e&&(S.j41(0,"ion-card")(1,"ion-item",23)(2,"ion-label")(3,"h2"),S.nrm(4,"ion-icon",45),S.EFF(5),S.nI1(6,"translate"),S.k0s()()(),S.DNE(7,CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_Template,10,8,"ion-item",42)(8,CoreCourseModuleSummaryComponent_ion_card_12_ion_item_8_Template,5,4,"ion-item",42)(9,CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_Template,7,12,"ion-button",46),S.k0s()),2&e){const e=S.XpG();S.R7$(5),S.SpI(" ",S.bMT(6,4,"addon.storagemanager.downloads")," "),S.R7$(2),S.Y8G("ngIf",e.size&&e.displayOptions.displaySize),S.R7$(),S.Y8G("ngIf",e.downloadTimeReadable),S.R7$(),S.Y8G("ngIf",e.canPrefetch&&e.displayOptions.displayPrefetch)}}function CoreCourseModuleSummaryComponent_ion_item_13_Template(e,o){if(1&e){const e=S.RV6();S.j41(0,"ion-item",58),S.bIt("click",(function CoreCourseModuleSummaryComponent_ion_item_13_Template_ion_item_click_0_listener(){S.eBV(e);const o=S.XpG();return S.Njj(o.gotoBlog())})),S.nrm(1,"ion-icon",59),S.j41(2,"ion-label"),S.EFF(3),S.nI1(4,"translate"),S.k0s()()}2&e&&(S.Y8G("detail",!0),S.R7$(3),S.SpI(" ",S.bMT(4,2,"addon.blog.blog")," "))}function CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_1_Template(e,o){if(1&e){const e=S.RV6();S.j41(0,"ion-button",61),S.bIt("click",(function CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_1_Template_ion_button_click_0_listener(){S.eBV(e);const o=S.XpG(2);return S.Njj(o.refresh())})),S.nrm(1,"ion-icon",62),S.j41(2,"ion-label"),S.EFF(3),S.nI1(4,"translate"),S.k0s()()}2&e&&(S.R7$(3),S.SpI(" ",S.bMT(4,1,"core.refresh")," "))}function CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_2_Template(e,o){if(1&e){const e=S.RV6();S.j41(0,"ion-button",61),S.bIt("click",(function CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_2_Template_ion_button_click_0_listener(){S.eBV(e);const o=S.XpG(2);return S.Njj(o.sync())})),S.nrm(1,"ion-icon",63),S.j41(2,"ion-label"),S.EFF(3),S.nI1(4,"translate"),S.k0s()()}2&e&&(S.R7$(3),S.SpI(" ",S.bMT(4,1,"core.settings.synchronizenow")," "))}function CoreCourseModuleSummaryComponent_ion_footer_14_Template(e,o){if(1&e&&(S.j41(0,"ion-footer"),S.DNE(1,CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_1_Template,5,3,"ion-button",60)(2,CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_2_Template,5,3,"ion-button",60),S.k0s()),2&e){const e=S.XpG();S.R7$(),S.Y8G("ngIf",!e.hasOffline),S.R7$(),S.Y8G("ngIf",e.hasOffline)}}let L=(()=>{var o;class CoreCourseModuleSummaryComponent{constructor(){this.courseId=0,this.moduleId=0,this.component="",this.description="",this.hasOffline=!1,this.displayOptions={},this.loaded=!1,this.removeFilesLoading=!1,this.prefetchLoading=!1,this.canPrefetch=!1,this.prefetchDisabled=!1,this.downloadTimeReadable="",this.blog=!1,this.isOnline=!1,this.modicon="",this.moduleNameTranslated="",this.isTeacher=!1,this.isDestroyed=!1,this.siteId=C.CoreSites.getCurrentSiteId(),this.isOnline=c.WE.isOnline(),this.onlineSubscription=c.WE.onChange().subscribe((()=>{h.SK.run((()=>{this.isOnline=c.WE.isOnline()}))}))}ngOnInit(){var o=this;return(0,t.A)((function*(){var n;if(!o.module)return o.closeModal(),void 0;if(o.displayOptions=Object.assign({displayOpenInBrowser:!(null===(n=C.CoreSites.getCurrentSite())||void 0===n||!n.shouldDisplayInformativeLinks()),displayDescription:!0,displayRefresh:!0,displayPrefetch:!0,displaySize:!0,displayBlog:!0,displayGrades:!0},o.displayOptions),o.displayOptions.displayGrades=o.displayOptions.displayGrades&&d.CoreCourseModuleDelegate.supportsFeature(o.module.modname,i.CoreConstants.FEATURE_GRADE_HAS_GRADE,!0),o.displayOptions.displayDescription=o.displayOptions.displayDescription&&d.CoreCourseModuleDelegate.supportsFeature(o.module.modname,i.CoreConstants.FEATURE_SHOW_DESCRIPTION,!0),o.fetchContent(),o.component){o.packageStatusObserver=I.z.on(I.z.PACKAGE_STATUS_CHANGED,(e=>{var n;e.componentId===(null===(n=o.module)||void 0===n?void 0:n.id)&&e.component==o.component&&o.getPackageStatus()}),o.siteId);const n=b.j.debounce((0,t.A)((function*(){o.module&&(o.size=yield s.CoreCourseModulePrefetchDelegate.getModuleStoredSize(o.module,o.courseId))})),1e3);o.fileStatusObserver=I.z.on(I.z.COMPONENT_FILE_ACTION,(t=>{t.component==o.component&&t.componentId==e.id&&u.CoreFilepool.isFileEventDownloadedOrDeleted(t)&&n()}),o.siteId)}}))()}fetchContent(){var e=this;return(0,t.A)((function*(){if(e.module){e.componentId=e.module.id,e.externalUrl=e.module.url,e.courseId=e.courseId||e.module.course,e.moduleNameTranslated=l.CoreCourse.translateModuleName(e.module.modname,e.module.modplural),e.blog=yield r.hU.isPluginEnabled();try{yield Promise.all([e.loadModIcon(),e.getPackageStatus(),e.fetchGrades(),e.fetchCourse()])}catch(e){g.CoreDomUtils.showErrorModal(e)}e.loaded=!0}}))()}loadModIcon(){var e=this;return(0,t.A)((function*(){e.module&&(e.modicon=yield d.CoreCourseModuleDelegate.getModuleIconSrc(e.module.modname,e.module.modicon,e.module))}))()}getPackageStatus(e=!1){var o=this;return(0,t.A)((function*(){if(!o.module)return;const n=yield _.CoreCourseHelper.getModulePrefetchInfo(o.module,o.courseId,e,o.component);o.canPrefetch=n.status!==i.DownloadStatus.NOT_DOWNLOADABLE,o.downloadTimeReadable="",o.canPrefetch&&(n.downloadTime&&n.downloadTime>0&&(o.downloadTimeReadable=f.Ni.capitalize(n.downloadTimeReadable)),o.prefetchLoading=n.status===i.DownloadStatus.DOWNLOADING,o.prefetchDisabled=n.status===i.DownloadStatus.DOWNLOADED),n.size&&n.size>0&&(o.size=n.size)}))()}gotoBlog(){var e=this;return(0,t.A)((function*(){const o={cmId:e.moduleId};yield p.CoreNavigator.navigateToSitePath(a.H5,{params:o})}))()}fetchGrades(){var e=this;return(0,t.A)((function*(){if(e.displayOptions.displayGrades)try{e.grades=yield m.CoreGradesHelper.getModuleGrades(e.courseId,e.moduleId)}catch{}}))()}toggleGrade(e){e.expanded=!e.expanded}fetchCourse(){var e=this;return(0,t.A)((function*(){e.course=yield _.CoreCourseHelper.getCourseInfo(e.courseId),e.isTeacher=yield T.g.ignoreErrors(_.CoreCourseHelper.guessIsTeacher(e.courseId,e.course),!1)}))()}openCourse(){this.course&&l.CoreCourse.openCourse(this.course,{replace:!0,animationDirection:"back",params:{module:this.module,openModule:!1}})}prefetch(){var e=this;return(0,t.A)((function*(){if(e.module){e.prefetchLoading=!0;try{const o=yield s.CoreCourseModulePrefetchDelegate.getModuleDownloadSize(e.module,e.courseId,!0);yield g.CoreDomUtils.confirmDownloadSize(o),yield s.CoreCourseModulePrefetchDelegate.prefetchModule(e.module,e.courseId,!0),yield e.getPackageStatus(!0)}catch(o){e.prefetchLoading=!1,e.isDestroyed||g.CoreDomUtils.showErrorModalDefault(o,"core.errordownloading",!0)}}}))()}removeFiles(){var e=this;return(0,t.A)((function*(){if(e.module){if(e.prefetchLoading)return g.CoreDomUtils.showAlertTranslated(void 0,"core.course.cannotdeletewhiledownloading"),void 0;try{yield g.CoreDomUtils.showDeleteConfirm("addon.storagemanager.confirmdeletedatafrom",{name:e.module.name}),e.removeFilesLoading=!0,yield _.CoreCourseHelper.removeModuleStoredData(e.module,e.courseId)}catch(o){!e.isDestroyed&&o&&g.CoreDomUtils.showErrorModal(o)}finally{e.removeFilesLoading=!1,delete e.size}yield e.getPackageStatus()}}))()}refresh(){var e=this;return(0,t.A)((function*(){e.module&&h.W3.dismiss({action:"refresh"})}))()}sync(){var e=this;return(0,t.A)((function*(){e.module&&h.W3.dismiss({action:"sync"})}))()}closeModal(){h.W3.dismiss()}ngOnDestroy(){var e,o;this.isDestroyed=!0,null===(e=this.packageStatusObserver)||void 0===e||e.off(),null===(o=this.fileStatusObserver)||void 0===o||o.off(),this.onlineSubscription.unsubscribe()}}return(o=CoreCourseModuleSummaryComponent).ɵfac=function CoreCourseModuleSummaryComponent_Factory(e){return new(e||o)},o.ɵcmp=S.VBU({type:o,selectors:[["core-course-module-summary"]],inputs:{module:"module",courseId:"courseId",moduleId:"moduleId",component:"component",description:"description",hasOffline:[S.Mj6.HasDecoratorInputTransform,"hasOffline","hasOffline",M.G],displayOptions:"displayOptions"},standalone:!0,features:[S.GFd,S.aNF],decls:15,vars:12,consts:[[1,"no-title"],["slot","end"],["fill","clear",3,"click","ariaLabel"],["slot","icon-only","name","fas-xmark","aria-hidden","true"],[3,"fullscreen"],[3,"hideUntil"],["class","ion-text-wrap","lines","full",4,"ngIf"],["class","ion-text-wrap","button","","lines","full",3,"detail","click",4,"ngIf"],[4,"ngIf"],["button","",3,"detail","click",4,"ngIf"],["lines","full",1,"ion-text-wrap"],["class","core-modulename",4,"ngIf"],["contextLevel","module",3,"text","component","componentId","contextInstanceId","courseId"],["fill","clear","core-link","","slot","end","class","core-module-oib-button",3,"href","showBrowserWarning","ariaLabel","hidden",4,"ngIf"],[1,"core-modulename"],["slot","start",3,"modicon","modname","componentId","fallbackTranslation","purpose","isBranded"],["fill","clear","core-link","","slot","end",1,"core-module-oib-button",3,"href","showBrowserWarning","ariaLabel"],["name","fas-up-right-from-square","slot","icon-only","aria-hidden","true"],["button","","lines","full",1,"ion-text-wrap",3,"click","detail"],[1,"item-heading"],["name","fas-graduation-cap","aria-hidden","true"],["contextLevel","course",3,"text","contextInstanceId"],["contextLevel","module","collapsible-item","",3,"text","component","componentId","contextInstanceId","courseId"],["lines","full",1,"ion-text-wrap","card-header"],["name","fas-chart-bar","slot","end","aria-hidden","true"],[4,"ngFor","ngForOf"],["button","","class","ion-text-wrap divider","role","heading",3,"detail","click",4,"ngIf"],[3,"id",4,"ngIf"],["button","","role","heading",1,"ion-text-wrap","divider",3,"click","detail"],["name","fas-chevron-right","flip-rtl","","slot","start","aria-hidden","true",1,"expandable-status-icon"],["class","item-heading",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["color","light",4,"ngIf"],["slot","end",3,"name",4,"ngIf"],["slot","end","core-external-content","",3,"src","alt",4,"ngIf"],["name","fas-chart-bar","slot","end",4,"ngIf"],[3,"innerHTML"],["color","light"],["slot","end",3,"name"],["slot","end","core-external-content","",3,"src","alt"],["name","fas-chart-bar","slot","end"],[3,"id"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],["collapsible-item","","contextLevel","course",3,"text","contextInstanceId"],["name","fas-cloud-arrow-down","aria-hidden","true"],["fill","outline","expand","block","class","ion-text-wrap",3,"disabled","click",4,"ngIf"],[1,"item-heading","ion-text-wrap"],["color","danger","fill","clear","slot","end",3,"disabled","ariaLabel","click",4,"ngIf"],["slot","end","aria-hidden","true",4,"ngIf"],["color","danger","fill","clear","slot","end",3,"click","disabled","ariaLabel"],["name","fas-trash","slot","icon-only","aria-hidden","true"],["slot","end","aria-hidden","true"],["fill","outline","expand","block",1,"ion-text-wrap",3,"click","disabled"],["name","fas-cloud-arrow-down","slot","start","aria-hidden","true",4,"ngIf"],["slot","start","aria-hidden","true",4,"ngIf"],["name","fas-cloud-arrow-down","slot","start","aria-hidden","true"],["slot","start","aria-hidden","true"],["button","",3,"click","detail"],["name","far-newspaper","slot","start","aria-hidden","true"],["class","ion-margin","expand","block","fill","outline",3,"click",4,"ngIf"],["expand","block","fill","outline",1,"ion-margin",3,"click"],["name","fas-rotate-right","slot","start","aria-hidden","true"],["name","fas-rotate","slot","start","aria-hidden","true"]],template:function CoreCourseModuleSummaryComponent_Template(e,o){1&e&&(S.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),S.nI1(4,"translate"),S.bIt("click",(function CoreCourseModuleSummaryComponent_Template_ion_button_click_3_listener(){return o.closeModal()})),S.nrm(5,"ion-icon",3),S.k0s()()()(),S.j41(6,"ion-content",4)(7,"core-loading",5),S.DNE(8,CoreCourseModuleSummaryComponent_ion_item_8_Template,6,7,"ion-item",6)(9,CoreCourseModuleSummaryComponent_ion_item_9_Template,8,6,"ion-item",7)(10,CoreCourseModuleSummaryComponent_ion_item_10_Template,6,8,"ion-item",6)(11,CoreCourseModuleSummaryComponent_ion_card_11_Template,9,4,"ion-card",8)(12,CoreCourseModuleSummaryComponent_ion_card_12_Template,10,6,"ion-card",8)(13,CoreCourseModuleSummaryComponent_ion_item_13_Template,5,4,"ion-item",9),S.k0s()(),S.DNE(14,CoreCourseModuleSummaryComponent_ion_footer_14_Template,3,2,"ion-footer",8)),2&e&&(S.R7$(3),S.Y8G("ariaLabel",S.bMT(4,10,"core.close")),S.R7$(3),S.Y8G("fullscreen",!0),S.R7$(),S.Y8G("hideUntil",o.loaded),S.R7$(),S.Y8G("ngIf",o.module),S.R7$(),S.Y8G("ngIf",o.course),S.R7$(),S.Y8G("ngIf",o.module&&o.description&&o.displayOptions.displayDescription),S.R7$(),S.Y8G("ngIf",o.displayOptions.displayGrades&&(null==o.grades?null:o.grades.length)>0),S.R7$(),S.Y8G("ngIf",o.canPrefetch&&o.displayOptions.displayPrefetch||o.size&&o.displayOptions.displaySize),S.R7$(),S.Y8G("ngIf",o.blog&&o.displayOptions.displayBlog),S.R7$(),S.Y8G("ngIf",o.loaded&&o.isOnline&&o.displayOptions.displayRefresh))},dependencies:[y.n,G.Sq,G.bT,k.R,R.I,$.l,v.t,x.B,O.j,F.K,w.i,D.T,Y.In,Y.Jm,Y.QW,Y.b_,Y.W9,Y.M0,Y.eU,Y.iq,Y.uz,Y.he,Y.nf,Y.w2,Y.ai,j.b,E.D9],styles:["[_nghost-%COMP%]     ion-item[collapsible] ion-label{margin-top:12px}h1[_ngcontent-%COMP%]{font-size:var(--mdl-typography-heading4-fontSize)}.core-modulename[_ngcontent-%COMP%]{text-transform:uppercase}.core-modulename[_ngcontent-%COMP%]   core-mod-icon[_ngcontent-%COMP%]{--module-icon-padding: 0px;--module-legacy-icon-padding: 2px;--module-icon-size: 16px;--module-legacy-icon-size: 12px;margin:0}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-inline-start:0px;margin-inline-end:4px;vertical-align:text-top}ion-item.card-header[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--inner-padding-start: 0px;--inner-padding-end: 0px;--min-height: 40px}ion-item.card-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0}.core-module-oib-button.hidden[_ngcontent-%COMP%]{display:none}"]}),CoreCourseModuleSummaryComponent})()}}]);