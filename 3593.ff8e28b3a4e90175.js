"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3593],{6369:(o,n,e)=>{e.d(n,{a:()=>_});var i=e(10467),s=e(99522),t=e(98870),r=e(15221),d=e(43411),a=e(16179),u=e(11945),c=e(2216),l=e(52749),m=e(55554);let _=(()=>{class AddonModForumDiscussionsSource extends s.F{constructor(o,n,e){super(),this.trackPosts=!1,this.usesGroups=!1,this.supportsChangeGroup=!1,this.selectedSortOrder=null,this.groupId=0,this.canAddDiscussionToGroup=!0,this.errorLoadingDiscussions=!1,this.DISCUSSIONS_PATH_PREFIX=e,this.COURSE_ID=o,this.CM_ID=n}isNewDiscussionForm(o){return"newDiscussion"in o}isOfflineDiscussion(o){return!this.isNewDiscussionForm(o)&&!this.isOnlineDiscussion(o)}isOnlineDiscussion(o){return"id"in o}getItemPath(o){return this.isOnlineDiscussion(o)?this.DISCUSSIONS_PATH_PREFIX+o.discussion:this.isOfflineDiscussion(o)?`${this.DISCUSSIONS_PATH_PREFIX}new/${o.timecreated}`:`${this.DISCUSSIONS_PATH_PREFIX}new/0`}getItemQueryParams(o){var n;const e={courseId:this.COURSE_ID,cmId:this.CM_ID,forumId:null===(n=this.forum)||void 0===n?void 0:n.id};return this.isOnlineDiscussion(o)?(e.discussion=o,e.trackPosts=this.trackPosts):this.isNewDiscussionForm(o)&&(e.groupId=this.usesGroups?this.groupId:void 0),e}getPagesLoaded(){if(null===this.items)return 0;const o=this.items.filter((o=>this.isOnlineDiscussion(o)));return Math.ceil(o.length/this.getPageLength())}getPageLength(){return c.eG}loadForum(){var o=this;return(0,i.A)((function*(){o.forum=yield a.AddonModForum.getForum(o.COURSE_ID,o.CM_ID),void 0!==o.forum.istracked&&(o.trackPosts=o.forum.istracked)}))()}loadGroupInfo(o){var n=this;return(0,i.A)((function*(){[n.groupInfo,n.allPartsPermissions]=yield Promise.all([r.CoreGroups.getActivityGroupInfo(n.CM_ID,!1),m.g.ignoreErrors(a.AddonModForum.canAddDiscussionToAll(o,{cmId:n.CM_ID}))]),n.supportsChangeGroup=a.AddonModForum.isGetDiscussionPostsAvailable(),n.usesGroups=!(!n.groupInfo.separateGroups&&!n.groupInfo.visibleGroups),n.groupId=r.CoreGroups.validateGroupId(n.groupId,n.groupInfo),yield n.loadSelectedGroupData()}))()}loadSelectedGroupData(){var o=this;return(0,i.A)((function*(){if(o.usesGroups)if(0===o.groupId)o.canAddDiscussionToGroup=!o.allPartsPermissions||o.allPartsPermissions.status;else if(o.forum){const n=yield a.AddonModForum.canAddDiscussion(o.forum.id,o.groupId,{cmId:o.CM_ID});o.canAddDiscussionToGroup=n.status}else o.canAddDiscussionToGroup=!0;else o.canAddDiscussionToGroup=!0}))()}loadPageItems(o){var n=this;return(0,i.A)((function*(){var e;const i=[];if(0===o){const o=yield n.loadOfflineDiscussions();i.push(AddonModForumDiscussionsSource.NEW_DISCUSSION),i.push(...o)}const{discussions:s,canLoadMore:t}=yield n.loadOnlineDiscussions(o);if(i.push(...s),n.canAddDiscussionToGroup&&"eachuser"===(null===(e=n.forum)||void 0===e?void 0:e.type)){const o=l.CoreSites.getCurrentSiteUserId();n.canAddDiscussionToGroup=!i.some((e=>n.isOfflineDiscussion(e)||!n.isNewDiscussionForm(e)&&e.userid===o))}return{items:i,hasMoreItems:t}}))()}loadOnlineDiscussions(o){var n=this;return(0,i.A)((function*(){if(!n.forum||!n.selectedSortOrder)throw new Error("Can't load discussions without a forum or selected sort order");let e=[],i=!1;try{const s=yield a.AddonModForum.getDiscussions(n.forum.id,{cmId:n.forum.cmid,sortOrder:n.selectedSortOrder.value,page:o,groupId:n.groupId});e=s.discussions,i=s.canLoadMore,n.errorLoadingDiscussions=!1}catch(e){if(o>0||d.CoreWSError.isWebServiceError(e))throw e;n.errorLoadingDiscussions=!0}if(n.usesGroups&&(e=yield a.AddonModForum.formatDiscussionsGroups(n.forum.cmid,e)),"single"===n.forum.type)for(const o of e)if(o.userfullname&&0===o.parent){o.userfullname=!1;break}if(void 0===n.forum.istracked&&!n.trackPosts)for(const o of e)if(o.numunread>0){n.trackPosts=!0;break}return{discussions:e,canLoadMore:i}}))()}loadOfflineDiscussions(){var o=this;return(0,i.A)((function*(){if(!o.forum)throw new Error("Can't load discussions without a forum");const n=o.forum;let e=yield u.p.getNewDiscussions(n.id);if(0===e.length)return[];o.usesGroups&&(e=yield a.AddonModForum.formatDiscussionsGroups(n.cmid,e));const s=e.map(function(){var e=(0,i.A)((function*(e){const i=e;if(0!==i.parent&&"single"!==n.type)try{const n=yield t.CoreUser.getProfile(i.userid,o.COURSE_ID,!0);i.userfullname=n.fullname,i.userpictureurl=n.profileimageurl}catch{}}));return function(o){return e.apply(this,arguments)}}());return yield Promise.all(s),e.sort(((o,n)=>n.timecreated-o.timecreated)),e}))()}invalidateCache(){var o=this;return(0,i.A)((function*(){const n=[];n.push(a.AddonModForum.invalidateForumData(o.COURSE_ID)),o.forum&&(n.push(a.AddonModForum.invalidateDiscussionsList(o.forum.id)),n.push(a.AddonModForum.invalidateCanAddDiscussion(o.forum.id)),n.push(r.CoreGroups.invalidateActivityGroupInfo(o.forum.cmid))),yield Promise.all(n)}))()}invalidateList(){var o=this;return(0,i.A)((function*(){o.forum&&(yield a.AddonModForum.invalidateDiscussionsList(o.forum.id))}))()}}return AddonModForumDiscussionsSource.NEW_DISCUSSION={newDiscussion:!0},AddonModForumDiscussionsSource})()},93593:(o,n,e)=>{e.r(n),e.d(n,{AddonModForumIndexComponent:()=>oo});var i=e(10467),s=e(69006),t=e(16179),r=e(11945),d=e(79555),a=e(93956),u=e(49882),c=e(52749),l=e(98870),m=e(89911),_=e(44682),f=e(29492),p=e(93417),g=e(57095),h=e(87326),I=e(82308),C=e(32440),v=e(6369),M=e(2401),A=e(83696),b=e(25124),F=e(15324),O=e(2216),x=e(89014),D=e(45433),S=e(23039),T=e(23780),y=e(54438),G=e(21182),R=e(73465),P=e(51024),k=e(60177),w=e(69502),$=e(17388),E=e(16986),j=e(97818),N=e(66198),Y=e(64422),L=e(13988),U=e(16658),X=e(7570),V=e(19858),B=e(86198),Q=e(58197),q=e(66731),z=e(43570),H=e(6736),J=e(30864),W=e(59528),K=e(93453),Z=e(73955);const _c0=o=>({numreplies:o}),_c1=o=>({$a:o});function AddonModForumIndexComponent_ion_button_1_Template(o,n){if(1&o){const o=y.RV6();y.j41(0,"ion-button",12),y.nI1(1,"translate"),y.bIt("click",(function AddonModForumIndexComponent_ion_button_1_Template_ion_button_click_0_listener(){y.eBV(o);const n=y.XpG();return y.Njj(n.openSearch())})),y.nrm(2,"ion-icon",13),y.k0s()}2&o&&y.Y8G("ariaLabel",y.bMT(1,1,"core.search"))}function AddonModForumIndexComponent_Conditional_2_Template(o,n){if(1&o){const o=y.RV6();y.j41(0,"ion-button",14),y.nI1(1,"translate"),y.bIt("click",(function AddonModForumIndexComponent_Conditional_2_Template_ion_button_click_0_listener(){y.eBV(o);const n=y.XpG();return y.Njj(n.openModuleSummary())})),y.nrm(2,"ion-icon",15),y.k0s(),y.nrm(3,"core-context-menu")}2&o&&y.Y8G("ariaLabel",y.bMT(1,1,"core.info"))}function AddonModForumIndexComponent_Conditional_3_Template(o,n){if(1&o){const o=y.RV6();y.j41(0,"core-context-menu")(1,"core-context-menu-item",16),y.nI1(2,"translate"),y.bIt("action",(function AddonModForumIndexComponent_Conditional_3_Template_core_context_menu_item_action_1_listener(){y.eBV(o);const n=y.XpG();return y.Njj(n.openModuleSummary())})),y.k0s()()}2&o&&(y.R7$(),y.Y8G("priority",5e3)("content",y.bMT(2,2,"core.info")))}function AddonModForumIndexComponent_core_group_selector_13_Template(o,n){if(1&o){const o=y.RV6();y.j41(0,"core-group-selector",17),y.mxI("selectedChange",(function AddonModForumIndexComponent_core_group_selector_13_Template_core_group_selector_selectedChange_0_listener(n){y.eBV(o);const e=y.XpG();return y.DH7(e.groupId,n)||(e.groupId=n),y.Njj(n)})),y.bIt("selectedChange",(function AddonModForumIndexComponent_core_group_selector_13_Template_core_group_selector_selectedChange_0_listener(){y.eBV(o);const n=y.XpG();return y.Njj(n.groupChanged())})),y.k0s()}if(2&o){const o=y.XpG();y.Y8G("groupInfo",o.groupInfo),y.R50("selected",o.groupId),y.Y8G("courseId",o.courseId)}}function AddonModForumIndexComponent_ion_card_14_Template(o,n){if(1&o&&(y.j41(0,"ion-card",18)(1,"ion-item"),y.nrm(2,"ion-icon",19),y.j41(3,"ion-label"),y.EFF(4),y.k0s()()()),2&o){const o=y.XpG();y.R7$(4),y.JRh(o.availabilityMessage)}}function AddonModForumIndexComponent_ion_card_15_Template(o,n){1&o&&(y.j41(0,"ion-card",18)(1,"ion-item"),y.nrm(2,"ion-icon",19),y.j41(3,"ion-label"),y.EFF(4),y.nI1(5,"translate"),y.k0s()()()),2&o&&(y.R7$(4),y.JRh(y.bMT(5,1,"addon.mod_forum.qandanotify")))}function AddonModForumIndexComponent_ion_card_16_span_4_Template(o,n){1&o&&(y.j41(0,"span"),y.EFF(1),y.nI1(2,"translate"),y.k0s()),2&o&&(y.R7$(),y.JRh(y.bMT(2,1,"addon.mod_forum.cannotadddiscussionall")))}function AddonModForumIndexComponent_ion_card_16_span_5_Template(o,n){1&o&&(y.j41(0,"span"),y.EFF(1),y.nI1(2,"translate"),y.k0s()),2&o&&(y.R7$(),y.JRh(y.bMT(2,1,"addon.mod_forum.cannotadddiscussion")))}function AddonModForumIndexComponent_ion_card_16_Template(o,n){if(1&o&&(y.j41(0,"ion-card",18)(1,"ion-item"),y.nrm(2,"ion-icon",19),y.j41(3,"ion-label"),y.DNE(4,AddonModForumIndexComponent_ion_card_16_span_4_Template,3,3,"span",9)(5,AddonModForumIndexComponent_ion_card_16_span_5_Template,3,3,"span",9),y.k0s()()()),2&o){const o=y.XpG();y.R7$(4),y.Y8G("ngIf",o.groupId<=0),y.R7$(),y.Y8G("ngIf",o.groupId>0)}}function AddonModForumIndexComponent_ng_container_17_div_1_ion_select_option_3_Template(o,n){if(1&o&&(y.j41(0,"ion-select-option",27),y.EFF(1),y.nI1(2,"translate"),y.k0s()),2&o){const o=n.$implicit;y.Y8G("value",o.value),y.R7$(),y.SpI(" ",y.bMT(2,2,o.label)," ")}}function AddonModForumIndexComponent_ng_container_17_div_1_Template(o,n){if(1&o){const o=y.RV6();y.j41(0,"div",6)(1,"core-combobox",25),y.nI1(2,"translate"),y.bIt("onChange",(function AddonModForumIndexComponent_ng_container_17_div_1_Template_core_combobox_onChange_1_listener(n){y.eBV(o);const e=y.XpG(2);return y.Njj(e.setSortOrder(n))})),y.DNE(3,AddonModForumIndexComponent_ng_container_17_div_1_ion_select_option_3_Template,3,4,"ion-select-option",26),y.k0s()()}if(2&o){const o=y.XpG(2);y.R7$(),y.Y8G("label",y.bMT(2,3,"core.sort"))("selection",o.selectedSortOrder.value),y.R7$(2),y.Y8G("ngForOf",o.sortOrders)}}function AddonModForumIndexComponent_ng_container_17_core_empty_box_2_Template(o,n){1&o&&(y.nrm(0,"core-empty-box",28),y.nI1(1,"translate")),2&o&&y.Y8G("message",y.bMT(1,1,"addon.mod_forum.forumnodiscussionsyet"))}function AddonModForumIndexComponent_ng_container_17_core_empty_box_3_Template(o,n){1&o&&(y.j41(0,"core-empty-box",29),y.nI1(1,"translate"),y.j41(2,"p"),y.EFF(3),y.nI1(4,"translate"),y.k0s()()),2&o&&(y.Y8G("message",y.bMT(1,2,"addon.mod_forum.errorloadingsortingorder")),y.R7$(3),y.JRh(y.bMT(4,4,"addon.mod_forum.errorloadingsortingorderdetails")))}function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_icon_3_Template(o,n){1&o&&(y.nrm(0,"ion-icon",43),y.nI1(1,"translate")),2&o&&y.BMQ("aria-label",y.bMT(1,1,"addon.mod_forum.discussionpinned"))}function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_icon_4_Template(o,n){1&o&&(y.nrm(0,"ion-icon",44),y.nI1(1,"translate")),2&o&&y.BMQ("aria-label",y.bMT(1,1,"addon.mod_forum.favourites"))}function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_icon_6_Template(o,n){1&o&&(y.nrm(0,"ion-icon",45),y.nI1(1,"translate")),2&o&&y.BMQ("aria-label",y.bMT(1,1,"addon.mod_forum.discussionlocked"))}function AddonModForumIndexComponent_ng_container_17_ion_item_4_core_user_avatar_8_Template(o,n){if(1&o&&y.nrm(0,"core-user-avatar",46),2&o){const o=y.XpG().$implicit,n=y.XpG(2);y.Y8G("user",o)("courseId",n.courseId)("linkProfile",!1)}}function AddonModForumIndexComponent_ng_container_17_ion_item_4_span_10_Template(o,n){if(1&o&&(y.j41(0,"span",47),y.EFF(1),y.k0s()),2&o){const o=y.XpG().$implicit;y.R7$(),y.JRh(o.userfullname)}}function AddonModForumIndexComponent_ng_container_17_ion_item_4_p_11_Template(o,n){if(1&o&&(y.j41(0,"p",48),y.nrm(1,"ion-icon",49),y.nI1(2,"translate"),y.nrm(3,"core-format-text",50),y.k0s()),2&o){const o=y.XpG().$implicit,n=y.XpG(2);y.R7$(),y.BMQ("aria-label",y.bMT(2,4,"addon.mod_forum.group")),y.R7$(2),y.Y8G("text",o.groupname)("contextInstanceId",n.courseId)("wsNotFiltered",!0)}}function AddonModForumIndexComponent_ng_container_17_ion_item_4_p_12_Template(o,n){if(1&o&&(y.j41(0,"p"),y.EFF(1),y.nI1(2,"coreFormatDate"),y.k0s()),2&o){const o=y.XpG().$implicit;y.R7$(),y.SpI(" ",y.i5U(2,1,1e3*o.created,"strftimerecentfull")," ")}}function AddonModForumIndexComponent_ng_container_17_ion_item_4_p_13_Template(o,n){1&o&&(y.j41(0,"p"),y.nrm(1,"ion-icon",51),y.EFF(2),y.nI1(3,"translate"),y.k0s()),2&o&&(y.R7$(2),y.SpI(" ",y.bMT(3,1,"core.notsent")," "))}function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_row_14_ng_container_6_Template(o,n){if(1&o&&(y.qex(0),y.EFF(1),y.nI1(2,"coreTimeAgo"),y.bVm()),2&o){const o=y.XpG(2).$implicit;y.R7$(),y.SpI(" ",y.bMT(2,1,o.timemodified)," ")}}function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_row_14_ng_container_7_Template(o,n){if(1&o&&(y.qex(0),y.EFF(1),y.nI1(2,"coreTimeAgo"),y.bVm()),2&o){const o=y.XpG(2).$implicit;y.R7$(),y.SpI(" ",y.bMT(2,1,o.created)," ")}}function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_row_14_ion_badge_13_Template(o,n){if(1&o&&(y.j41(0,"ion-badge",57)(1,"span",58),y.EFF(2),y.k0s(),y.j41(3,"span",59),y.EFF(4),y.nI1(5,"translate"),y.k0s()()),2&o){const o=y.XpG(2).$implicit;y.R7$(2),y.JRh(o.numunread),y.R7$(2),y.SpI(" ",y.i5U(5,2,"addon.mod_forum.unreadpostsnumber",y.eq3(5,_c1,o.numunread))," ")}}function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_row_14_Template(o,n){if(1&o&&(y.j41(0,"ion-row",52)(1,"ion-col",53)(2,"ion-note"),y.nrm(3,"ion-icon",51),y.EFF(4),y.nI1(5,"translate"),y.DNE(6,AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_row_14_ng_container_6_Template,3,3,"ng-container",9)(7,AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_row_14_ng_container_7_Template,3,3,"ng-container",9),y.k0s()(),y.j41(8,"ion-col",54)(9,"ion-note"),y.nrm(10,"ion-icon",55),y.EFF(11),y.nI1(12,"translate"),y.DNE(13,AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_row_14_ion_badge_13_Template,6,7,"ion-badge",56),y.k0s()()()),2&o){const o=y.XpG().$implicit;y.R7$(4),y.SpI(" ",y.bMT(5,5,"addon.mod_forum.lastpost")," "),y.R7$(2),y.Y8G("ngIf",o.timemodified>o.created),y.R7$(),y.Y8G("ngIf",o.timemodified<=o.created),y.R7$(4),y.SpI(" ",y.i5U(12,7,"addon.mod_forum.numreplies",y.eq3(10,_c0,o.numreplies))," "),y.R7$(2),y.Y8G("ngIf",o.numunread)}}function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_button_15_Template(o,n){if(1&o){const o=y.RV6();y.j41(0,"ion-button",60),y.nI1(1,"translate"),y.bIt("click",(function AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_button_15_Template_ion_button_click_0_listener(n){y.eBV(o);const e=y.XpG().$implicit,i=y.XpG(2);return y.Njj(i.showOptionsMenu(n,e))})),y.nrm(2,"ion-icon",61),y.k0s()}2&o&&y.Y8G("ariaLabel",y.bMT(1,1,"core.displayoptions"))}function AddonModForumIndexComponent_ng_container_17_ion_item_4_Template(o,n){if(1&o){const o=y.RV6();y.j41(0,"ion-item",30),y.bIt("click",(function AddonModForumIndexComponent_ng_container_17_ion_item_4_Template_ion_item_click_0_listener(){const n=y.eBV(o).$implicit,e=y.XpG(2);return y.Njj(null==e.discussions?null:e.discussions.select(n))})),y.j41(1,"ion-label")(2,"p",31),y.DNE(3,AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_icon_3_Template,2,3,"ion-icon",32)(4,AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_icon_4_Template,2,3,"ion-icon",33),y.nrm(5,"core-format-text",34),y.DNE(6,AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_icon_6_Template,2,3,"ion-icon",35),y.k0s(),y.j41(7,"div",36),y.DNE(8,AddonModForumIndexComponent_ng_container_17_ion_item_4_core_user_avatar_8_Template,1,3,"core-user-avatar",37),y.j41(9,"div",38),y.DNE(10,AddonModForumIndexComponent_ng_container_17_ion_item_4_span_10_Template,2,1,"span",39)(11,AddonModForumIndexComponent_ng_container_17_ion_item_4_p_11_Template,4,6,"p",40)(12,AddonModForumIndexComponent_ng_container_17_ion_item_4_p_12_Template,3,4,"p",9)(13,AddonModForumIndexComponent_ng_container_17_ion_item_4_p_13_Template,4,3,"p",9),y.k0s()(),y.DNE(14,AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_row_14_Template,14,12,"ion-row",41),y.k0s(),y.DNE(15,AddonModForumIndexComponent_ng_container_17_ion_item_4_ion_button_15_Template,3,3,"ion-button",42),y.k0s()}if(2&o){const o=n.$implicit,e=y.XpG(2);y.Y8G("detail",!0)("lines",o.groupname&&"none"),y.BMQ("aria-current",null==e.discussions?null:e.discussions.getItemAriaCurrent(o)),y.R7$(3),y.Y8G("ngIf",o.pinned),y.R7$(),y.Y8G("ngIf",o.starred),y.R7$(),y.Y8G("text",o.subject)("contextInstanceId",e.module&&e.module.id)("courseId",e.courseId),y.R7$(),y.Y8G("ngIf",o.locked),y.R7$(2),y.Y8G("ngIf",o.userfullname),y.R7$(2),y.Y8G("ngIf",o.userfullname),y.R7$(),y.Y8G("ngIf",o.groupname),y.R7$(),y.Y8G("ngIf",e.isOnlineDiscussion(o)),y.R7$(),y.Y8G("ngIf",e.isOfflineDiscussion(o)),y.R7$(),y.Y8G("ngIf",e.isOnlineDiscussion(o)),y.R7$(),y.Y8G("ngIf",e.canPin||o.canlock||o.canfavourite)}}function AddonModForumIndexComponent_ng_container_17_Template(o,n){if(1&o){const o=y.RV6();y.qex(0),y.DNE(1,AddonModForumIndexComponent_ng_container_17_div_1_Template,4,5,"div",20)(2,AddonModForumIndexComponent_ng_container_17_core_empty_box_2_Template,2,3,"core-empty-box",21)(3,AddonModForumIndexComponent_ng_container_17_core_empty_box_3_Template,5,6,"core-empty-box",22)(4,AddonModForumIndexComponent_ng_container_17_ion_item_4_Template,16,16,"ion-item",23),y.j41(5,"core-infinite-loading",24),y.bIt("action",(function AddonModForumIndexComponent_ng_container_17_Template_core_infinite_loading_action_5_listener(n){y.eBV(o);const e=y.XpG();return y.Njj(e.fetchMoreDiscussions(n))})),y.k0s(),y.bVm()}if(2&o){const o=y.XpG();y.R7$(),y.Y8G("ngIf",o.discussions&&o.sortingAvailable&&o.selectedSortOrder),y.R7$(),y.Y8G("ngIf",!o.discussions||!o.discussions.hasDiscussions&&!o.errorLoadingDiscussions),y.R7$(),y.Y8G("ngIf",o.errorLoadingDiscussions),y.R7$(),y.Y8G("ngForOf",o.discussionsItems),y.R7$(),y.Y8G("enabled",o.discussions&&o.discussions.loaded&&!o.discussions.completed)("error",o.fetchFailed)}}function AddonModForumIndexComponent_ion_fab_19_Template(o,n){if(1&o){const o=y.RV6();y.j41(0,"ion-fab",62)(1,"ion-fab-button",63),y.bIt("click",(function AddonModForumIndexComponent_ion_fab_19_Template_ion_fab_button_click_1_listener(){y.eBV(o);const n=y.XpG();return y.Njj(n.openNewDiscussion())})),y.nrm(2,"ion-icon",64),y.j41(3,"span",59),y.EFF(4),y.k0s()()()}if(2&o){const o=y.XpG();y.R7$(),y.BMQ("aria-label",o.addDiscussionText),y.R7$(3),y.JRh(o.addDiscussionText)}}let oo=(()=>{var o;class AddonModForumIndexComponent extends s.y{constructor(o,n,e){super("AddonModForumIndexComponent",n,e),this.route=o,this.content=n,this.component=O.Ep,this.pluginName="forum",this.discussionsItems=[],this.fetchFailed=!1,this.canAddDiscussion=!1,this.availabilityMessage=null,this.sortOrders=[],this.hasOfflineRatings=!1,this.showQAMessage=!1,this.isSetPinAvailable=!1,this.showSearch=!1,this.fetchContentDefaultError="addon.mod_forum.errorgetforum",this.syncEventName=O.D7,this.checkCompletionAfterLog=!1,this.promisedDiscussions=new b._}get discussions(){return this.promisedDiscussions.value}get forum(){var o;return null===(o=this.discussions)||void 0===o?void 0:o.getSource().forum}get selectedSortOrder(){var o,n;return null!==(o=null===(n=this.discussions)||void 0===n?void 0:n.getSource().selectedSortOrder)&&void 0!==o?o:void 0}get supportsChangeGroup(){var o,n;return null!==(o=null===(n=this.discussions)||void 0===n?void 0:n.getSource().supportsChangeGroup)&&void 0!==o&&o}get groupId(){var o,n;return null!==(o=null===(n=this.discussions)||void 0===n?void 0:n.getSource().groupId)&&void 0!==o?o:0}set groupId(o){this.discussions&&(this.discussions.getSource().groupId=o)}get groupInfo(){var o;return null===(o=this.discussions)||void 0===o?void 0:o.getSource().groupInfo}get usesGroups(){var o;return!(null===(o=this.discussions)||void 0===o||!o.getSource().usesGroups)}get canPin(){var o;return!(!this.isSetPinAvailable||null===(o=this.discussions)||void 0===o||null===(o=o.getSource().allPartsPermissions)||void 0===o||!o.canpindiscussions)}get canAddDiscussionToGroup(){var o;return!!(this.forum&&this.canAddDiscussion&&null!==(o=this.discussions)&&void 0!==o&&o.getSource().canAddDiscussionToGroup)}get errorLoadingDiscussions(){var o;return!(null===(o=this.discussions)||void 0===o||!o.getSource().errorLoadingDiscussions)}isOnlineDiscussion(o){var n;return!(null===(n=this.discussions)||void 0===n||!n.getSource().isOnlineDiscussion(o))}isOfflineDiscussion(o){var n;return!(null===(n=this.discussions)||void 0===n||!n.getSource().isOfflineDiscussion(o))}ngOnInit(){var _superprop_getNgOnInit=()=>super.ngOnInit,o=this;return(0,i.A)((function*(){o.addDiscussionText=d.HT.instant("addon.mod_forum.addanewdiscussion"),o.sortingAvailable=t.AddonModForum.isDiscussionListSortingAvailable(),o.sortOrders=t.AddonModForum.getAvailableSortOrders(),o.isSetPinAvailable=t.AddonModForum.isSetPinStateAvailableForSite(),yield _superprop_getNgOnInit().call(o);const n=A.u.getOrCreateSource(v.a,[o.courseId,o.module.id,o.courseContentsPage?`${O.Yj}/`:""]);var e;o.sourceUnsubscribe=n.addListener({onItemsUpdated:(e=(0,i.A)((function*(e){if(o.discussionsItems=e.filter((o=>!n.isNewDiscussionForm(o))),o.hasOffline=e.some((o=>n.isOfflineDiscussion(o))),!o.forum)return;const s=yield r.p.hasForumReplies(o.forum.id);if(o.hasOffline=o.hasOffline||s||o.hasOfflineRatings,s){const n=e.map(function(){var n=(0,i.A)((function*(n){var e;if(null===(e=o.discussions)||void 0===e||!e.getSource().isOnlineDiscussion(n))return;const i=yield r.p.getDiscussionReplies(n.discussion);n.numreplies=Number(n.numreplies)+i.length}));return function(o){return n.apply(this,arguments)}}());yield Promise.all(n)}})),function onItemsUpdated(o){return e.apply(this,arguments)}),onReset:()=>{o.discussionsItems=[]}}),o.promisedDiscussions.resolve(new AddonModForumDiscussionsManager(n,o)),o.syncManualObserver=u.z.on(O.uP,(n=>{o.autoSyncEventReceived(n)}),o.siteId),o.newDiscObserver=u.z.on(O.p8,(n=>o.eventReceived(!0,n))),o.replyObserver=u.z.on(O.L4,(n=>o.eventReceived(!1,n))),o.changeDiscObserver=u.z.on(O.rh,(n=>{o.forum&&(o.forum.id!==n.forumId&&n.cmId!==o.module.id||t.AddonModForum.invalidateDiscussionsList(o.forum.id).finally((()=>{if(n.discussionId){var e;const i=null===(e=o.discussions)||void 0===e?void 0:e.items.find((e=>{var i;return(null===(i=o.discussions)||void 0===i?void 0:i.getSource().isOnlineDiscussion(e))&&n.discussionId==e.discussion}));i&&(void 0!==n.locked&&(i.locked=n.locked),void 0!==n.pinned&&(i.pinned=n.pinned),void 0!==n.starred&&(i.starred=n.starred),o.showLoadingAndRefresh(!1))}var i;void 0!==n.deleted&&n.deleted&&(0==(null===(i=n.post)||void 0===i?void 0:i.parentid)&&p.CoreScreen.isTablet&&o.discussions&&!o.discussions.empty&&o.discussions.select(o.discussions[0]),o.showLoadingAndRefresh(!1))})))})),o.ratingOfflineObserver=u.z.on(h.CoreRatingProvider.RATING_SAVED_EVENT,(n=>{o.forum&&"mod_forum"==n.component&&"post"==n.ratingArea&&"module"==n.contextLevel&&n.instanceId==o.forum.cmid&&(o.hasOfflineRatings=!0,o.hasOffline=!0)})),o.ratingSyncObserver=u.z.on(I.CoreRatingSyncProvider.SYNCED_EVENT,function(){var n=(0,i.A)((function*(n){o.forum&&"mod_forum"==n.component&&"post"==n.ratingArea&&"module"==n.contextLevel&&n.instanceId==o.forum.cmid&&(o.hasOfflineRatings=yield C.CoreRatingOffline.hasRatings("mod_forum","post","module",o.forum.cmid),o.hasOffline=o.hasOffline||o.hasOfflineRatings)}));return function(o){return n.apply(this,arguments)}}()),o.showSearch=yield o.isSearchEnabled()}))()}ngAfterViewInit(){var o=this;return(0,i.A)((function*(){yield o.loadContent(!1,!0);(yield o.promisedDiscussions).start(o.splitView)}))()}ngOnDestroy(){var o;super.ngOnDestroy(),this.syncManualObserver&&this.syncManualObserver.off(),this.newDiscObserver&&this.newDiscObserver.off(),this.replyObserver&&this.replyObserver.off(),this.viewDiscObserver&&this.viewDiscObserver.off(),this.changeDiscObserver&&this.changeDiscObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off(),this.sourceUnsubscribe&&this.sourceUnsubscribe(),null===(o=this.discussions)||void 0===o||o.destroy()}openSearch(){var o=this;return(0,i.A)((function*(){o.forum&&(yield F.CoreNavigator.navigateToSitePath(O.t4,{params:{courseId:o.courseId,forumId:o.forum.id}}))}))()}fetchContent(o=!1,n=!1,e=!1){var s=this;return(0,i.A)((function*(){s.fetchFailed=!1;try{if(yield Promise.all([s.fetchForum(n,e),s.fetchSortOrderPreference()]),!s.forum)return;const i=yield s.promisedDiscussions;yield Promise.all([o?i.reload():i.load(),C.CoreRatingOffline.hasRatings("mod_forum","post","module",s.forum.cmid).then((o=>{s.hasOfflineRatings=o}))])}catch(o){throw s.fetchFailed=!0,o}}))()}fetchForum(o=!1,n=!1){var e=this;return(0,i.A)((function*(){var s;if(!e.courseId||!e.module)return;const r=yield e.promisedDiscussions;if(yield r.getSource().loadForum(),!e.forum)return;const l=e.forum,m=!(null!==(s=c.CoreSites.getCurrentSite())&&void 0!==s&&s.isVersionGreaterEqualThan("3.11"));switch(e.description=l.intro||e.description,e.availabilityMessage=a.i.getAvailabilityMessage(l,m),e.descriptionNote=d.HT.instant("addon.mod_forum.numdiscussions",{numdiscussions:l.numdiscussions}),e.dataRetrieved.emit(l),l.type){case"news":case"blog":e.addDiscussionText=d.HT.instant("addon.mod_forum.addanewtopic");break;case"qanda":e.addDiscussionText=d.HT.instant("addon.mod_forum.addanewquestion");break;default:e.addDiscussionText=d.HT.instant("addon.mod_forum.addanewdiscussion")}if(o){(yield e.syncActivity(n))&&u.z.trigger(O.uP,{forumId:l.id,userId:c.CoreSites.getCurrentSiteUserId(),source:"index"},c.CoreSites.getCurrentSiteId())}const _=[];_.push(r.getSource().loadGroupInfo(l.id)),_.push(t.AddonModForum.getAccessInformation(l.id,{cmId:e.module.id}).then(function(){var o=(0,i.A)((function*(o){const n=a.i.isCutoffDateReached(l)&&!o.cancanoverridecutoff;e.canAddDiscussion=!!l.cancreatediscussions&&!n,e.showQAMessage="qanda"===l.type&&!o.canviewqandawithoutposting}));return function(n){return o.apply(this,arguments)}}())),yield Promise.all(_)}))()}fetchMoreDiscussions(o){var n=this;return(0,i.A)((function*(){const e=yield n.promisedDiscussions;try{n.fetchFailed=!1,yield e.load()}catch(o){m.CoreDomUtils.showErrorModalDefault(o,"addon.mod_forum.errorgetforum",!0),n.fetchFailed=!0}finally{o()}}))()}fetchSortOrderPreference(){var o=this;return(0,i.A)((function*(){const n=yield o.promisedDiscussions,e=yield t.AddonModForum.getSelectedSortOrder();n.getSource().selectedSortOrder=e}))()}invalidateContent(){var o=this;return(0,i.A)((function*(){const n=[];o.discussions&&n.push(o.discussions.getSource().invalidateCache()),o.forum&&n.push(t.AddonModForum.invalidateAccessInformation(o.forum.id)),o.sortingAvailable&&n.push(l.CoreUser.invalidateUserPreference(O.BR)),yield Promise.all(n)}))()}sync(){return g.V.sync(this.module,this.courseId)}isRefreshSyncNeeded(o){return!(!this.forum||"source"in o&&"index"==o.source||o.forumId!=this.forum.id||o.userId!=c.CoreSites.getCurrentSiteUserId())}eventReceived(o,n){var e=this;return(0,i.A)((function*(){if(e.forum&&e.forum.id===n.forumId||n.cmId===e.module.id){e.checkCompletion();try{if(o){D.CoreToasts.show({message:"addon.mod_forum.postaddedsuccess",translateMessage:!0});const o=n.groupId;var i;if(!o||o<0||!e.groupId||o===e.groupId)yield e.showLoadingAndRefresh(!1);else yield null===(i=e.discussions)||void 0===i?void 0:i.getSource().invalidateList()}else yield e.showLoadingAndRefresh(!1)}finally{if(o&&p.CoreScreen.isTablet&&e.discussions){const o=n,i=e.discussions.items.find((n=>{var i,s,t;return null!==(i=e.discussions)&&void 0!==i&&i.getSource().isOfflineDiscussion(n)?n.timecreated===o.discTimecreated:!(null===(s=e.discussions)||void 0===s||!s.getSource().isOnlineDiscussion(n))&&(null!==(t=o.discussionIds)&&void 0!==t?t:[]).includes(n.discussion)}));e.discussions.select(null!=i?i:null)}}}}))()}openNewDiscussion(){var o;null===(o=this.discussions)||void 0===o||o.select(v.a.NEW_DISCUSSION)}setSortOrder(o){var n=this;return(0,i.A)((function*(){var e;const i=n.sortOrders.find((n=>n.value===o));if(n.discussions&&i&&i.value!=(null===(e=n.discussions.getSource().selectedSortOrder)||void 0===e?void 0:e.value)){n.discussions.getSource().selectedSortOrder=i,n.discussions.getSource().setDirty(!0);try{yield l.CoreUser.setUserPreference(O.BR,i.value.toFixed(0)),yield n.showLoadingAndFetch()}catch(o){m.CoreDomUtils.showErrorModalDefault(o,"Error updating preference.")}}}))()}showOptionsMenu(o,n){var s=this;return(0,i.A)((function*(){if(!s.forum)return;o.preventDefault(),o.stopPropagation();const{AddonModForumDiscussionOptionsMenuComponent:i}=yield e.e(4237).then(e.bind(e,4237)),t=yield S.CorePopovers.open({component:i,componentProps:{discussion:n,forumId:s.forum.id,cmId:s.module.id},event:o});if(t&&t.action)switch(t.action){case"lock":n.locked=t.value;break;case"pin":n.pinned=t.value;break;case"star":n.starred=t.value}}))()}groupChanged(){var o=this;return(0,i.A)((function*(){const n=yield T.CoreLoadings.show();try{var e,i;yield Promise.all([null===(e=o.discussions)||void 0===e?void 0:e.getSource().loadSelectedGroupData(),null===(i=o.discussions)||void 0===i?void 0:i.reload()])}catch(o){m.CoreDomUtils.showErrorModalDefault(o,"core.errorloadingcontent",!0)}finally{n.dismiss()}}))()}isSearchEnabled(){return(0,i.A)((function*(){if(!x.CoreSearchGlobalSearch.isEnabled())return!1;return!!(yield x.CoreSearchGlobalSearch.getSearchAreas()).find((({id:o})=>"mod_forum-post"===o))}))()}}return(o=AddonModForumIndexComponent).ɵfac=function AddonModForumIndexComponent_Factory(n){return new(n||o)(y.rXU(G.nX),y.rXU(R.W9,8),y.rXU(P.k,8))},o.ɵcmp=y.VBU({type:o,selectors:[["addon-mod-forum-index"]],viewQuery:function AddonModForumIndexComponent_Query(o,n){if(1&o&&y.GBs(f.M,5),2&o){let o;y.mGM(o=y.lsd())&&(n.splitView=o.first)}},features:[y.Vt3],decls:20,vars:23,consts:[["slot","end"],["fill","clear",3,"ariaLabel","click",4,"ngIf"],["slot","fixed",3,"ionRefresh","disabled"],[3,"pullingText"],[3,"hideUntil"],[3,"completionChanged","module","description","component","componentId","courseId","hasDataToSync"],[1,"ion-text-wrap"],[3,"groupInfo","selected","courseId","selectedChange",4,"ngIf"],["class","core-info-card",4,"ngIf"],[4,"ngIf"],["collapsible-footer","",3,"hidden","courseId","currentModuleId"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end",4,"ngIf"],["fill","clear",3,"click","ariaLabel"],["name","fas-magnifying-glass","slot","icon-only","aria-hidden","true"],["fill","clear","aria-haspopup","true",3,"click","ariaLabel"],["name","fas-circle-info","slot","icon-only","aria-hidden","true"],["iconAction","fas-circle-info",3,"action","priority","content"],[3,"selectedChange","groupInfo","selected","courseId"],[1,"core-info-card"],["name","fas-circle-info","slot","start","aria-hidden","true"],["class","ion-text-wrap",4,"ngIf"],["icon","far-comments",3,"message",4,"ngIf"],["icon","fas-triangle-exclamation",3,"message",4,"ngIf"],["class","addon-mod-forum-discussion","button","",3,"detail","lines","click",4,"ngFor","ngForOf"],[3,"action","enabled","error"],[3,"onChange","label","selection"],["class","ion-text-wrap",3,"value",4,"ngFor","ngForOf"],[1,"ion-text-wrap",3,"value"],["icon","far-comments",3,"message"],["icon","fas-triangle-exclamation",3,"message"],["button","",1,"addon-mod-forum-discussion",3,"click","detail","lines"],[1,"addon-mod-forum-discussion-title","ion-text-wrap","item-heading"],["name","fas-map-pin",4,"ngIf"],["name","fas-star","class","addon-forum-star",4,"ngIf"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["name","fas-lock","class","addon-mod-forum-locked-icon",4,"ngIf"],[1,"addon-mod-forum-discussion-info"],["slot","start",3,"user","courseId","linkProfile",4,"ngIf"],[1,"addon-mod-forum-discussion-author"],["class","core-discussionusername",4,"ngIf"],["class","core-groupname",4,"ngIf"],["class","ion-text-center addon-mod-forum-discussion-more-info",4,"ngIf"],["fill","clear","slot","end",3,"ariaLabel","click",4,"ngIf"],["name","fas-map-pin"],["name","fas-star",1,"addon-forum-star"],["name","fas-lock",1,"addon-mod-forum-locked-icon"],["slot","start",3,"user","courseId","linkProfile"],[1,"core-discussionusername"],[1,"core-groupname"],["name","fas-users"],["contextLevel","course",3,"text","contextInstanceId","wsNotFiltered"],["name","fas-clock","aria-hidden","true"],[1,"ion-text-center","addon-mod-forum-discussion-more-info"],[1,"ion-text-start"],[1,"ion-text-end"],["name","fas-comments","aria-hidden","true"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],["aria-hidden","true"],[1,"sr-only"],["fill","clear","slot","end",3,"click","ariaLabel"],["name","ellipsis-vertical","slot","icon-only","aria-hidden","true"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end"],[3,"click"],["name","fas-plus","aria-hidden","true"]],template:function AddonModForumIndexComponent_Template(o,n){1&o&&(y.j41(0,"core-navbar-buttons",0),y.DNE(1,AddonModForumIndexComponent_ion_button_1_Template,3,3,"ion-button",1)(2,AddonModForumIndexComponent_Conditional_2_Template,4,3)(3,AddonModForumIndexComponent_Conditional_3_Template,3,4),y.k0s(),y.j41(4,"core-split-view")(5,"ion-refresher",2),y.bIt("ionRefresh",(function AddonModForumIndexComponent_Template_ion_refresher_ionRefresh_5_listener(o){return n.doRefresh(o.target)})),y.nrm(6,"ion-refresher-content",3),y.nI1(7,"translate"),y.k0s(),y.j41(8,"core-loading",4)(9,"core-course-module-info",5),y.bIt("completionChanged",(function AddonModForumIndexComponent_Template_core_course_module_info_completionChanged_9_listener(){return n.onCompletionChange()})),y.j41(10,"ion-item",6)(11,"ion-label"),y.EFF(12),y.k0s()()(),y.DNE(13,AddonModForumIndexComponent_core_group_selector_13_Template,1,3,"core-group-selector",7)(14,AddonModForumIndexComponent_ion_card_14_Template,5,1,"ion-card",8)(15,AddonModForumIndexComponent_ion_card_15_Template,6,3,"ion-card",8)(16,AddonModForumIndexComponent_ion_card_16_Template,6,2,"ion-card",8)(17,AddonModForumIndexComponent_ng_container_17_Template,6,6,"ng-container",9),y.k0s(),y.nrm(18,"core-course-module-navigation",10),y.DNE(19,AddonModForumIndexComponent_ion_fab_19_Template,5,2,"ion-fab",11),y.k0s()),2&o&&(y.R7$(),y.Y8G("ngIf",n.showSearch),y.R7$(),y.vxM(2,n.courseContentsPage?3:2),y.R7$(3),y.Y8G("disabled",n.showLoading||n.discussions&&!n.discussions.loaded),y.R7$(),y.FS9("pullingText",y.bMT(7,21,"core.pulltorefresh")),y.R7$(2),y.Y8G("hideUntil",!n.showLoading&&n.discussions&&n.discussions.loaded),y.R7$(),y.Y8G("module",n.module)("description",n.forum&&"single"!==n.forum.type&&n.description)("component",n.component)("componentId",n.componentId)("courseId",n.courseId)("hasDataToSync",n.hasOffline||n.hasOfflineRatings),y.R7$(3),y.SpI(" ",n.descriptionNote," "),y.R7$(),y.Y8G("ngIf",n.supportsChangeGroup),y.R7$(),y.Y8G("ngIf",n.availabilityMessage),y.R7$(),y.Y8G("ngIf",n.showQAMessage),y.R7$(),y.Y8G("ngIf",n.usesGroups&&n.canAddDiscussion&&!n.canAddDiscussionToGroup),y.R7$(),y.Y8G("ngIf",n.forum),y.R7$(),y.Y8G("hidden",n.showLoading)("courseId",n.courseId)("currentModuleId",n.module.id),y.R7$(),y.Y8G("ngIf",n.canAddDiscussionToGroup))},dependencies:[k.Sq,k.bT,w.B,$.Q,E.h,j.F,N.b,Y.R,L.c,f.M,U.T,X._,V.A,B.t,Q.B,q.i,z.T,R.In,R.Jm,R.b_,R.hU,R.Q8,R.YW,R.iq,R.uz,R.he,R.JI,R.To,R.Ki,R.ln,R.Ip,H.Y,J.Q,W.f,K.A,Z.D9],styles:["[_nghost-%COMP%]   .addon-forum-star[_ngcontent-%COMP%]{color:var(--core-star-color)}[_nghost-%COMP%]   .core-groupname[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:4px}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-heading[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px;font-weight:700}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-heading[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-inline-start:0;margin-inline-end:6px;margin-top:0;margin-bottom:0}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .item-heading[_ngcontent-%COMP%]   ion-icon.addon-mod-forum-locked-icon[_ngcontent-%COMP%]{margin-inline-start:4px;margin-inline-end:0px;color:var(--gray-500)}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   core-user-avatar[_ngcontent-%COMP%]{--core-avatar-size: var(--addon-forum-avatar-size);margin-inline-start:0;margin-inline-end:8px;margin-top:0;margin-bottom:0}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   .addon-mod-forum-discussion-info[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   .addon-mod-forum-discussion-info[_ngcontent-%COMP%]   .addon-mod-forum-discussion-author[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   .addon-mod-forum-discussion-title[_ngcontent-%COMP%]{margin-inline-end:8px;line-height:18px}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   .addon-mod-forum-discussion-more-info.ios[_ngcontent-%COMP%]{font-size:.9rem}[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;top:4px}@supports (inset-inline-start: 0){[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{inset-inline-end:8px}}@supports not (inset-inline-start: 0){[_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{right:8px}[dir=rtl][_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{left:unset;right:unset;left:8px}@supports selector(:dir(rtl)){[_nghost-%COMP%]:dir(rtl)   .addon-mod-forum-discussion.item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{left:unset;right:unset;left:8px}}}[_nghost-%COMP%]   .core-group-selector[_ngcontent-%COMP%]{border-top:1px solid var(--spacer-color)}"]}),AddonModForumIndexComponent})();class AddonModForumDiscussionsManager extends M.R{constructor(o,n){super(o,n.route.component),this.page=n}getDefaultItem(){const o=this.getSource();return this.items.find((n=>!o.isNewDiscussionForm(n)))||null}logActivity(){var o=this;return(0,i.A)((function*(){const n=o.getSource().forum;if(n){try{yield t.AddonModForum.logView(n.id),_.CoreCourse.checkModuleCompletion(o.page.courseId,o.page.module.completiondata)}catch{}o.page.analyticsLogEvent("mod_forum_view_forum")}}))()}get hasDiscussions(){const o=this.getSource(),n=o.getItems();return null!==n&&n.some((n=>!o.isNewDiscussionForm(n)))}}}}]);