/*! For license information please see 6528.c8e6584d09224fc1.js.LICENSE.txt */
(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6528],{96528:(i,u,l)=>{"use strict";l.r(u),l.d(u,{initializeVideoJSOgvJS:()=>initializeVideoJSOgvJS,videojs:()=>pl});var c=l(18022),h=l(31400),p=l(12843),m=l.n(p),g=l(90410),v=l.n(g);function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var u=1;u<arguments.length;u++){var l=arguments[u];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i},_extends.apply(this,arguments)}var _=l(72610),y=l.n(_);function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _setPrototypeOf(i,u){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(i,u){return i.__proto__=u,i},_setPrototypeOf(i,u)}function _inheritsLoose(i,u){i.prototype=Object.create(u.prototype),i.prototype.constructor=i,_setPrototypeOf(i,u)}var b=l(29766),T=l.n(b),S=l(17621),k=l.n(S),E=l(80509),C=l.n(E);function _isNativeReflectConstruct(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(i){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!i})()}function _construct(i,u,l){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var c=[null];c.push.apply(c,u);var h=new(i.bind.apply(i,c));return l&&_setPrototypeOf(h,l.prototype),h}var w=l(4753),P=l.n(w),A="http://example.com";const x=function resolveUrl(i,u){if(/^[a-z]+:/i.test(u))return u;/^data:/.test(i)&&(i=m().location&&m().location.href||"");var l="function"==typeof m().URL,c=/^\/\//.test(i),h=!m().location&&!/\/\//i.test(i);if(l?i=new(m().URL)(i,m().location||A):/\/\//i.test(i)||(i=P().buildAbsoluteURL(m().location&&m().location.href||"",i)),l){var p=new URL(u,i);return h?p.href.slice(18):c?p.href.slice(p.protocol.length):p.href}return P().buildAbsoluteURL(i,u)};var I=function(){function Stream(){this.listeners={}}var i=Stream.prototype;return i.on=function on(i,u){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(u)},i.off=function off(i,u){if(!this.listeners[i])return!1;var l=this.listeners[i].indexOf(u);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(l,1),l>-1},i.trigger=function trigger(i){var u=this.listeners[i];if(u)if(2===arguments.length)for(var l=u.length,c=0;c<l;++c)u[c].call(this,arguments[1]);else for(var h=Array.prototype.slice.call(arguments,1),p=u.length,m=0;m<p;++m)u[m].apply(this,h)},i.dispose=function dispose(){this.listeners={}},i.pipe=function pipe(i){this.on("data",(function(u){i.push(u)}))},Stream}();function decodeB64ToUint8Array(i){for(var u=function atob(i){return m().atob?m().atob(i):Buffer.from(i,"base64").toString("binary")}(i),l=new Uint8Array(u.length),c=0;c<u.length;c++)l[c]=u.charCodeAt(c);return l}var O,L,D,V=function(i){function LineStream(){var u;return(u=i.call(this)||this).buffer="",u}return _inheritsLoose(LineStream,i),LineStream.prototype.push=function push(i){var u;for(this.buffer+=i,u=this.buffer.indexOf("\n");u>-1;u=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,u)),this.buffer=this.buffer.substring(u+1)},LineStream}(I),R=String.fromCharCode(9),M=function parseByterange(i){var u=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),l={};return u[1]&&(l.length=parseInt(u[1],10)),u[2]&&(l.offset=parseInt(u[2],10)),l},N=function parseAttributes(i){for(var u,l=i.split(function attributeSeparator(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')}()),c={},h=l.length;h--;)""!==l[h]&&((u=/([^=]*)=(.*)/.exec(l[h]).slice(1))[0]=u[0].replace(/^\s+|\s+$/g,""),u[1]=u[1].replace(/^\s+|\s+$/g,""),u[1]=u[1].replace(/^['"](.*)['"]$/g,"$1"),c[u[0]]=u[1]);return c},B=function(i){function ParseStream(){var u;return(u=i.call(this)||this).customParsers=[],u.tagMappers=[],u}_inheritsLoose(ParseStream,i);var u=ParseStream.prototype;return u.push=function push(i){var u,l,c=this;if(0!==(i=i.trim()).length){if("#"!==i[0])return this.trigger("data",{type:"uri",uri:i}),void 0;this.tagMappers.reduce((function(u,l){var c=l(i);return c===i?u:u.concat([c])}),[i]).forEach((function(i){for(var h=0;h<c.customParsers.length;h++)if(c.customParsers[h].call(c,i))return;if(0!==i.indexOf("#EXT"))return c.trigger("data",{type:"comment",text:i.slice(1)}),void 0;if(i=i.replace("\r",""),u=/^#EXTM3U/.exec(i))return c.trigger("data",{type:"tag",tagType:"m3u"}),void 0;if(u=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(i))return l={type:"tag",tagType:"inf"},u[1]&&(l.duration=parseFloat(u[1])),u[2]&&(l.title=u[2]),c.trigger("data",l),void 0;if(u=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(i))return l={type:"tag",tagType:"targetduration"},u[1]&&(l.duration=parseInt(u[1],10)),c.trigger("data",l),void 0;if(u=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(i))return l={type:"tag",tagType:"version"},u[1]&&(l.version=parseInt(u[1],10)),c.trigger("data",l),void 0;if(u=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(i))return l={type:"tag",tagType:"media-sequence"},u[1]&&(l.number=parseInt(u[1],10)),c.trigger("data",l),void 0;if(u=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(i))return l={type:"tag",tagType:"discontinuity-sequence"},u[1]&&(l.number=parseInt(u[1],10)),c.trigger("data",l),void 0;if(u=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(i))return l={type:"tag",tagType:"playlist-type"},u[1]&&(l.playlistType=u[1]),c.trigger("data",l),void 0;if(u=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(i))return l=_extends(M(u[1]),{type:"tag",tagType:"byterange"}),c.trigger("data",l),void 0;if(u=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(i))return l={type:"tag",tagType:"allow-cache"},u[1]&&(l.allowed=!/NO/.test(u[1])),c.trigger("data",l),void 0;if(u=/^#EXT-X-MAP:?(.*)$/.exec(i)){if(l={type:"tag",tagType:"map"},u[1]){var p=N(u[1]);p.URI&&(l.uri=p.URI),p.BYTERANGE&&(l.byterange=M(p.BYTERANGE))}return c.trigger("data",l),void 0}if(u=/^#EXT-X-STREAM-INF:?(.*)$/.exec(i)){if(l={type:"tag",tagType:"stream-inf"},u[1]){if(l.attributes=N(u[1]),l.attributes.RESOLUTION){var m=l.attributes.RESOLUTION.split("x"),g={};m[0]&&(g.width=parseInt(m[0],10)),m[1]&&(g.height=parseInt(m[1],10)),l.attributes.RESOLUTION=g}l.attributes.BANDWIDTH&&(l.attributes.BANDWIDTH=parseInt(l.attributes.BANDWIDTH,10)),l.attributes["FRAME-RATE"]&&(l.attributes["FRAME-RATE"]=parseFloat(l.attributes["FRAME-RATE"])),l.attributes["PROGRAM-ID"]&&(l.attributes["PROGRAM-ID"]=parseInt(l.attributes["PROGRAM-ID"],10))}return c.trigger("data",l),void 0}return(u=/^#EXT-X-MEDIA:?(.*)$/.exec(i))?(l={type:"tag",tagType:"media"},u[1]&&(l.attributes=N(u[1])),c.trigger("data",l),void 0):(u=/^#EXT-X-ENDLIST/.exec(i))?(c.trigger("data",{type:"tag",tagType:"endlist"}),void 0):(u=/^#EXT-X-DISCONTINUITY/.exec(i))?(c.trigger("data",{type:"tag",tagType:"discontinuity"}),void 0):(u=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(i))?(l={type:"tag",tagType:"program-date-time"},u[1]&&(l.dateTimeString=u[1],l.dateTimeObject=new Date(u[1])),c.trigger("data",l),void 0):(u=/^#EXT-X-KEY:?(.*)$/.exec(i))?(l={type:"tag",tagType:"key"},u[1]&&(l.attributes=N(u[1]),l.attributes.IV&&("0x"===l.attributes.IV.substring(0,2).toLowerCase()&&(l.attributes.IV=l.attributes.IV.substring(2)),l.attributes.IV=l.attributes.IV.match(/.{8}/g),l.attributes.IV[0]=parseInt(l.attributes.IV[0],16),l.attributes.IV[1]=parseInt(l.attributes.IV[1],16),l.attributes.IV[2]=parseInt(l.attributes.IV[2],16),l.attributes.IV[3]=parseInt(l.attributes.IV[3],16),l.attributes.IV=new Uint32Array(l.attributes.IV))),c.trigger("data",l),void 0):(u=/^#EXT-X-START:?(.*)$/.exec(i))?(l={type:"tag",tagType:"start"},u[1]&&(l.attributes=N(u[1]),l.attributes["TIME-OFFSET"]=parseFloat(l.attributes["TIME-OFFSET"]),l.attributes.PRECISE=/YES/.test(l.attributes.PRECISE)),c.trigger("data",l),void 0):(u=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(i))?((l={type:"tag",tagType:"cue-out-cont"}).data=u[1]?u[1]:"",c.trigger("data",l),void 0):(u=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(i))?((l={type:"tag",tagType:"cue-out"}).data=u[1]?u[1]:"",c.trigger("data",l),void 0):(u=/^#EXT-X-CUE-IN:?(.*)?$/.exec(i))?((l={type:"tag",tagType:"cue-in"}).data=u[1]?u[1]:"",c.trigger("data",l),void 0):(u=/^#EXT-X-SKIP:(.*)$/.exec(i))&&u[1]?((l={type:"tag",tagType:"skip"}).attributes=N(u[1]),l.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(l.attributes["SKIPPED-SEGMENTS"]=parseInt(l.attributes["SKIPPED-SEGMENTS"],10)),l.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(l.attributes["RECENTLY-REMOVED-DATERANGES"]=l.attributes["RECENTLY-REMOVED-DATERANGES"].split(R)),c.trigger("data",l),void 0):(u=/^#EXT-X-PART:(.*)$/.exec(i))&&u[1]?((l={type:"tag",tagType:"part"}).attributes=N(u[1]),["DURATION"].forEach((function(i){l.attributes.hasOwnProperty(i)&&(l.attributes[i]=parseFloat(l.attributes[i]))})),["INDEPENDENT","GAP"].forEach((function(i){l.attributes.hasOwnProperty(i)&&(l.attributes[i]=/YES/.test(l.attributes[i]))})),l.attributes.hasOwnProperty("BYTERANGE")&&(l.attributes.byterange=M(l.attributes.BYTERANGE)),c.trigger("data",l),void 0):(u=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(i))&&u[1]?((l={type:"tag",tagType:"server-control"}).attributes=N(u[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(i){l.attributes.hasOwnProperty(i)&&(l.attributes[i]=parseFloat(l.attributes[i]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(i){l.attributes.hasOwnProperty(i)&&(l.attributes[i]=/YES/.test(l.attributes[i]))})),c.trigger("data",l),void 0):(u=/^#EXT-X-PART-INF:(.*)$/.exec(i))&&u[1]?((l={type:"tag",tagType:"part-inf"}).attributes=N(u[1]),["PART-TARGET"].forEach((function(i){l.attributes.hasOwnProperty(i)&&(l.attributes[i]=parseFloat(l.attributes[i]))})),c.trigger("data",l),void 0):(u=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(i))&&u[1]?((l={type:"tag",tagType:"preload-hint"}).attributes=N(u[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(i){if(l.attributes.hasOwnProperty(i)){l.attributes[i]=parseInt(l.attributes[i],10);var u="BYTERANGE-LENGTH"===i?"length":"offset";l.attributes.byterange=l.attributes.byterange||{},l.attributes.byterange[u]=l.attributes[i],delete l.attributes[i]}})),c.trigger("data",l),void 0):(u=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(i))&&u[1]?((l={type:"tag",tagType:"rendition-report"}).attributes=N(u[1]),["LAST-MSN","LAST-PART"].forEach((function(i){l.attributes.hasOwnProperty(i)&&(l.attributes[i]=parseInt(l.attributes[i],10))})),c.trigger("data",l),void 0):(c.trigger("data",{type:"tag",data:i.slice(4)}),void 0)}))}},u.addParser=function addParser(i){var u=this,l=i.expression,c=i.customType,h=i.dataParser,p=i.segment;"function"!=typeof h&&(h=function dataParser(i){return i}),this.customParsers.push((function(i){if(l.exec(i))return u.trigger("data",{type:"custom",data:h(i),customType:c,segment:p}),!0}))},u.addTagMapper=function addTagMapper(i){var u=i.expression,l=i.map;this.tagMappers.push((function mapFn(i){return u.test(i)?l(i):i}))},ParseStream}(I),j=function camelCaseKeys(i){var u={};return Object.keys(i).forEach((function(l){u[function camelCase(i){return i.toLowerCase().replace(/-(\w)/g,(function(i){return i[1].toUpperCase()}))}(l)]=i[l]})),u},H=function setHoldBack(i){var u=i.serverControl,l=i.targetDuration,c=i.partTargetDuration;if(u){var h="#EXT-X-SERVER-CONTROL",p="holdBack",m="partHoldBack",g=l&&3*l,v=c&&2*c;l&&!u.hasOwnProperty(p)&&(u[p]=g,this.trigger("info",{message:h+" defaulting HOLD-BACK to targetDuration * 3 ("+g+")."})),g&&u[p]<g&&(this.trigger("warn",{message:h+" clamping HOLD-BACK ("+u[p]+") to targetDuration * 3 ("+g+")"}),u[p]=g),c&&!u.hasOwnProperty(m)&&(u[m]=3*c,this.trigger("info",{message:h+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+u[m]+")."})),c&&u[m]<v&&(this.trigger("warn",{message:h+" clamping PART-HOLD-BACK ("+u[m]+") to partTargetDuration * 2 ("+v+")."}),u[m]=v)}},W=function(i){function Parser(){var u;(u=i.call(this)||this).lineStream=new V,u.parseStream=new B,u.lineStream.pipe(u.parseStream);var l,c,h=_assertThisInitialized(u),p=[],m={},g=!1,v=function noop(){},_={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},y=0;u.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var b=0,T=0;return u.on("end",(function(){m.uri||!m.parts&&!m.preloadHints||(!m.map&&l&&(m.map=l),!m.key&&c&&(m.key=c),m.timeline||"number"!=typeof y||(m.timeline=y),u.manifest.preloadSegment=m)})),u.parseStream.on("data",(function(i){var u,S;({tag:function tag(){({version:function version(){i.version&&(this.manifest.version=i.version)},"allow-cache":function allowCache(){this.manifest.allowCache=i.allowed,"allowed"in i||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function byterange(){var byterange={};"length"in i&&(m.byterange=byterange,byterange.length=i.length,"offset"in i||(i.offset=b)),"offset"in i&&(m.byterange=byterange,byterange.offset=i.offset),b=byterange.offset+byterange.length},endlist:function endlist(){this.manifest.endList=!0},inf:function inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),i.duration>0&&(m.duration=i.duration),0===i.duration&&(m.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=p},key:function key(){if(!i.attributes)return this.trigger("warn",{message:"ignoring key declaration without attribute list"}),void 0;if("NONE"===i.attributes.METHOD)return c=null,void 0;if(!i.attributes.URI)return this.trigger("warn",{message:"ignoring key declaration without URI"}),void 0;if("com.apple.streamingkeydelivery"===i.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:i.attributes},void 0;if("com.microsoft.playready"===i.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:i.attributes.URI},void 0;if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===i.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(i.attributes.METHOD)?(this.trigger("warn",{message:"invalid key method provided for Widevine"}),void 0):("SAMPLE-AES-CENC"===i.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==i.attributes.URI.substring(0,23)?(this.trigger("warn",{message:"invalid key URI provided for Widevine"}),void 0):i.attributes.KEYID&&"0x"===i.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:i.attributes.KEYFORMAT,keyId:i.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array(i.attributes.URI.split(",")[1])},void 0):(this.trigger("warn",{message:"invalid key ID provided for Widevine"}),void 0))}i.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),c={method:i.attributes.METHOD||"AES-128",uri:i.attributes.URI},void 0!==i.attributes.IV&&(c.iv=i.attributes.IV)},"media-sequence":function mediaSequence(){if(!isFinite(i.number))return this.trigger("warn",{message:"ignoring invalid media sequence: "+i.number}),void 0;this.manifest.mediaSequence=i.number},"discontinuity-sequence":function discontinuitySequence(){if(!isFinite(i.number))return this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+i.number}),void 0;this.manifest.discontinuitySequence=i.number,y=i.number},"playlist-type":function playlistType(){if(!/VOD|EVENT/.test(i.playlistType))return this.trigger("warn",{message:"ignoring unknown playlist type: "+i.playlist}),void 0;this.manifest.playlistType=i.playlistType},map:function map(){l={},i.uri&&(l.uri=i.uri),i.byterange&&(l.byterange=i.byterange),c&&(l.key=c)},"stream-inf":function streamInf(){if(this.manifest.playlists=p,this.manifest.mediaGroups=this.manifest.mediaGroups||_,!i.attributes)return this.trigger("warn",{message:"ignoring empty stream-inf attributes"}),void 0;m.attributes||(m.attributes={}),_extends(m.attributes,i.attributes)},media:function media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||_,!(i.attributes&&i.attributes.TYPE&&i.attributes["GROUP-ID"]&&i.attributes.NAME))return this.trigger("warn",{message:"ignoring incomplete or missing media group"}),void 0;var l=this.manifest.mediaGroups[i.attributes.TYPE];l[i.attributes["GROUP-ID"]]=l[i.attributes["GROUP-ID"]]||{},u=l[i.attributes["GROUP-ID"]],(S={default:/yes/i.test(i.attributes.DEFAULT)}).autoselect=!!S.default||/yes/i.test(i.attributes.AUTOSELECT),i.attributes.LANGUAGE&&(S.language=i.attributes.LANGUAGE),i.attributes.URI&&(S.uri=i.attributes.URI),i.attributes["INSTREAM-ID"]&&(S.instreamId=i.attributes["INSTREAM-ID"]),i.attributes.CHARACTERISTICS&&(S.characteristics=i.attributes.CHARACTERISTICS),i.attributes.FORCED&&(S.forced=/yes/i.test(i.attributes.FORCED)),u[i.attributes.NAME]=S},discontinuity:function discontinuity(){y+=1,m.discontinuity=!0,this.manifest.discontinuityStarts.push(p.length)},"program-date-time":function programDateTime(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=i.dateTimeString,this.manifest.dateTimeObject=i.dateTimeObject),m.dateTimeString=i.dateTimeString,m.dateTimeObject=i.dateTimeObject},targetduration:function targetduration(){if(!isFinite(i.duration)||i.duration<0)return this.trigger("warn",{message:"ignoring invalid target duration: "+i.duration}),void 0;this.manifest.targetDuration=i.duration,H.call(this,this.manifest)},start:function start(){if(!i.attributes||isNaN(i.attributes["TIME-OFFSET"]))return this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}),void 0;this.manifest.start={timeOffset:i.attributes["TIME-OFFSET"],precise:i.attributes.PRECISE}},"cue-out":function cueOut(){m.cueOut=i.data},"cue-out-cont":function cueOutCont(){m.cueOutCont=i.data},"cue-in":function cueIn(){m.cueIn=i.data},skip:function skip(){this.manifest.skip=j(i.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",i.attributes,["SKIPPED-SEGMENTS"])},part:function part(){var u=this;g=!0;var l=this.manifest.segments.length,part=j(i.attributes);m.parts=m.parts||[],m.parts.push(part),part.byterange&&(part.byterange.hasOwnProperty("offset")||(part.byterange.offset=T),T=part.byterange.offset+part.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(m.parts.length-1)+" for segment #"+l,i.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(i,l){i.hasOwnProperty("lastPart")||u.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+l+" lacks required attribute(s): LAST-PART"})}))},"server-control":function serverControl(){var u=this.manifest.serverControl=j(i.attributes);u.hasOwnProperty("canBlockReload")||(u.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),H.call(this,this.manifest),u.canSkipDateranges&&!u.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function preloadHint(){var u=this.manifest.segments.length,l=j(i.attributes),c=l.type&&"PART"===l.type;m.preloadHints=m.preloadHints||[],m.preloadHints.push(l),l.byterange&&(l.byterange.hasOwnProperty("offset")||(l.byterange.offset=c?T:0,c&&(T=l.byterange.offset+l.byterange.length)));var h=m.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+h+" for segment #"+u,i.attributes,["TYPE","URI"]),l.type)for(var p=0;p<m.preloadHints.length-1;p++){var g=m.preloadHints[p];g.type&&(g.type===l.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+h+" for segment #"+u+" has the same TYPE "+l.type+" as preload hint #"+p}))}},"rendition-report":function renditionReport(){var u=j(i.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(u);var l=this.manifest.renditionReports.length-1,c=["LAST-MSN","URI"];g&&c.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+l,i.attributes,c)},"part-inf":function partInf(){this.manifest.partInf=j(i.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",i.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),H.call(this,this.manifest)}}[i.tagType]||v).call(h)},uri:function uri(){m.uri=i.uri,p.push(m),this.manifest.targetDuration&&!("duration"in m)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),m.duration=this.manifest.targetDuration),c&&(m.key=c),m.timeline=y,l&&(m.map=l),T=0,m={}},comment:function comment(){},custom:function custom(){i.segment?(m.custom=m.custom||{},m.custom[i.customType]=i.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[i.customType]=i.data)}})[i.type].call(h)})),u}_inheritsLoose(Parser,i);var u=Parser.prototype;return u.warnOnMissingAttributes_=function warnOnMissingAttributes_(i,u,l){var c=[];l.forEach((function(i){u.hasOwnProperty(i)||c.push(i)})),c.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+c.join(", ")})},u.push=function push(i){this.lineStream.push(i)},u.end=function end(){this.lineStream.push("\n"),this.trigger("end")},u.addParser=function addParser(i){this.parseStream.addParser(i)},u.addTagMapper=function addTagMapper(i){this.parseStream.addTagMapper(i)},Parser}(I),z={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},X=["video","audio","text"],K=["Video","Audio","Text"],Q=function translateLegacyCodec(i){return i?i.replace(/avc1\.(\d+)\.(\d+)/i,(function(i,u,l){return"avc1."+("00"+Number(u).toString(16)).slice(-2)+"00"+("00"+Number(l).toString(16)).slice(-2)})):i},Y=function parseCodecs(i){void 0===i&&(i="");var u=i.split(","),l=[];return u.forEach((function(i){var u;i=i.trim(),X.forEach((function(c){var h=z[c].exec(i.toLowerCase());if(h&&!(h.length<=1)){u=c;var p=i.substring(0,h[1].length),m=i.replace(p,"");l.push({type:p,details:m,mediaType:c})}})),u||l.push({type:i,details:"",mediaType:"unknown"})})),l},$=function isAudioCodec(i){return void 0===i&&(i=""),z.audio.test(i.trim().toLowerCase())},Z=function getMimeForCodec(i){if(i&&"string"==typeof i){var u=i.toLowerCase().split(",").map((function(i){return Q(i.trim())})),l="video";1===u.length&&$(u[0])?l="audio":1===u.length&&function isTextCodec(i){return void 0===i&&(i=""),z.text.test(i.trim().toLowerCase())}(u[0])&&(l="application");var c="mp4";return u.every((function(i){return z.mp4.test(i)}))?c="mp4":u.every((function(i){return z.webm.test(i)}))?c="webm":u.every((function(i){return z.ogg.test(i)}))&&(c="ogg"),l+"/"+c+';codecs="'+i+'"'}},ee=function browserSupportsCodec(i){return void 0===i&&(i=""),m().MediaSource&&m().MediaSource.isTypeSupported&&m().MediaSource.isTypeSupported(Z(i))||!1},te=function muxerSupportsCodec(i){return void 0===i&&(i=""),i.toLowerCase().split(",").every((function(i){i=i.trim();for(var u=0;u<K.length;u++){if(z["muxer"+K[u]].test(i))return!0}return!1}))},ie="mp4a.40.2",re=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,ne=/^application\/dash\+xml/i,ae=function simpleTypeFromSourceType(i){return re.test(i)?"hls":ne.test(i)?"dash":"application/vnd.videojs.vhs+json"===i?"vhs-json":null},se=function isArrayBufferView(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer},oe=function toUint8(i){return i instanceof Uint8Array?i:(Array.isArray(i)||function isTypedArray(i){return se(i)}(i)||i instanceof ArrayBuffer||(i="number"!=typeof i||"number"==typeof i&&i!=i?0:[i]),new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0))},ue=m().BigInt||Number,le=[ue("0x1"),ue("0x100"),ue("0x10000"),ue("0x1000000"),ue("0x100000000"),ue("0x10000000000"),ue("0x1000000000000"),ue("0x100000000000000"),ue("0x10000000000000000")],de=(O=new Uint16Array([65484]),L=new Uint8Array(O.buffer,O.byteOffset,O.byteLength),function bytesToNumber(i,u){var l=void 0===u?{}:u,c=l.signed,h=void 0!==c&&c,p=l.le,m=void 0!==p&&p;i=oe(i);var g=m?"reduce":"reduceRight",v=(i[g]?i[g]:Array.prototype[g]).call(i,(function(u,l,c){var h=m?c:Math.abs(c+1-i.length);return u+ue(l)*le[h]}),ue(0));if(h){var _=le[i.length]/ue(2)-ue(1);(v=ue(v))>_&&(v-=_,v-=_,v-=ue(2))}return Number(v)}),ce=function numberToBytes(i,u){var l=(void 0===u?{}:u).le,c=void 0!==l&&l;("bigint"!=typeof i&&"number"!=typeof i||"number"==typeof i&&i!=i)&&(i=0);for(var h=function countBytes(i){return Math.ceil(function countBits(i){return i.toString(2).length}(i)/8)}(i=ue(i)),p=new Uint8Array(new ArrayBuffer(h)),m=0;m<h;m++){var g=c?m:Math.abs(m+1-p.length);p[g]=Number(i/le[m]&ue(255)),i<0&&(p[g]=Math.abs(~p[g]),p[g]-=0===m?1:2)}return p},he=function stringToBytes(i,u){if("string"!=typeof i&&i&&"function"==typeof i.toString&&(i=i.toString()),"string"!=typeof i)return new Uint8Array;u||(i=unescape(encodeURIComponent(i)));for(var l=new Uint8Array(i.length),c=0;c<i.length;c++)l[c]=i.charCodeAt(c);return l},pe=function bytesMatch(i,u,l){var c=void 0===l?{}:l,h=c.offset,p=void 0===h?0:h,m=c.mask,g=void 0===m?[]:m;return i=oe(i),(u=oe(u)).length&&i.length-p>=u.length&&(u.every?u.every:Array.prototype.every).call(u,(function(u,l){return u===(g[l]?g[l]&i[p+l]:i[p+l])}))},fe=l(32419),me=function isObject(i){return!!i&&"object"==typeof i},ge=function merge(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return u.reduce((function(i,u){return"object"!=typeof u||Object.keys(u).forEach((function(l){i[l]=Array.isArray(i[l])&&Array.isArray(u[l])?i[l].concat(u[l]):me(i[l])&&me(u[l])?merge(i[l],u[l]):u[l]})),i}),{})},ve=function values(i){return Object.keys(i).map((function(u){return i[u]}))},_e=function flatten(i){return i.reduce((function(i,u){return i.concat(u)}),[])},ye=function from(i){if(!i.length)return[];for(var u=[],l=0;l<i.length;l++)u.push(i[l]);return u},be=function findIndex(i,u){for(var l=0;l<i.length;l++)if(u(i[l]))return l;return-1},Te="INVALID_NUMBER_OF_PERIOD",Se="DASH_EMPTY_MANIFEST",ke="DASH_INVALID_XML",Ee="NO_BASE_URL",Ce="SEGMENT_TIME_UNSPECIFIED",we="UNSUPPORTED_UTC_TIMING_SCHEME",Pe=function urlTypeToSegment(i){var u=i.baseUrl,l=i.source,c=void 0===l?"":l,h=i.range,p=void 0===h?"":h,g=i.indexRange,v=void 0===g?"":g,_={uri:c,resolvedUri:x((void 0===u?"":u)||"",c)};if(p||v){var y,b=(p||v).split("-"),T=m().BigInt?m().BigInt(b[0]):parseInt(b[0],10),S=m().BigInt?m().BigInt(b[1]):parseInt(b[1],10);T<Number.MAX_SAFE_INTEGER&&"bigint"==typeof T&&(T=Number(T)),S<Number.MAX_SAFE_INTEGER&&"bigint"==typeof S&&(S=Number(S)),"bigint"==typeof(y="bigint"==typeof S||"bigint"==typeof T?m().BigInt(S)-m().BigInt(T)+m().BigInt(1):S-T+1)&&y<Number.MAX_SAFE_INTEGER&&(y=Number(y)),_.byterange={length:y,offset:T}}return _},Ae=function parseEndNumber(i){return i&&"number"!=typeof i&&(i=parseInt(i,10)),isNaN(i)?null:i},xe={static:function _static(i){var u=i.duration,l=i.timescale,c=void 0===l?1:l,h=i.sourceDuration,p=i.periodDuration,m=Ae(i.endNumber),g=u/c;return"number"==typeof m?{start:0,end:m}:"number"==typeof p?{start:0,end:p/g}:{start:0,end:h/g}},dynamic:function dynamic(i){var u=i.NOW,l=i.clientOffset,c=i.availabilityStartTime,h=i.timescale,p=void 0===h?1:h,m=i.duration,g=i.periodStart,v=void 0===g?0:g,_=i.minimumUpdatePeriod,y=void 0===_?0:_,b=i.timeShiftBufferDepth,T=void 0===b?1/0:b,S=Ae(i.endNumber),k=(u+l)/1e3,E=c+v,C=Math.ceil((k+y-E)*p/m),w=Math.floor((k-E-T)*p/m),P=Math.floor((k-E)*p/m);return{start:Math.max(0,w),end:"number"==typeof S?S:Math.min(C,P)}}},Ie=function parseByDuration(i){var u=i.type,l=i.duration,c=i.timescale,h=void 0===c?1:c,p=i.periodDuration,m=i.sourceDuration,g=xe[u](i),v=function range(i,u){for(var l=[],c=i;c<u;c++)l.push(c);return l}(g.start,g.end).map(function toSegments(i){return function(u){var l=i.duration,c=i.timescale,h=i.startNumber;return{number:(void 0===h?1:h)+u,duration:l/(void 0===c?1:c),timeline:i.periodStart,time:u*l}}}(i));if("static"===u){var _=v.length-1;v[_].duration=("number"==typeof p?p:m)-l/h*_}return v},Oe=function segmentsFromBase(i){var u=i.baseUrl,l=i.initialization,c=void 0===l?{}:l,h=i.sourceDuration,p=i.indexRange,m=void 0===p?"":p,g=i.periodStart,v=i.presentationTime,_=i.number,y=void 0===_?0:_,b=i.duration;if(!u)throw new Error(Ee);var T=Pe({baseUrl:u,source:c.sourceURL,range:c.range}),S=Pe({baseUrl:u,source:u,indexRange:m});if(S.map=T,b){var k=Ie(i);k.length&&(S.duration=k[0].duration,S.timeline=k[0].timeline)}else h&&(S.duration=h,S.timeline=g);return S.presentationTime=v||g,S.number=y,[S]},Le=function addSidxSegmentsToPlaylist(i,u,l){var c,h=i.sidx.map?i.sidx.map:null,p=i.sidx.duration,g=i.timeline||0,v=i.sidx.byterange,_=v.offset+v.length,y=u.timescale,b=u.references.filter((function(i){return 1!==i.referenceType})),T=[],S=i.endList?"static":"dynamic",k=i.sidx.timeline,E=k,C=i.mediaSequence||0;c="bigint"==typeof u.firstOffset?m().BigInt(_)+u.firstOffset:_+u.firstOffset;for(var w=0;w<b.length;w++){var P=u.references[w],A=P.referencedSize,x=P.subsegmentDuration,I=void 0;I="bigint"==typeof c?c+m().BigInt(A)-m().BigInt(1):c+A-1;var O=Oe({baseUrl:l,timescale:y,timeline:g,periodStart:k,presentationTime:E,number:C,duration:x,sourceDuration:p,indexRange:c+"-"+I,type:S})[0];h&&(O.map=h),T.push(O),c+="bigint"==typeof c?m().BigInt(A):A,E+=x/y,C++}return i.segments=T,i},De=["AUDIO","SUBTITLES"],Ve=function getUniqueTimelineStarts(i){return function union(i,u){return ve(i.reduce((function(i,l){return l.forEach((function(l){i[u(l)]=l})),i}),{}))}(i,(function(i){return i.timeline})).sort((function(i,u){return i.timeline>u.timeline?1:-1}))},Re=function getMediaGroupPlaylists(i){var u=[];return!function forEachMediaGroup(i,u,l){u.forEach((function(u){for(var c in i.mediaGroups[u])for(var h in i.mediaGroups[u][c])l(i.mediaGroups[u][c][h],u,c,h)}))}(i,De,(function(i,l,c,h){u=u.concat(i.playlists||[])})),u},Me=function updateMediaSequenceForPlaylist(i){var u=i.playlist;u.mediaSequence=i.mediaSequence,u.segments.forEach((function(i,l){i.number=u.mediaSequence+l}))},Ne=function positionManifestOnTimeline(i){var u=i.oldManifest,l=i.newManifest,c=u.playlists.concat(Re(u)),h=l.playlists.concat(Re(l));return l.timelineStarts=Ve([u.timelineStarts,l.timelineStarts]),function updateSequenceNumbers(i){var u=i.oldPlaylists,l=i.timelineStarts;i.newPlaylists.forEach((function(i){i.discontinuitySequence=be(l,(function(u){return u.timeline===i.timeline}));var c=function findPlaylistWithName(i,u){for(var l=0;l<i.length;l++)if(i[l].attributes.NAME===u)return i[l];return null}(u,i.attributes.NAME);if(c&&!i.sidx){var h=i.segments[0],p=be(c.segments,(function(i){return Math.abs(i.presentationTime-h.presentationTime)<.016666666666666666}));if(-1===p)return Me({playlist:i,mediaSequence:c.mediaSequence+c.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!c.segments.length&&i.timeline>c.timeline||c.segments.length&&i.timeline>c.segments[c.segments.length-1].timeline)&&i.discontinuitySequence--,void 0;c.segments[p].discontinuity&&!h.discontinuity&&(h.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Me({playlist:i,mediaSequence:c.segments[p].number})}}))}({oldPlaylists:c,newPlaylists:h,timelineStarts:l.timelineStarts}),l},Be=function generateSidxKey(i){return i&&i.uri+"-"+function byteRangeToString(i){var u;return u="bigint"==typeof i.offset||"bigint"==typeof i.length?m().BigInt(i.offset)+m().BigInt(i.length)-m().BigInt(1):i.offset+i.length-1,i.offset+"-"+u}(i.byterange)},Fe=function mergeDiscontiguousPlaylists(i){return ve(i.reduce((function(i,u){var l=u.attributes.id+(u.attributes.lang||"");if(i[l]){var c;if(u.segments)u.segments[0]&&(u.segments[0].discontinuity=!0),(c=i[l].segments).push.apply(c,u.segments);u.attributes.contentProtection&&(i[l].attributes.contentProtection=u.attributes.contentProtection)}else i[l]=u,i[l].attributes.timelineStarts=[];return i[l].attributes.timelineStarts.push({start:u.attributes.periodStart,timeline:u.attributes.periodStart}),i}),{})).map((function(i){return i.discontinuityStarts=function findIndexes(i,u){return i.reduce((function(i,l,c){return l[u]&&i.push(c),i}),[])}(i.segments||[],"discontinuity"),i}))},Ue=function addSidxSegmentsToPlaylist(i,u){var l=Be(i.sidx),c=l&&u[l]&&u[l].sidx;return c&&Le(i,c,i.sidx.resolvedUri),i},je=function addSidxSegmentsToPlaylists(i,u){if(void 0===u&&(u={}),!Object.keys(u).length)return i;for(var l in i)i[l]=Ue(i[l],u);return i},He=function formatVideoPlaylist(i){var u,l=i.attributes,c=i.segments,h=i.sidx,p=i.discontinuityStarts,m={attributes:(u={NAME:l.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:l.width,height:l.height},CODECS:l.codecs,BANDWIDTH:l.bandwidth},u["PROGRAM-ID"]=1,u),uri:"",endList:"static"===l.type,timeline:l.periodStart,resolvedUri:"",targetDuration:l.duration,discontinuityStarts:p,timelineStarts:l.timelineStarts,segments:c};return l.frameRate&&(m.attributes["FRAME-RATE"]=l.frameRate),l.contentProtection&&(m.contentProtection=l.contentProtection),h&&(m.sidx=h),m},qe=function videoOnly(i){var u=i.attributes;return"video/mp4"===u.mimeType||"video/webm"===u.mimeType||"video"===u.contentType},We=function audioOnly(i){var u=i.attributes;return"audio/mp4"===u.mimeType||"audio/webm"===u.mimeType||"audio"===u.contentType},Ge=function vttOnly(i){var u=i.attributes;return"text/vtt"===u.mimeType||"text"===u.contentType},ze=function flattenMediaGroupPlaylists(i){return i?Object.keys(i).reduce((function(u,l){return u.concat(i[l].playlists)}),[]):[]},Xe=function toM3u8(i){var u,l=i.dashPlaylists,c=i.locations,h=i.sidxMapping,p=void 0===h?{}:h,m=i.previousManifest;if(!l.length)return{};var g=l[0].attributes,v=g.sourceDuration,_=g.type,y=g.suggestedPresentationDelay,b=g.minimumUpdatePeriod,T=Fe(l.filter(qe)).map(He),S=Fe(l.filter(We)),k=Fe(l.filter(Ge)),E=l.map((function(i){return i.attributes.captionServices})).filter(Boolean),C={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(u={AUDIO:{},VIDEO:{}},u["CLOSED-CAPTIONS"]={},u.SUBTITLES={},u),uri:"",duration:v,playlists:je(T,p)};b>=0&&(C.minimumUpdatePeriod=1e3*b),c&&(C.locations=c),"dynamic"===_&&(C.suggestedPresentationDelay=y);var w=S.length?function organizeAudioPlaylists(i,u,l){var c;void 0===u&&(u={}),void 0===l&&(l=!1);var h=i.reduce((function(i,h){var p=h.attributes.role&&h.attributes.role.value||"",m=h.attributes.lang||"",g=h.attributes.label||"main";m&&!h.attributes.label&&(g=h.attributes.lang+(p?" ("+p+")":"")),i[g]||(i[g]={language:m,autoselect:!0,default:"main"===p,playlists:[],uri:""});var v=Ue(function formatAudioPlaylist(i,u){var l,c=i.attributes,h=i.segments,p=i.sidx,m=i.mediaSequence,g=i.discontinuitySequence,v=i.discontinuityStarts,_={attributes:(l={NAME:c.id,BANDWIDTH:c.bandwidth,CODECS:c.codecs},l["PROGRAM-ID"]=1,l),uri:"",endList:"static"===c.type,timeline:c.periodStart,resolvedUri:"",targetDuration:c.duration,discontinuitySequence:g,discontinuityStarts:v,timelineStarts:c.timelineStarts,mediaSequence:m,segments:h};return c.contentProtection&&(_.contentProtection=c.contentProtection),p&&(_.sidx=p),u&&(_.attributes.AUDIO="audio",_.attributes.SUBTITLES="subs"),_}(h,l),u);return i[g].playlists.push(v),void 0===c&&"main"===p&&((c=h).default=!0),i}),{});return c||(h[Object.keys(h)[0]].default=!0),h}(S,p,0===C.playlists.length):null,P=k.length?function organizeVttPlaylists(i,u){return void 0===u&&(u={}),i.reduce((function(i,l){var c=l.attributes.lang||"text";return i[c]||(i[c]={language:c,default:!1,autoselect:!1,playlists:[],uri:""}),i[c].playlists.push(Ue(function formatVttPlaylist(i){var u,l=i.attributes,c=i.segments,h=i.mediaSequence,p=i.discontinuityStarts,m=i.discontinuitySequence;void 0===c&&(c=[{uri:l.baseUrl,timeline:l.periodStart,resolvedUri:l.baseUrl||"",duration:l.sourceDuration,number:0}],l.duration=l.sourceDuration);var g=((u={NAME:l.id,BANDWIDTH:l.bandwidth})["PROGRAM-ID"]=1,u);return l.codecs&&(g.CODECS=l.codecs),{attributes:g,uri:"",endList:"static"===l.type,timeline:l.periodStart,resolvedUri:l.baseUrl||"",targetDuration:l.duration,timelineStarts:l.timelineStarts,discontinuityStarts:p,discontinuitySequence:m,mediaSequence:h,segments:c}}(l),u)),i}),{})}(k,p):null,A=T.concat(ze(w),ze(P)),x=A.map((function(i){return i.timelineStarts}));return C.timelineStarts=Ve(x),function addMediaSequenceValues(i,u){i.forEach((function(i){i.mediaSequence=0,i.discontinuitySequence=be(u,(function(u){return u.timeline===i.timeline})),i.segments&&i.segments.forEach((function(i,u){i.number=u}))}))}(A,C.timelineStarts),w&&(C.mediaGroups.AUDIO.audio=w),P&&(C.mediaGroups.SUBTITLES.subs=P),E.length&&(C.mediaGroups["CLOSED-CAPTIONS"].cc=function organizeCaptionServices(i){return i.reduce((function(i,u){return u?(u.forEach((function(u){var l=u.language;i[l]={autoselect:!1,default:!1,instreamId:u.channel,language:l},u.hasOwnProperty("aspectRatio")&&(i[l].aspectRatio=u.aspectRatio),u.hasOwnProperty("easyReader")&&(i[l].easyReader=u.easyReader),u.hasOwnProperty("3D")&&(i[l]["3D"]=u["3D"])})),i):i}),{})}(E)),m?Ne({oldManifest:m,newManifest:C}):C},Ke=function getLiveRValue(i,u,l){var c=i.timescale,h=i.periodStart,p=i.minimumUpdatePeriod;return Math.ceil((((i.NOW+i.clientOffset)/1e3+(void 0===p?0:p)-(i.availabilityStartTime+(void 0===h?0:h)))*(void 0===c?1:c)-u)/l)},Qe=function parseByTimeline(i,u){for(var l=i.type,c=i.minimumUpdatePeriod,h=void 0===c?0:c,p=i.media,m=void 0===p?"":p,g=i.sourceDuration,v=i.timescale,_=void 0===v?1:v,y=i.startNumber,b=void 0===y?1:y,T=i.periodStart,S=[],k=-1,E=0;E<u.length;E++){var C=u[E],w=C.d,P=C.r||0,A=C.t||0;k<0&&(k=A),A&&A>k&&(k=A);var x=void 0;if(P<0){var I=E+1;x=I===u.length?"dynamic"===l&&h>0&&m.indexOf("$Number$")>0?Ke(i,k,w):(g*_-k)/w:(u[I].t-k)/w}else x=P+1;for(var O=b+S.length+x,L=b+S.length;L<O;)S.push({number:L,duration:w/_,time:k,timeline:T}),k+=w,L++}return S},Ye=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,$e=function constructTemplateUrl(i,u){return i.replace(Ye,function identifierReplacement(i){return function(u,l,c,h){if("$$"===u)return"$";if(void 0===i[l])return u;var p=""+i[l];return"RepresentationID"===l?p:(h=c?parseInt(h,10):1,p.length>=h?p:""+new Array(h-p.length+1).join("0")+p)}}(u))},Je=function segmentsFromTemplate(i,u){var l={RepresentationID:i.id,Bandwidth:i.bandwidth||0},c=i.initialization,h=void 0===c?{sourceURL:"",range:""}:c,p=Pe({baseUrl:i.baseUrl,source:$e(h.sourceURL,l),range:h.range}),m=function parseTemplateInfo(i,u){return i.duration||u?i.duration?Ie(i):Qe(i,u):[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]}(i,u);return m.map((function(u){l.Number=u.number,l.Time=u.time;var c=$e(i.media||"",l),h=i.periodStart+(u.time-(i.presentationTimeOffset||0))/(i.timescale||1);return{uri:c,timeline:u.timeline,duration:u.duration,resolvedUri:x(i.baseUrl||"",c),map:p,number:u.number,presentationTime:h}}))},Ze=function segmentsFromList(i,u){var l=i.duration,c=i.segmentUrls,h=void 0===c?[]:c,p=i.periodStart;if(!l&&!u||l&&u)throw new Error(Ce);var m,g=h.map((function(u){return function SegmentURLToSegmentObject(i,u){var l=i.baseUrl,c=i.initialization,h=void 0===c?{}:c,p=Pe({baseUrl:l,source:h.sourceURL,range:h.range}),m=Pe({baseUrl:l,source:u.media,range:u.mediaRange});return m.map=p,m}(i,u)}));return l&&(m=Ie(i)),u&&(m=Qe(i,u)),m.map((function(u,l){if(g[l]){var c=g[l],h=i.timescale||1,m=i.presentationTimeOffset||0;return c.timeline=u.timeline,c.duration=u.duration,c.number=u.number,c.presentationTime=p+(u.time-m)/h,c}})).filter((function(i){return i}))},et=function generateSegments(i){var u,l,c=i.attributes,h=i.segmentInfo;h.template?(l=Je,u=ge(c,h.template)):h.base?(l=Oe,u=ge(c,h.base)):h.list&&(l=Ze,u=ge(c,h.list));var p={attributes:c};if(!l)return p;var m=l(u,h.segmentTimeline);if(u.duration){var g=u.timescale;u.duration=u.duration/(void 0===g?1:g)}else u.duration=m.length?m.reduce((function(i,u){return Math.max(i,Math.ceil(u.duration))}),0):0;return p.attributes=u,p.segments=m,h.base&&u.indexRange&&(p.sidx=m[0],p.segments=[]),p},tt=function findChildren(i,u){return ye(i.childNodes).filter((function(i){return i.tagName===u}))},it=function getContent(i){return i.textContent.trim()},rt=function parseDuration(i){var u=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!u)return 0;var l=u.slice(1),c=l[1],h=l[2],p=l[3],m=l[4],g=l[5];return 31536e3*parseFloat(l[0]||0)+2592e3*parseFloat(c||0)+86400*parseFloat(h||0)+3600*parseFloat(p||0)+60*parseFloat(m||0)+parseFloat(g||0)},nt={mediaPresentationDuration:function mediaPresentationDuration(i){return rt(i)},availabilityStartTime:function availabilityStartTime(i){return function parseDate(i){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)}(i)/1e3},minimumUpdatePeriod:function minimumUpdatePeriod(i){return rt(i)},suggestedPresentationDelay:function suggestedPresentationDelay(i){return rt(i)},type:function type(i){return i},timeShiftBufferDepth:function timeShiftBufferDepth(i){return rt(i)},start:function start(i){return rt(i)},width:function width(i){return parseInt(i,10)},height:function height(i){return parseInt(i,10)},bandwidth:function bandwidth(i){return parseInt(i,10)},frameRate:function frameRate(i){return function parseDivisionValue(i){return parseFloat(i.split("/").reduce((function(i,u){return i/u})))}(i)},startNumber:function startNumber(i){return parseInt(i,10)},timescale:function timescale(i){return parseInt(i,10)},presentationTimeOffset:function presentationTimeOffset(i){return parseInt(i,10)},duration:function duration(i){var u=parseInt(i,10);return isNaN(u)?rt(i):u},d:function d(i){return parseInt(i,10)},t:function t(i){return parseInt(i,10)},r:function r(i){return parseInt(i,10)},DEFAULT:function DEFAULT(i){return i}},at=function parseAttributes(i){return i&&i.attributes?ye(i.attributes).reduce((function(i,u){return i[u.name]=(nt[u.name]||nt.DEFAULT)(u.value),i}),{}):{}},st={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ot=function buildBaseUrls(i,u){return u.length?_e(i.map((function(i){return u.map((function(u){return x(i,it(u))}))}))):i},ut=function getSegmentInformation(i){var u=tt(i,"SegmentTemplate")[0],l=tt(i,"SegmentList")[0],c=l&&tt(l,"SegmentURL").map((function(i){return ge({tag:"SegmentURL"},at(i))})),h=tt(i,"SegmentBase")[0],p=l||u,m=p&&tt(p,"SegmentTimeline")[0],g=l||h||u,v=g&&tt(g,"Initialization")[0],_=u&&at(u);_&&v?_.initialization=v&&at(v):_&&_.initialization&&(_.initialization={sourceURL:_.initialization});var y={template:_,segmentTimeline:m&&tt(m,"S").map((function(i){return at(i)})),list:l&&ge(at(l),{segmentUrls:c,initialization:at(v)}),base:h&&ge(at(h),{initialization:at(v)})};return Object.keys(y).forEach((function(i){y[i]||delete y[i]})),y},lt=function toRepresentations(i,u,l){return function(c){var h=at(c),p=ot(u,tt(c,"BaseURL")),m=tt(c,"Role")[0],g={role:at(m)},v=ge(i,h,g),_=tt(c,"Accessibility")[0],y=function parseCaptionServiceMetadata(i){return"urn:scte:dash:cc:cea-608:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map((function(i){var u,l;if(l=i,/^CC\d=/.test(i)){var c=i.split("=");u=c[0],l=c[1]}else/^CC\d$/.test(i)&&(u=i);return{channel:u,language:l}})):"urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map((function(i){var u={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var l=i.split("="),c=l[1],h=void 0===c?"":c;u.channel=l[0],u.language=i,h.split(",").forEach((function(i){var l=i.split(":"),c=l[0],h=l[1];"lang"===c?u.language=h:"er"===c?u.easyReader=Number(h):"war"===c?u.aspectRatio=Number(h):"3D"===c&&(u["3D"]=Number(h))}))}else u.language=i;return u.channel&&(u.channel="SERVICE"+u.channel),u})):void 0}(at(_));y&&(v=ge(v,{captionServices:y}));var b=tt(c,"Label")[0];if(b&&b.childNodes.length){var T=b.childNodes[0].nodeValue.trim();v=ge(v,{label:T})}var S=function generateKeySystemInformation(i){return i.reduce((function(i,u){var l=at(u);l.schemeIdUri&&(l.schemeIdUri=l.schemeIdUri.toLowerCase());var c=st[l.schemeIdUri];if(c){i[c]={attributes:l};var h=tt(u,"cenc:pssh")[0];if(h){var p=it(h);i[c].pssh=p&&decodeB64ToUint8Array(p)}}return i}),{})}(tt(c,"ContentProtection"));Object.keys(S).length&&(v=ge(v,{contentProtection:S}));var k=ut(c),E=tt(c,"Representation"),C=ge(l,k);return _e(E.map(function inheritBaseUrls(i,u,l){return function(c){var h=tt(c,"BaseURL"),p=ot(u,h),m=ge(i,at(c)),g=ut(c);return p.map((function(i){return{segmentInfo:ge(l,g),attributes:ge(m,{baseUrl:i})}}))}}(v,p,C)))}},dt=function toAdaptationSets(i,u){return function(l,c){var h=ot(u,tt(l.node,"BaseURL")),p=ge(i,{periodStart:l.attributes.start});"number"==typeof l.attributes.duration&&(p.periodDuration=l.attributes.duration);var m=tt(l.node,"AdaptationSet"),g=ut(l.node);return _e(m.map(lt(p,h,g)))}},ct=function stringToMpdXml(i){if(""===i)throw new Error(Se);var u,l,c=new fe.DOMParser;try{l=(u=c.parseFromString(i,"application/xml"))&&"MPD"===u.documentElement.tagName?u.documentElement:null}catch(i){}if(!l||l&&l.getElementsByTagName("parsererror").length>0)throw new Error(ke);return l},ht=function parse(i,u){void 0===u&&(u={});var l=function inheritAttributes(i,u){void 0===u&&(u={});var l=u,c=l.manifestUri,h=void 0===c?"":c,p=l.NOW,m=void 0===p?Date.now():p,g=l.clientOffset,v=void 0===g?0:g,_=tt(i,"Period");if(!_.length)throw new Error(Te);var y=tt(i,"Location"),b=at(i),T=ot([h],tt(i,"BaseURL"));b.type=b.type||"static",b.sourceDuration=b.mediaPresentationDuration||0,b.NOW=m,b.clientOffset=v,y.length&&(b.locations=y.map(it));var S=[];return _.forEach((function(i,u){var l=at(i),c=S[u-1];l.start=function getPeriodStart(i){var u=i.attributes,l=i.priorPeriodAttributes;return"number"==typeof u.start?u.start:l&&"number"==typeof l.start&&"number"==typeof l.duration?l.start+l.duration:l||"static"!==i.mpdType?null:0}({attributes:l,priorPeriodAttributes:c?c.attributes:null,mpdType:b.type}),S.push({node:i,attributes:l})})),{locations:b.locations,representationInfo:_e(S.map(dt(b,T)))}}(ct(i),u),c=function toPlaylists(i){return i.map(et)}(l.representationInfo);return Xe({dashPlaylists:c,locations:l.locations,sidxMapping:u.sidxMapping,previousManifest:u.previousManifest})},pt=function parseUTCTiming(i){return function parseUTCTimingScheme(i){var u=tt(i,"UTCTiming")[0];if(!u)return null;var l=at(u);switch(l.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":l.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":l.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":l.method="DIRECT",l.value=Date.parse(l.value);break;default:throw new Error(we)}return l}(ct(i))},ft=l(41089),mt=l.n(ft),gt=oe([73,68,51]),vt=function getId3Offset(i,u){return void 0===u&&(u=0),(i=oe(i)).length-u<10||!pe(i,gt,{offset:u})?u:(u+=function getId3Size(i,u){void 0===u&&(u=0);var l=(i=oe(i))[u+6]<<21|i[u+7]<<14|i[u+8]<<7|i[u+9];return(16&i[u+5])>>4?l+20:l+10}(i,u),getId3Offset(i,u))},_t=(new Uint8Array([79,112,117,115,72,101,97,100]),function normalizePath(i){return"string"==typeof i?he(i):("number"==typeof i,i)}),yt=function parseDescriptors(i){i=oe(i);for(var u=[],l=0;i.length>l;){var c=i[l],h=0,p=0,m=i[++p];for(p++;128&m;)h=(127&m)<<7,m=i[p],p++;h+=127&m;for(var g=0;g<D.length;g++){var v=D[g];if(c===v.id){u.push((0,v.parser)(i.subarray(p,p+h)));break}}l+=h+p}return u};D=[{id:3,parser:function parser(i){var u={tag:3,id:i[0]<<8|i[1],flags:i[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&u.flags&&(u.dependsOnEsId=i[u.size]<<8|i[u.size+1],u.size+=2),64&u.flags){var l=i[u.size];u.url=function bytesToString(i){if(!i)return"";i=Array.prototype.slice.call(i);var u=String.fromCharCode.apply(null,oe(i));try{return decodeURIComponent(escape(u))}catch(i){}return u}(i.subarray(u.size+1,u.size+1+l)),u.size+=l}return 32&u.flags&&(u.ocrEsId=i[u.size]<<8|i[u.size+1],u.size+=2),u.descriptors=yt(i.subarray(u.size))||[],u}},{id:4,parser:function parser(i){return{tag:4,oti:i[0],streamType:i[1],bufferSize:i[2]<<16|i[3]<<8|i[4],maxBitrate:i[5]<<24|i[6]<<16|i[7]<<8|i[8],avgBitrate:i[9]<<24|i[10]<<16|i[11]<<8|i[12],descriptors:yt(i.subarray(13))}}},{id:5,parser:function parser(i){return{tag:5,bytes:i}}},{id:6,parser:function parser(i){return{tag:6,bytes:i}}}];var bt=function findBox(i,u,l){void 0===l&&(l=!1),u=function normalizePaths(i){return Array.isArray(i)?i.map((function(i){return _t(i)})):[_t(i)]}(u),i=oe(i);var c=[];if(!u.length)return c;for(var h=0;h<i.length;){var p=(i[h]<<24|i[h+1]<<16|i[h+2]<<8|i[h+3])>>>0,m=i.subarray(h+4,h+8);if(0===p)break;var g=h+p;if(g>i.length){if(l)break;g=i.length}var v=i.subarray(h+8,g);pe(m,u[0])&&(1===u.length?c.push(v):c.push.apply(c,findBox(v,u.slice(1),l))),h=g}return c},Tt={EBML:oe([26,69,223,163]),DocType:oe([66,130]),Segment:oe([24,83,128,103]),SegmentInfo:oe([21,73,169,102]),Tracks:oe([22,84,174,107]),Track:oe([174]),TrackNumber:oe([215]),DefaultDuration:oe([35,227,131]),TrackEntry:oe([174]),TrackType:oe([131]),FlagDefault:oe([136]),CodecID:oe([134]),CodecPrivate:oe([99,162]),VideoTrack:oe([224]),AudioTrack:oe([225]),Cluster:oe([31,67,182,117]),Timestamp:oe([231]),TimestampScale:oe([42,215,177]),BlockGroup:oe([160]),BlockDuration:oe([155]),Block:oe([161]),SimpleBlock:oe([163])},St=[128,64,32,16,8,4,2,1],kt=function getvint(i,u,l,c){void 0===l&&(l=!0),void 0===c&&(c=!1);var h=function getLength(i){for(var u=1,l=0;l<St.length&&!(i&St[l]);l++)u++;return u}(i[u]),p=i.subarray(u,u+h);return l&&((p=Array.prototype.slice.call(i,u,u+h))[0]^=St[h-1]),{length:h,value:de(p,{signed:c}),bytes:p}},Et=function normalizePath(i){return"string"==typeof i?i.match(/.{1,2}/g).map((function(i){return normalizePath(i)})):"number"==typeof i?ce(i):i},Ct=function getInfinityDataSize(i,u,l){if(l>=u.length)return u.length;var c=kt(u,l,!1);if(pe(i.bytes,c.bytes))return l;var h=kt(u,l+c.length);return getInfinityDataSize(i,u,l+h.length+h.value+c.length)},wt=function findEbml(i,u){u=function normalizePaths(i){return Array.isArray(i)?i.map((function(i){return Et(i)})):[Et(i)]}(u),i=oe(i);var l=[];if(!u.length)return l;for(var c=0;c<i.length;){var h=kt(i,c,!1),p=kt(i,c+h.length),m=c+h.length+p.length;127===p.value&&(p.value=Ct(h,i,m),p.value!==i.length&&(p.value-=m));var g=i.subarray(m,m+p.value>i.length?i.length:m+p.value);pe(u[0],h.bytes)&&(1===u.length?l.push(g):l=l.concat(findEbml(g,u.slice(1)))),c+=h.length+p.length+g.length}return l},Pt=oe([0,0,0,1]),At=oe([0,0,1]),xt=oe([0,0,3]),It=function discardEmulationPreventionBytes(i){for(var u=[],l=1;l<i.length-2;)pe(i.subarray(l,l+3),xt)&&(u.push(l+2),l++),l++;if(0===u.length)return i;var c=i.length-u.length,h=new Uint8Array(c),p=0;for(l=0;l<c;p++,l++)p===u[0]&&(p++,u.shift()),h[l]=i[p];return h},Ot=function findNal(i,u,l,c){void 0===c&&(c=1/0),i=oe(i),l=[].concat(l);for(var h,p=0,m=0;p<i.length&&(m<c||h);){var g=void 0;if(pe(i.subarray(p),Pt)?g=4:pe(i.subarray(p),At)&&(g=3),g){if(m++,h)return It(i.subarray(h,p));var v=void 0;"h264"===u?v=31&i[p+g]:"h265"===u&&(v=i[p+g]>>1&63),-1!==l.indexOf(v)&&(h=p+g),p+=g+("h264"===u?1:2)}else p++}return i.subarray(0,0)},Lt={webm:oe([119,101,98,109]),matroska:oe([109,97,116,114,111,115,107,97]),flac:oe([102,76,97,67]),ogg:oe([79,103,103,83]),ac3:oe([11,119]),riff:oe([82,73,70,70]),avi:oe([65,86,73]),wav:oe([87,65,86,69]),"3gp":oe([102,116,121,112,51,103]),mp4:oe([102,116,121,112]),fmp4:oe([115,116,121,112]),mov:oe([102,116,121,112,113,116]),moov:oe([109,111,111,118]),moof:oe([109,111,111,102])},Dt={aac:function aac(i){var u=vt(i);return pe(i,[255,16],{offset:u,mask:[255,22]})},mp3:function mp3(i){var u=vt(i);return pe(i,[255,2],{offset:u,mask:[255,6]})},webm:function webm(i){var u=wt(i,[Tt.EBML,Tt.DocType])[0];return pe(u,Lt.webm)},mkv:function mkv(i){var u=wt(i,[Tt.EBML,Tt.DocType])[0];return pe(u,Lt.matroska)},mp4:function mp4(i){return!Dt["3gp"](i)&&!Dt.mov(i)&&(!(!pe(i,Lt.mp4,{offset:4})&&!pe(i,Lt.fmp4,{offset:4}))||(!(!pe(i,Lt.moof,{offset:4})&&!pe(i,Lt.moov,{offset:4}))||void 0))},mov:function mov(i){return pe(i,Lt.mov,{offset:4})},"3gp":function gp(i){return pe(i,Lt["3gp"],{offset:4})},ac3:function ac3(i){var u=vt(i);return pe(i,Lt.ac3,{offset:u})},ts:function ts(i){if(i.length<189&&i.length>=1)return 71===i[0];for(var u=0;u+188<i.length&&u<188;){if(71===i[u]&&71===i[u+188])return!0;u+=1}return!1},flac:function flac(i){var u=vt(i);return pe(i,Lt.flac,{offset:u})},ogg:function ogg(i){return pe(i,Lt.ogg)},avi:function avi(i){return pe(i,Lt.riff)&&pe(i,Lt.avi,{offset:8})},wav:function wav(i){return pe(i,Lt.riff)&&pe(i,Lt.wav,{offset:8})},h264:function h264(i){return function findH264Nal(i,u,l){return Ot(i,"h264",u,l)}(i,7,3).length},h265:function h265(i){return function findH265Nal(i,u,l){return Ot(i,"h265",u,l)}(i,[32,33],3).length}},Vt=Object.keys(Dt).filter((function(i){return"ts"!==i&&"h264"!==i&&"h265"!==i})).concat(["ts","h264","h265"]);Vt.forEach((function(i){var u=Dt[i];Dt[i]=function(i){return u(oe(i))}}));var Rt=Dt,Mt=function detectContainerForBytes(i){i=oe(i);for(var u=0;u<Vt.length;u++){var l=Vt[u];if(Rt[l](i))return l}return""},Nt=l(12915);function _getPrototypeOf(i){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)},_getPrototypeOf(i)}function _wrapNativeSuper(i){var u="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(i){if(null===i||!function _isNativeFunction(i){try{return-1!==Function.toString.call(i).indexOf("[native code]")}catch(u){return"function"==typeof i}}(i))return i;if("function"!=typeof i)throw new TypeError("Super expression must either be null or a function");if(void 0!==u){if(u.has(i))return u.get(i);u.set(i,Wrapper)}function Wrapper(){return _construct(i,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(i.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,i)},_wrapNativeSuper(i)}for(var Bt,Ft="7.21.6",Ut={},jt=function hooks(i,u){return Ut[i]=Ut[i]||[],u&&(Ut[i]=Ut[i].concat(u)),Ut[i]},Ht=function removeHook(i,u){var l=jt(i).indexOf(u);return!(l<=-1)&&(Ut[i]=Ut[i].slice(),Ut[i].splice(l,1),!0)},qt={prefixed:!0},Wt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Gt=Wt[0],zt=0;zt<Wt.length;zt++)if(Wt[zt][1]in v()){Bt=Wt[zt];break}if(Bt){for(var Xt=0;Xt<Bt.length;Xt++)qt[Gt[Xt]]=Bt[Xt];qt.prefixed=Bt[0]!==Gt[0]}var Kt=[];var Qt=function createLogger$1(i){var u,l="info",c=function log(){for(var i=arguments.length,c=new Array(i),h=0;h<i;h++)c[h]=arguments[h];u("log",l,c)};return u=function LogByTypeFactory(i,u){return function(l,c,h){var p=u.levels[c],g=new RegExp("^("+p+")$");if("log"!==l&&h.unshift(l.toUpperCase()+":"),h.unshift(i+":"),Kt){Kt.push([].concat(h));var v=Kt.length-1e3;Kt.splice(0,v>0?v:0)}if(m().console){var _=m().console[l];_||"debug"!==l||(_=m().console.info||m().console.log),_&&p&&g.test(l)&&_[Array.isArray(h)?"apply":"call"](m().console,h)}}}(i,c),c.createLogger=function(u){return createLogger$1(i+": "+u)},c.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:l},c.level=function(i){if("string"==typeof i){if(!c.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');l=i}return l},(c.history=function(){return Kt?[].concat(Kt):[]}).filter=function(i){return(Kt||[]).filter((function(u){return new RegExp(".*"+i+".*").test(u[0])}))},c.history.clear=function(){Kt&&(Kt.length=0)},c.history.disable=function(){null!==Kt&&(Kt.length=0,Kt=null)},c.history.enable=function(){null===Kt&&(Kt=[])},c.error=function(){for(var i=arguments.length,c=new Array(i),h=0;h<i;h++)c[h]=arguments[h];return u("error",l,c)},c.warn=function(){for(var i=arguments.length,c=new Array(i),h=0;h<i;h++)c[h]=arguments[h];return u("warn",l,c)},c.debug=function(){for(var i=arguments.length,c=new Array(i),h=0;h<i;h++)c[h]=arguments[h];return u("debug",l,c)},c}("VIDEOJS"),Yt=Qt.createLogger,$t=Object.prototype.toString,Jt=function keys(i){return video_es_isObject(i)?Object.keys(i):[]};function each(i,u){Jt(i).forEach((function(l){return u(i[l],l)}))}function video_es_assign(i){for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];return Object.assign?_extends.apply(void 0,[i].concat(l)):(l.forEach((function(u){u&&each(u,(function(u,l){i[l]=u}))})),i)}function video_es_isObject(i){return!!i&&"object"==typeof i}function isPlain(i){return video_es_isObject(i)&&"[object Object]"===$t.call(i)&&i.constructor===Object}function computedStyle(i,u){if(!i||!u)return"";if("function"==typeof m().getComputedStyle){var l;try{l=m().getComputedStyle(i)}catch(i){return""}return l?l.getPropertyValue(u)||l[u]:""}return""}var Zt,ei=m().navigator&&m().navigator.userAgent||"",ti=/AppleWebKit\/([\d.]+)/i.exec(ei),ii=ti?parseFloat(ti.pop()):null,ri=/iPod/i.test(ei),ni=(Zt=ei.match(/OS (\d+)_/i))&&Zt[1]?Zt[1]:null,ai=/Android/i.test(ei),si=function(){var i=ei.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!i)return null;var u=i[1]&&parseFloat(i[1]),l=i[2]&&parseFloat(i[2]);return u&&l?parseFloat(i[1]+"."+i[2]):u||null}(),oi=ai&&si<5&&ii<537,ui=/Firefox/i.test(ei),li=/Edg/i.test(ei),di=!li&&(/Chrome/i.test(ei)||/CriOS/i.test(ei)),ci=function(){var i=ei.match(/(Chrome|CriOS)\/(\d+)/);return i&&i[2]?parseFloat(i[2]):null}(),hi=function(){var i=/MSIE\s(\d+)\.\d/.exec(ei),u=i&&parseFloat(i[1]);return!u&&/Trident\/7.0/i.test(ei)&&/rv:11.0/.test(ei)&&(u=11),u}(),pi=/Safari/i.test(ei)&&!di&&!ai&&!li,fi=/Windows/i.test(ei),mi=Boolean(isReal()&&("ontouchstart"in m()||m().navigator.maxTouchPoints||m().DocumentTouch&&m().document instanceof m().DocumentTouch)),gi=/iPad/i.test(ei)||pi&&mi&&!/iPhone/i.test(ei),vi=/iPhone/i.test(ei)&&!gi,_i=vi||gi||ri,yi=(pi||_i)&&!di,bi=Object.freeze({__proto__:null,IS_IPOD:ri,IOS_VERSION:ni,IS_ANDROID:ai,ANDROID_VERSION:si,IS_NATIVE_ANDROID:oi,IS_FIREFOX:ui,IS_EDGE:li,IS_CHROME:di,CHROME_VERSION:ci,IE_VERSION:hi,IS_SAFARI:pi,IS_WINDOWS:fi,TOUCH_ENABLED:mi,IS_IPAD:gi,IS_IPHONE:vi,IS_IOS:_i,IS_ANY_SAFARI:yi});function isNonBlankString(i){return"string"==typeof i&&Boolean(i.trim())}function throwIfWhitespace(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function isReal(){return v()===m().document}function isEl(i){return video_es_isObject(i)&&1===i.nodeType}function isInFrame(){try{return m().parent!==m().self}catch(i){return!0}}function createQuerier(i){return function(u,l){if(!isNonBlankString(u))return v()[i](null);isNonBlankString(l)&&(l=v().querySelector(l));var c=isEl(l)?l:v();return c[i]&&c[i](u)}}function createEl(i,u,l,c){void 0===i&&(i="div"),void 0===u&&(u={}),void 0===l&&(l={});var h=v().createElement(i);return Object.getOwnPropertyNames(u).forEach((function(i){var l=u[i];-1!==i.indexOf("aria-")||"role"===i||"type"===i?(Qt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+i+" to "+l+"."),h.setAttribute(i,l)):"textContent"===i?textContent(h,l):h[i]===l&&"tabIndex"!==i||(h[i]=l)})),Object.getOwnPropertyNames(l).forEach((function(i){h.setAttribute(i,l[i])})),c&&appendContent(h,c),h}function textContent(i,u){return void 0===i.textContent?i.innerText=u:i.textContent=u,i}function prependTo(i,u){u.firstChild?u.insertBefore(i,u.firstChild):u.appendChild(i)}function hasClass(i,u){return throwIfWhitespace(u),i.classList?i.classList.contains(u):function classRegExp(i){return new RegExp("(^|\\s)"+i+"($|\\s)")}(u).test(i.className)}function addClass(i,u){return i.classList?i.classList.add(u):hasClass(i,u)||(i.className=(i.className+" "+u).trim()),i}function removeClass(i,u){return i?(i.classList?i.classList.remove(u):(throwIfWhitespace(u),i.className=i.className.split(/\s+/).filter((function(i){return i!==u})).join(" ")),i):(Qt.warn("removeClass was called with an element that doesn't exist"),null)}function toggleClass(i,u,l){var c=hasClass(i,u);if("function"==typeof l&&(l=l(i,u)),"boolean"!=typeof l&&(l=!c),l!==c)return l?addClass(i,u):removeClass(i,u),i}function setAttributes(i,u){Object.getOwnPropertyNames(u).forEach((function(l){var c=u[l];null==c||!1===c?i.removeAttribute(l):i.setAttribute(l,!0===c?"":c)}))}function getAttributes(i){var u={},l=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(i&&i.attributes&&i.attributes.length>0)for(var c=i.attributes,h=c.length-1;h>=0;h--){var p=c[h].name,m=c[h].value;"boolean"!=typeof i[p]&&-1===l.indexOf(","+p+",")||(m=null!==m),u[p]=m}return u}function getAttribute(i,u){return i.getAttribute(u)}function setAttribute(i,u,l){i.setAttribute(u,l)}function removeAttribute(i,u){i.removeAttribute(u)}function blockTextSelection(){v().body.focus(),v().onselectstart=function(){return!1}}function unblockTextSelection(){v().onselectstart=function(){return!0}}function getBoundingClientRect(i){if(i&&i.getBoundingClientRect&&i.parentNode){var u=i.getBoundingClientRect(),l={};return["bottom","height","left","right","top","width"].forEach((function(i){void 0!==u[i]&&(l[i]=u[i])})),l.height||(l.height=parseFloat(computedStyle(i,"height"))),l.width||(l.width=parseFloat(computedStyle(i,"width"))),l}}function findPosition(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};for(var u=i.offsetWidth,l=i.offsetHeight,c=0,h=0;i.offsetParent&&i!==v()[qt.fullscreenElement];)c+=i.offsetLeft,h+=i.offsetTop,i=i.offsetParent;return{left:c,top:h,width:u,height:l}}function getPointerPosition(i,u){var l={x:0,y:0};if(_i)for(var c=i;c&&"html"!==c.nodeName.toLowerCase();){var h=computedStyle(c,"transform");if(/^matrix/.test(h)){var p=h.slice(7,-1).split(/,\s/).map(Number);l.x+=p[4],l.y+=p[5]}else if(/^matrix3d/.test(h)){var m=h.slice(9,-1).split(/,\s/).map(Number);l.x+=m[12],l.y+=m[13]}c=c.parentNode}var g={},v=findPosition(u.target),_=findPosition(i),y=_.width,b=u.offsetY-(_.top-v.top),T=u.offsetX-(_.left-v.left);return u.changedTouches&&(T=u.changedTouches[0].pageX-_.left,b=u.changedTouches[0].pageY+_.top,_i&&(T-=l.x,b-=l.y)),g.y=1-Math.max(0,Math.min(1,b/_.height)),g.x=Math.max(0,Math.min(1,T/y)),g}function isTextNode(i){return video_es_isObject(i)&&3===i.nodeType}function emptyEl(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function normalizeContent(i){return"function"==typeof i&&(i=i()),(Array.isArray(i)?i:[i]).map((function(i){return"function"==typeof i&&(i=i()),isEl(i)||isTextNode(i)?i:"string"==typeof i&&/\S/.test(i)?v().createTextNode(i):void 0})).filter((function(i){return i}))}function appendContent(i,u){return normalizeContent(u).forEach((function(u){return i.appendChild(u)})),i}function insertContent(i,u){return appendContent(emptyEl(i),u)}function isSingleLeftClick(i){return void 0===i.button&&void 0===i.buttons||(0===i.button&&void 0===i.buttons||("mouseup"===i.type&&0===i.button&&0===i.buttons||0===i.button&&1===i.buttons))}var Ti,Si=createQuerier("querySelector"),ki=createQuerier("querySelectorAll"),Ei=Object.freeze({__proto__:null,isReal,isEl,isInFrame,createEl,textContent,prependTo,hasClass,addClass,removeClass,toggleClass,setAttributes,getAttributes,getAttribute,setAttribute,removeAttribute,blockTextSelection,unblockTextSelection,getBoundingClientRect,findPosition,getPointerPosition,isTextNode,emptyEl,normalizeContent,appendContent,insertContent,isSingleLeftClick,$:Si,$$:ki}),Ci=!1,wi=function autoSetup(){if(!1!==Ti.options.autoSetup){var i=Array.prototype.slice.call(v().getElementsByTagName("video")),u=Array.prototype.slice.call(v().getElementsByTagName("audio")),l=Array.prototype.slice.call(v().getElementsByTagName("video-js")),c=i.concat(u,l);if(c&&c.length>0)for(var h=0,p=c.length;h<p;h++){var m=c[h];if(!m||!m.getAttribute){autoSetupTimeout(1);break}void 0===m.player&&null!==m.getAttribute("data-setup")&&Ti(m)}else Ci||autoSetupTimeout(1)}};function autoSetupTimeout(i,u){isReal()&&(u&&(Ti=u),m().setTimeout(wi,i))}function setWindowLoaded(){Ci=!0,m().removeEventListener("load",setWindowLoaded)}isReal()&&("complete"===v().readyState?setWindowLoaded():m().addEventListener("load",setWindowLoaded));var Pi,Ai=function createStyleElement(i){var u=v().createElement("style");return u.className=i,u},xi=function setTextContent(i,u){i.styleSheet?i.styleSheet.cssText=u:i.textContent=u},Ii=3;function newGUID(){return Ii++}m().WeakMap||(Pi=function(){function FakeWeakMap(){this.vdata="vdata"+Math.floor(m().performance&&m().performance.now()||Date.now()),this.data={}}var i=FakeWeakMap.prototype;return i.set=function set(i,u){var l=i[this.vdata]||newGUID();return i[this.vdata]||(i[this.vdata]=l),this.data[l]=u,this},i.get=function get(i){var u=i[this.vdata];if(u)return this.data[u];Qt("We have no data for this element",i)},i.has=function has(i){return i[this.vdata]in this.data},i.delete=function _delete(i){var u=i[this.vdata];u&&(delete this.data[u],delete i[this.vdata])},FakeWeakMap}());var Oi,Li=m().WeakMap?new WeakMap:new Pi;function _cleanUpEvents(i,u){if(Li.has(i)){var l=Li.get(i);0===l.handlers[u].length&&(delete l.handlers[u],i.removeEventListener?i.removeEventListener(u,l.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+u,l.dispatcher)),Object.getOwnPropertyNames(l.handlers).length<=0&&(delete l.handlers,delete l.dispatcher,delete l.disabled),0===Object.getOwnPropertyNames(l).length&&Li.delete(i)}}function _handleMultipleEvents(i,u,l,c){l.forEach((function(l){i(u,l,c)}))}function fixEvent(i){if(i.fixed_)return i;function returnTrue(){return!0}function returnFalse(){return!1}if(!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){var u=i||m().event;for(var l in i={},u)"layerX"!==l&&"layerY"!==l&&"keyLocation"!==l&&"webkitMovementX"!==l&&"webkitMovementY"!==l&&"path"!==l&&("returnValue"===l&&u.preventDefault||(i[l]=u[l]));if(i.target||(i.target=i.srcElement||v()),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){u.preventDefault&&u.preventDefault(),i.returnValue=!1,u.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){u.stopPropagation&&u.stopPropagation(),i.cancelBubble=!0,u.cancelBubble=!0,i.isPropagationStopped=returnTrue},i.isPropagationStopped=returnFalse,i.stopImmediatePropagation=function(){u.stopImmediatePropagation&&u.stopImmediatePropagation(),i.isImmediatePropagationStopped=returnTrue,i.stopPropagation()},i.isImmediatePropagationStopped=returnFalse,null!=i.clientX){var c=v().documentElement,h=v().body;i.pageX=i.clientX+(c&&c.scrollLeft||h&&h.scrollLeft||0)-(c&&c.clientLeft||h&&h.clientLeft||0),i.pageY=i.clientY+(c&&c.scrollTop||h&&h.scrollTop||0)-(c&&c.clientTop||h&&h.clientTop||0)}i.which=i.charCode||i.keyCode,null!=i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i.fixed_=!0,i}var Di=function supportsPassive(){if("boolean"!=typeof Oi){Oi=!1;try{var i=Object.defineProperty({},"passive",{get:function get(){Oi=!0}});m().addEventListener("test",null,i),m().removeEventListener("test",null,i)}catch(i){}}return Oi},Vi=["touchstart","touchmove"];function on(i,u,l){if(Array.isArray(u))return _handleMultipleEvents(on,i,u,l);Li.has(i)||Li.set(i,{});var c=Li.get(i);if(c.handlers||(c.handlers={}),c.handlers[u]||(c.handlers[u]=[]),l.guid||(l.guid=newGUID()),c.handlers[u].push(l),c.dispatcher||(c.disabled=!1,c.dispatcher=function(u,l){if(!c.disabled){u=fixEvent(u);var h=c.handlers[u.type];if(h)for(var p=h.slice(0),m=0,g=p.length;m<g&&!u.isImmediatePropagationStopped();m++)try{p[m].call(i,u,l)}catch(i){Qt.error(i)}}}),1===c.handlers[u].length)if(i.addEventListener){var h=!1;Di()&&Vi.indexOf(u)>-1&&(h={passive:!0}),i.addEventListener(u,c.dispatcher,h)}else i.attachEvent&&i.attachEvent("on"+u,c.dispatcher)}function off(i,u,l){if(Li.has(i)){var c=Li.get(i);if(c.handlers){if(Array.isArray(u))return _handleMultipleEvents(off,i,u,l);var h=function removeType(i,u){c.handlers[u]=[],_cleanUpEvents(i,u)};if(void 0!==u){var p=c.handlers[u];if(p){if(!l)return h(i,u),void 0;if(l.guid)for(var m=0;m<p.length;m++)p[m].guid===l.guid&&p.splice(m--,1);_cleanUpEvents(i,u)}}else for(var g in c.handlers)Object.prototype.hasOwnProperty.call(c.handlers||{},g)&&h(i,g)}}}function trigger(i,u,l){var c=Li.has(i)?Li.get(i):{},h=i.parentNode||i.ownerDocument;if("string"==typeof u?u={type:u,target:i}:u.target||(u.target=i),u=fixEvent(u),c.dispatcher&&c.dispatcher.call(i,u,l),h&&!u.isPropagationStopped()&&!0===u.bubbles)trigger.call(null,h,u,l);else if(!h&&!u.defaultPrevented&&u.target&&u.target[u.type]){Li.has(u.target)||Li.set(u.target,{});var p=Li.get(u.target);u.target[u.type]&&(p.disabled=!0,"function"==typeof u.target[u.type]&&u.target[u.type](),p.disabled=!1)}return!u.defaultPrevented}function one(i,u,l){if(Array.isArray(u))return _handleMultipleEvents(one,i,u,l);var c=function func(){off(i,u,func),l.apply(this,arguments)};c.guid=l.guid=l.guid||newGUID(),on(i,u,c)}function any(i,u,l){var c=function func(){off(i,u,func),l.apply(this,arguments)};c.guid=l.guid=l.guid||newGUID(),on(i,u,c)}var Ri,Mi=Object.freeze({__proto__:null,fixEvent,on,off,trigger,one,any}),Ni=30,Bi=function bind(i,u,l){u.guid||(u.guid=newGUID());var c=u.bind(i);return c.guid=l?l+"_"+u.guid:u.guid,c},Fi=function throttle(i,u){var l=m().performance.now();return function throttled(){var c=m().performance.now();c-l>=u&&(i.apply(void 0,arguments),l=c)}},Ui=function EventTarget(){};Ui.prototype.allowedEvents_={},Ui.prototype.addEventListener=Ui.prototype.on=function(i,u){var l=this.addEventListener;this.addEventListener=function(){},on(this,i,u),this.addEventListener=l},Ui.prototype.removeEventListener=Ui.prototype.off=function(i,u){off(this,i,u)},Ui.prototype.one=function(i,u){var l=this.addEventListener;this.addEventListener=function(){},one(this,i,u),this.addEventListener=l},Ui.prototype.any=function(i,u){var l=this.addEventListener;this.addEventListener=function(){},any(this,i,u),this.addEventListener=l},Ui.prototype.dispatchEvent=Ui.prototype.trigger=function(i){var u=i.type||i;"string"==typeof i&&(i={type:u}),i=fixEvent(i),this.allowedEvents_[u]&&this["on"+u]&&this["on"+u](i),trigger(this,i)},Ui.prototype.queueTrigger=function(i){var u=this;Ri||(Ri=new Map);var l=i.type||i,c=Ri.get(this);c||(c=new Map,Ri.set(this,c));var h=c.get(l);c.delete(l),m().clearTimeout(h);var p=m().setTimeout((function(){c.delete(l),0===c.size&&(c=null,Ri.delete(u)),u.trigger(i)}),0);c.set(l,p)};var ji=function objName(i){return"function"==typeof i.name?i.name():"string"==typeof i.name?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i},Hi=function isEvented(i){return i instanceof Ui||!!i.eventBusEl_&&["on","one","off","trigger"].every((function(u){return"function"==typeof i[u]}))},qi=function isValidEventType(i){return"string"==typeof i&&/\S/.test(i)||Array.isArray(i)&&!!i.length},Wi=function validateTarget(i,u,l){if(!i||!i.nodeName&&!Hi(i))throw new Error("Invalid target for "+ji(u)+"#"+l+"; must be a DOM node or evented object.")},Gi=function validateEventType(i,u,l){if(!qi(i))throw new Error("Invalid event type for "+ji(u)+"#"+l+"; must be a non-empty string or array.")},zi=function validateListener(i,u,l){if("function"!=typeof i)throw new Error("Invalid listener for "+ji(u)+"#"+l+"; must be a function.")},Xi=function normalizeListenArgs(i,u,l){var c,h,p,m=u.length<3||u[0]===i||u[0]===i.eventBusEl_;return m?(c=i.eventBusEl_,u.length>=3&&u.shift(),h=u[0],p=u[1]):(c=u[0],h=u[1],p=u[2]),Wi(c,i,l),Gi(h,i,l),zi(p,i,l),{isTargetingSelf:m,target:c,type:h,listener:p=Bi(i,p)}},Ki=function listen(i,u,l,c){Wi(i,i,u),i.nodeName?Mi[u](i,l,c):i[u](l,c)},Qi={on:function on(){for(var i=this,u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var h=Xi(this,l,"on"),p=h.isTargetingSelf,m=h.target,g=h.type,v=h.listener;if(Ki(m,"on",g,v),!p){var _=function removeListenerOnDispose(){return i.off(m,g,v)};_.guid=v.guid;var y=function removeRemoverOnTargetDispose(){return i.off("dispose",_)};y.guid=v.guid,Ki(this,"on","dispose",_),Ki(m,"on","dispose",y)}},one:function one(){for(var i=this,u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var h=Xi(this,l,"one"),p=h.target,m=h.type,g=h.listener;if(h.isTargetingSelf)Ki(p,"one",m,g);else{var v=function wrapper(){i.off(p,m,wrapper);for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];g.apply(null,l)};v.guid=g.guid,Ki(p,"one",m,v)}},any:function any(){for(var i=this,u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var h=Xi(this,l,"any"),p=h.target,m=h.type,g=h.listener;if(h.isTargetingSelf)Ki(p,"any",m,g);else{var v=function wrapper(){i.off(p,m,wrapper);for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];g.apply(null,l)};v.guid=g.guid,Ki(p,"any",m,v)}},off:function off$1(i,u,l){if(!i||qi(i))off(this.eventBusEl_,i,u);else{var c=i,h=u;Wi(c,this,"off"),Gi(h,this,"off"),zi(l,this,"off"),l=Bi(this,l),this.off("dispose",l),c.nodeName?(off(c,h,l),off(c,"dispose",l)):Hi(c)&&(c.off(h,l),c.off("dispose",l))}},trigger:function trigger$1(i,u){if(Wi(this.eventBusEl_,this,"trigger"),!qi(i&&"string"!=typeof i?i.type:i)){var l="Invalid event type for "+ji(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!i)throw new Error(l);(this.log||Qt).error(l)}return trigger(this.eventBusEl_,i,u)}};function evented(i,u){void 0===u&&(u={});var l=u.eventBusKey;if(l){if(!i[l].nodeName)throw new Error('The eventBusKey "'+l+'" does not refer to an element.');i.eventBusEl_=i[l]}else i.eventBusEl_=createEl("span",{className:"vjs-event-bus"});return video_es_assign(i,Qi),i.eventedCallbacks&&i.eventedCallbacks.forEach((function(i){i()})),i.on("dispose",(function(){i.off(),[i,i.el_,i.eventBusEl_].forEach((function(i){i&&Li.has(i)&&Li.delete(i)})),m().setTimeout((function(){i.eventBusEl_=null}),0)})),i}var Yi={state:{},setState:function setState(i){var u,l=this;return"function"==typeof i&&(i=i()),each(i,(function(i,c){l.state[c]!==i&&((u=u||{})[c]={from:l.state[c],to:i}),l.state[c]=i})),u&&Hi(this)&&this.trigger({changes:u,type:"statechanged"}),u}};function stateful(i,u){return video_es_assign(i,Yi),i.state=video_es_assign({},i.state,u),"function"==typeof i.handleStateChanged&&Hi(i)&&i.on("statechanged",i.handleStateChanged),i}var $i=function toLowerCase(i){return"string"!=typeof i?i:i.replace(/./,(function(i){return i.toLowerCase()}))},Ji=function toTitleCase(i){return"string"!=typeof i?i:i.replace(/./,(function(i){return i.toUpperCase()}))};function mergeOptions$3(){for(var i={},u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return l.forEach((function(u){u&&each(u,(function(u,l){if(!isPlain(u))return i[l]=u,void 0;isPlain(i[l])||(i[l]={}),i[l]=mergeOptions$3(i[l],u)}))})),i}var Zi=function(){function MapSham(){this.map_={}}var i=MapSham.prototype;return i.has=function has(i){return i in this.map_},i.delete=function _delete(i){var u=this.has(i);return delete this.map_[i],u},i.set=function set(i,u){return this.map_[i]=u,this},i.forEach=function forEach(i,u){for(var l in this.map_)i.call(u,this.map_[l],l,this)},MapSham}(),er=m().Map?m().Map:Zi,tr=function(){function SetSham(){this.set_={}}var i=SetSham.prototype;return i.has=function has(i){return i in this.set_},i.delete=function _delete(i){var u=this.has(i);return delete this.set_[i],u},i.add=function add(i){return this.set_[i]=1,this},i.forEach=function forEach(i,u){for(var l in this.set_)i.call(u,l,l,this)},SetSham}(),ir=m().Set?m().Set:tr,rr=function(){function Component(i,u,l){var c=this;if(this.player_=!i&&this.play?i=this:i,this.isDisposed_=!1,this.parentComponent_=null,this.options_=mergeOptions$3({},this.options_),u=this.options_=mergeOptions$3(this.options_,u),this.id_=u.id||u.el&&u.el.id,!this.id_){var h=i&&i.id&&i.id()||"no_player";this.id_=h+"_component_"+newGUID()}this.name_=u.name||null,u.el?this.el_=u.el:!1!==u.createEl&&(this.el_=this.createEl()),u.className&&this.el_&&u.className.split(" ").forEach((function(i){return c.addClass(i)})),!1!==u.evented&&(evented(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new ir,this.setIntervalIds_=new ir,this.rafIds_=new ir,this.namedRafs_=new er,this.clearingTimersOnDispose_=!1,!1!==u.initChildren&&this.initChildren(),this.ready(l),!1!==u.reportTouchActivity&&this.enableTouchActivity()}var i=Component.prototype;return i.dispose=function dispose(i){if(void 0===i&&(i={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var u=this.children_.length-1;u>=0;u--)this.children_[u].dispose&&this.children_[u].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(i.restoreEl?this.el_.parentNode.replaceChild(i.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},i.isDisposed=function isDisposed(){return Boolean(this.isDisposed_)},i.player=function player(){return this.player_},i.options=function options(i){return i?(this.options_=mergeOptions$3(this.options_,i),this.options_):this.options_},i.el=function el(){return this.el_},i.createEl=function createEl$1(i,u,l){return createEl(i,u,l)},i.localize=function localize(i,u,l){void 0===l&&(l=i);var c=this.player_.language&&this.player_.language(),h=this.player_.languages&&this.player_.languages(),p=h&&h[c],m=c&&c.split("-")[0],g=h&&h[m],v=l;return p&&p[i]?v=p[i]:g&&g[i]&&(v=g[i]),u&&(v=v.replace(/\{(\d+)\}/g,(function(i,l){var c=u[l-1],h=c;return void 0===c&&(h=i),h}))),v},i.handleLanguagechange=function handleLanguagechange(){},i.contentEl=function contentEl(){return this.contentEl_||this.el_},i.id=function id(){return this.id_},i.name=function name(){return this.name_},i.children=function children(){return this.children_},i.getChildById=function getChildById(i){return this.childIndex_[i]},i.getChild=function getChild(i){if(i)return this.childNameIndex_[i]},i.getDescendant=function getDescendant(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];u=u.reduce((function(i,u){return i.concat(u)}),[]);for(var c=this,h=0;h<u.length;h++)if(!(c=c.getChild(u[h]))||!c.getChild)return;return c},i.addChild=function addChild(i,u,l){var c,h;if(void 0===u&&(u={}),void 0===l&&(l=this.children_.length),"string"==typeof i){h=Ji(i);var p=u.componentClass||h;u.name=h;var m=Component.getComponent(p);if(!m)throw new Error("Component "+p+" does not exist");if("function"!=typeof m)return null;c=new m(this.player_||this,u)}else c=i;if(c.parentComponent_&&c.parentComponent_.removeChild(c),this.children_.splice(l,0,c),c.parentComponent_=this,"function"==typeof c.id&&(this.childIndex_[c.id()]=c),(h=h||c.name&&Ji(c.name()))&&(this.childNameIndex_[h]=c,this.childNameIndex_[$i(h)]=c),"function"==typeof c.el&&c.el()){var g=null;this.children_[l+1]&&(this.children_[l+1].el_?g=this.children_[l+1].el_:isEl(this.children_[l+1])&&(g=this.children_[l+1])),this.contentEl().insertBefore(c.el(),g)}return c},i.removeChild=function removeChild(i){if("string"==typeof i&&(i=this.getChild(i)),i&&this.children_){for(var u=!1,l=this.children_.length-1;l>=0;l--)if(this.children_[l]===i){u=!0,this.children_.splice(l,1);break}if(u){i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[Ji(i.name())]=null,this.childNameIndex_[$i(i.name())]=null;var c=i.el();c&&c.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}}},i.initChildren=function initChildren(){var i=this,u=this.options_.children;if(u){var l,c=this.options_,h=Component.getComponent("Tech");(l=Array.isArray(u)?u:Object.keys(u)).concat(Object.keys(this.options_).filter((function(i){return!l.some((function(u){return"string"==typeof u?i===u:i===u.name}))}))).map((function(l){var c,h;return"string"==typeof l?h=u[c=l]||i.options_[c]||{}:(c=l.name,h=l),{name:c,opts:h}})).filter((function(i){var u=Component.getComponent(i.opts.componentClass||Ji(i.name));return u&&!h.isTech(u)})).forEach((function handleAdd(u){var l=u.name,h=u.opts;if(void 0!==c[l]&&(h=c[l]),!1!==h){!0===h&&(h={}),h.playerOptions=i.options_.playerOptions;var p=i.addChild(l,h);p&&(i[l]=p)}}))}},i.buildCSSClass=function buildCSSClass(){return""},i.ready=function ready(i,u){if(void 0===u&&(u=!1),i)return this.isReady_?(u?i.call(this):this.setTimeout(i,1),void 0):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(i),void 0)},i.triggerReady=function triggerReady(){this.isReady_=!0,this.setTimeout((function(){var i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach((function(i){i.call(this)}),this),this.trigger("ready")}),1)},i.$=function $$1(i,u){return Si(i,u||this.contentEl())},i.$$=function $$$1(i,u){return ki(i,u||this.contentEl())},i.hasClass=function hasClass$1(i){return hasClass(this.el_,i)},i.addClass=function addClass$1(i){addClass(this.el_,i)},i.removeClass=function removeClass$1(i){removeClass(this.el_,i)},i.toggleClass=function toggleClass$1(i,u){toggleClass(this.el_,i,u)},i.show=function show(){this.removeClass("vjs-hidden")},i.hide=function hide(){this.addClass("vjs-hidden")},i.lockShowing=function lockShowing(){this.addClass("vjs-lock-showing")},i.unlockShowing=function unlockShowing(){this.removeClass("vjs-lock-showing")},i.getAttribute=function getAttribute$1(i){return getAttribute(this.el_,i)},i.setAttribute=function setAttribute$1(i,u){setAttribute(this.el_,i,u)},i.removeAttribute=function removeAttribute$1(i){removeAttribute(this.el_,i)},i.width=function width(i,u){return this.dimension("width",i,u)},i.height=function height(i,u){return this.dimension("height",i,u)},i.dimensions=function dimensions(i,u){this.width(i,!0),this.height(u)},i.dimension=function dimension(i,u,l){if(void 0!==u)return null!==u&&u==u||(u=0),this.el_.style[i]=-1!==(""+u).indexOf("%")||-1!==(""+u).indexOf("px")?u:"auto"===u?"":u+"px",l||this.trigger("componentresize"),void 0;if(!this.el_)return 0;var c=this.el_.style[i],h=c.indexOf("px");return-1!==h?parseInt(c.slice(0,h),10):parseInt(this.el_["offset"+Ji(i)],10)},i.currentDimension=function currentDimension(i){var u=0;if("width"!==i&&"height"!==i)throw new Error("currentDimension only accepts width or height value");if(u=computedStyle(this.el_,i),0===(u=parseFloat(u))||isNaN(u)){var l="offset"+Ji(i);u=this.el_[l]}return u},i.currentDimensions=function currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function currentWidth(){return this.currentDimension("width")},i.currentHeight=function currentHeight(){return this.currentDimension("height")},i.focus=function focus(){this.el_.focus()},i.blur=function blur(){this.el_.blur()},i.handleKeyDown=function handleKeyDown(i){this.player_&&(y().isEventKey(i,"Tab")||i.stopPropagation(),this.player_.handleKeyDown(i))},i.handleKeyPress=function handleKeyPress(i){this.handleKeyDown(i)},i.emitTapEvents=function emitTapEvents(){var i,u=0,l=null;this.on("touchstart",(function(c){1===c.touches.length&&(l={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY},u=m().performance.now(),i=!0)})),this.on("touchmove",(function(u){if(u.touches.length>1)i=!1;else if(l){var c=u.touches[0].pageX-l.pageX,h=u.touches[0].pageY-l.pageY;Math.sqrt(c*c+h*h)>10&&(i=!1)}}));var c=function noTap(){i=!1};this.on("touchleave",c),this.on("touchcancel",c),this.on("touchend",(function(c){(l=null,!0===i)&&(m().performance.now()-u<200&&(c.preventDefault(),this.trigger("tap")))}))},i.enableTouchActivity=function enableTouchActivity(){if(this.player()&&this.player().reportUserActivity){var i,u=Bi(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){u(),this.clearInterval(i),i=this.setInterval(u,250)}));var l=function touchEnd(l){u(),this.clearInterval(i)};this.on("touchmove",u),this.on("touchend",l),this.on("touchcancel",l)}},i.setTimeout=function setTimeout(i,u){var l,c=this;return i=Bi(this,i),this.clearTimersOnDispose_(),l=m().setTimeout((function(){c.setTimeoutIds_.has(l)&&c.setTimeoutIds_.delete(l),i()}),u),this.setTimeoutIds_.add(l),l},i.clearTimeout=function clearTimeout(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),m().clearTimeout(i)),i},i.setInterval=function setInterval(i,u){i=Bi(this,i),this.clearTimersOnDispose_();var l=m().setInterval(i,u);return this.setIntervalIds_.add(l),l},i.clearInterval=function clearInterval(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),m().clearInterval(i)),i},i.requestAnimationFrame=function requestAnimationFrame(i){var u,l=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),i=Bi(this,i),u=m().requestAnimationFrame((function(){l.rafIds_.has(u)&&l.rafIds_.delete(u),i()})),this.rafIds_.add(u),u):this.setTimeout(i,1e3/60)},i.requestNamedAnimationFrame=function requestNamedAnimationFrame(i,u){var l=this;if(!this.namedRafs_.has(i)){this.clearTimersOnDispose_(),u=Bi(this,u);var c=this.requestAnimationFrame((function(){u(),l.namedRafs_.has(i)&&l.namedRafs_.delete(i)}));return this.namedRafs_.set(i,c),i}},i.cancelNamedAnimationFrame=function cancelNamedAnimationFrame(i){this.namedRafs_.has(i)&&(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))},i.cancelAnimationFrame=function cancelAnimationFrame(i){return this.supportsRaf_?(this.rafIds_.has(i)&&(this.rafIds_.delete(i),m().cancelAnimationFrame(i)),i):this.clearTimeout(i)},i.clearTimersOnDispose_=function clearTimersOnDispose_(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(u){var l=u[1];i[u[0]].forEach((function(u,c){return i[l](c)}))})),i.clearingTimersOnDispose_=!1})))},Component.registerComponent=function registerComponent(i,u){if("string"!=typeof i||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var l,c=Component.getComponent("Tech"),h=c&&c.isTech(u),p=Component===u||Component.prototype.isPrototypeOf(u.prototype);if(h||!p)throw l=h?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+i+'"; '+l+".");i=Ji(i),Component.components_||(Component.components_={});var m=Component.getComponent("Player");if("Player"===i&&m&&m.players){var g=m.players,v=Object.keys(g);if(g&&v.length>0&&v.map((function(i){return g[i]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Component.components_[i]=u,Component.components_[$i(i)]=u,u},Component.getComponent=function getComponent(i){if(i&&Component.components_)return Component.components_[i]},Component}();function getRange(i,u,l,c){return!function rangeCheck(i,u,l){if("number"!=typeof u||u<0||u>l)throw new Error("Failed to execute '"+i+"' on 'TimeRanges': The index provided ("+u+") is non-numeric or out of bounds (0-"+l+").")}(i,c,l.length-1),l[c][u]}function createTimeRangesObj(i){var u;return u=void 0===i||0===i.length?{length:0,start:function start(){throw new Error("This TimeRanges object is empty")},end:function end(){throw new Error("This TimeRanges object is empty")}}:{length:i.length,start:getRange.bind(null,"start",0,i),end:getRange.bind(null,"end",1,i)},m().Symbol&&m().Symbol.iterator&&(u[m().Symbol.iterator]=function(){return(i||[]).values()}),u}function createTimeRanges(i,u){return Array.isArray(i)?createTimeRangesObj(i):void 0===i||void 0===u?createTimeRangesObj():createTimeRangesObj([[i,u]])}function bufferedPercent(i,u){var l,c,h=0;if(!u)return 0;i&&i.length||(i=createTimeRanges(0,0));for(var p=0;p<i.length;p++)l=i.start(p),(c=i.end(p))>u&&(c=u),h+=c-l;return h/u}function MediaError(i){if(i instanceof MediaError)return i;"number"==typeof i?this.code=i:"string"==typeof i?this.message=i:video_es_isObject(i)&&("number"==typeof i.code&&(this.code=i.code),video_es_assign(this,i)),this.message||(this.message=MediaError.defaultMessages[this.code]||"")}rr.prototype.supportsRaf_="function"==typeof m().requestAnimationFrame&&"function"==typeof m().cancelAnimationFrame,rr.registerComponent("Component",rr),MediaError.prototype.code=0,MediaError.prototype.message="",MediaError.prototype.status=null,MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var nr=0;nr<MediaError.errorTypes.length;nr++)MediaError[MediaError.errorTypes[nr]]=nr,MediaError.prototype[MediaError.errorTypes[nr]]=nr;function isPromise(i){return null!=i&&"function"==typeof i.then}function silencePromise(i){isPromise(i)&&i.then(null,(function(i){}))}var ar=function trackToJson_(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(u,l,c){return i[l]&&(u[l]=i[l]),u}),{cues:i.cues&&Array.prototype.map.call(i.cues,(function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}}))})},sr=function textTracksToJson(i){var u=i.$$("track"),l=Array.prototype.map.call(u,(function(i){return i.track}));return Array.prototype.map.call(u,(function(i){var u=ar(i.track);return i.src&&(u.src=i.src),u})).concat(Array.prototype.filter.call(i.textTracks(),(function(i){return-1===l.indexOf(i)})).map(ar))},or=function jsonToTextTracks(i,u){return i.forEach((function(i){var l=u.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach((function(i){return l.addCue(i)}))})),u.textTracks()},ur="vjs-modal-dialog",lr=function(i){function ModalDialog(u,l){var c;return(c=i.call(this,u,l)||this).handleKeyDown_=function(i){return c.handleKeyDown(i)},c.close_=function(i){return c.close(i)},c.opened_=c.hasBeenOpened_=c.hasBeenFilled_=!1,c.closeable(!c.options_.uncloseable),c.content(c.options_.content),c.contentEl_=createEl("div",{className:ur+"-content"},{role:"document"}),c.descEl_=createEl("p",{className:ur+"-description vjs-control-text",id:c.el().getAttribute("aria-describedby")}),textContent(c.descEl_,c.description()),c.el_.appendChild(c.descEl_),c.el_.appendChild(c.contentEl_),c}_inheritsLoose(ModalDialog,i);var u=ModalDialog.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},u.dispose=function dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},u.buildCSSClass=function buildCSSClass(){return ur+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},u.label=function label(){return this.localize(this.options_.label||"Modal Window")},u.description=function description(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},u.open=function open(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},u.opened=function opened(i){return"boolean"==typeof i&&this[i?"open":"close"](),this.opened_},u.close=function close(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},u.closeable=function closeable(i){if("boolean"==typeof i){var closeable=this.closeable_=!!i,u=this.getChild("closeButton");if(closeable&&!u){var l=this.contentEl_;this.contentEl_=this.el_,u=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=l,this.on(u,"close",this.close_)}!closeable&&u&&(this.off(u,"close",this.close_),this.removeChild(u),u.dispose())}return this.closeable_},u.fill=function fill(){this.fillWith(this.content())},u.fillWith=function fillWith(i){var u=this.contentEl(),l=u.parentNode,c=u.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,l.removeChild(u),this.empty(),insertContent(u,i),this.trigger("modalfill"),c?l.insertBefore(u,c):l.appendChild(u);var h=this.getChild("closeButton");h&&l.appendChild(h.el_)},u.empty=function empty(){this.trigger("beforemodalempty"),emptyEl(this.contentEl()),this.trigger("modalempty")},u.content=function content(i){return void 0!==i&&(this.content_=i),this.content_},u.conditionalFocus_=function conditionalFocus_(){var i=v().activeElement,u=this.player_.el_;this.previouslyActiveEl_=null,(u.contains(i)||u===i)&&(this.previouslyActiveEl_=i,this.focus())},u.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},u.handleKeyDown=function handleKeyDown(i){if(i.stopPropagation(),y().isEventKey(i,"Escape")&&this.closeable())return i.preventDefault(),this.close(),void 0;if(y().isEventKey(i,"Tab")){for(var u,l=this.focusableEls_(),c=this.el_.querySelector(":focus"),h=0;h<l.length;h++)if(c===l[h]){u=h;break}v().activeElement===this.el_&&(u=0),i.shiftKey&&0===u?(l[l.length-1].focus(),i.preventDefault()):i.shiftKey||u!==l.length-1||(l[0].focus(),i.preventDefault())}},u.focusableEls_=function focusableEls_(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,(function(i){return(i instanceof m().HTMLAnchorElement||i instanceof m().HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof m().HTMLInputElement||i instanceof m().HTMLSelectElement||i instanceof m().HTMLTextAreaElement||i instanceof m().HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof m().HTMLIFrameElement||i instanceof m().HTMLObjectElement||i instanceof m().HTMLEmbedElement||i.hasAttribute("tabindex")&&-1!==i.getAttribute("tabindex")||i.hasAttribute("contenteditable")}))},ModalDialog}(rr);lr.prototype.options_={pauseOnOpen:!0,temporary:!0},rr.registerComponent("ModalDialog",lr);var dr=function(i){function TrackList(u){var l;void 0===u&&(u=[]),(l=i.call(this)||this).tracks_=[],Object.defineProperty(_assertThisInitialized(l),"length",{get:function get(){return this.tracks_.length}});for(var c=0;c<u.length;c++)l.addTrack(u[c]);return l}_inheritsLoose(TrackList,i);var u=TrackList.prototype;return u.addTrack=function addTrack(i){var u=this,l=this.tracks_.length;""+l in this||Object.defineProperty(this,l,{get:function get(){return this.tracks_[l]}}),-1===this.tracks_.indexOf(i)&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){u.trigger({track:i,type:"labelchange",target:u})},Hi(i)&&i.addEventListener("labelchange",i.labelchange_)},u.removeTrack=function removeTrack(i){for(var u,l=0,c=this.length;l<c;l++)if(this[l]===i){(u=this[l]).off&&u.off(),this.tracks_.splice(l,1);break}u&&this.trigger({track:u,type:"removetrack",target:this})},u.getTrackById=function getTrackById(i){for(var u=null,l=0,c=this.length;l<c;l++){var h=this[l];if(h.id===i){u=h;break}}return u},TrackList}(Ui);for(var cr in dr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},dr.prototype.allowedEvents_)dr.prototype["on"+cr]=null;var hr=function disableOthers(i,u){for(var l=0;l<i.length;l++)Object.keys(i[l]).length&&u.id!==i[l].id&&(i[l].enabled=!1)},pr=function(i){function AudioTrackList(u){var l;void 0===u&&(u=[]);for(var c=u.length-1;c>=0;c--)if(u[c].enabled){hr(u,u[c]);break}return(l=i.call(this,u)||this).changing_=!1,l}_inheritsLoose(AudioTrackList,i);var u=AudioTrackList.prototype;return u.addTrack=function addTrack(u){var l=this;u.enabled&&hr(this,u),i.prototype.addTrack.call(this,u),u.addEventListener&&(u.enabledChange_=function(){l.changing_||(l.changing_=!0,hr(l,u),l.changing_=!1,l.trigger("change"))},u.addEventListener("enabledchange",u.enabledChange_))},u.removeTrack=function removeTrack(u){i.prototype.removeTrack.call(this,u),u.removeEventListener&&u.enabledChange_&&(u.removeEventListener("enabledchange",u.enabledChange_),u.enabledChange_=null)},AudioTrackList}(dr),fr=function disableOthers(i,u){for(var l=0;l<i.length;l++)Object.keys(i[l]).length&&u.id!==i[l].id&&(i[l].selected=!1)},mr=function(i){function VideoTrackList(u){var l;void 0===u&&(u=[]);for(var c=u.length-1;c>=0;c--)if(u[c].selected){fr(u,u[c]);break}return(l=i.call(this,u)||this).changing_=!1,Object.defineProperty(_assertThisInitialized(l),"selectedIndex",{get:function get(){for(var i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set:function set(){}}),l}_inheritsLoose(VideoTrackList,i);var u=VideoTrackList.prototype;return u.addTrack=function addTrack(u){var l=this;u.selected&&fr(this,u),i.prototype.addTrack.call(this,u),u.addEventListener&&(u.selectedChange_=function(){l.changing_||(l.changing_=!0,fr(l,u),l.changing_=!1,l.trigger("change"))},u.addEventListener("selectedchange",u.selectedChange_))},u.removeTrack=function removeTrack(u){i.prototype.removeTrack.call(this,u),u.removeEventListener&&u.selectedChange_&&(u.removeEventListener("selectedchange",u.selectedChange_),u.selectedChange_=null)},VideoTrackList}(dr),gr=function(i){function TextTrackList(){return i.apply(this,arguments)||this}_inheritsLoose(TextTrackList,i);var u=TextTrackList.prototype;return u.addTrack=function addTrack(u){var l=this;i.prototype.addTrack.call(this,u),this.queueChange_||(this.queueChange_=function(){return l.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return l.trigger("selectedlanguagechange")}),u.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(u.kind)&&u.addEventListener("modechange",this.triggerSelectedlanguagechange_)},u.removeTrack=function removeTrack(u){i.prototype.removeTrack.call(this,u),u.removeEventListener&&(this.queueChange_&&u.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&u.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},TextTrackList}(dr),vr=function(){function HtmlTrackElementList(i){void 0===i&&(i=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function get(){return this.trackElements_.length}});for(var u=0,l=i.length;u<l;u++)this.addTrackElement_(i[u])}var i=HtmlTrackElementList.prototype;return i.addTrackElement_=function addTrackElement_(i){var u=this.trackElements_.length;""+u in this||Object.defineProperty(this,u,{get:function get(){return this.trackElements_[u]}}),-1===this.trackElements_.indexOf(i)&&this.trackElements_.push(i)},i.getTrackElementByTrack_=function getTrackElementByTrack_(i){for(var u,l=0,c=this.trackElements_.length;l<c;l++)if(i===this.trackElements_[l].track){u=this.trackElements_[l];break}return u},i.removeTrackElement_=function removeTrackElement_(i){for(var u=0,l=this.trackElements_.length;u<l;u++)if(i===this.trackElements_[u]){this.trackElements_[u].track&&"function"==typeof this.trackElements_[u].track.off&&this.trackElements_[u].track.off(),"function"==typeof this.trackElements_[u].off&&this.trackElements_[u].off(),this.trackElements_.splice(u,1);break}},HtmlTrackElementList}(),_r=function(){function TextTrackCueList(i){TextTrackCueList.prototype.setCues_.call(this,i),Object.defineProperty(this,"length",{get:function get(){return this.length_}})}var i=TextTrackCueList.prototype;return i.setCues_=function setCues_(i){var u=this.length||0,l=0,c=i.length;this.cues_=i,this.length_=i.length;var h=function defineProp(i){""+i in this||Object.defineProperty(this,""+i,{get:function get(){return this.cues_[i]}})};if(u<c)for(l=u;l<c;l++)h.call(this,l)},i.getCueById=function getCueById(i){for(var u=null,l=0,c=this.length;l<c;l++){var h=this[l];if(h.id===i){u=h;break}}return u},TextTrackCueList}(),yr={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},br={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Tr={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Sr={disabled:"disabled",hidden:"hidden",showing:"showing"},kr=function(i){function Track(u){var l;void 0===u&&(u={}),l=i.call(this)||this;var c={id:u.id||"vjs_track_"+newGUID(),kind:u.kind||"",language:u.language||""},h=u.label||"",p=function _loop(i){Object.defineProperty(_assertThisInitialized(l),i,{get:function get(){return c[i]},set:function set(){}})};for(var m in c)p(m);return Object.defineProperty(_assertThisInitialized(l),"label",{get:function get(){return h},set:function set(i){i!==h&&(h=i,this.trigger("labelchange"))}}),l}return _inheritsLoose(Track,i),Track}(Ui),Er=function parseUrl(i){var u=["protocol","hostname","port","pathname","search","hash","host"],l=v().createElement("a");l.href=i;for(var c={},h=0;h<u.length;h++)c[u[h]]=l[u[h]];return"http:"===c.protocol&&(c.host=c.host.replace(/:80$/,"")),"https:"===c.protocol&&(c.host=c.host.replace(/:443$/,"")),c.protocol||(c.protocol=m().location.protocol),c.host||(c.host=m().location.host),c},Cr=function getAbsoluteURL(i){if(!i.match(/^https?:\/\//)){var u=v().createElement("a");u.href=i,i=u.href}return i},wr=function getFileExtension(i){if("string"==typeof i){var u=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(u)return u.pop().toLowerCase()}return""},Pr=function isCrossOrigin(i,u){void 0===u&&(u=m().location);var l=Er(i);return(":"===l.protocol?u.protocol:l.protocol)+l.host!==u.protocol+u.host},Ar=Object.freeze({__proto__:null,parseUrl:Er,getAbsoluteURL:Cr,getFileExtension:wr,isCrossOrigin:Pr}),xr=function parseCues(i,u){var l=new(m().WebVTT.Parser)(m(),m().vttjs,m().WebVTT.StringDecoder()),c=[];l.oncue=function(i){u.addCue(i)},l.onparsingerror=function(i){c.push(i)},l.onflush=function(){u.trigger({type:"loadeddata",target:u})},l.parse(i),c.length>0&&(m().console&&m().console.groupCollapsed&&m().console.groupCollapsed("Text Track parsing errors for "+u.src),c.forEach((function(i){return Qt.error(i)})),m().console&&m().console.groupEnd&&m().console.groupEnd()),l.flush()},Ir=function loadTrack(i,u){var l={uri:i},c=Pr(i);c&&(l.cors=c);var h="use-credentials"===u.tech_.crossOrigin();h&&(l.withCredentials=h),k()(l,Bi(this,(function(i,l,c){if(i)return Qt.error(i,l);u.loaded_=!0,"function"!=typeof m().WebVTT?u.tech_&&u.tech_.any(["vttjsloaded","vttjserror"],(function(i){return"vttjserror"===i.type?(Qt.error("vttjs failed to load, stopping trying to process "+u.src),void 0):xr(c,u)})):xr(c,u)})))},Or=function(i){function TextTrack(u){var l;if(void 0===u&&(u={}),!u.tech)throw new Error("A tech was not provided.");var c=mergeOptions$3(u,{kind:Tr[u.kind]||"subtitles",language:u.language||u.srclang||""}),h=Sr[c.mode]||"disabled",p=c.default;"metadata"!==c.kind&&"chapters"!==c.kind||(h="hidden"),(l=i.call(this,c)||this).tech_=c.tech,l.cues_=[],l.activeCues_=[],l.preload_=!1!==l.tech_.preloadTextTracks;var m=new _r(l.cues_),g=new _r(l.activeCues_),v=!1;l.timeupdateHandler=Bi(_assertThisInitialized(l),(function(i){if(void 0===i&&(i={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_)return"timeupdate"!==i.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)),void 0;this.activeCues=this.activeCues,v&&(this.trigger("cuechange"),v=!1),"timeupdate"!==i.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}));return l.tech_.one("dispose",(function disposeHandler(){l.stopTracking()})),"disabled"!==h&&l.startTracking(),Object.defineProperties(_assertThisInitialized(l),{default:{get:function get(){return p},set:function set(){}},mode:{get:function get(){return h},set:function set(i){Sr[i]&&h!==i&&(h=i,this.preload_||"disabled"===h||0!==this.cues.length||Ir(this.src,this),this.stopTracking(),"disabled"!==h&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function get(){return this.loaded_?m:null},set:function set(){}},activeCues:{get:function get(){if(!this.loaded_)return null;if(0===this.cues.length)return g;for(var i=this.tech_.currentTime(),u=[],l=0,c=this.cues.length;l<c;l++){var h=this.cues[l];(h.startTime<=i&&h.endTime>=i||h.startTime===h.endTime&&h.startTime<=i&&h.startTime+.5>=i)&&u.push(h)}if(v=!1,u.length!==this.activeCues_.length)v=!0;else for(var p=0;p<u.length;p++)-1===this.activeCues_.indexOf(u[p])&&(v=!0);return this.activeCues_=u,g.setCues_(this.activeCues_),g},set:function set(){}}}),c.src?(l.src=c.src,l.preload_||(l.loaded_=!0),(l.preload_||"subtitles"!==c.kind&&"captions"!==c.kind)&&Ir(l.src,_assertThisInitialized(l))):l.loaded_=!0,l}_inheritsLoose(TextTrack,i);var u=TextTrack.prototype;return u.startTracking=function startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},u.stopTracking=function stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},u.addCue=function addCue(i){var u=i;if(u.constructor&&"VTTCue"!==u.constructor.name){for(var l in u=new(m().vttjs.VTTCue)(i.startTime,i.endTime,i.text),i)l in u||(u[l]=i[l]);u.id=i.id,u.originalCue_=i}for(var c=this.tech_.textTracks(),h=0;h<c.length;h++)c[h]!==this&&c[h].removeCue(u);this.cues_.push(u),this.cues.setCues_(this.cues_)},u.removeCue=function removeCue(i){for(var u=this.cues_.length;u--;){var l=this.cues_[u];if(l===i||l.originalCue_&&l.originalCue_===i){this.cues_.splice(u,1),this.cues.setCues_(this.cues_);break}}},TextTrack}(kr);Or.prototype.allowedEvents_={cuechange:"cuechange"};var Lr=function(i){function AudioTrack(u){var l;void 0===u&&(u={});var c=mergeOptions$3(u,{kind:br[u.kind]||""});l=i.call(this,c)||this;var h=!1;return Object.defineProperty(_assertThisInitialized(l),"enabled",{get:function get(){return h},set:function set(i){"boolean"==typeof i&&i!==h&&(h=i,this.trigger("enabledchange"))}}),c.enabled&&(l.enabled=c.enabled),l.loaded_=!0,l}return _inheritsLoose(AudioTrack,i),AudioTrack}(kr),Dr=function(i){function VideoTrack(u){var l;void 0===u&&(u={});var c=mergeOptions$3(u,{kind:yr[u.kind]||""});l=i.call(this,c)||this;var h=!1;return Object.defineProperty(_assertThisInitialized(l),"selected",{get:function get(){return h},set:function set(i){"boolean"==typeof i&&i!==h&&(h=i,this.trigger("selectedchange"))}}),c.selected&&(l.selected=c.selected),l}return _inheritsLoose(VideoTrack,i),VideoTrack}(kr),Vr=function(i){function HTMLTrackElement(u){var l,c;void 0===u&&(u={}),l=i.call(this)||this;var h=new Or(u);return l.kind=h.kind,l.src=h.src,l.srclang=h.language,l.label=h.label,l.default=h.default,Object.defineProperties(_assertThisInitialized(l),{readyState:{get:function get(){return c}},track:{get:function get(){return h}}}),c=0,h.addEventListener("loadeddata",(function(){c=2,l.trigger({type:"load",target:_assertThisInitialized(l)})})),l}return _inheritsLoose(HTMLTrackElement,i),HTMLTrackElement}(Ui);Vr.prototype.allowedEvents_={load:"load"},Vr.NONE=0,Vr.LOADING=1,Vr.LOADED=2,Vr.ERROR=3;var Rr={audio:{ListClass:pr,TrackClass:Lr,capitalName:"Audio"},video:{ListClass:mr,TrackClass:Dr,capitalName:"Video"},text:{ListClass:gr,TrackClass:Or,capitalName:"Text"}};Object.keys(Rr).forEach((function(i){Rr[i].getterName=i+"Tracks",Rr[i].privateName=i+"Tracks_"}));var Mr={remoteText:{ListClass:gr,TrackClass:Or,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:vr,TrackClass:Vr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Nr=_extends({},Rr,Mr);Mr.names=Object.keys(Mr),Rr.names=Object.keys(Rr),Nr.names=[].concat(Mr.names).concat(Rr.names);var Br=function(i){function Tech(u,l){var c;return void 0===u&&(u={}),void 0===l&&(l=function ready(){}),u.reportTouchActivity=!1,(c=i.call(this,null,u,l)||this).onDurationChange_=function(i){return c.onDurationChange(i)},c.trackProgress_=function(i){return c.trackProgress(i)},c.trackCurrentTime_=function(i){return c.trackCurrentTime(i)},c.stopTrackingCurrentTime_=function(i){return c.stopTrackingCurrentTime(i)},c.disposeSourceHandler_=function(i){return c.disposeSourceHandler(i)},c.queuedHanders_=new Set,c.hasStarted_=!1,c.on("playing",(function(){this.hasStarted_=!0})),c.on("loadstart",(function(){this.hasStarted_=!1})),Nr.names.forEach((function(i){var l=Nr[i];u&&u[l.getterName]&&(c[l.privateName]=u[l.getterName])})),c.featuresProgressEvents||c.manualProgressOn(),c.featuresTimeupdateEvents||c.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(i){!1===u["native"+i+"Tracks"]&&(c["featuresNative"+i+"Tracks"]=!1)})),!1===u.nativeCaptions||!1===u.nativeTextTracks?c.featuresNativeTextTracks=!1:!0!==u.nativeCaptions&&!0!==u.nativeTextTracks||(c.featuresNativeTextTracks=!0),c.featuresNativeTextTracks||c.emulateTextTracks(),c.preloadTextTracks=!1!==u.preloadTextTracks,c.autoRemoteTextTracks_=new Nr.text.ListClass,c.initTrackListeners(),u.nativeControlsForTouch||c.emitTapEvents(),c.constructor&&(c.name_=c.constructor.name||"Unknown Tech"),c}_inheritsLoose(Tech,i);var u=Tech.prototype;return u.triggerSourceset=function triggerSourceset(i){var u=this;this.isReady_||this.one("ready",(function(){return u.setTimeout((function(){return u.triggerSourceset(i)}),1)})),this.trigger({src:i,type:"sourceset"})},u.manualProgressOn=function manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},u.manualProgressOff=function manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},u.trackProgress=function trackProgress(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Bi(this,(function(){var i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,1===i&&this.stopTrackingProgress()})),500)},u.onDurationChange=function onDurationChange(i){this.duration_=this.duration()},u.buffered=function buffered(){return createTimeRanges(0,0)},u.bufferedPercent=function bufferedPercent$1(){return bufferedPercent(this.buffered(),this.duration_)},u.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval)},u.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},u.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},u.trackCurrentTime=function trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},u.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},u.dispose=function dispose(){this.clearTracks(Rr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},u.clearTracks=function clearTracks(i){var u=this;(i=[].concat(i)).forEach((function(i){for(var l=u[i+"Tracks"]()||[],c=l.length;c--;){var h=l[c];"text"===i&&u.removeRemoteTextTrack(h),l.removeTrack(h)}}))},u.cleanupAutoTextTracks=function cleanupAutoTextTracks(){for(var i=this.autoRemoteTextTracks_||[],u=i.length;u--;){this.removeRemoteTextTrack(i[u])}},u.reset=function reset(){},u.crossOrigin=function crossOrigin(){},u.setCrossOrigin=function setCrossOrigin(){},u.error=function error(i){return void 0!==i&&(this.error_=new MediaError(i),this.trigger("error")),this.error_},u.played=function played(){return this.hasStarted_?createTimeRanges(0,0):createTimeRanges()},u.play=function play(){},u.setScrubbing=function setScrubbing(){},u.scrubbing=function scrubbing(){},u.setCurrentTime=function setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},u.initTrackListeners=function initTrackListeners(){var i=this;Rr.names.forEach((function(u){var l=function trackListChanges(){i.trigger(u+"trackchange")},c=i[Rr[u].getterName]();c.addEventListener("removetrack",l),c.addEventListener("addtrack",l),i.on("dispose",(function(){c.removeEventListener("removetrack",l),c.removeEventListener("addtrack",l)}))}))},u.addWebVttScript_=function addWebVttScript_(){var i=this;if(!m().WebVTT)if(v().body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(C())&&Object.keys(C()).length>0)return this.trigger("vttjsloaded"),void 0;var u=v().createElement("script");u.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",u.onload=function(){i.trigger("vttjsloaded")},u.onerror=function(){i.trigger("vttjserror")},this.on("dispose",(function(){u.onload=null,u.onerror=null})),m().WebVTT=!0,this.el().parentNode.appendChild(u)}else this.ready(this.addWebVttScript_)},u.emulateTextTracks=function emulateTextTracks(){var i=this,u=this.textTracks(),l=this.remoteTextTracks(),c=function handleAddTrack(i){return u.addTrack(i.track)},h=function handleRemoveTrack(i){return u.removeTrack(i.track)};l.on("addtrack",c),l.on("removetrack",h),this.addWebVttScript_();var p=function updateDisplay(){return i.trigger("texttrackchange")},m=function textTracksChanges(){p();for(var i=0;i<u.length;i++){var l=u[i];l.removeEventListener("cuechange",p),"showing"===l.mode&&l.addEventListener("cuechange",p)}};m(),u.addEventListener("change",m),u.addEventListener("addtrack",m),u.addEventListener("removetrack",m),this.on("dispose",(function(){l.off("addtrack",c),l.off("removetrack",h),u.removeEventListener("change",m),u.removeEventListener("addtrack",m),u.removeEventListener("removetrack",m);for(var i=0;i<u.length;i++){u[i].removeEventListener("cuechange",p)}}))},u.addTextTrack=function addTextTrack(i,u,l){if(!i)throw new Error("TextTrack kind is required but was not provided");return function createTrackHelper(i,u,l,c,h){void 0===h&&(h={});var p=i.textTracks();h.kind=u,l&&(h.label=l),c&&(h.language=c),h.tech=i;var m=new Nr.text.TrackClass(h);return p.addTrack(m),m}(this,i,u,l)},u.createRemoteTextTrack=function createRemoteTextTrack(i){var u=mergeOptions$3(i,{tech:this});return new Mr.remoteTextEl.TrackClass(u)},u.addRemoteTextTrack=function addRemoteTextTrack(i,u){var l=this;void 0===i&&(i={});var c=this.createRemoteTextTrack(i);return!0!==u&&!1!==u&&(Qt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),u=!0),this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),!0!==u&&this.ready((function(){return l.autoRemoteTextTracks_.addTrack(c.track)})),c},u.removeRemoteTextTrack=function removeRemoteTextTrack(i){var u=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(u),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},u.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{}},u.requestPictureInPicture=function requestPictureInPicture(){var i=this.options_.Promise||m().Promise;if(i)return i.reject()},u.disablePictureInPicture=function disablePictureInPicture(){return!0},u.setDisablePictureInPicture=function setDisablePictureInPicture(){},u.requestVideoFrameCallback=function requestVideoFrameCallback(i){var u=this,l=newGUID();return!this.isReady_||this.paused()?(this.queuedHanders_.add(l),this.one("playing",(function(){u.queuedHanders_.has(l)&&(u.queuedHanders_.delete(l),i())}))):this.requestNamedAnimationFrame(l,i),l},u.cancelVideoFrameCallback=function cancelVideoFrameCallback(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},u.setPoster=function setPoster(){},u.playsinline=function playsinline(){},u.setPlaysinline=function setPlaysinline(){},u.overrideNativeAudioTracks=function overrideNativeAudioTracks(){},u.overrideNativeVideoTracks=function overrideNativeVideoTracks(){},u.canPlayType=function canPlayType(){return""},Tech.canPlayType=function canPlayType(){return""},Tech.canPlaySource=function canPlaySource(i,u){return Tech.canPlayType(i.type)},Tech.isTech=function isTech(i){return i.prototype instanceof Tech||i instanceof Tech||i===Tech},Tech.registerTech=function registerTech(i,u){if(Tech.techs_||(Tech.techs_={}),!Tech.isTech(u))throw new Error("Tech "+i+" must be a Tech");if(!Tech.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Tech.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=Ji(i),Tech.techs_[i]=u,Tech.techs_[$i(i)]=u,"Tech"!==i&&Tech.defaultTechOrder_.push(i),u},Tech.getTech=function getTech(i){if(i)return Tech.techs_&&Tech.techs_[i]?Tech.techs_[i]:(i=Ji(i),m()&&m().videojs&&m().videojs[i]?(Qt.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),m().videojs[i]):void 0)},Tech}(rr);Nr.names.forEach((function(i){var u=Nr[i];Br.prototype[u.getterName]=function(){return this[u.privateName]=this[u.privateName]||new u.ListClass,this[u.privateName]}})),Br.prototype.featuresVolumeControl=!0,Br.prototype.featuresMuteControl=!0,Br.prototype.featuresFullscreenResize=!1,Br.prototype.featuresPlaybackRate=!1,Br.prototype.featuresProgressEvents=!1,Br.prototype.featuresSourceset=!1,Br.prototype.featuresTimeupdateEvents=!1,Br.prototype.featuresNativeTextTracks=!1,Br.prototype.featuresVideoFrameCallback=!1,Br.withSourceHandlers=function(i){i.registerSourceHandler=function(u,l){var c=i.sourceHandlers;c||(c=i.sourceHandlers=[]),void 0===l&&(l=c.length),c.splice(l,0,u)},i.canPlayType=function(u){for(var l,c=i.sourceHandlers||[],h=0;h<c.length;h++)if(l=c[h].canPlayType(u))return l;return""},i.selectSourceHandler=function(u,l){for(var c=i.sourceHandlers||[],h=0;h<c.length;h++)if(c[h].canHandleSource(u,l))return c[h];return null},i.canPlaySource=function(u,l){var c=i.selectSourceHandler(u,l);return c?c.canHandleSource(u,l):""};["seekable","seeking","duration"].forEach((function(i){var u=this[i];"function"==typeof u&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):u.apply(this,arguments)})}),i.prototype),i.prototype.setSource=function(u){var l=i.selectSourceHandler(u,this.options_);l||(i.nativeSourceHandler?l=i.nativeSourceHandler:Qt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),l!==i.nativeSourceHandler&&(this.currentSource_=u),this.sourceHandler_=l.handleSource(u,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},rr.registerComponent("Tech",Br),Br.registerTech("Tech",Br),Br.defaultTechOrder_=[];var Fr={},Ur={},jr={};function setSource(i,u,l){i.setTimeout((function(){return setSourceHelper(u,Fr[u.type],l,i)}),1)}function mediate(i,u,l,c){void 0===c&&(c=null);var h="call"+Ji(l),p=i.reduce(middlewareIterator(h),c),m=p===jr,g=m?null:u[l](p);return!function executeRight(i,u,l,c){for(var h=i.length-1;h>=0;h--){var p=i[h];p[u]&&p[u](c,l)}}(i,l,g,m),g}var Hr={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},qr={setCurrentTime:1,setMuted:1,setVolume:1},Wr={play:1,pause:1};function middlewareIterator(i){return function(u,l){return u===jr?jr:l[i]?l[i](u):u}}function setSourceHelper(i,u,l,c,h,p){void 0===i&&(i={}),void 0===u&&(u=[]),void 0===h&&(h=[]),void 0===p&&(p=!1);var m=u[0],g=u.slice(1);if("string"==typeof m)setSourceHelper(i,Fr[m],l,c,h,p);else if(m){var v=function getOrCreateFactory(i,u){var l=Ur[i.id()],c=null;if(null==l)return c=u(i),Ur[i.id()]=[[u,c]],c;for(var h=0;h<l.length;h++){var p=l[h];p[0]===u&&(c=p[1])}return null===c&&(c=u(i),l.push([u,c])),c}(c,m);if(!v.setSource)return h.push(v),setSourceHelper(i,g,l,c,h,p);v.setSource(video_es_assign({},i),(function(u,m){if(u)return setSourceHelper(i,g,l,c,h,p);h.push(v),setSourceHelper(m,i.type===m.type?g:Fr[m.type],l,c,h,p)}))}else g.length?setSourceHelper(i,g,l,c,h,p):p?l(i,h):setSourceHelper(i,Fr["*"],l,c,h,!0)}var Gr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},zr=function getMimetype(i){void 0===i&&(i="");var u=wr(i);return Gr[u.toLowerCase()]||""},Xr=function filterSource(i){if(Array.isArray(i)){var u=[];i.forEach((function(i){i=filterSource(i),Array.isArray(i)?u=u.concat(i):video_es_isObject(i)&&u.push(i)})),i=u}else i="string"==typeof i&&i.trim()?[fixSource({src:i})]:video_es_isObject(i)&&"string"==typeof i.src&&i.src&&i.src.trim()?[fixSource(i)]:[];return i};function fixSource(i){if(!i.type){var u=zr(i.src);u&&(i.type=u)}return i}var Kr=function(i){function MediaLoader(u,l,c){var h,p=mergeOptions$3({createEl:!1},l);if(h=i.call(this,u,p,c)||this,l.playerOptions.sources&&0!==l.playerOptions.sources.length)u.src(l.playerOptions.sources);else for(var m=0,g=l.playerOptions.techOrder;m<g.length;m++){var v=Ji(g[m]),_=Br.getTech(v);if(v||(_=rr.getComponent(v)),_&&_.isSupported()){u.loadTech_(v);break}}return h}return _inheritsLoose(MediaLoader,i),MediaLoader}(rr);rr.registerComponent("MediaLoader",Kr);var Qr=function(i){function ClickableComponent(u,l){var c;return(c=i.call(this,u,l)||this).options_.controlText&&c.controlText(c.options_.controlText),c.handleMouseOver_=function(i){return c.handleMouseOver(i)},c.handleMouseOut_=function(i){return c.handleMouseOut(i)},c.handleClick_=function(i){return c.handleClick(i)},c.handleKeyDown_=function(i){return c.handleKeyDown(i)},c.emitTapEvents(),c.enable(),c}_inheritsLoose(ClickableComponent,i);var u=ClickableComponent.prototype;return u.createEl=function createEl$1(i,u,l){void 0===i&&(i="div"),void 0===u&&(u={}),void 0===l&&(l={}),u=video_es_assign({className:this.buildCSSClass(),tabIndex:0},u),"button"===i&&Qt.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),l=video_es_assign({role:"button"},l),this.tabIndex_=u.tabIndex;var c=createEl(i,u,l);return c.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(c),c},u.dispose=function dispose(){this.controlTextEl_=null,i.prototype.dispose.call(this)},u.createControlTextEl=function createControlTextEl(i){return this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},u.controlText=function controlText(i,u){if(void 0===u&&(u=this.el()),void 0===i)return this.controlText_||"Need Text";var l=this.localize(i);this.controlText_=i,textContent(this.controlTextEl_,l),this.nonIconControl||this.player_.options_.noUITitleAttributes||u.setAttribute("title",l)},u.buildCSSClass=function buildCSSClass(){return"vjs-control vjs-button "+i.prototype.buildCSSClass.call(this)},u.enable=function enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},u.disable=function disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},u.handleLanguagechange=function handleLanguagechange(){this.controlText(this.controlText_)},u.handleClick=function handleClick(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},u.handleKeyDown=function handleKeyDown(u){y().isEventKey(u,"Space")||y().isEventKey(u,"Enter")?(u.preventDefault(),u.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,u)},ClickableComponent}(rr);rr.registerComponent("ClickableComponent",Qr);var Yr=function(i){function PosterImage(u,l){var c;return(c=i.call(this,u,l)||this).update(),c.update_=function(i){return c.update(i)},u.on("posterchange",c.update_),c}_inheritsLoose(PosterImage,i);var u=PosterImage.prototype;return u.dispose=function dispose(){this.player().off("posterchange",this.update_),i.prototype.dispose.call(this)},u.createEl=function createEl$1(){return createEl("div",{className:"vjs-poster",tabIndex:-1})},u.update=function update(i){var u=this.player().poster();this.setSrc(u),u?this.show():this.hide()},u.setSrc=function setSrc(i){var u="";i&&(u='url("'+i+'")'),this.el_.style.backgroundImage=u},u.handleClick=function handleClick(i){if(this.player_.controls()){var u=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(hi||li)&&u||this.player_.tech(!0).focus(),this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()}},PosterImage}(Qr);rr.registerComponent("PosterImage",Yr);var $r="#222",Jr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(i,u){var l;if(4===i.length)l=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else{if(7!==i.length)throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");l=i.slice(1)}return"rgba("+parseInt(l.slice(0,2),16)+","+parseInt(l.slice(2,4),16)+","+parseInt(l.slice(4,6),16)+","+u+")"}function tryUpdateStyle(i,u,l){try{i.style[u]=l}catch(i){return}}var Zr=function(i){function TextTrackDisplay(u,l,c){var h;h=i.call(this,u,l,c)||this;var p=function updateDisplayHandler(i){return h.updateDisplay(i)};return u.on("loadstart",(function(i){return h.toggleDisplay(i)})),u.on("texttrackchange",p),u.on("loadedmetadata",(function(i){return h.preselectTrack(i)})),u.ready(Bi(_assertThisInitialized(h),(function(){if(u.tech_&&u.tech_.featuresNativeTextTracks)return this.hide(),void 0;u.on("fullscreenchange",p),u.on("playerresize",p),m().addEventListener("orientationchange",p),u.on("dispose",(function(){return m().removeEventListener("orientationchange",p)}));for(var i=this.options_.playerOptions.tracks||[],l=0;l<i.length;l++)this.player_.addRemoteTextTrack(i[l],!0);this.preselectTrack()}))),h}_inheritsLoose(TextTrackDisplay,i);var u=TextTrackDisplay.prototype;return u.preselectTrack=function preselectTrack(){for(var i,u,l,c={captions:1,subtitles:1},h=this.player_.textTracks(),p=this.player_.cache_.selectedLanguage,m=0;m<h.length;m++){var g=h[m];p&&p.enabled&&p.language&&p.language===g.language&&g.kind in c?g.kind===p.kind?l=g:l||(l=g):p&&!p.enabled?(l=null,i=null,u=null):g.default&&("descriptions"!==g.kind||i?g.kind in c&&!u&&(u=g):i=g)}l?l.mode="showing":u?u.mode="showing":i&&(i.mode="showing")},u.toggleDisplay=function toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},u.clearDisplay=function clearDisplay(){"function"==typeof m().WebVTT&&m().WebVTT.processCues(m(),[],this.el_)},u.updateDisplay=function updateDisplay(){var i=this.player_.textTracks(),u=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),u){for(var l=[],c=0;c<i.length;++c){var h=i[c];"showing"===h.mode&&l.push(h)}return this.updateForTrack(l),void 0}for(var p=null,m=null,g=i.length;g--;){var v=i[g];"showing"===v.mode&&("descriptions"===v.kind?p=v:m=v)}m?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(m)):p&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(p))},u.updateDisplayState=function updateDisplayState(i){for(var u=this.player_.textTrackSettings.getValues(),l=i.activeCues,c=l.length;c--;){var h=l[c];if(h){var p=h.displayState;if(u.color&&(p.firstChild.style.color=u.color),u.textOpacity&&tryUpdateStyle(p.firstChild,"color",constructColor(u.color||"#fff",u.textOpacity)),u.backgroundColor&&(p.firstChild.style.backgroundColor=u.backgroundColor),u.backgroundOpacity&&tryUpdateStyle(p.firstChild,"backgroundColor",constructColor(u.backgroundColor||"#000",u.backgroundOpacity)),u.windowColor&&(u.windowOpacity?tryUpdateStyle(p,"backgroundColor",constructColor(u.windowColor,u.windowOpacity)):p.style.backgroundColor=u.windowColor),u.edgeStyle&&("dropshadow"===u.edgeStyle?p.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+$r:"raised"===u.edgeStyle?p.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+$r:"depressed"===u.edgeStyle?p.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+$r:"uniform"===u.edgeStyle&&(p.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+$r)),u.fontPercent&&1!==u.fontPercent){var g=m().parseFloat(p.style.fontSize);p.style.fontSize=g*u.fontPercent+"px",p.style.height="auto",p.style.top="auto"}u.fontFamily&&"default"!==u.fontFamily&&("small-caps"===u.fontFamily?p.firstChild.style.fontVariant="small-caps":p.firstChild.style.fontFamily=Jr[u.fontFamily])}}},u.updateForTrack=function updateForTrack(i){if(Array.isArray(i)||(i=[i]),"function"==typeof m().WebVTT&&!i.every((function(i){return!i.activeCues}))){for(var u=[],l=0;l<i.length;++l)for(var c=i[l],h=0;h<c.activeCues.length;++h)u.push(c.activeCues[h]);m().WebVTT.processCues(m(),u,this.el_);for(var p=0;p<i.length;++p){for(var g=i[p],v=0;v<g.activeCues.length;++v){var _=g.activeCues[v].displayState;addClass(_,"vjs-text-track-cue"),addClass(_,"vjs-text-track-cue-"+(g.language?g.language:p)),g.language&&setAttribute(_,"lang",g.language)}this.player_.textTrackSettings&&this.updateDisplayState(g)}}},TextTrackDisplay}(rr);rr.registerComponent("TextTrackDisplay",Zr);var en=function(i){function LoadingSpinner(){return i.apply(this,arguments)||this}return _inheritsLoose(LoadingSpinner,i),LoadingSpinner.prototype.createEl=function createEl$1(){var u=this.player_.isAudio(),l=this.localize(u?"Audio Player":"Video Player"),c=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[l])}),h=i.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return h.appendChild(c),h},LoadingSpinner}(rr);rr.registerComponent("LoadingSpinner",en);var tn=function(i){function Button(){return i.apply(this,arguments)||this}_inheritsLoose(Button,i);var u=Button.prototype;return u.createEl=function createEl$1(i,u,l){void 0===u&&(u={}),void 0===l&&(l={}),"button";var c=createEl("button",u=video_es_assign({className:this.buildCSSClass()},u),l=video_es_assign({type:"button"},l));return c.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(c),c},u.addChild=function addChild(i,u){return void 0===u&&(u={}),Qt.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),rr.prototype.addChild.call(this,i,u)},u.enable=function enable(){i.prototype.enable.call(this),this.el_.removeAttribute("disabled")},u.disable=function disable(){i.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},u.handleKeyDown=function handleKeyDown(u){if(y().isEventKey(u,"Space")||y().isEventKey(u,"Enter"))return u.stopPropagation(),void 0;i.prototype.handleKeyDown.call(this,u)},Button}(Qr);rr.registerComponent("Button",tn);var rn=function(i){function BigPlayButton(u,l){var c;return(c=i.call(this,u,l)||this).mouseused_=!1,c.on("mousedown",(function(i){return c.handleMouseDown(i)})),c}_inheritsLoose(BigPlayButton,i);var u=BigPlayButton.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-big-play-button"},u.handleClick=function handleClick(i){var u=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var l=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return silencePromise(u),!this.player_.tech(!0)||(hi||li)&&l||this.player_.tech(!0).focus(),void 0}var c=this.player_.getChild("controlBar"),h=c&&c.getChild("playToggle");if(!h)return this.player_.tech(!0).focus(),void 0;var p=function playFocus(){return h.focus()};isPromise(u)?u.then(p,(function(){})):this.setTimeout(p,1)},u.handleKeyDown=function handleKeyDown(u){this.mouseused_=!1,i.prototype.handleKeyDown.call(this,u)},u.handleMouseDown=function handleMouseDown(i){this.mouseused_=!0},BigPlayButton}(tn);rn.prototype.controlText_="Play Video",rr.registerComponent("BigPlayButton",rn);var nn=function(i){function CloseButton(u,l){var c;return(c=i.call(this,u,l)||this).controlText(l&&l.controlText||c.localize("Close")),c}_inheritsLoose(CloseButton,i);var u=CloseButton.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},u.handleClick=function handleClick(i){this.trigger({type:"close",bubbles:!1})},u.handleKeyDown=function handleKeyDown(u){y().isEventKey(u,"Esc")?(u.preventDefault(),u.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,u)},CloseButton}(tn);rr.registerComponent("CloseButton",nn);var an=function(i){function PlayToggle(u,l){var c;return void 0===l&&(l={}),c=i.call(this,u,l)||this,l.replay=void 0===l.replay||l.replay,c.on(u,"play",(function(i){return c.handlePlay(i)})),c.on(u,"pause",(function(i){return c.handlePause(i)})),l.replay&&c.on(u,"ended",(function(i){return c.handleEnded(i)})),c}_inheritsLoose(PlayToggle,i);var u=PlayToggle.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},u.handleClick=function handleClick(i){this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()},u.handleSeeked=function handleSeeked(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},u.handlePlay=function handlePlay(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},u.handlePause=function handlePause(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},u.handleEnded=function handleEnded(i){var u=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(i){return u.handleSeeked(i)}))},PlayToggle}(tn);an.prototype.controlText_="Play",rr.registerComponent("PlayToggle",an);var sn=function defaultImplementation(i,u){i=i<0?0:i;var l=Math.floor(i%60),c=Math.floor(i/60%60),h=Math.floor(i/3600),p=Math.floor(u/60%60),m=Math.floor(u/3600);return(isNaN(i)||i===1/0)&&(h=c=l="-"),(h=h>0||m>0?h+":":"")+(c=((h||p>=10)&&c<10?"0"+c:c)+":")+(l=l<10?"0"+l:l)},un=sn;function formatTime(i,u){return void 0===u&&(u=i),un(i,u)}var ln=function(i){function TimeDisplay(u,l){var c;return(c=i.call(this,u,l)||this).on(u,["timeupdate","ended"],(function(i){return c.updateContent(i)})),c.updateTextNode_(),c}_inheritsLoose(TimeDisplay,i);var u=TimeDisplay.prototype;return u.createEl=function createEl$1(){var u=this.buildCSSClass(),l=i.prototype.createEl.call(this,"div",{className:u+" vjs-time-control vjs-control"}),c=createEl("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return l.appendChild(c),this.contentEl_=createEl("span",{className:u+"-display"},{"aria-live":"off",role:"presentation"}),l.appendChild(this.contentEl_),l},u.dispose=function dispose(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},u.updateTextNode_=function updateTextNode_(i){var u=this;void 0===i&&(i=0),i=formatTime(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(u.contentEl_){var i=u.textNode_;i&&u.contentEl_.firstChild!==i&&(i=null,Qt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),u.textNode_=v().createTextNode(u.formattedTime_),u.textNode_&&(i?u.contentEl_.replaceChild(u.textNode_,i):u.contentEl_.appendChild(u.textNode_))}})))},u.updateContent=function updateContent(i){},TimeDisplay}(rr);ln.prototype.labelText_="Time",ln.prototype.controlText_="Time",rr.registerComponent("TimeDisplay",ln);var dn=function(i){function CurrentTimeDisplay(){return i.apply(this,arguments)||this}_inheritsLoose(CurrentTimeDisplay,i);var u=CurrentTimeDisplay.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-current-time"},u.updateContent=function updateContent(i){var u;u=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(u)},CurrentTimeDisplay}(ln);dn.prototype.labelText_="Current Time",dn.prototype.controlText_="Current Time",rr.registerComponent("CurrentTimeDisplay",dn);var cn=function(i){function DurationDisplay(u,l){var c,h=function updateContent(i){return c.updateContent(i)};return(c=i.call(this,u,l)||this).on(u,"durationchange",h),c.on(u,"loadstart",h),c.on(u,"loadedmetadata",h),c}_inheritsLoose(DurationDisplay,i);var u=DurationDisplay.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-duration"},u.updateContent=function updateContent(i){var u=this.player_.duration();this.updateTextNode_(u)},DurationDisplay}(ln);cn.prototype.labelText_="Duration",cn.prototype.controlText_="Duration",rr.registerComponent("DurationDisplay",cn);var hn=function(i){function TimeDivider(){return i.apply(this,arguments)||this}return _inheritsLoose(TimeDivider,i),TimeDivider.prototype.createEl=function createEl(){var u=i.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),l=i.prototype.createEl.call(this,"div"),c=i.prototype.createEl.call(this,"span",{textContent:"/"});return l.appendChild(c),u.appendChild(l),u},TimeDivider}(rr);rr.registerComponent("TimeDivider",hn);var pn=function(i){function RemainingTimeDisplay(u,l){var c;return(c=i.call(this,u,l)||this).on(u,"durationchange",(function(i){return c.updateContent(i)})),c}_inheritsLoose(RemainingTimeDisplay,i);var u=RemainingTimeDisplay.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-remaining-time"},u.createEl=function createEl$1(){var u=i.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&u.insertBefore(createEl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),u},u.updateContent=function updateContent(i){var u;"number"==typeof this.player_.duration()&&(u=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(u))},RemainingTimeDisplay}(ln);pn.prototype.labelText_="Remaining Time",pn.prototype.controlText_="Remaining Time",rr.registerComponent("RemainingTimeDisplay",pn);var fn=function(i){function LiveDisplay(u,l){var c;return(c=i.call(this,u,l)||this).updateShowing(),c.on(c.player(),"durationchange",(function(i){return c.updateShowing(i)})),c}_inheritsLoose(LiveDisplay,i);var u=LiveDisplay.prototype;return u.createEl=function createEl$1(){var u=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(v().createTextNode(this.localize("LIVE"))),u.appendChild(this.contentEl_),u},u.dispose=function dispose(){this.contentEl_=null,i.prototype.dispose.call(this)},u.updateShowing=function updateShowing(i){this.player().duration()===1/0?this.show():this.hide()},LiveDisplay}(rr);rr.registerComponent("LiveDisplay",fn);var mn=function(i){function SeekToLive(u,l){var c;return(c=i.call(this,u,l)||this).updateLiveEdgeStatus(),c.player_.liveTracker&&(c.updateLiveEdgeStatusHandler_=function(i){return c.updateLiveEdgeStatus(i)},c.on(c.player_.liveTracker,"liveedgechange",c.updateLiveEdgeStatusHandler_)),c}_inheritsLoose(SeekToLive,i);var u=SeekToLive.prototype;return u.createEl=function createEl$1(){var u=i.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),u.appendChild(this.textEl_),u},u.updateLiveEdgeStatus=function updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},u.handleClick=function handleClick(){this.player_.liveTracker.seekToLiveEdge()},u.dispose=function dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,i.prototype.dispose.call(this)},SeekToLive}(tn);mn.prototype.controlText_="Seek to live, currently playing live",rr.registerComponent("SeekToLive",mn);var gn=function clamp(i,u,l){return i=Number(i),Math.min(l,Math.max(u,isNaN(i)?u:i))},vn=function(i){function Slider(u,l){var c;return(c=i.call(this,u,l)||this).handleMouseDown_=function(i){return c.handleMouseDown(i)},c.handleMouseUp_=function(i){return c.handleMouseUp(i)},c.handleKeyDown_=function(i){return c.handleKeyDown(i)},c.handleClick_=function(i){return c.handleClick(i)},c.handleMouseMove_=function(i){return c.handleMouseMove(i)},c.update_=function(i){return c.update(i)},c.bar=c.getChild(c.options_.barName),c.vertical(!!c.options_.vertical),c.enable(),c}_inheritsLoose(Slider,i);var u=Slider.prototype;return u.enabled=function enabled(){return this.enabled_},u.enable=function enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},u.disable=function disable(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},u.createEl=function createEl(u,l,c){return void 0===l&&(l={}),void 0===c&&(c={}),l.className=l.className+" vjs-slider",l=video_es_assign({tabIndex:0},l),c=video_es_assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},c),i.prototype.createEl.call(this,u,l,c)},u.handleMouseDown=function handleMouseDown(i){var u=this.bar.el_.ownerDocument;"mousedown"===i.type&&i.preventDefault(),"touchstart"!==i.type||di||i.preventDefault(),blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(u,"mousemove",this.handleMouseMove_),this.on(u,"mouseup",this.handleMouseUp_),this.on(u,"touchmove",this.handleMouseMove_),this.on(u,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},u.handleMouseMove=function handleMouseMove(i){},u.handleMouseUp=function handleMouseUp(){var i=this.bar.el_.ownerDocument;unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},u.update=function update(){var i=this;if(this.el_&&this.bar){var u=this.getProgress();return u===this.progress_||(this.progress_=u,this.requestNamedAnimationFrame("Slider#update",(function(){var l=i.vertical()?"height":"width";i.bar.el().style[l]=(100*u).toFixed(2)+"%"}))),u}},u.getProgress=function getProgress(){return Number(gn(this.getPercent(),0,1).toFixed(4))},u.calculateDistance=function calculateDistance(i){var u=getPointerPosition(this.el_,i);return this.vertical()?u.y:u.x},u.handleKeyDown=function handleKeyDown(u){y().isEventKey(u,"Left")||y().isEventKey(u,"Down")?(u.preventDefault(),u.stopPropagation(),this.stepBack()):y().isEventKey(u,"Right")||y().isEventKey(u,"Up")?(u.preventDefault(),u.stopPropagation(),this.stepForward()):i.prototype.handleKeyDown.call(this,u)},u.handleClick=function handleClick(i){i.stopPropagation(),i.preventDefault()},u.vertical=function vertical(i){if(void 0===i)return this.vertical_||!1;this.vertical_=!!i,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},Slider}(rr);rr.registerComponent("Slider",vn);var _n=function percentify(i,u){return gn(i/u*100,0,100).toFixed(2)+"%"},yn=function(i){function LoadProgressBar(u,l){var c;return(c=i.call(this,u,l)||this).partEls_=[],c.on(u,"progress",(function(i){return c.update(i)})),c}_inheritsLoose(LoadProgressBar,i);var u=LoadProgressBar.prototype;return u.createEl=function createEl$1(){var u=i.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),l=createEl("span",{className:"vjs-control-text"}),c=createEl("span",{textContent:this.localize("Loaded")}),h=v().createTextNode(": ");return this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),u.appendChild(l),l.appendChild(c),l.appendChild(h),l.appendChild(this.percentageEl_),u},u.dispose=function dispose(){this.partEls_=null,this.percentageEl_=null,i.prototype.dispose.call(this)},u.update=function update(i){var u=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var i=u.player_.liveTracker,l=u.player_.buffered(),c=i&&i.isLive()?i.seekableEnd():u.player_.duration(),h=u.player_.bufferedEnd(),p=u.partEls_,m=_n(h,c);u.percent_!==m&&(u.el_.style.width=m,textContent(u.percentageEl_,m),u.percent_=m);for(var g=0;g<l.length;g++){var v=l.start(g),_=l.end(g),y=p[g];y||(y=u.el_.appendChild(createEl()),p[g]=y),y.dataset.start===v&&y.dataset.end===_||(y.dataset.start=v,y.dataset.end=_,y.style.left=_n(v,h),y.style.width=_n(_-v,h))}for(var b=p.length;b>l.length;b--)u.el_.removeChild(p[b-1]);p.length=l.length}))},LoadProgressBar}(rr);rr.registerComponent("LoadProgressBar",yn);var bn=function(i){function TimeTooltip(u,l){var c;return(c=i.call(this,u,l)||this).update=Fi(Bi(_assertThisInitialized(c),c.update),Ni),c}_inheritsLoose(TimeTooltip,i);var u=TimeTooltip.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},u.update=function update(i,u,l){var c=findPosition(this.el_),h=getBoundingClientRect(this.player_.el()),p=i.width*u;if(h&&c){var m=i.left-h.left+p,g=i.width-p+(h.right-i.right),v=c.width/2;m<v?v+=v-m:g<v&&(v=g),v<0?v=0:v>c.width&&(v=c.width),v=Math.round(v),this.el_.style.right="-"+v+"px",this.write(l)}},u.write=function write(i){textContent(this.el_,i)},u.updateTime=function updateTime(i,u,l,c){var h=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var p,m=h.player_.duration();if(h.player_.liveTracker&&h.player_.liveTracker.isLive()){var g=h.player_.liveTracker.liveWindow(),v=g-u*g;p=(v<1?"":"-")+formatTime(v,g)}else p=formatTime(l,m);h.update(i,u,p),c&&c()}))},TimeTooltip}(rr);rr.registerComponent("TimeTooltip",bn);var Tn=function(i){function PlayProgressBar(u,l){var c;return(c=i.call(this,u,l)||this).update=Fi(Bi(_assertThisInitialized(c),c.update),Ni),c}_inheritsLoose(PlayProgressBar,i);var u=PlayProgressBar.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},u.update=function update(i,u){var l=this.getChild("timeTooltip");if(l){var c=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();l.updateTime(i,u,c)}},PlayProgressBar}(rr);Tn.prototype.options_={children:[]},_i||ai||Tn.prototype.options_.children.push("timeTooltip"),rr.registerComponent("PlayProgressBar",Tn);var Sn=function(i){function MouseTimeDisplay(u,l){var c;return(c=i.call(this,u,l)||this).update=Fi(Bi(_assertThisInitialized(c),c.update),Ni),c}_inheritsLoose(MouseTimeDisplay,i);var u=MouseTimeDisplay.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},u.update=function update(i,u){var l=this,c=u*this.player_.duration();this.getChild("timeTooltip").updateTime(i,u,c,(function(){l.el_.style.left=i.width*u+"px"}))},MouseTimeDisplay}(rr);Sn.prototype.options_={children:["timeTooltip"]},rr.registerComponent("MouseTimeDisplay",Sn);var kn=function(i){function SeekBar(u,l){var c;return(c=i.call(this,u,l)||this).setEventHandlers_(),c}_inheritsLoose(SeekBar,i);var u=SeekBar.prototype;return u.setEventHandlers_=function setEventHandlers_(){var i=this;this.update_=Bi(this,this.update),this.update=Fi(this.update_,Ni),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(u){return i.enableInterval_(u)},this.disableIntervalHandler_=function(u){return i.disableInterval_(u)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in v()&&"visibilityState"in v()&&this.on(v(),"visibilitychange",this.toggleVisibility_)},u.toggleVisibility_=function toggleVisibility_(i){"hidden"===v().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},u.enableInterval_=function enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Ni))},u.disableInterval_=function disableInterval_(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&"ended"!==i.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},u.update=function update(u){var l=this;if("hidden"!==v().visibilityState){var c=i.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var i=l.player_.ended()?l.player_.duration():l.getCurrentTime_(),u=l.player_.liveTracker,h=l.player_.duration();u&&u.isLive()&&(h=l.player_.liveTracker.liveCurrentTime()),l.percent_!==c&&(l.el_.setAttribute("aria-valuenow",(100*c).toFixed(2)),l.percent_=c),l.currentTime_===i&&l.duration_===h||(l.el_.setAttribute("aria-valuetext",l.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(i,h),formatTime(h,h)],"{1} of {2}")),l.currentTime_=i,l.duration_=h),l.bar&&l.bar.update(getBoundingClientRect(l.el()),l.getProgress())})),c}},u.userSeek_=function userSeek_(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},u.getCurrentTime_=function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},u.getPercent=function getPercent(){var i,u=this.getCurrentTime_(),l=this.player_.liveTracker;return l&&l.isLive()?(i=(u-l.seekableStart())/l.liveWindow(),l.atLiveEdge()&&(i=1)):i=u/this.player_.duration(),i},u.handleMouseDown=function handleMouseDown(u){isSingleLeftClick(u)&&(u.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,u))},u.handleMouseMove=function handleMouseMove(i,u){if(void 0===u&&(u=!1),isSingleLeftClick(i)){var l;u||this.player_.scrubbing()||this.player_.scrubbing(!0);var c=this.calculateDistance(i),h=this.player_.liveTracker;if(h&&h.isLive()){if(c>=.99)return h.seekToLiveEdge(),void 0;var p=h.seekableStart(),m=h.liveCurrentTime();if((l=p+c*h.liveWindow())>=m&&(l=m),l<=p&&(l=p+.1),l===1/0)return}else(l=c*this.player_.duration())===this.player_.duration()&&(l-=.1);this.userSeek_(l)}},u.enable=function enable(){i.prototype.enable.call(this);var u=this.getChild("mouseTimeDisplay");u&&u.show()},u.disable=function disable(){i.prototype.disable.call(this);var u=this.getChild("mouseTimeDisplay");u&&u.hide()},u.handleMouseUp=function handleMouseUp(u){i.prototype.handleMouseUp.call(this,u),u&&u.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise(this.player_.play()):this.update_()},u.stepForward=function stepForward(){this.userSeek_(this.player_.currentTime()+5)},u.stepBack=function stepBack(){this.userSeek_(this.player_.currentTime()-5)},u.handleAction=function handleAction(i){this.player_.paused()?this.player_.play():this.player_.pause()},u.handleKeyDown=function handleKeyDown(u){var l=this.player_.liveTracker;if(y().isEventKey(u,"Space")||y().isEventKey(u,"Enter"))u.preventDefault(),u.stopPropagation(),this.handleAction(u);else if(y().isEventKey(u,"Home"))u.preventDefault(),u.stopPropagation(),this.userSeek_(0);else if(y().isEventKey(u,"End"))u.preventDefault(),u.stopPropagation(),l&&l.isLive()?this.userSeek_(l.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(y()(u))){u.preventDefault(),u.stopPropagation();var c=10*(y().codes[y()(u)]-y().codes[0])/100;l&&l.isLive()?this.userSeek_(l.seekableStart()+l.liveWindow()*c):this.userSeek_(this.player_.duration()*c)}else y().isEventKey(u,"PgDn")?(u.preventDefault(),u.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):y().isEventKey(u,"PgUp")?(u.preventDefault(),u.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):i.prototype.handleKeyDown.call(this,u)},u.dispose=function dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in v()&&"visibilityState"in v()&&this.off(v(),"visibilitychange",this.toggleVisibility_),i.prototype.dispose.call(this)},SeekBar}(vn);kn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},_i||ai||kn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),rr.registerComponent("SeekBar",kn);var En=function(i){function ProgressControl(u,l){var c;return(c=i.call(this,u,l)||this).handleMouseMove=Fi(Bi(_assertThisInitialized(c),c.handleMouseMove),Ni),c.throttledHandleMouseSeek=Fi(Bi(_assertThisInitialized(c),c.handleMouseSeek),Ni),c.handleMouseUpHandler_=function(i){return c.handleMouseUp(i)},c.handleMouseDownHandler_=function(i){return c.handleMouseDown(i)},c.enable(),c}_inheritsLoose(ProgressControl,i);var u=ProgressControl.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},u.handleMouseMove=function handleMouseMove(i){var u=this.getChild("seekBar");if(u){var l=u.getChild("playProgressBar"),c=u.getChild("mouseTimeDisplay");if(l||c){var h=u.el(),p=findPosition(h),m=getPointerPosition(h,i).x;m=gn(m,0,1),c&&c.update(p,m),l&&l.update(p,u.getProgress())}}},u.handleMouseSeek=function handleMouseSeek(i){var u=this.getChild("seekBar");u&&u.handleMouseMove(i)},u.enabled=function enabled(){return this.enabled_},u.disable=function disable(){if(this.children().forEach((function(i){return i.disable&&i.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&silencePromise(this.player_.play())}},u.enable=function enable(){this.children().forEach((function(i){return i.enable&&i.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},u.removeListenersAddedOnMousedownAndTouchstart=function removeListenersAddedOnMousedownAndTouchstart(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},u.handleMouseDown=function handleMouseDown(i){var u=this.el_.ownerDocument,l=this.getChild("seekBar");l&&l.handleMouseDown(i),this.on(u,"mousemove",this.throttledHandleMouseSeek),this.on(u,"touchmove",this.throttledHandleMouseSeek),this.on(u,"mouseup",this.handleMouseUpHandler_),this.on(u,"touchend",this.handleMouseUpHandler_)},u.handleMouseUp=function handleMouseUp(i){var u=this.getChild("seekBar");u&&u.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},ProgressControl}(rr);En.prototype.options_={children:["seekBar"]},rr.registerComponent("ProgressControl",En);var Cn=function(i){function PictureInPictureToggle(u,l){var c;return(c=i.call(this,u,l)||this).on(u,["enterpictureinpicture","leavepictureinpicture"],(function(i){return c.handlePictureInPictureChange(i)})),c.on(u,["disablepictureinpicturechanged","loadedmetadata"],(function(i){return c.handlePictureInPictureEnabledChange(i)})),c.on(u,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===u.currentType().substring(0,5)||u.audioPosterMode()||u.audioOnlyMode()?(u.isInPictureInPicture()&&u.exitPictureInPicture(),c.hide()):c.show()})),c.disable(),c}_inheritsLoose(PictureInPictureToggle,i);var u=PictureInPictureToggle.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-picture-in-picture-control "+i.prototype.buildCSSClass.call(this)},u.handlePictureInPictureEnabledChange=function handlePictureInPictureEnabledChange(){v().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},u.handlePictureInPictureChange=function handlePictureInPictureChange(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},u.handleClick=function handleClick(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},PictureInPictureToggle}(tn);Cn.prototype.controlText_="Picture-in-Picture",rr.registerComponent("PictureInPictureToggle",Cn);var wn=function(i){function FullscreenToggle(u,l){var c;return(c=i.call(this,u,l)||this).on(u,"fullscreenchange",(function(i){return c.handleFullscreenChange(i)})),!1===v()[u.fsApi_.fullscreenEnabled]&&c.disable(),c}_inheritsLoose(FullscreenToggle,i);var u=FullscreenToggle.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},u.handleFullscreenChange=function handleFullscreenChange(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},u.handleClick=function handleClick(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},FullscreenToggle}(tn);wn.prototype.controlText_="Fullscreen",rr.registerComponent("FullscreenToggle",wn);var Pn=function(i){function VolumeLevel(){return i.apply(this,arguments)||this}return _inheritsLoose(VolumeLevel,i),VolumeLevel.prototype.createEl=function createEl(){var u=i.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return u.appendChild(i.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),u},VolumeLevel}(rr);rr.registerComponent("VolumeLevel",Pn);var An=function(i){function VolumeLevelTooltip(u,l){var c;return(c=i.call(this,u,l)||this).update=Fi(Bi(_assertThisInitialized(c),c.update),Ni),c}_inheritsLoose(VolumeLevelTooltip,i);var u=VolumeLevelTooltip.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},u.update=function update(i,u,l,c){if(!l){var h=getBoundingClientRect(this.el_),p=getBoundingClientRect(this.player_.el()),m=i.width*u;if(!p||!h)return;var g=i.left-p.left+m,v=i.width-m+(p.right-i.right),_=h.width/2;g<_?_+=_-g:v<_&&(_=v),_<0?_=0:_>h.width&&(_=h.width),this.el_.style.right="-"+_+"px"}this.write(c+"%")},u.write=function write(i){textContent(this.el_,i)},u.updateVolume=function updateVolume(i,u,l,c,h){var p=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){p.update(i,u,l,c.toFixed(0)),h&&h()}))},VolumeLevelTooltip}(rr);rr.registerComponent("VolumeLevelTooltip",An);var xn=function(i){function MouseVolumeLevelDisplay(u,l){var c;return(c=i.call(this,u,l)||this).update=Fi(Bi(_assertThisInitialized(c),c.update),Ni),c}_inheritsLoose(MouseVolumeLevelDisplay,i);var u=MouseVolumeLevelDisplay.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},u.update=function update(i,u,l){var c=this,h=100*u;this.getChild("volumeLevelTooltip").updateVolume(i,u,l,h,(function(){l?c.el_.style.bottom=i.height*u+"px":c.el_.style.left=i.width*u+"px"}))},MouseVolumeLevelDisplay}(rr);xn.prototype.options_={children:["volumeLevelTooltip"]},rr.registerComponent("MouseVolumeLevelDisplay",xn);var In=function(i){function VolumeBar(u,l){var c;return(c=i.call(this,u,l)||this).on("slideractive",(function(i){return c.updateLastVolume_(i)})),c.on(u,"volumechange",(function(i){return c.updateARIAAttributes(i)})),u.ready((function(){return c.updateARIAAttributes()})),c}_inheritsLoose(VolumeBar,i);var u=VolumeBar.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},u.handleMouseDown=function handleMouseDown(u){isSingleLeftClick(u)&&i.prototype.handleMouseDown.call(this,u)},u.handleMouseMove=function handleMouseMove(i){var u=this.getChild("mouseVolumeLevelDisplay");if(u){var l=this.el(),c=getBoundingClientRect(l),h=this.vertical(),p=getPointerPosition(l,i);p=gn(p=h?p.y:p.x,0,1),u.update(c,p,h)}isSingleLeftClick(i)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},u.checkMuted=function checkMuted(){this.player_.muted()&&this.player_.muted(!1)},u.getPercent=function getPercent(){return this.player_.muted()?0:this.player_.volume()},u.stepForward=function stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},u.stepBack=function stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},u.updateARIAAttributes=function updateARIAAttributes(i){var u=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",u),this.el_.setAttribute("aria-valuetext",u+"%")},u.volumeAsPercentage_=function volumeAsPercentage_(){return Math.round(100*this.player_.volume())},u.updateLastVolume_=function updateLastVolume_(){var i=this,u=this.player_.volume();this.one("sliderinactive",(function(){0===i.player_.volume()&&i.player_.lastVolume_(u)}))},VolumeBar}(vn);In.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},_i||ai||In.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),In.prototype.playerEvent="volumechange",rr.registerComponent("VolumeBar",In);var On=function(i){function VolumeControl(u,l){var c;return void 0===l&&(l={}),l.vertical=l.vertical||!1,(void 0===l.volumeBar||isPlain(l.volumeBar))&&(l.volumeBar=l.volumeBar||{},l.volumeBar.vertical=l.vertical),function checkVolumeSupport(i,u){u.tech_&&!u.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(u,"loadstart",(function(){u.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}))}(_assertThisInitialized(c=i.call(this,u,l)||this),u),c.throttledHandleMouseMove=Fi(Bi(_assertThisInitialized(c),c.handleMouseMove),Ni),c.handleMouseUpHandler_=function(i){return c.handleMouseUp(i)},c.on("mousedown",(function(i){return c.handleMouseDown(i)})),c.on("touchstart",(function(i){return c.handleMouseDown(i)})),c.on("mousemove",(function(i){return c.handleMouseMove(i)})),c.on(c.volumeBar,["focus","slideractive"],(function(){c.volumeBar.addClass("vjs-slider-active"),c.addClass("vjs-slider-active"),c.trigger("slideractive")})),c.on(c.volumeBar,["blur","sliderinactive"],(function(){c.volumeBar.removeClass("vjs-slider-active"),c.removeClass("vjs-slider-active"),c.trigger("sliderinactive")})),c}_inheritsLoose(VolumeControl,i);var u=VolumeControl.prototype;return u.createEl=function createEl(){var u="vjs-volume-horizontal";return this.options_.vertical&&(u="vjs-volume-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+u})},u.handleMouseDown=function handleMouseDown(i){var u=this.el_.ownerDocument;this.on(u,"mousemove",this.throttledHandleMouseMove),this.on(u,"touchmove",this.throttledHandleMouseMove),this.on(u,"mouseup",this.handleMouseUpHandler_),this.on(u,"touchend",this.handleMouseUpHandler_)},u.handleMouseUp=function handleMouseUp(i){var u=this.el_.ownerDocument;this.off(u,"mousemove",this.throttledHandleMouseMove),this.off(u,"touchmove",this.throttledHandleMouseMove),this.off(u,"mouseup",this.handleMouseUpHandler_),this.off(u,"touchend",this.handleMouseUpHandler_)},u.handleMouseMove=function handleMouseMove(i){this.volumeBar.handleMouseMove(i)},VolumeControl}(rr);On.prototype.options_={children:["volumeBar"]},rr.registerComponent("VolumeControl",On);var Ln=function(i){function MuteToggle(u,l){var c;return function checkMuteSupport(i,u){u.tech_&&!u.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(u,"loadstart",(function(){u.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}))}(_assertThisInitialized(c=i.call(this,u,l)||this),u),c.on(u,["loadstart","volumechange"],(function(i){return c.update(i)})),c}_inheritsLoose(MuteToggle,i);var u=MuteToggle.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-mute-control "+i.prototype.buildCSSClass.call(this)},u.handleClick=function handleClick(i){var u=this.player_.volume(),l=this.player_.lastVolume_();0===u?(this.player_.volume(l<.1?.1:l),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},u.update=function update(i){this.updateIcon_(),this.updateControlText_()},u.updateIcon_=function updateIcon_(){var i=this.player_.volume(),u=3;_i&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===i||this.player_.muted()?u=0:i<.33?u=1:i<.67&&(u=2);for(var l=0;l<4;l++)removeClass(this.el_,"vjs-vol-"+l);addClass(this.el_,"vjs-vol-"+u)},u.updateControlText_=function updateControlText_(){var i=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)},MuteToggle}(tn);Ln.prototype.controlText_="Mute",rr.registerComponent("MuteToggle",Ln);var Dn=function(i){function VolumePanel(u,l){var c;return void 0===l&&(l={}),l.inline=void 0===l.inline||l.inline,(void 0===l.volumeControl||isPlain(l.volumeControl))&&(l.volumeControl=l.volumeControl||{},l.volumeControl.vertical=!l.inline),(c=i.call(this,u,l)||this).handleKeyPressHandler_=function(i){return c.handleKeyPress(i)},c.on(u,["loadstart"],(function(i){return c.volumePanelState_(i)})),c.on(c.muteToggle,"keyup",(function(i){return c.handleKeyPress(i)})),c.on(c.volumeControl,"keyup",(function(i){return c.handleVolumeControlKeyUp(i)})),c.on("keydown",(function(i){return c.handleKeyPress(i)})),c.on("mouseover",(function(i){return c.handleMouseOver(i)})),c.on("mouseout",(function(i){return c.handleMouseOut(i)})),c.on(c.volumeControl,["slideractive"],c.sliderActive_),c.on(c.volumeControl,["sliderinactive"],c.sliderInactive_),c}_inheritsLoose(VolumePanel,i);var u=VolumePanel.prototype;return u.sliderActive_=function sliderActive_(){this.addClass("vjs-slider-active")},u.sliderInactive_=function sliderInactive_(){this.removeClass("vjs-slider-active")},u.volumePanelState_=function volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},u.createEl=function createEl(){var u="vjs-volume-panel-horizontal";return this.options_.inline||(u="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+u})},u.dispose=function dispose(){this.handleMouseOut(),i.prototype.dispose.call(this)},u.handleVolumeControlKeyUp=function handleVolumeControlKeyUp(i){y().isEventKey(i,"Esc")&&this.muteToggle.focus()},u.handleMouseOver=function handleMouseOver(i){this.addClass("vjs-hover"),on(v(),"keyup",this.handleKeyPressHandler_)},u.handleMouseOut=function handleMouseOut(i){this.removeClass("vjs-hover"),off(v(),"keyup",this.handleKeyPressHandler_)},u.handleKeyPress=function handleKeyPress(i){y().isEventKey(i,"Esc")&&this.handleMouseOut()},VolumePanel}(rr);Dn.prototype.options_={children:["muteToggle","volumeControl"]},rr.registerComponent("VolumePanel",Dn);var Vn=function(i){function Menu(u,l){var c;return c=i.call(this,u,l)||this,l&&(c.menuButton_=l.menuButton),c.focusedChild_=-1,c.on("keydown",(function(i){return c.handleKeyDown(i)})),c.boundHandleBlur_=function(i){return c.handleBlur(i)},c.boundHandleTapClick_=function(i){return c.handleTapClick(i)},c}_inheritsLoose(Menu,i);var u=Menu.prototype;return u.addEventListenerForItem=function addEventListenerForItem(i){i instanceof rr&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},u.removeEventListenerForItem=function removeEventListenerForItem(i){i instanceof rr&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},u.removeChild=function removeChild(u){"string"==typeof u&&(u=this.getChild(u)),this.removeEventListenerForItem(u),i.prototype.removeChild.call(this,u)},u.addItem=function addItem(i){var u=this.addChild(i);u&&this.addEventListenerForItem(u)},u.createEl=function createEl$1(){this.contentEl_=createEl(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var u=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return u.appendChild(this.contentEl_),on(u,"click",(function(i){i.preventDefault(),i.stopImmediatePropagation()})),u},u.dispose=function dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,i.prototype.dispose.call(this)},u.handleBlur=function handleBlur(i){var u=i.relatedTarget||v().activeElement;if(!this.children().some((function(i){return i.el()===u}))){var l=this.menuButton_;l&&l.buttonPressed_&&u!==l.el().firstChild&&l.unpressButton()}},u.handleTapClick=function handleTapClick(i){if(this.menuButton_){this.menuButton_.unpressButton();var u=this.children();if(!Array.isArray(u))return;var l=u.filter((function(u){return u.el()===i.target}))[0];if(!l)return;"CaptionSettingsMenuItem"!==l.name()&&this.menuButton_.focus()}},u.handleKeyDown=function handleKeyDown(i){y().isEventKey(i,"Left")||y().isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(y().isEventKey(i,"Right")||y().isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},u.stepForward=function stepForward(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_+1),this.focus(i)},u.stepBack=function stepBack(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_-1),this.focus(i)},u.focus=function focus(i){void 0===i&&(i=0);var u=this.children().slice();u.length&&u[0].hasClass("vjs-menu-title")&&u.shift(),u.length>0&&(i<0?i=0:i>=u.length&&(i=u.length-1),this.focusedChild_=i,u[i].el_.focus())},Menu}(rr);rr.registerComponent("Menu",Vn);var Rn=function(i){function MenuButton(u,l){var c;void 0===l&&(l={}),(c=i.call(this,u,l)||this).menuButton_=new tn(u,l),c.menuButton_.controlText(c.controlText_),c.menuButton_.el_.setAttribute("aria-haspopup","true");var h=tn.prototype.buildCSSClass();c.menuButton_.el_.className=c.buildCSSClass()+" "+h,c.menuButton_.removeClass("vjs-control"),c.addChild(c.menuButton_),c.update(),c.enabled_=!0;var p=function handleClick(i){return c.handleClick(i)};return c.handleMenuKeyUp_=function(i){return c.handleMenuKeyUp(i)},c.on(c.menuButton_,"tap",p),c.on(c.menuButton_,"click",p),c.on(c.menuButton_,"keydown",(function(i){return c.handleKeyDown(i)})),c.on(c.menuButton_,"mouseenter",(function(){c.addClass("vjs-hover"),c.menu.show(),on(v(),"keyup",c.handleMenuKeyUp_)})),c.on("mouseleave",(function(i){return c.handleMouseLeave(i)})),c.on("keydown",(function(i){return c.handleSubmenuKeyDown(i)})),c}_inheritsLoose(MenuButton,i);var u=MenuButton.prototype;return u.update=function update(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},u.createMenu=function createMenu(){var i=new Vn(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var u=createEl("li",{className:"vjs-menu-title",textContent:Ji(this.options_.title),tabIndex:-1}),l=new rr(this.player_,{el:u});i.addItem(l)}if(this.items=this.createItems(),this.items)for(var c=0;c<this.items.length;c++)i.addItem(this.items[c]);return i},u.createItems=function createItems(){},u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},u.buildWrapperCSSClass=function buildWrapperCSSClass(){var u="vjs-menu-button";return"vjs-menu-button "+(u+=!0===this.options_.inline?"-inline":"-popup")+" "+tn.prototype.buildCSSClass()+" "+i.prototype.buildCSSClass.call(this)},u.buildCSSClass=function buildCSSClass(){var u="vjs-menu-button";return"vjs-menu-button "+(u+=!0===this.options_.inline?"-inline":"-popup")+" "+i.prototype.buildCSSClass.call(this)},u.controlText=function controlText(i,u){return void 0===u&&(u=this.menuButton_.el()),this.menuButton_.controlText(i,u)},u.dispose=function dispose(){this.handleMouseLeave(),i.prototype.dispose.call(this)},u.handleClick=function handleClick(i){this.buttonPressed_?this.unpressButton():this.pressButton()},u.handleMouseLeave=function handleMouseLeave(i){this.removeClass("vjs-hover"),off(v(),"keyup",this.handleMenuKeyUp_)},u.focus=function focus(){this.menuButton_.focus()},u.blur=function blur(){this.menuButton_.blur()},u.handleKeyDown=function handleKeyDown(i){y().isEventKey(i,"Esc")||y().isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),y().isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(y().isEventKey(i,"Up")||y().isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},u.handleMenuKeyUp=function handleMenuKeyUp(i){(y().isEventKey(i,"Esc")||y().isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},u.handleSubmenuKeyPress=function handleSubmenuKeyPress(i){this.handleSubmenuKeyDown(i)},u.handleSubmenuKeyDown=function handleSubmenuKeyDown(i){(y().isEventKey(i,"Esc")||y().isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),y().isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},u.pressButton=function pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),_i&&isInFrame())return;this.menu.focus()}},u.unpressButton=function unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},u.disable=function disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},u.enable=function enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},MenuButton}(rr);rr.registerComponent("MenuButton",Rn);var Mn=function(i){function TrackButton(u,l){var c,h=l.tracks;if((c=i.call(this,u,l)||this).items.length<=1&&c.hide(),!h)return _assertThisInitialized(c);var p=Bi(_assertThisInitialized(c),c.update);return h.addEventListener("removetrack",p),h.addEventListener("addtrack",p),h.addEventListener("labelchange",p),c.player_.on("ready",p),c.player_.on("dispose",(function(){h.removeEventListener("removetrack",p),h.removeEventListener("addtrack",p),h.removeEventListener("labelchange",p)})),c}return _inheritsLoose(TrackButton,i),TrackButton}(Rn);rr.registerComponent("TrackButton",Mn);var Nn=["Tab","Esc","Up","Down","Right","Left"],Bn=function(i){function MenuItem(u,l){var c;return(c=i.call(this,u,l)||this).selectable=l.selectable,c.isSelected_=l.selected||!1,c.multiSelectable=l.multiSelectable,c.selected(c.isSelected_),c.el_.setAttribute("role",c.selectable?c.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),c}_inheritsLoose(MenuItem,i);var u=MenuItem.prototype;return u.createEl=function createEl$1(u,l,c){this.nonIconControl=!0;var h=i.prototype.createEl.call(this,"li",video_es_assign({className:"vjs-menu-item",tabIndex:-1},l),c);return h.replaceChild(createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),h.querySelector(".vjs-icon-placeholder")),h},u.handleKeyDown=function handleKeyDown(u){Nn.some((function(i){return y().isEventKey(u,i)}))||i.prototype.handleKeyDown.call(this,u)},u.handleClick=function handleClick(i){this.selected(!0)},u.selected=function selected(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},MenuItem}(Qr);rr.registerComponent("MenuItem",Bn);var Fn=function(i){function TextTrackMenuItem(u,l){var c,h=l.track,p=u.textTracks();l.label=h.label||h.language||"Unknown",l.selected="showing"===h.mode,(c=i.call(this,u,l)||this).track=h,c.kinds=(l.kinds||[l.kind||c.track.kind]).filter(Boolean);var g,_=function changeHandler(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];c.handleTracksChange.apply(_assertThisInitialized(c),u)},y=function selectedLanguageChangeHandler(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];c.handleSelectedLanguageChange.apply(_assertThisInitialized(c),u)};(u.on(["loadstart","texttrackchange"],_),p.addEventListener("change",_),p.addEventListener("selectedlanguagechange",y),c.on("dispose",(function(){u.off(["loadstart","texttrackchange"],_),p.removeEventListener("change",_),p.removeEventListener("selectedlanguagechange",y)})),void 0===p.onchange)&&c.on(["tap","click"],(function(){if("object"!=typeof m().Event)try{g=new(m().Event)("change")}catch(i){}g||(g=v().createEvent("Event")).initEvent("change",!0,!0),p.dispatchEvent(g)}));return c.handleTracksChange(),c}_inheritsLoose(TextTrackMenuItem,i);var u=TextTrackMenuItem.prototype;return u.handleClick=function handleClick(u){var l=this.track,c=this.player_.textTracks();if(i.prototype.handleClick.call(this,u),c)for(var h=0;h<c.length;h++){var p=c[h];-1!==this.kinds.indexOf(p.kind)&&(p===l?"showing"!==p.mode&&(p.mode="showing"):"disabled"!==p.mode&&(p.mode="disabled"))}},u.handleTracksChange=function handleTracksChange(i){var u="showing"===this.track.mode;u!==this.isSelected_&&this.selected(u)},u.handleSelectedLanguageChange=function handleSelectedLanguageChange(i){if("showing"===this.track.mode){var u=this.player_.cache_.selectedLanguage;if(u&&u.enabled&&u.language===this.track.language&&u.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},u.dispose=function dispose(){this.track=null,i.prototype.dispose.call(this)},TextTrackMenuItem}(Bn);rr.registerComponent("TextTrackMenuItem",Fn);var Un=function(i){function OffTextTrackMenuItem(u,l){return l.track={player:u,kind:l.kind,kinds:l.kinds,default:!1,mode:"disabled"},l.kinds||(l.kinds=[l.kind]),l.track.label=l.label?l.label:l.kinds.join(" and ")+" off",l.selectable=!0,l.multiSelectable=!1,i.call(this,u,l)||this}_inheritsLoose(OffTextTrackMenuItem,i);var u=OffTextTrackMenuItem.prototype;return u.handleTracksChange=function handleTracksChange(i){for(var u=this.player().textTracks(),l=!0,c=0,h=u.length;c<h;c++){var p=u[c];if(this.options_.kinds.indexOf(p.kind)>-1&&"showing"===p.mode){l=!1;break}}l!==this.isSelected_&&this.selected(l)},u.handleSelectedLanguageChange=function handleSelectedLanguageChange(i){for(var u=this.player().textTracks(),l=!0,c=0,h=u.length;c<h;c++){var p=u[c];if(["captions","descriptions","subtitles"].indexOf(p.kind)>-1&&"showing"===p.mode){l=!1;break}}l&&(this.player_.cache_.selectedLanguage={enabled:!1})},OffTextTrackMenuItem}(Fn);rr.registerComponent("OffTextTrackMenuItem",Un);var jn=function(i){function TextTrackButton(u,l){return void 0===l&&(l={}),l.tracks=u.textTracks(),i.call(this,u,l)||this}return _inheritsLoose(TextTrackButton,i),TextTrackButton.prototype.createItems=function createItems(i,u){var l;void 0===i&&(i=[]),void 0===u&&(u=Fn),this.label_&&(l=this.label_+" off"),i.push(new Un(this.player_,{kinds:this.kinds_,kind:this.kind_,label:l})),this.hideThreshold_+=1;var c=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var h=0;h<c.length;h++){var p=c[h];if(this.kinds_.indexOf(p.kind)>-1){var m=new u(this.player_,{track:p,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});m.addClass("vjs-"+p.kind+"-menu-item"),i.push(m)}}return i},TextTrackButton}(Mn);rr.registerComponent("TextTrackButton",jn);var Hn=function(i){function ChaptersTrackMenuItem(u,l){var c,h=l.track,p=l.cue,m=u.currentTime();return l.selectable=!0,l.multiSelectable=!1,l.label=p.text,l.selected=p.startTime<=m&&m<p.endTime,(c=i.call(this,u,l)||this).track=h,c.cue=p,c}return _inheritsLoose(ChaptersTrackMenuItem,i),ChaptersTrackMenuItem.prototype.handleClick=function handleClick(u){i.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},ChaptersTrackMenuItem}(Bn);rr.registerComponent("ChaptersTrackMenuItem",Hn);var qn=function(i){function ChaptersButton(u,l,c){var h;return(h=i.call(this,u,l,c)||this).selectCurrentItem_=function(){h.items.forEach((function(i){i.selected(h.track_.activeCues[0]===i.cue)}))},h}_inheritsLoose(ChaptersButton,i);var u=ChaptersButton.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},u.update=function update(u){if(!u||!u.track||"chapters"===u.track.kind){var l=this.findChaptersTrack();l!==this.track_?(this.setTrack(l),i.prototype.update.call(this)):(!this.items||l&&l.cues&&l.cues.length!==this.items.length)&&i.prototype.update.call(this)}},u.setTrack=function setTrack(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var u=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);u&&u.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var l=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);l&&l.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},u.findChaptersTrack=function findChaptersTrack(){for(var i=this.player_.textTracks()||[],u=i.length-1;u>=0;u--){var l=i[u];if(l.kind===this.kind_)return l}},u.getMenuCaption=function getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ji(this.kind_))},u.createMenu=function createMenu(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},u.createItems=function createItems(){var i=[];if(!this.track_)return i;var u=this.track_.cues;if(!u)return i;for(var l=0,c=u.length;l<c;l++){var h=new Hn(this.player_,{track:this.track_,cue:u[l]});i.push(h)}return i},ChaptersButton}(jn);qn.prototype.kind_="chapters",qn.prototype.controlText_="Chapters",rr.registerComponent("ChaptersButton",qn);var Wn=function(i){function DescriptionsButton(u,l,c){var h;h=i.call(this,u,l,c)||this;var p=u.textTracks(),m=Bi(_assertThisInitialized(h),h.handleTracksChange);return p.addEventListener("change",m),h.on("dispose",(function(){p.removeEventListener("change",m)})),h}_inheritsLoose(DescriptionsButton,i);var u=DescriptionsButton.prototype;return u.handleTracksChange=function handleTracksChange(i){for(var u=this.player().textTracks(),l=!1,c=0,h=u.length;c<h;c++){var p=u[c];if(p.kind!==this.kind_&&"showing"===p.mode){l=!0;break}}l?this.disable():this.enable()},u.buildCSSClass=function buildCSSClass(){return"vjs-descriptions-button "+i.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-descriptions-button "+i.prototype.buildWrapperCSSClass.call(this)},DescriptionsButton}(jn);Wn.prototype.kind_="descriptions",Wn.prototype.controlText_="Descriptions",rr.registerComponent("DescriptionsButton",Wn);var Gn=function(i){function SubtitlesButton(u,l,c){return i.call(this,u,l,c)||this}_inheritsLoose(SubtitlesButton,i);var u=SubtitlesButton.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},SubtitlesButton}(jn);Gn.prototype.kind_="subtitles",Gn.prototype.controlText_="Subtitles",rr.registerComponent("SubtitlesButton",Gn);var zn=function(i){function CaptionSettingsMenuItem(u,l){var c;return l.track={player:u,kind:l.kind,label:l.kind+" settings",selectable:!1,default:!1,mode:"disabled"},l.selectable=!1,l.name="CaptionSettingsMenuItem",(c=i.call(this,u,l)||this).addClass("vjs-texttrack-settings"),c.controlText(", opens "+l.kind+" settings dialog"),c}return _inheritsLoose(CaptionSettingsMenuItem,i),CaptionSettingsMenuItem.prototype.handleClick=function handleClick(i){this.player().getChild("textTrackSettings").open()},CaptionSettingsMenuItem}(Fn);rr.registerComponent("CaptionSettingsMenuItem",zn);var Xn=function(i){function CaptionsButton(u,l,c){return i.call(this,u,l,c)||this}_inheritsLoose(CaptionsButton,i);var u=CaptionsButton.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},u.createItems=function createItems(){var u=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(u.push(new zn(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,u)},CaptionsButton}(jn);Xn.prototype.kind_="captions",Xn.prototype.controlText_="Captions",rr.registerComponent("CaptionsButton",Xn);var Kn=function(i){function SubsCapsMenuItem(){return i.apply(this,arguments)||this}return _inheritsLoose(SubsCapsMenuItem,i),SubsCapsMenuItem.prototype.createEl=function createEl$1(u,l,c){var h=i.prototype.createEl.call(this,u,l,c),p=h.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(p.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),p.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),h},SubsCapsMenuItem}(Fn);rr.registerComponent("SubsCapsMenuItem",Kn);var Qn=function(i){function SubsCapsButton(u,l){var c;return void 0===l&&(l={}),(c=i.call(this,u,l)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(c.player_.language_)>-1&&(c.label_="captions"),c.menuButton_.controlText(Ji(c.label_)),c}_inheritsLoose(SubsCapsButton,i);var u=SubsCapsButton.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},u.createItems=function createItems(){var u=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(u.push(new zn(this.player_,{kind:this.label_})),this.hideThreshold_+=1),u=i.prototype.createItems.call(this,u,Kn)},SubsCapsButton}(jn);Qn.prototype.kinds_=["captions","subtitles"],Qn.prototype.controlText_="Subtitles",rr.registerComponent("SubsCapsButton",Qn);var Yn=function(i){function AudioTrackMenuItem(u,l){var c,h=l.track,p=u.audioTracks();l.label=h.label||h.language||"Unknown",l.selected=h.enabled,(c=i.call(this,u,l)||this).track=h,c.addClass("vjs-"+h.kind+"-menu-item");var m=function changeHandler(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];c.handleTracksChange.apply(_assertThisInitialized(c),u)};return p.addEventListener("change",m),c.on("dispose",(function(){p.removeEventListener("change",m)})),c}_inheritsLoose(AudioTrackMenuItem,i);var u=AudioTrackMenuItem.prototype;return u.createEl=function createEl$1(u,l,c){var h=i.prototype.createEl.call(this,u,l,c),p=h.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(p.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),p.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),h},u.handleClick=function handleClick(u){if(i.prototype.handleClick.call(this,u),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var l=this.player_.audioTracks(),c=0;c<l.length;c++){var h=l[c];h!==this.track&&(h.enabled=h===this.track)}},u.handleTracksChange=function handleTracksChange(i){this.selected(this.track.enabled)},AudioTrackMenuItem}(Bn);rr.registerComponent("AudioTrackMenuItem",Yn);var $n=function(i){function AudioTrackButton(u,l){return void 0===l&&(l={}),l.tracks=u.audioTracks(),i.call(this,u,l)||this}_inheritsLoose(AudioTrackButton,i);var u=AudioTrackButton.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},u.createItems=function createItems(i){void 0===i&&(i=[]),this.hideThreshold_=1;for(var u=this.player_.audioTracks(),l=0;l<u.length;l++){i.push(new Yn(this.player_,{track:u[l],selectable:!0,multiSelectable:!1}))}return i},AudioTrackButton}(Mn);$n.prototype.controlText_="Audio Track",rr.registerComponent("AudioTrackButton",$n);var Jn=function(i){function PlaybackRateMenuItem(u,l){var c,h=l.rate,p=parseFloat(h,10);return l.label=h,l.selected=p===u.playbackRate(),l.selectable=!0,l.multiSelectable=!1,(c=i.call(this,u,l)||this).label=h,c.rate=p,c.on(u,"ratechange",(function(i){return c.update(i)})),c}_inheritsLoose(PlaybackRateMenuItem,i);var u=PlaybackRateMenuItem.prototype;return u.handleClick=function handleClick(u){i.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},u.update=function update(i){this.selected(this.player().playbackRate()===this.rate)},PlaybackRateMenuItem}(Bn);Jn.prototype.contentElType="button",rr.registerComponent("PlaybackRateMenuItem",Jn);var Zn=function(i){function PlaybackRateMenuButton(u,l){var c;return(c=i.call(this,u,l)||this).menuButton_.el_.setAttribute("aria-describedby",c.labelElId_),c.updateVisibility(),c.updateLabel(),c.on(u,"loadstart",(function(i){return c.updateVisibility(i)})),c.on(u,"ratechange",(function(i){return c.updateLabel(i)})),c.on(u,"playbackrateschange",(function(i){return c.handlePlaybackRateschange(i)})),c}_inheritsLoose(PlaybackRateMenuButton,i);var u=PlaybackRateMenuButton.prototype;return u.createEl=function createEl$1(){var u=i.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),u.appendChild(this.labelEl_),u},u.dispose=function dispose(){this.labelEl_=null,i.prototype.dispose.call(this)},u.buildCSSClass=function buildCSSClass(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},u.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},u.createItems=function createItems(){for(var i=this.playbackRates(),u=[],l=i.length-1;l>=0;l--)u.push(new Jn(this.player(),{rate:i[l]+"x"}));return u},u.updateARIAAttributes=function updateARIAAttributes(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},u.handleClick=function handleClick(i){var u=this.player().playbackRate(),l=this.playbackRates(),c=(l.indexOf(u)+1)%l.length;this.player().playbackRate(l[c])},u.handlePlaybackRateschange=function handlePlaybackRateschange(i){this.update()},u.playbackRates=function playbackRates(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},u.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},u.updateVisibility=function updateVisibility(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},u.updateLabel=function updateLabel(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},PlaybackRateMenuButton}(Rn);Zn.prototype.controlText_="Playback Rate",rr.registerComponent("PlaybackRateMenuButton",Zn);var ea=function(i){function Spacer(){return i.apply(this,arguments)||this}_inheritsLoose(Spacer,i);var u=Spacer.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-spacer "+i.prototype.buildCSSClass.call(this)},u.createEl=function createEl(u,l,c){return void 0===u&&(u="div"),void 0===l&&(l={}),void 0===c&&(c={}),l.className||(l.className=this.buildCSSClass()),i.prototype.createEl.call(this,u,l,c)},Spacer}(rr);rr.registerComponent("Spacer",ea);var ta=function(i){function CustomControlSpacer(){return i.apply(this,arguments)||this}_inheritsLoose(CustomControlSpacer,i);var u=CustomControlSpacer.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-custom-control-spacer "+i.prototype.buildCSSClass.call(this)},u.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:" "})},CustomControlSpacer}(ea);rr.registerComponent("CustomControlSpacer",ta);var ia=function(i){function ControlBar(){return i.apply(this,arguments)||this}return _inheritsLoose(ControlBar,i),ControlBar.prototype.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},ControlBar}(rr);ia.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in v()&&ia.prototype.options_.children.splice(ia.prototype.options_.children.length-1,0,"pictureInPictureToggle"),rr.registerComponent("ControlBar",ia);var ra=function(i){function ErrorDisplay(u,l){var c;return(c=i.call(this,u,l)||this).on(u,"error",(function(i){return c.open(i)})),c}_inheritsLoose(ErrorDisplay,i);var u=ErrorDisplay.prototype;return u.buildCSSClass=function buildCSSClass(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},u.content=function content(){var i=this.player().error();return i?this.localize(i.message):""},ErrorDisplay}(lr);ra.prototype.options_=_extends({},lr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),rr.registerComponent("ErrorDisplay",ra);var na="vjs-text-track-settings",aa=["#000","Black"],sa=["#00F","Blue"],oa=["#0FF","Cyan"],ua=["#0F0","Green"],la=["#F0F","Magenta"],da=["#F00","Red"],ca=["#FFF","White"],ha=["#FF0","Yellow"],pa=["1","Opaque"],fa=["0.5","Semi-Transparent"],ma=["0","Transparent"],ga={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[aa,ca,da,ua,sa,ha,la,oa]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[pa,fa,ma]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ca,aa,da,ua,sa,ha,la,oa]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function parser(i){return"1.00"===i?null:Number(i)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[pa,fa]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ma,fa,pa]}};function parseOptionValue(i,u){if(u&&(i=u(i)),i&&"none"!==i)return i}ga.windowColor.options=ga.backgroundColor.options;var va=function(i){function TextTrackSettings(u,l){var c;return l.temporary=!1,(c=i.call(this,u,l)||this).updateDisplay=c.updateDisplay.bind(_assertThisInitialized(c)),c.fill(),c.hasBeenOpened_=c.hasBeenFilled_=!0,c.endDialog=createEl("p",{className:"vjs-control-text",textContent:c.localize("End of dialog window.")}),c.el().appendChild(c.endDialog),c.setDefaults(),void 0===l.persistTextTrackSettings&&(c.options_.persistTextTrackSettings=c.options_.playerOptions.persistTextTrackSettings),c.on(c.$(".vjs-done-button"),"click",(function(){c.saveSettings(),c.close()})),c.on(c.$(".vjs-default-button"),"click",(function(){c.setDefaults(),c.updateDisplay()})),each(ga,(function(i){c.on(c.$(i.selector),"change",c.updateDisplay)})),c.options_.persistTextTrackSettings&&c.restoreSettings(),c}_inheritsLoose(TextTrackSettings,i);var u=TextTrackSettings.prototype;return u.dispose=function dispose(){this.endDialog=null,i.prototype.dispose.call(this)},u.createElSelect_=function createElSelect_(i,u,l){var c=this;void 0===u&&(u=""),void 0===l&&(l="label");var h=ga[i],p=h.id.replace("%s",this.id_),m=[u,p].join(" ").trim();return["<"+l+' id="'+p+'" class="'+("label"===l?"vjs-label":"")+'">',this.localize(h.label),"</"+l+">",'<select aria-labelledby="'+m+'">'].concat(h.options.map((function(i){var u=p+"-"+i[1].replace(/\W+/g,"");return['<option id="'+u+'" value="'+i[0]+'" ','aria-labelledby="'+m+" "+u+'">',c.localize(i[1]),"</option>"].join("")}))).concat("</select>").join("")},u.createElFgColor_=function createElFgColor_(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},u.createElBgColor_=function createElBgColor_(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},u.createElWinColor_=function createElWinColor_(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},u.createElColors_=function createElColors_(){return createEl("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},u.createElFont_=function createElFont_(){return createEl("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},u.createElControls_=function createElControls_(){var i=this.localize("restore all settings to the default values");return createEl("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},u.content=function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},u.label=function label(){return this.localize("Caption Settings Dialog")},u.description=function description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},u.buildCSSClass=function buildCSSClass(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},u.getValues=function getValues(){var i=this;return function reduce(i,u,l){return void 0===l&&(l=0),Jt(i).reduce((function(l,c){return u(l,i[c],c)}),l)}(ga,(function(u,l,c){var h=function getSelectedOptionValue(i,u){return parseOptionValue(i.options[i.options.selectedIndex].value,u)}(i.$(l.selector),l.parser);return void 0!==h&&(u[c]=h),u}),{})},u.setValues=function setValues(i){var u=this;each(ga,(function(l,c){!function setSelectedOption(i,u,l){if(u)for(var c=0;c<i.options.length;c++)if(parseOptionValue(i.options[c].value,l)===u){i.selectedIndex=c;break}}(u.$(l.selector),i[c],l.parser)}))},u.setDefaults=function setDefaults(){var i=this;each(ga,(function(u){var l=u.hasOwnProperty("default")?u.default:0;i.$(u.selector).selectedIndex=l}))},u.restoreSettings=function restoreSettings(){var i;try{i=JSON.parse(m().localStorage.getItem(na))}catch(i){Qt.warn(i)}i&&this.setValues(i)},u.saveSettings=function saveSettings(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?m().localStorage.setItem(na,JSON.stringify(i)):m().localStorage.removeItem(na)}catch(i){Qt.warn(i)}}},u.updateDisplay=function updateDisplay(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},u.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,u=i&&i.subsCapsButton,l=i&&i.captionsButton;u?u.focus():l&&l.focus()},TextTrackSettings}(lr);rr.registerComponent("TextTrackSettings",va);var _a=function(i){function ResizeManager(u,l){var c,h=l.ResizeObserver||m().ResizeObserver;null===l.ResizeObserver&&(h=!1);var p=mergeOptions$3({createEl:!h,reportTouchActivity:!1},l);return(c=i.call(this,u,p)||this).ResizeObserver=l.ResizeObserver||m().ResizeObserver,c.loadListener_=null,c.resizeObserver_=null,c.debouncedHandler_=function debounce(i,u,l,c){var h;void 0===c&&(c=m());var p=function debounced(){var p=this,m=arguments,g=function later(){h=null,g=null,l||i.apply(p,m)};!h&&l&&i.apply(p,m),c.clearTimeout(h),h=c.setTimeout(g,u)};return p.cancel=function cancel(){c.clearTimeout(h),h=null},p}((function(){c.resizeHandler()}),100,!1,_assertThisInitialized(c)),h?(c.resizeObserver_=new c.ResizeObserver(c.debouncedHandler_),c.resizeObserver_.observe(u.el())):(c.loadListener_=function(){if(c.el_&&c.el_.contentWindow){var i=c.debouncedHandler_,u=c.unloadListener_=function(){off(this,"resize",i),off(this,"unload",u),u=null};on(c.el_.contentWindow,"unload",u),on(c.el_.contentWindow,"resize",i)}},c.one("load",c.loadListener_)),c}_inheritsLoose(ResizeManager,i);var u=ResizeManager.prototype;return u.createEl=function createEl(){return i.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},u.resizeHandler=function resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},u.dispose=function dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,i.prototype.dispose.call(this)},ResizeManager}(rr);rr.registerComponent("ResizeManager",_a);var ya={trackingThreshold:20,liveTolerance:15},ba=function(i){function LiveTracker(u,l){var c,h=mergeOptions$3(ya,l,{createEl:!1});return(c=i.call(this,u,h)||this).handleVisibilityChange_=function(i){return c.handleVisibilityChange(i)},c.trackLiveHandler_=function(){return c.trackLive_()},c.handlePlay_=function(i){return c.handlePlay(i)},c.handleFirstTimeupdate_=function(i){return c.handleFirstTimeupdate(i)},c.handleSeeked_=function(i){return c.handleSeeked(i)},c.seekToLiveEdge_=function(i){return c.seekToLiveEdge(i)},c.reset_(),c.on(c.player_,"durationchange",(function(i){return c.handleDurationchange(i)})),c.on(c.player_,"canplay",(function(){return c.toggleTracking()})),hi&&"hidden"in v()&&"visibilityState"in v()&&c.on(v(),"visibilitychange",c.handleVisibilityChange_),c}_inheritsLoose(LiveTracker,i);var u=LiveTracker.prototype;return u.handleVisibilityChange=function handleVisibilityChange(){this.player_.duration()===1/0&&(v().hidden?this.stopTracking():this.startTracking())},u.trackLive_=function trackLive_(){var i=this.player_.seekable();if(i&&i.length){var u=Number(m().performance.now().toFixed(4)),l=-1===this.lastTime_?0:(u-this.lastTime_)/1e3;this.lastTime_=u,this.pastSeekEnd_=this.pastSeekEnd()+l;var c=this.liveCurrentTime(),h=this.player_.currentTime(),p=this.player_.paused()||this.seekedBehindLive_||Math.abs(c-h)>this.options_.liveTolerance;this.timeupdateSeen_&&c!==1/0||(p=!1),p!==this.behindLiveEdge_&&(this.behindLiveEdge_=p,this.trigger("liveedgechange"))}},u.handleDurationchange=function handleDurationchange(){this.toggleTracking()},u.toggleTracking=function toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},u.startTracking=function startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Ni),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},u.handleFirstTimeupdate=function handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},u.handleSeeked=function handleSeeked(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},u.handlePlay=function handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},u.reset_=function reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},u.nextSeekedFromUser=function nextSeekedFromUser(){this.nextSeekedFromUser_=!0},u.stopTracking=function stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},u.seekableEnd=function seekableEnd(){for(var i=this.player_.seekable(),u=[],l=i?i.length:0;l--;)u.push(i.end(l));return u.length?u.sort()[u.length-1]:1/0},u.seekableStart=function seekableStart(){for(var i=this.player_.seekable(),u=[],l=i?i.length:0;l--;)u.push(i.start(l));return u.length?u.sort()[0]:0},u.liveWindow=function liveWindow(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},u.isLive=function isLive(){return this.isTracking()},u.atLiveEdge=function atLiveEdge(){return!this.behindLiveEdge()},u.liveCurrentTime=function liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()},u.pastSeekEnd=function pastSeekEnd(){var i=this.seekableEnd();return-1!==this.lastSeekEnd_&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},u.behindLiveEdge=function behindLiveEdge(){return this.behindLiveEdge_},u.isTracking=function isTracking(){return"number"==typeof this.trackingInterval_},u.seekToLiveEdge=function seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},u.dispose=function dispose(){this.off(v(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),i.prototype.dispose.call(this)},LiveTracker}(rr);rr.registerComponent("LiveTracker",ba);var Ta,Sa=function sourcesetLoad(i){var u=i.el();if(u.hasAttribute("src"))return i.triggerSourceset(u.src),!0;var l=i.$$("source"),c=[],h="";if(!l.length)return!1;for(var p=0;p<l.length;p++){var m=l[p].src;m&&-1===c.indexOf(m)&&c.push(m)}return!!c.length&&(1===c.length&&(h=c[0]),i.triggerSourceset(h),!0)},ka=Object.defineProperty({},"innerHTML",{get:function get(){return this.cloneNode(!0).innerHTML},set:function set(i){var u=v().createElement(this.nodeName.toLowerCase());u.innerHTML=i;for(var l=v().createDocumentFragment();u.childNodes.length;)l.appendChild(u.childNodes[0]);return this.innerText="",m().Element.prototype.appendChild.call(this,l),this.innerHTML}}),Ea=function getDescriptor(i,u){for(var l={},c=0;c<i.length&&!((l=Object.getOwnPropertyDescriptor(i[c],u))&&l.set&&l.get);c++);return l.enumerable=!0,l.configurable=!0,l},Ca=function firstSourceWatch(i){var u=i.el();if(!u.resetSourceWatch_){var l={},c=function getInnerHTMLDescriptor(i){return Ea([i.el(),m().HTMLMediaElement.prototype,m().Element.prototype,ka],"innerHTML")}(i),h=function appendWrapper(l){return function(){for(var c=arguments.length,h=new Array(c),p=0;p<c;p++)h[p]=arguments[p];var m=l.apply(u,h);return Sa(i),m}};["append","appendChild","insertAdjacentHTML"].forEach((function(i){u[i]&&(l[i]=u[i],u[i]=h(l[i]))})),Object.defineProperty(u,"innerHTML",mergeOptions$3(c,{set:h(c.set)})),u.resetSourceWatch_=function(){u.resetSourceWatch_=null,Object.keys(l).forEach((function(i){u[i]=l[i]})),Object.defineProperty(u,"innerHTML",c)},i.one("sourceset",u.resetSourceWatch_)}},wa=Object.defineProperty({},"src",{get:function get(){return this.hasAttribute("src")?Cr(m().Element.prototype.getAttribute.call(this,"src")):""},set:function set(i){return m().Element.prototype.setAttribute.call(this,"src",i),i}}),Pa=function setupSourceset(i){if(i.featuresSourceset){var u=i.el();if(!u.resetSourceset_){var l=function getSrcDescriptor(i){return Ea([i.el(),m().HTMLMediaElement.prototype,wa],"src")}(i),c=u.setAttribute,h=u.load;Object.defineProperty(u,"src",mergeOptions$3(l,{set:function set(c){var h=l.set.call(u,c);return i.triggerSourceset(u.src),h}})),u.setAttribute=function(l,h){var p=c.call(u,l,h);return/src/i.test(l)&&i.triggerSourceset(u.src),p},u.load=function(){var l=h.call(u);return Sa(i)||(i.triggerSourceset(""),Ca(i)),l},u.currentSrc?i.triggerSourceset(u.currentSrc):Sa(i)||Ca(i),u.resetSourceset_=function(){u.resetSourceset_=null,u.load=h,u.setAttribute=c,Object.defineProperty(u,"src",l),u.resetSourceWatch_&&u.resetSourceWatch_()}}}},Aa=function defineLazyProperty(i,u,l,c){void 0===c&&(c=!0);var h=function set(l){return Object.defineProperty(i,u,{value:l,enumerable:!0,writable:!0})},p={configurable:!0,enumerable:!0,get:function get(){var i=l();return h(i),i}};return c&&(p.set=h),Object.defineProperty(i,u,p)},xa=function(i){function Html5(u,l){var c;c=i.call(this,u,l)||this;var h=u.source,p=!1;if(c.featuresVideoFrameCallback=c.featuresVideoFrameCallback&&"VIDEO"===c.el_.tagName,h&&(c.el_.currentSrc!==h.src||u.tag&&3===u.tag.initNetworkState_)?c.setSource(h):c.handleLateInit_(c.el_),u.enableSourceset&&c.setupSourcesetHandling_(),c.isScrubbing_=!1,c.el_.hasChildNodes()){for(var m=c.el_.childNodes,g=m.length,v=[];g--;){var _=m[g];"track"===_.nodeName.toLowerCase()&&(c.featuresNativeTextTracks?(c.remoteTextTrackEls().addTrackElement_(_),c.remoteTextTracks().addTrack(_.track),c.textTracks().addTrack(_.track),p||c.el_.hasAttribute("crossorigin")||!Pr(_.src)||(p=!0)):v.push(_))}for(var y=0;y<v.length;y++)c.el_.removeChild(v[y])}return c.proxyNativeTracks_(),c.featuresNativeTextTracks&&p&&Qt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),c.restoreMetadataTracksInIOSNativePlayer_(),(mi||vi||oi)&&!0===u.nativeControlsForTouch&&c.setControls(!0),c.proxyWebkitFullscreen_(),c.triggerReady(),c}_inheritsLoose(Html5,i);var u=Html5.prototype;return u.dispose=function dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Html5.disposeMediaElement(this.el_),this.options_=null,i.prototype.dispose.call(this)},u.setupSourcesetHandling_=function setupSourcesetHandling_(){Pa(this)},u.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var i,u=this.textTracks(),l=function takeMetadataTrackSnapshot(){i=[];for(var l=0;l<u.length;l++){var c=u[l];"metadata"===c.kind&&i.push({track:c,storedMode:c.mode})}};l(),u.addEventListener("change",l),this.on("dispose",(function(){return u.removeEventListener("change",l)}));var c=function restoreTrackMode(){for(var l=0;l<i.length;l++){var c=i[l];"disabled"===c.track.mode&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}u.removeEventListener("change",restoreTrackMode)};this.on("webkitbeginfullscreen",(function(){u.removeEventListener("change",l),u.removeEventListener("change",c),u.addEventListener("change",c)})),this.on("webkitendfullscreen",(function(){u.removeEventListener("change",l),u.addEventListener("change",l),u.removeEventListener("change",c)}))},u.overrideNative_=function overrideNative_(i,u){var l=this;if(u===this["featuresNative"+i+"Tracks"]){var c=i.toLowerCase();this[c+"TracksListeners_"]&&Object.keys(this[c+"TracksListeners_"]).forEach((function(i){l.el()[c+"Tracks"].removeEventListener(i,l[c+"TracksListeners_"][i])})),this["featuresNative"+i+"Tracks"]=!u,this[c+"TracksListeners_"]=null,this.proxyNativeTracksForType_(c)}},u.overrideNativeAudioTracks=function overrideNativeAudioTracks(i){this.overrideNative_("Audio",i)},u.overrideNativeVideoTracks=function overrideNativeVideoTracks(i){this.overrideNative_("Video",i)},u.proxyNativeTracksForType_=function proxyNativeTracksForType_(i){var u=this,l=Rr[i],c=this.el()[l.getterName],h=this[l.getterName]();if(this["featuresNative"+l.capitalName+"Tracks"]&&c&&c.addEventListener){var p={change:function change(l){var c={type:"change",target:h,currentTarget:h,srcElement:h};h.trigger(c),"text"===i&&u[Mr.remoteText.getterName]().trigger(c)},addtrack:function addtrack(i){h.addTrack(i.track)},removetrack:function removetrack(i){h.removeTrack(i.track)}},m=function removeOldTracks(){for(var i=[],u=0;u<h.length;u++){for(var l=!1,p=0;p<c.length;p++)if(c[p]===h[u]){l=!0;break}l||i.push(h[u])}for(;i.length;)h.removeTrack(i.shift())};this[l.getterName+"Listeners_"]=p,Object.keys(p).forEach((function(i){var l=p[i];c.addEventListener(i,l),u.on("dispose",(function(u){return c.removeEventListener(i,l)}))})),this.on("loadstart",m),this.on("dispose",(function(i){return u.off("loadstart",m)}))}},u.proxyNativeTracks_=function proxyNativeTracks_(){var i=this;Rr.names.forEach((function(u){i.proxyNativeTracksForType_(u)}))},u.createEl=function createEl(){var i=this.options_.tag;if(!i||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(i){var u=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(u,i),Html5.disposeMediaElement(i),i=u}else{i=v().createElement("video");var l=mergeOptions$3({},this.options_.tag&&getAttributes(this.options_.tag));mi&&!0===this.options_.nativeControlsForTouch||delete l.controls,setAttributes(i,video_es_assign(l,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}void 0!==this.options_.preload&&setAttribute(i,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var c=["loop","muted","playsinline","autoplay"],h=0;h<c.length;h++){var p=c[h],m=this.options_[p];void 0!==m&&(m?setAttribute(i,p,p):removeAttribute(i,p),i[p]=m)}return i},u.handleLateInit_=function handleLateInit_(i){if(0!==i.networkState&&3!==i.networkState){if(0===i.readyState){var u=!1,l=function setLoadstartFired(){u=!0};this.on("loadstart",l);var c=function triggerLoadstart(){u||this.trigger("loadstart")};return this.on("loadedmetadata",c),this.ready((function(){this.off("loadstart",l),this.off("loadedmetadata",c),u||this.trigger("loadstart")})),void 0}var h=["loadstart"];h.push("loadedmetadata"),i.readyState>=2&&h.push("loadeddata"),i.readyState>=3&&h.push("canplay"),i.readyState>=4&&h.push("canplaythrough"),this.ready((function(){h.forEach((function(i){this.trigger(i)}),this)}))}},u.setScrubbing=function setScrubbing(i){this.isScrubbing_=i},u.scrubbing=function scrubbing(){return this.isScrubbing_},u.setCurrentTime=function setCurrentTime(i){try{this.isScrubbing_&&this.el_.fastSeek&&yi?this.el_.fastSeek(i):this.el_.currentTime=i}catch(i){Qt(i,"Video is not ready. (Video.js)")}},u.duration=function duration(){var i=this;if(this.el_.duration===1/0&&ai&&di&&0===this.el_.currentTime){return this.on("timeupdate",(function checkProgress(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",checkProgress))})),NaN}return this.el_.duration||NaN},u.width=function width(){return this.el_.offsetWidth},u.height=function height(){return this.el_.offsetHeight},u.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var u=function endFn(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},l=function beginFn(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",u),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",l),this.on("dispose",(function(){i.off("webkitbeginfullscreen",l),i.off("webkitendfullscreen",u)}))}},u.supportsFullScreen=function supportsFullScreen(){if("function"==typeof this.el_.webkitEnterFullScreen){var i=m().navigator&&m().navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},u.enterFullScreen=function enterFullScreen(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)silencePromise(this.el_.play()),this.setTimeout((function(){i.pause();try{i.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}}),0);else try{i.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},u.exitFullScreen=function exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen)return this.trigger("fullscreenerror",new Error("The video is not fullscreen")),void 0;this.el_.webkitExitFullScreen()},u.requestPictureInPicture=function requestPictureInPicture(){return this.el_.requestPictureInPicture()},u.requestVideoFrameCallback=function requestVideoFrameCallback(u){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(u):i.prototype.requestVideoFrameCallback.call(this,u)},u.cancelVideoFrameCallback=function cancelVideoFrameCallback(u){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(u):i.prototype.cancelVideoFrameCallback.call(this,u)},u.src=function src(i){if(void 0===i)return this.el_.src;this.setSrc(i)},u.reset=function reset(){Html5.resetMediaElement(this.el_)},u.currentSrc=function currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},u.setControls=function setControls(i){this.el_.controls=!!i},u.addTextTrack=function addTextTrack(u,l,c){return this.featuresNativeTextTracks?this.el_.addTextTrack(u,l,c):i.prototype.addTextTrack.call(this,u,l,c)},u.createRemoteTextTrack=function createRemoteTextTrack(u){if(!this.featuresNativeTextTracks)return i.prototype.createRemoteTextTrack.call(this,u);var l=v().createElement("track");return u.kind&&(l.kind=u.kind),u.label&&(l.label=u.label),(u.language||u.srclang)&&(l.srclang=u.language||u.srclang),u.default&&(l.default=u.default),u.id&&(l.id=u.id),u.src&&(l.src=u.src),l},u.addRemoteTextTrack=function addRemoteTextTrack(u,l){var c=i.prototype.addRemoteTextTrack.call(this,u,l);return this.featuresNativeTextTracks&&this.el().appendChild(c),c},u.removeRemoteTextTrack=function removeRemoteTextTrack(u){if(i.prototype.removeRemoteTextTrack.call(this,u),this.featuresNativeTextTracks)for(var l=this.$$("track"),c=l.length;c--;)u!==l[c]&&u!==l[c].track||this.el().removeChild(l[c])},u.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var i={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),m().performance&&"function"==typeof m().performance.now?i.creationTime=m().performance.now():m().performance&&m().performance.timing&&"number"==typeof m().performance.timing.navigationStart&&(i.creationTime=m().Date.now()-m().performance.timing.navigationStart),i},Html5}(Br);Aa(xa,"TEST_VID",(function(){if(isReal()){var i=v().createElement("video"),u=v().createElement("track");return u.kind="captions",u.srclang="en",u.label="English",i.appendChild(u),i}})),xa.isSupported=function(){try{xa.TEST_VID.volume=.5}catch(i){return!1}return!(!xa.TEST_VID||!xa.TEST_VID.canPlayType)},xa.canPlayType=function(i){return xa.TEST_VID.canPlayType(i)},xa.canPlaySource=function(i,u){return xa.canPlayType(i.type)},xa.canControlVolume=function(){try{var i=xa.TEST_VID.volume;xa.TEST_VID.volume=i/2+.1;var u=i!==xa.TEST_VID.volume;return u&&_i?(m().setTimeout((function(){xa&&xa.prototype&&(xa.prototype.featuresVolumeControl=i!==xa.TEST_VID.volume)})),!1):u}catch(i){return!1}},xa.canMuteVolume=function(){try{var i=xa.TEST_VID.muted;return xa.TEST_VID.muted=!i,xa.TEST_VID.muted?setAttribute(xa.TEST_VID,"muted","muted"):removeAttribute(xa.TEST_VID,"muted"),i!==xa.TEST_VID.muted}catch(i){return!1}},xa.canControlPlaybackRate=function(){if(ai&&di&&ci<58)return!1;try{var i=xa.TEST_VID.playbackRate;return xa.TEST_VID.playbackRate=i/2+.1,i!==xa.TEST_VID.playbackRate}catch(i){return!1}},xa.canOverrideAttributes=function(){try{var i=function noop(){};Object.defineProperty(v().createElement("video"),"src",{get:i,set:i}),Object.defineProperty(v().createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(v().createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(v().createElement("audio"),"innerHTML",{get:i,set:i})}catch(i){return!1}return!0},xa.supportsNativeTextTracks=function(){return yi||_i&&di},xa.supportsNativeVideoTracks=function(){return!(!xa.TEST_VID||!xa.TEST_VID.videoTracks)},xa.supportsNativeAudioTracks=function(){return!(!xa.TEST_VID||!xa.TEST_VID.audioTracks)},xa.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(i){var u=i[1];Aa(xa.prototype,i[0],(function(){return xa[u]()}),!0)})),xa.prototype.featuresVolumeControl=xa.canControlVolume(),xa.prototype.movingMediaElementInDOM=!_i,xa.prototype.featuresFullscreenResize=!0,xa.prototype.featuresProgressEvents=!0,xa.prototype.featuresTimeupdateEvents=!0,xa.prototype.featuresVideoFrameCallback=!(!xa.TEST_VID||!xa.TEST_VID.requestVideoFrameCallback),xa.patchCanPlayType=function(){si>=4&&!ui&&!di&&(Ta=xa.TEST_VID&&xa.TEST_VID.constructor.prototype.canPlayType,xa.TEST_VID.constructor.prototype.canPlayType=function(i){return i&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(i)?"maybe":Ta.call(this,i)})},xa.unpatchCanPlayType=function(){var i=xa.TEST_VID.constructor.prototype.canPlayType;return Ta&&(xa.TEST_VID.constructor.prototype.canPlayType=Ta),i},xa.patchCanPlayType(),xa.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch(i){}}()}},xa.resetMediaElement=function(i){if(i){for(var u=i.querySelectorAll("source"),l=u.length;l--;)i.removeChild(u[l]);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch(i){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(i){xa.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(i){xa.prototype["set"+Ji(i)]=function(u){this.el_[i]=u,u?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(i){xa.prototype[i]=function(){return this.el_[i]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(i){xa.prototype["set"+Ji(i)]=function(u){this.el_[i]=u}})),["pause","load","play"].forEach((function(i){xa.prototype[i]=function(){return this.el_[i]()}})),Br.withSourceHandlers(xa),xa.nativeSourceHandler={},xa.nativeSourceHandler.canPlayType=function(i){try{return xa.TEST_VID.canPlayType(i)}catch(i){return""}},xa.nativeSourceHandler.canHandleSource=function(i,u){if(i.type)return xa.nativeSourceHandler.canPlayType(i.type);if(i.src){var l=wr(i.src);return xa.nativeSourceHandler.canPlayType("video/"+l)}return""},xa.nativeSourceHandler.handleSource=function(i,u,l){u.setSrc(i.src)},xa.nativeSourceHandler.dispose=function(){},xa.registerSourceHandler(xa.nativeSourceHandler),Br.registerTech("Html5",xa);var Ia=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Oa={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},La=["tiny","xsmall","small","medium","large","xlarge","huge"],Da={};La.forEach((function(i){var u="x"===i.charAt(0)?"x-"+i.substring(1):i;Da[i]="vjs-layout-"+u}));var Va={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Ra=function(i){function Player(u,l,c){var h;if(u.id=u.id||l.id||"vjs_video_"+newGUID(),(l=video_es_assign(Player.getTagSettings(u),l)).initChildren=!1,l.createEl=!1,l.evented=!1,l.reportTouchActivity=!1,!l.language)if("function"==typeof u.closest){var p=u.closest("[lang]");p&&p.getAttribute&&(l.language=p.getAttribute("lang"))}else for(var m=u;m&&1===m.nodeType;){if(getAttributes(m).hasOwnProperty("lang")){l.language=m.getAttribute("lang");break}m=m.parentNode}if((h=i.call(this,null,l,c)||this).boundDocumentFullscreenChange_=function(i){return h.documentFullscreenChange_(i)},h.boundFullWindowOnEscKey_=function(i){return h.fullWindowOnEscKey(i)},h.boundUpdateStyleEl_=function(i){return h.updateStyleEl_(i)},h.boundApplyInitTime_=function(i){return h.applyInitTime_(i)},h.boundUpdateCurrentBreakpoint_=function(i){return h.updateCurrentBreakpoint_(i)},h.boundHandleTechClick_=function(i){return h.handleTechClick_(i)},h.boundHandleTechDoubleClick_=function(i){return h.handleTechDoubleClick_(i)},h.boundHandleTechTouchStart_=function(i){return h.handleTechTouchStart_(i)},h.boundHandleTechTouchMove_=function(i){return h.handleTechTouchMove_(i)},h.boundHandleTechTouchEnd_=function(i){return h.handleTechTouchEnd_(i)},h.boundHandleTechTap_=function(i){return h.handleTechTap_(i)},h.isFullscreen_=!1,h.log=Yt(h.id_),h.fsApi_=qt,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,h.audioOnlyMode_=!1,h.audioPosterMode_=!1,h.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(h.tag=u,h.tagAttributes=u&&getAttributes(u),h.language(h.options_.language),l.languages){var g={};Object.getOwnPropertyNames(l.languages).forEach((function(i){g[i.toLowerCase()]=l.languages[i]})),h.languages_=g}else h.languages_=Player.prototype.options_.languages;h.resetCache_(),h.poster_=l.poster||"",h.controls_=!!l.controls,u.controls=!1,u.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],u.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),l.plugins&&Object.keys(l.plugins).forEach((function(i){if("function"!=typeof h[i])throw new Error('plugin "'+i+'" does not exist')})),h.scrubbing_=!1,h.el_=h.createEl(),evented(_assertThisInitialized(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(on(v(),h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on(["playerreset","resize"],h.boundUpdateStyleEl_);var _=mergeOptions$3(h.options_);l.plugins&&Object.keys(l.plugins).forEach((function(i){h[i](l.plugins[i])})),l.debug&&h.debug(!0),h.options_.playerOptions=_,h.middleware_=[],h.playbackRates(l.playbackRates),h.initChildren(),h.isAudio("audio"===u.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),mi&&h.addClass("vjs-touch-enabled"),_i||h.addClass("vjs-workinghover"),Player.players[h.id_]=_assertThisInitialized(h);var y=Ft.split(".")[0];return h.addClass("vjs-v"+y),h.userActive(!0),h.reportUserActivity(),h.one("play",(function(i){return h.listenForUserActivity_(i)})),h.on("stageclick",(function(i){return h.handleStageClick_(i)})),h.on("keydown",(function(i){return h.handleKeyDown(i)})),h.on("languagechange",(function(i){return h.handleLanguagechange(i)})),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h.on("ready",(function(){h.audioPosterMode(h.options_.audioPosterMode),h.audioOnlyMode(h.options_.audioOnlyMode)})),h}_inheritsLoose(Player,i);var u=Player.prototype;return u.dispose=function dispose(){var u=this;this.trigger("dispose"),this.off("dispose"),off(v(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off(v(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Player.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function clearCacheForPlayer(i){Ur[i.id()]=null}(this),Nr.names.forEach((function(i){var l=u[Nr[i].getterName]();l&&l.off&&l.off()})),i.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},u.createEl=function createEl(){var u,l=this.tag,c=this.playerElIngest_=l.parentNode&&l.parentNode.hasAttribute&&l.parentNode.hasAttribute("data-vjs-player"),h="video-js"===this.tag.tagName.toLowerCase();c?u=this.el_=l.parentNode:h||(u=this.el_=i.prototype.createEl.call(this,"div"));var p=getAttributes(l);if(h){for(u=this.el_=l,l=this.tag=v().createElement("video");u.children.length;)l.appendChild(u.firstChild);hasClass(u,"video-js")||addClass(u,"video-js"),u.appendChild(l),c=this.playerElIngest_=u,Object.keys(u).forEach((function(i){try{l[i]=u[i]}catch(i){}}))}if(l.setAttribute("tabindex","-1"),p.tabindex="-1",(hi||di&&fi)&&(l.setAttribute("role","application"),p.role="application"),l.removeAttribute("width"),l.removeAttribute("height"),"width"in p&&delete p.width,"height"in p&&delete p.height,Object.getOwnPropertyNames(p).forEach((function(i){h&&"class"===i||u.setAttribute(i,p[i]),h&&l.setAttribute(i,p[i])})),l.playerId=l.id,l.id+="_html5_api",l.className="vjs-tech",l.player=u.player=this,this.addClass("vjs-paused"),!0!==m().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ai("vjs-styles-dimensions");var g=Si(".vjs-styles-defaults"),_=Si("head");_.insertBefore(this.styleEl_,g?g.nextSibling:_.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var y=l.getElementsByTagName("a"),b=0;b<y.length;b++){var T=y.item(b);addClass(T,"vjs-hidden"),T.setAttribute("hidden","hidden")}return l.initNetworkState_=l.networkState,l.parentNode&&!c&&l.parentNode.insertBefore(u,l),prependTo(l,u),this.children_.unshift(l),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=u,u},u.crossOrigin=function crossOrigin(i){return i?"anonymous"!==i&&"use-credentials"!==i?(Qt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"'),void 0):(this.techCall_("setCrossOrigin",i),void 0):this.techGet_("crossOrigin")},u.width=function width(i){return this.dimension("width",i)},u.height=function height(i){return this.dimension("height",i)},u.dimension=function dimension(i,u){var l=i+"_";if(void 0===u)return this[l]||0;if(""===u||"auto"===u)return this[l]=void 0,this.updateStyleEl_(),void 0;var c=parseFloat(u);if(isNaN(c))return Qt.error('Improper value "'+u+'" supplied for for '+i),void 0;this[l]=c,this.updateStyleEl_()},u.fluid=function fluid(i){var u=this;if(void 0===i)return!!this.fluid_;this.fluid_=!!i,Hi(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),function addEventedCallback(i,u){Hi(i)?u():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(u))}(this,(function(){u.on(["playerreset","resize"],u.boundUpdateStyleEl_)}))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},u.fill=function fill(i){if(void 0===i)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},u.aspectRatio=function aspectRatio(i){if(void 0===i)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},u.updateStyleEl_=function updateStyleEl_(){if(!0===m().VIDEOJS_NO_DYNAMIC_STYLE){var i="number"==typeof this.width_?this.width_:this.options_.width,u="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();return l&&(i>=0&&(l.width=i),u>=0&&(l.height=u)),void 0}var c,h,p,g=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),v=g[1]/g[0];c=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/v:this.videoWidth()||300,h=void 0!==this.height_?this.height_:c*v,p=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(p),xi(this.styleEl_,"\n      ."+p+" {\n        width: "+c+"px;\n        height: "+h+"px;\n      }\n\n      ."+p+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*v+"%;\n      }\n    ")},u.loadTech_=function loadTech_(i,u){var l=this;this.tech_&&this.unloadTech_();var c=Ji(i),h=i.charAt(0).toLowerCase()+i.slice(1);"Html5"!==c&&this.tag&&(Br.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=c,this.isReady_=!1;var p=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(p=!1);var m={source:u,autoplay:p,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+h+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Nr.names.forEach((function(i){var u=Nr[i];m[u.getterName]=l[u.privateName]})),video_es_assign(m,this.options_[c]),video_es_assign(m,this.options_[h]),video_es_assign(m,this.options_[i.toLowerCase()]),this.tag&&(m.tag=this.tag),u&&u.src===this.cache_.src&&this.cache_.currentTime>0&&(m.startTime=this.cache_.currentTime);var g=Br.getTech(i);if(!g)throw new Error("No Tech named '"+c+"' exists! '"+c+"' should be registered using videojs.registerTech()'");this.tech_=new g(m),this.tech_.ready(Bi(this,this.handleTechReady_),!0),or(this.textTracksJson_||[],this.tech_),Ia.forEach((function(i){l.on(l.tech_,i,(function(u){return l["handleTech"+Ji(i)+"_"](u)}))})),Object.keys(Oa).forEach((function(i){l.on(l.tech_,i,(function(u){if(0===l.tech_.playbackRate()&&l.tech_.seeking())return l.queuedCallbacks_.push({callback:l["handleTech"+Oa[i]+"_"].bind(l),event:u}),void 0;l["handleTech"+Oa[i]+"_"](u)}))})),this.on(this.tech_,"loadstart",(function(i){return l.handleTechLoadStart_(i)})),this.on(this.tech_,"sourceset",(function(i){return l.handleTechSourceset_(i)})),this.on(this.tech_,"waiting",(function(i){return l.handleTechWaiting_(i)})),this.on(this.tech_,"ended",(function(i){return l.handleTechEnded_(i)})),this.on(this.tech_,"seeking",(function(i){return l.handleTechSeeking_(i)})),this.on(this.tech_,"play",(function(i){return l.handleTechPlay_(i)})),this.on(this.tech_,"firstplay",(function(i){return l.handleTechFirstPlay_(i)})),this.on(this.tech_,"pause",(function(i){return l.handleTechPause_(i)})),this.on(this.tech_,"durationchange",(function(i){return l.handleTechDurationChange_(i)})),this.on(this.tech_,"fullscreenchange",(function(i,u){return l.handleTechFullscreenChange_(i,u)})),this.on(this.tech_,"fullscreenerror",(function(i,u){return l.handleTechFullscreenError_(i,u)})),this.on(this.tech_,"enterpictureinpicture",(function(i){return l.handleTechEnterPictureInPicture_(i)})),this.on(this.tech_,"leavepictureinpicture",(function(i){return l.handleTechLeavePictureInPicture_(i)})),this.on(this.tech_,"error",(function(i){return l.handleTechError_(i)})),this.on(this.tech_,"posterchange",(function(i){return l.handleTechPosterChange_(i)})),this.on(this.tech_,"textdata",(function(i){return l.handleTechTextData_(i)})),this.on(this.tech_,"ratechange",(function(i){return l.handleTechRateChange_(i)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===c&&this.tag||prependTo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},u.unloadTech_=function unloadTech_(){var i=this;Nr.names.forEach((function(u){var l=Nr[u];i[l.privateName]=i[l.getterName]()})),this.textTracksJson_=sr(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},u.tech=function tech(i){return void 0===i&&Qt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},u.addTechControlsListeners_=function addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},u.removeTechControlsListeners_=function removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},u.handleTechReady_=function handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},u.handleTechLoadStart_=function handleTechLoadStart_(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},u.manualAutoplay_=function manualAutoplay_(i){var u=this;if(this.tech_&&"string"==typeof i){var l,c=function resolveMuted(){var i=u.muted();u.muted(!0);var l=function restoreMuted(){u.muted(i)};u.playTerminatedQueue_.push(l);var c=u.play();if(isPromise(c))return c.catch((function(i){throw l(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(i||""))}))};if("any"!==i||this.muted()?l="muted"!==i||this.muted()?this.play():c():isPromise(l=this.play())&&(l=l.catch(c)),isPromise(l))return l.then((function(){u.trigger({type:"autoplay-success",autoplay:i})})).catch((function(){u.trigger({type:"autoplay-failure",autoplay:i})}))}},u.updateSourceCaches_=function updateSourceCaches_(i){void 0===i&&(i="");var u=i,l="";"string"!=typeof u&&(u=i.src,l=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],u&&!l&&(l=function findMimetype(i,u){if(!u)return"";if(i.cache_.source.src===u&&i.cache_.source.type)return i.cache_.source.type;var l=i.cache_.sources.filter((function(i){return i.src===u}));if(l.length)return l[0].type;for(var c=i.$$("source"),h=0;h<c.length;h++){var p=c[h];if(p.type&&p.src&&p.src===u)return p.type}return zr(u)}(this,u)),this.cache_.source=mergeOptions$3({},i,{src:u,type:l});for(var c=this.cache_.sources.filter((function(i){return i.src&&i.src===u})),h=[],p=this.$$("source"),m=[],g=0;g<p.length;g++){var v=getAttributes(p[g]);h.push(v),v.src&&v.src===u&&m.push(v.src)}m.length&&!c.length?this.cache_.sources=h:c.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=u},u.handleTechSourceset_=function handleTechSourceset_(i){var u=this;if(!this.changingSrc_){var l=function updateSourceCaches(i){return u.updateSourceCaches_(i)},c=this.currentSource().src,h=i.src;c&&!/^blob:/.test(c)&&/^blob:/.test(h)&&(!this.lastSource_||this.lastSource_.tech!==h&&this.lastSource_.player!==c)&&(l=function updateSourceCaches(){}),l(h),i.src||this.tech_.any(["sourceset","loadstart"],(function(i){if("sourceset"!==i.type){var l=u.techGet("currentSrc");u.lastSource_.tech=l,u.updateSourceCaches_(l)}}))}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},u.hasStarted=function hasStarted(i){if(void 0===i)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},u.handleTechPlay_=function handleTechPlay_(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},u.handleTechRateChange_=function handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(i){return i.callback(i.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},u.handleTechWaiting_=function handleTechWaiting_(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var u=this.currentTime();this.on("timeupdate",(function timeUpdateListener(){u!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",timeUpdateListener))}))},u.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")},u.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},u.handleTechPlaying_=function handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")},u.handleTechSeeking_=function handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")},u.handleTechSeeked_=function handleTechSeeked_(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},u.handleTechFirstPlay_=function handleTechFirstPlay_(){this.options_.starttime&&(Qt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},u.handleTechPause_=function handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},u.handleTechEnded_=function handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},u.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_("duration"))},u.handleTechClick_=function handleTechClick_(i){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,i):this.paused()?silencePromise(this.play()):this.pause()))},u.handleTechDoubleClick_=function handleTechDoubleClick_(i){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(u){return u.contains(i.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},u.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive())},u.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive()},u.handleTechTouchMove_=function handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()},u.handleTechTouchEnd_=function handleTechTouchEnd_(i){i.cancelable&&i.preventDefault()},u.handleStageClick_=function handleStageClick_(){this.reportUserActivity()},u.toggleFullscreenClass_=function toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},u.documentFullscreenChange_=function documentFullscreenChange_(i){var u=i.target.player;if(!u||u===this){var l=this.el(),c=v()[this.fsApi_.fullscreenElement]===l;!c&&l.matches?c=l.matches(":"+this.fsApi_.fullscreen):!c&&l.msMatchesSelector&&(c=l.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(c)}},u.handleTechFullscreenChange_=function handleTechFullscreenChange_(i,u){var l=this;u&&(u.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){l.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(u.isFullscreen))},u.handleTechFullscreenError_=function handleTechFullscreenError_(i,u){this.trigger("fullscreenerror",u)},u.togglePictureInPictureClass_=function togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},u.handleTechEnterPictureInPicture_=function handleTechEnterPictureInPicture_(i){this.isInPictureInPicture(!0)},u.handleTechLeavePictureInPicture_=function handleTechLeavePictureInPicture_(i){this.isInPictureInPicture(!1)},u.handleTechError_=function handleTechError_(){var i=this.tech_.error();this.error(i)},u.handleTechTextData_=function handleTechTextData_(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},u.getCache=function getCache(){return this.cache_},u.resetCache_=function resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},u.techCall_=function techCall_(i,u){this.ready((function(){if(i in qr)return function set(i,u,l,c){return u[l](i.reduce(middlewareIterator(l),c))}(this.middleware_,this.tech_,i,u);if(i in Wr)return mediate(this.middleware_,this.tech_,i,u);try{this.tech_&&this.tech_[i](u)}catch(i){throw Qt(i),i}}),!0)},u.techGet_=function techGet_(i){if(this.tech_&&this.tech_.isReady_){if(i in Hr)return function get(i,u,l){return i.reduceRight(middlewareIterator(l),u[l]())}(this.middleware_,this.tech_,i);if(i in Wr)return mediate(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(u){if(void 0===this.tech_[i])throw Qt("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",u),u;if("TypeError"===u.name)throw Qt("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",u),this.tech_.isReady_=!1,u;throw Qt(u),u}}},u.play=function play(){var i=this,u=this.options_.Promise||m().Promise;return u?new u((function(u){i.play_(u)})):this.play_()},u.play_=function play_(i){var u=this;void 0===i&&(i=silencePromise),this.playCallbacks_.push(i);var l=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),c=Boolean(yi||_i);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!l)return this.waitToPlay_=function(i){u.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!l&&c&&this.load(),void 0;var h=this.techGet_("play");c&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===h?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(h)},u.runPlayTerminatedQueue_=function runPlayTerminatedQueue_(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach((function(i){i()}))},u.runPlayCallbacks_=function runPlayCallbacks_(i){var u=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],u.forEach((function(u){u(i)}))},u.pause=function pause(){this.techCall_("pause")},u.paused=function paused(){return!1!==this.techGet_("paused")},u.played=function played(){return this.techGet_("played")||createTimeRanges(0,0)},u.scrubbing=function scrubbing(i){if(void 0===i)return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},u.currentTime=function currentTime(i){return void 0!==i?(i<0&&(i=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",i),this.cache_.initTime=0,void 0):(this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_),void 0)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},u.applyInitTime_=function applyInitTime_(){this.currentTime(this.cache_.initTime)},u.duration=function duration(i){if(void 0===i)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(i=parseFloat(i))<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},u.remainingTime=function remainingTime(){return this.duration()-this.currentTime()},u.remainingTimeDisplay=function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())},u.buffered=function buffered(){var buffered=this.techGet_("buffered");return buffered&&buffered.length||(buffered=createTimeRanges(0,0)),buffered},u.bufferedPercent=function bufferedPercent$1(){return bufferedPercent(this.buffered(),this.duration())},u.bufferedEnd=function bufferedEnd(){var i=this.buffered(),u=this.duration(),l=i.end(i.length-1);return l>u&&(l=u),l},u.volume=function volume(i){var u;return void 0!==i?(u=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=u,this.techCall_("setVolume",u),u>0&&this.lastVolume_(u),void 0):(u=parseFloat(this.techGet_("volume")),isNaN(u)?1:u)},u.muted=function muted(i){return void 0!==i?(this.techCall_("setMuted",i),void 0):this.techGet_("muted")||!1},u.defaultMuted=function defaultMuted(i){return void 0!==i?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},u.lastVolume_=function lastVolume_(i){return void 0!==i&&0!==i?(this.cache_.lastVolume=i,void 0):this.cache_.lastVolume},u.supportsFullScreen=function supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1},u.isFullscreen=function isFullscreen(i){if(void 0!==i){var u=this.isFullscreen_;return this.isFullscreen_=Boolean(i),this.isFullscreen_!==u&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_(),void 0}return this.isFullscreen_},u.requestFullscreen=function requestFullscreen(i){var u=this.options_.Promise||m().Promise;if(u){var l=this;return new u((function(u,c){function offHandler(){l.off("fullscreenerror",errorHandler),l.off("fullscreenchange",changeHandler)}function changeHandler(){offHandler(),u()}function errorHandler(i,u){offHandler(),c(u)}l.one("fullscreenchange",changeHandler),l.one("fullscreenerror",errorHandler);var h=l.requestFullscreenHelper_(i);h&&(h.then(offHandler,offHandler),h.then(u,c))}))}return this.requestFullscreenHelper_()},u.requestFullscreenHelper_=function requestFullscreenHelper_(i){var u,l=this;if(this.fsApi_.prefixed||(u=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==i&&(u=i)),this.fsApi_.requestFullscreen){var c=this.el_[this.fsApi_.requestFullscreen](u);return c&&c.then((function(){return l.isFullscreen(!0)}),(function(){return l.isFullscreen(!1)})),c}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},u.exitFullscreen=function exitFullscreen(){var i=this.options_.Promise||m().Promise;if(i){var u=this;return new i((function(i,l){function offHandler(){u.off("fullscreenerror",errorHandler),u.off("fullscreenchange",changeHandler)}function changeHandler(){offHandler(),i()}function errorHandler(i,u){offHandler(),l(u)}u.one("fullscreenchange",changeHandler),u.one("fullscreenerror",errorHandler);var c=u.exitFullscreenHelper_();c&&(c.then(offHandler,offHandler),c.then(i,l))}))}return this.exitFullscreenHelper_()},u.exitFullscreenHelper_=function exitFullscreenHelper_(){var i=this;if(this.fsApi_.requestFullscreen){var u=v()[this.fsApi_.exitFullscreen]();return u&&silencePromise(u.then((function(){return i.isFullscreen(!1)}))),u}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},u.enterFullWindow=function enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=v().documentElement.style.overflow,on(v(),"keydown",this.boundFullWindowOnEscKey_),v().documentElement.style.overflow="hidden",addClass(v().body,"vjs-full-window"),this.trigger("enterFullWindow")},u.fullWindowOnEscKey=function fullWindowOnEscKey(i){y().isEventKey(i,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},u.exitFullWindow=function exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off(v(),"keydown",this.boundFullWindowOnEscKey_),v().documentElement.style.overflow=this.docOrigOverflow,removeClass(v().body,"vjs-full-window"),this.trigger("exitFullWindow")},u.disablePictureInPicture=function disablePictureInPicture(i){if(void 0===i)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},u.isInPictureInPicture=function isInPictureInPicture(i){return void 0!==i?(this.isInPictureInPicture_=!!i,this.togglePictureInPictureClass_(),void 0):!!this.isInPictureInPicture_},u.requestPictureInPicture=function requestPictureInPicture(){if("pictureInPictureEnabled"in v()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},u.exitPictureInPicture=function exitPictureInPicture(){if("pictureInPictureEnabled"in v())return v().exitPictureInPicture()},u.handleKeyDown=function handleKeyDown(i){var u=this.options_.userActions;if(u&&u.hotkeys){(function excludeElement(i){var u=i.tagName.toLowerCase();if(i.isContentEditable)return!0;if("input"===u)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type);return-1!==["textarea"].indexOf(u)})(this.el_.ownerDocument.activeElement)||("function"==typeof u.hotkeys?u.hotkeys.call(this,i):this.handleHotkeys(i))}},u.handleHotkeys=function handleHotkeys(i){var u=this.options_.userActions?this.options_.userActions.hotkeys:{},l=u.fullscreenKey,c=u.muteKey,h=void 0===c?function(i){return y().isEventKey(i,"m")}:c,p=u.playPauseKey,m=void 0===p?function(i){return y().isEventKey(i,"k")||y().isEventKey(i,"Space")}:p;if((void 0===l?function(i){return y().isEventKey(i,"f")}:l).call(this,i)){i.preventDefault(),i.stopPropagation();var g=rr.getComponent("FullscreenToggle");!1!==v()[this.fsApi_.fullscreenEnabled]&&g.prototype.handleClick.call(this,i)}else if(h.call(this,i)){i.preventDefault(),i.stopPropagation(),rr.getComponent("MuteToggle").prototype.handleClick.call(this,i)}else if(m.call(this,i)){i.preventDefault(),i.stopPropagation(),rr.getComponent("PlayToggle").prototype.handleClick.call(this,i)}},u.canPlayType=function canPlayType(i){for(var u,l=0,c=this.options_.techOrder;l<c.length;l++){var h=c[l],p=Br.getTech(h);if(p||(p=rr.getComponent(h)),p){if(p.isSupported()&&(u=p.canPlayType(i)))return u}else Qt.error('The "'+h+'" tech is undefined. Skipped browser support check for that tech.')}return""},u.selectSource=function selectSource(i){var u,l=this,c=this.options_.techOrder.map((function(i){return[i,Br.getTech(i)]})).filter((function(i){var u=i[0],l=i[1];return l?l.isSupported():(Qt.error('The "'+u+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),h=function findFirstPassingTechSourcePair(i,u,l){var c;return i.some((function(i){return u.some((function(u){if(c=l(i,u))return!0}))})),c},p=function finder(i,u){var c=i[0];if(i[1].canPlaySource(u,l.options_[c.toLowerCase()]))return{source:u,tech:c}};return u=this.options_.sourceOrder?h(i,c,function flip(i){return function(u,l){return i(l,u)}}(p)):h(c,i,p),u||!1},u.handleSrc_=function handleSrc_(i,u){var l=this;if(void 0===i)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var c=Xr(i);if(!c.length)return this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void 0;if(this.changingSrc_=!0,u||(this.cache_.sources=c),this.updateSourceCaches_(c[0]),setSource(this,c[0],(function(i,h){if(l.middleware_=h,u||(l.cache_.sources=c),l.updateSourceCaches_(i),l.src_(i))return c.length>1?l.handleSrc_(c.slice(1)):(l.changingSrc_=!1,l.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),l.triggerReady(),void 0);!function setTech(i,u){i.forEach((function(i){return i.setTech&&i.setTech(u)}))}(h,l.tech_)})),this.options_.retryOnError&&c.length>1){var h=function retry(){l.error(null),l.handleSrc_(c.slice(1),!0)},p=function stopListeningForErrors(){l.off("error",h)};this.one("error",h),this.one("playing",p),this.resetRetryOnError_=function(){l.off("error",h),l.off("playing",p)}}},u.src=function src(i){return this.handleSrc_(i,!1)},u.src_=function src_(i){var u=this,l=this.selectSource([i]);return!l||(function titleCaseEquals(i,u){return Ji(i)===Ji(u)}(l.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(l.tech,l.source),this.tech_.ready((function(){u.changingSrc_=!1})),!1))},u.load=function load(){this.techCall_("load")},u.reset=function reset(){var i=this,u=this.options_.Promise||m().Promise;this.paused()||!u?this.doReset_():silencePromise(this.play().then((function(){return i.doReset_()})))},u.doReset_=function doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Hi(this)&&this.trigger("playerreset")},u.resetControlBarUI_=function resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},u.resetProgressBar_=function resetProgressBar_(){this.currentTime(0);var i=this.controlBar||{},u=i.durationDisplay,l=i.remainingTimeDisplay;u&&u.updateContent(),l&&l.updateContent()},u.resetPlaybackRate_=function resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},u.resetVolumeBar_=function resetVolumeBar_(){this.volume(1),this.trigger("volumechange")},u.currentSources=function currentSources(){var i=this.currentSource(),u=[];return 0!==Object.keys(i).length&&u.push(i),this.cache_.sources||u},u.currentSource=function currentSource(){return this.cache_.source||{}},u.currentSrc=function currentSrc(){return this.currentSource()&&this.currentSource().src||""},u.currentType=function currentType(){return this.currentSource()&&this.currentSource().type||""},u.preload=function preload(i){return void 0!==i?(this.techCall_("setPreload",i),this.options_.preload=i,void 0):this.techGet_("preload")},u.autoplay=function autoplay(i){if(void 0===i)return this.options_.autoplay||!1;var u;"string"==typeof i&&/(any|play|muted)/.test(i)||!0===i&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_("string"==typeof i?i:"play"),u=!1):this.options_.autoplay=!!i,u=void 0===u?this.options_.autoplay:u,this.tech_&&this.techCall_("setAutoplay",u)},u.playsinline=function playsinline(i){return void 0!==i?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},u.loop=function loop(i){return void 0!==i?(this.techCall_("setLoop",i),this.options_.loop=i,void 0):this.techGet_("loop")},u.poster=function poster(i){if(void 0===i)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},u.handleTechPosterChange_=function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},u.controls=function controls(i){if(void 0===i)return!!this.controls_;this.controls_!==(i=!!i)&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},u.usingNativeControls=function usingNativeControls(i){if(void 0===i)return!!this.usingNativeControls_;this.usingNativeControls_!==(i=!!i)&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},u.error=function error(i){var u=this;if(void 0===i)return this.error_||null;if(jt("beforeerror").forEach((function(l){var c=l(u,i);if((!video_es_isObject(c)||Array.isArray(c))&&"string"!=typeof c&&"number"!=typeof c&&null!==c)return u.log.error("please return a value that MediaError expects in beforeerror hooks"),void 0;i=c})),this.options_.suppressNotSupportedError&&i&&4===i.code){var l=function triggerSuppressedError(){this.error(i)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],l),this.one("loadstart",(function(){this.off(["click","touchstart"],l)})),void 0}if(null===i)return this.error_=i,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close(),void 0;this.error_=new MediaError(i),this.addClass("vjs-error"),Qt.error("(CODE:"+this.error_.code+" "+MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),jt("error").forEach((function(i){return i(u,u.error_)}))},u.reportUserActivity=function reportUserActivity(i){this.userActivity_=!0},u.userActive=function userActive(i){if(void 0===i)return this.userActive_;if((i=!!i)!==this.userActive_){if(this.userActive_=i,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive"),void 0;this.tech_&&this.tech_.one("mousemove",(function(i){i.stopPropagation(),i.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},u.listenForUserActivity_=function listenForUserActivity_(){var i,u,l,c=Bi(this,this.reportUserActivity),h=function handleMouseUpAndMouseLeave(u){c(),this.clearInterval(i)};this.on("mousedown",(function handleMouseDown(){c(),this.clearInterval(i),i=this.setInterval(c,250)})),this.on("mousemove",(function handleMouseMove(i){i.screenX===u&&i.screenY===l||(u=i.screenX,l=i.screenY,c())})),this.on("mouseup",h),this.on("mouseleave",h);var p,m=this.getChild("controlBar");!m||_i||ai||(m.on("mouseenter",(function(i){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),m.on("mouseleave",(function(i){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",c),this.on("keyup",c),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(p);var i=this.options_.inactivityTimeout;i<=0||(p=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),i))}}),250)},u.playbackRate=function playbackRate(i){return void 0!==i?(this.techCall_("setPlaybackRate",i),void 0):this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},u.defaultPlaybackRate=function defaultPlaybackRate(i){return void 0!==i?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},u.isAudio=function isAudio(i){return void 0!==i?(this.isAudio_=!!i,void 0):!!this.isAudio_},u.enableAudioOnlyUI_=function enableAudioOnlyUI_(){var i=this;this.addClass("vjs-audio-only-mode");var u=this.children(),l=this.getChild("ControlBar"),c=l&&l.currentHeight();u.forEach((function(u){u!==l&&u.el_&&!u.hasClass("vjs-hidden")&&(u.hide(),i.audioOnlyCache_.hiddenChildren.push(u))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(c),this.trigger("audioonlymodechange")},u.disableAudioOnlyUI_=function disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(i){return i.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},u.audioOnlyMode=function audioOnlyMode(i){var u=this;if("boolean"!=typeof i||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var l=this.options_.Promise||m().Promise;if(l){if(i){var c=[];return this.isInPictureInPicture()&&c.push(this.exitPictureInPicture()),this.isFullscreen()&&c.push(this.exitFullscreen()),this.audioPosterMode()&&c.push(this.audioPosterMode(!1)),l.all(c).then((function(){return u.enableAudioOnlyUI_()}))}return l.resolve().then((function(){return u.disableAudioOnlyUI_()}))}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},u.enablePosterModeUI_=function enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},u.disablePosterModeUI_=function disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},u.audioPosterMode=function audioPosterMode(i){var u=this;if("boolean"!=typeof i||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var l=this.options_.Promise||m().Promise;return l?i?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){u.enablePosterModeUI_()})):l.resolve().then((function(){u.enablePosterModeUI_()})):l.resolve().then((function(){u.disablePosterModeUI_()})):i?(this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_(),void 0):(this.disablePosterModeUI_(),void 0)},u.addTextTrack=function addTextTrack(i,u,l){if(this.tech_)return this.tech_.addTextTrack(i,u,l)},u.addRemoteTextTrack=function addRemoteTextTrack(i,u){if(this.tech_)return this.tech_.addRemoteTextTrack(i,u)},u.removeRemoteTextTrack=function removeRemoteTextTrack(i){void 0===i&&(i={});var u=i.track;if(u||(u=i),this.tech_)return this.tech_.removeRemoteTextTrack(u)},u.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")},u.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},u.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},u.language=function language(i){if(void 0===i)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),Hi(this)&&this.trigger("languagechange"))},u.languages=function languages(){return mergeOptions$3(Player.prototype.options_.languages,this.languages_)},u.toJSON=function toJSON(){var i=mergeOptions$3(this.options_),u=i.tracks;i.tracks=[];for(var l=0;l<u.length;l++){var c=u[l];(c=mergeOptions$3(c)).player=void 0,i.tracks[l]=c}return i},u.createModal=function createModal(i,u){var l=this;(u=u||{}).content=i||"";var c=new lr(this,u);return this.addChild(c),c.on("dispose",(function(){l.removeChild(c)})),c.open(),c},u.updateCurrentBreakpoint_=function updateCurrentBreakpoint_(){if(this.responsive())for(var i=this.currentBreakpoint(),u=this.currentWidth(),l=0;l<La.length;l++){var c=La[l];if(u<=this.breakpoints_[c]){if(i===c)return;i&&this.removeClass(Da[i]),this.addClass(Da[c]),this.breakpoint_=c;break}}},u.removeCurrentBreakpoint_=function removeCurrentBreakpoint_(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},u.breakpoints=function breakpoints(i){return void 0===i||(this.breakpoint_="",this.breakpoints_=video_es_assign({},Va,i),this.updateCurrentBreakpoint_()),video_es_assign(this.breakpoints_)},u.responsive=function responsive(i){return void 0===i?this.responsive_:(i=Boolean(i))!==this.responsive_?(this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i):void 0},u.currentBreakpoint=function currentBreakpoint(){return this.breakpoint_},u.currentBreakpointClass=function currentBreakpointClass(){return Da[this.breakpoint_]||""},u.loadMedia=function loadMedia(i,u){var l=this;if(i&&"object"==typeof i){this.reset(),this.cache_.media=mergeOptions$3(i);var c=this.cache_.media,h=c.poster,p=c.src,m=c.textTracks;!c.artwork&&h&&(this.cache_.media.artwork=[{src:h,type:zr(h)}]),p&&this.src(p),h&&this.poster(h),Array.isArray(m)&&m.forEach((function(i){return l.addRemoteTextTrack(i,!1)})),this.ready(u)}},u.getMedia=function getMedia(){if(!this.cache_.media){var i=this.poster(),u={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(i){return{kind:i.kind,label:i.label,language:i.language,src:i.src}}))};return i&&(u.poster=i,u.artwork=[{src:u.poster,type:zr(u.poster)}]),u}return mergeOptions$3(this.cache_.media)},Player.getTagSettings=function getTagSettings(i){var u={sources:[],tracks:[]},l=getAttributes(i),c=l["data-setup"];if(hasClass(i,"vjs-fill")&&(l.fill=!0),hasClass(i,"vjs-fluid")&&(l.fluid=!0),null!==c){var h=T()(c||"{}"),p=h[0],m=h[1];p&&Qt.error(p),video_es_assign(l,m)}if(video_es_assign(u,l),i.hasChildNodes())for(var g=i.childNodes,v=0,_=g.length;v<_;v++){var y=g[v],b=y.nodeName.toLowerCase();"source"===b?u.sources.push(getAttributes(y)):"track"===b&&u.tracks.push(getAttributes(y))}return u},u.flexNotSupported_=function flexNotSupported_(){var i=v().createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},u.debug=function debug(i){if(void 0===i)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},u.playbackRates=function playbackRates(i){if(void 0===i)return this.cache_.playbackRates;Array.isArray(i)&&i.every((function(i){return"number"==typeof i}))&&(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},Player}(rr);Nr.names.forEach((function(i){var u=Nr[i];Ra.prototype[u.getterName]=function(){return this.tech_?this.tech_[u.getterName]():(this[u.privateName]=this[u.privateName]||new u.ListClass,this[u.privateName])}})),Ra.prototype.crossorigin=Ra.prototype.crossOrigin,Ra.players={};var Ma=m().navigator;Ra.prototype.options_={techOrder:Br.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ma&&(Ma.languages&&Ma.languages[0]||Ma.userLanguage||Ma.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(i){Ra.prototype[i]=function(){return this.techGet_(i)}})),Ia.forEach((function(i){Ra.prototype["handleTech"+Ji(i)+"_"]=function(){return this.trigger(i)}})),rr.registerComponent("Player",Ra);var Na="plugin",Ba="activePlugins_",Fa={},Ua=function pluginExists(i){return Fa.hasOwnProperty(i)},ja=function getPlugin(i){return Ua(i)?Fa[i]:void 0},Ha=function markPluginAsActive(i,u){i[Ba]=i[Ba]||{},i[Ba][u]=!0},qa=function triggerSetupEvent(i,u,l){var c=(l?"before":"")+"pluginsetup";i.trigger(c,u),i.trigger(c+":"+u.name,u)},Wa=function createPluginFactory(i,u){return u.prototype.name=i,function(){qa(this,{name:i,plugin:u,instance:null},!0);for(var l=arguments.length,c=new Array(l),h=0;h<l;h++)c[h]=arguments[h];var p=_construct(u,[this].concat(c));return this[i]=function(){return p},qa(this,p.getEventHash()),p}},Ga=function(){function Plugin(i){if(this.constructor===Plugin)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,this.log||(this.log=this.player.log.createLogger(this.name)),evented(this),delete this.trigger,stateful(this,this.constructor.defaultState),Ha(i,this.name),this.dispose=this.dispose.bind(this),i.on("dispose",this.dispose)}var i=Plugin.prototype;return i.version=function version(){return this.constructor.VERSION},i.getEventHash=function getEventHash(i){return void 0===i&&(i={}),i.name=this.name,i.plugin=this.constructor,i.instance=this,i},i.trigger=function trigger$1(i,u){return void 0===u&&(u={}),trigger(this.eventBusEl_,i,this.getEventHash(u))},i.handleStateChanged=function handleStateChanged(i){},i.dispose=function dispose(){var i=this.name,u=this.player;this.trigger("dispose"),this.off(),u.off("dispose",this.dispose),u[Ba][i]=!1,this.player=this.state=null,u[i]=Wa(i,Fa[i])},Plugin.isBasic=function isBasic(i){var u="string"==typeof i?ja(i):i;return"function"==typeof u&&!Plugin.prototype.isPrototypeOf(u.prototype)},Plugin.registerPlugin=function registerPlugin(i,u){if("string"!=typeof i)throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(Ua(i))Qt.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(Ra.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if("function"!=typeof u)throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof u+".");return Fa[i]=u,i!==Na&&(Ra.prototype[i]=Plugin.isBasic(u)?function createBasicPlugin(i,u){var l=function basicPluginWrapper(){qa(this,{name:i,plugin:u,instance:null},!0);var l=u.apply(this,arguments);return Ha(this,i),qa(this,{name:i,plugin:u,instance:l}),l};return Object.keys(u).forEach((function(i){l[i]=u[i]})),l}(i,u):Wa(i,u)),u},Plugin.deregisterPlugin=function deregisterPlugin(i){if(i===Na)throw new Error("Cannot de-register base plugin.");Ua(i)&&(delete Fa[i],delete Ra.prototype[i])},Plugin.getPlugins=function getPlugins(i){var u;return void 0===i&&(i=Object.keys(Fa)),i.forEach((function(i){var l=ja(i);l&&((u=u||{})[i]=l)})),u},Plugin.getPluginVersion=function getPluginVersion(i){var u=ja(i);return u&&u.VERSION||""},Plugin}();Ga.getPlugin=ja,Ga.BASE_PLUGIN_NAME=Na,Ga.registerPlugin(Na,Ga),Ra.prototype.usingPlugin=function(i){return!!this[Ba]&&!0===this[Ba][i]},Ra.prototype.hasPlugin=function(i){return!!Ua(i)};var za=!1,Xa=function normalizeId(i){return 0===i.indexOf("#")?i.slice(1):i};function videojs(i,u,l){var c=videojs.getPlayer(i);if(c)return u&&Qt.warn('Player "'+i+'" is already initialised. Options will not be applied.'),l&&c.ready(l),c;var h="string"==typeof i?Si("#"+Xa(i)):i;if(!isEl(h))throw new TypeError("The element or ID supplied is not valid. (videojs)");h.ownerDocument.defaultView&&h.ownerDocument.body.contains(h)||Qt.warn("The element supplied is not included in the DOM"),!0===(u=u||{}).restoreEl&&(u.restoreEl=(h.parentNode&&h.parentNode.hasAttribute("data-vjs-player")?h.parentNode:h).cloneNode(!0)),jt("beforesetup").forEach((function(i){var l=i(h,mergeOptions$3(u));if(!video_es_isObject(l)||Array.isArray(l))return Qt.error("please return an object in beforesetup hooks"),void 0;u=mergeOptions$3(u,l)}));var p=rr.getComponent("Player");return c=new p(h,u,l),jt("setup").forEach((function(i){return i(c)})),c}if(videojs.hooks_=Ut,videojs.hooks=jt,videojs.hook=function hook(i,u){jt(i,u)},videojs.hookOnce=function hookOnce(i,u){jt(i,[].concat(u).map((function(u){return function wrapper(){return Ht(i,wrapper),u.apply(void 0,arguments)}})))},videojs.removeHook=Ht,!0!==m().VIDEOJS_NO_DYNAMIC_STYLE&&isReal()){var Ka=Si(".vjs-styles-defaults");if(!Ka){Ka=Ai("vjs-styles-defaults");var Qa=Si("head");Qa&&Qa.insertBefore(Ka,Qa.firstChild),xi(Ka,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}autoSetupTimeout(1,videojs),videojs.VERSION=Ft,videojs.options=Ra.prototype.options_,videojs.getPlayers=function(){return Ra.players},videojs.getPlayer=function(i){var u,l=Ra.players;if("string"==typeof i){var c=Xa(i),h=l[c];if(h)return h;u=Si("#"+c)}else u=i;if(isEl(u)){var p=u.player,m=u.playerId;if(p||l[m])return p||l[m]}},videojs.getAllPlayers=function(){return Object.keys(Ra.players).map((function(i){return Ra.players[i]})).filter(Boolean)},videojs.players=Ra.players,videojs.getComponent=rr.getComponent,videojs.registerComponent=function(i,u){Br.isTech(u)&&Qt.warn("The "+i+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),rr.registerComponent.call(rr,i,u)},videojs.getTech=Br.getTech,videojs.registerTech=Br.registerTech,videojs.use=function use(i,u){Fr[i]=Fr[i]||[],Fr[i].push(u)},Object.defineProperty(videojs,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(videojs.middleware,"TERMINATOR",{value:jr,writeable:!1,enumerable:!0}),videojs.browser=bi,videojs.TOUCH_ENABLED=mi,videojs.extend=function extend(i,u){void 0===u&&(u={}),za||(Qt.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),za=!0);var l=function subClass(){i.apply(this,arguments)},c={};for(var h in"object"==typeof u?(u.constructor!==Object.prototype.constructor&&(l=u.constructor),c=u):"function"==typeof u&&(l=u),function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),u&&_setPrototypeOf(i,u)}(l,i),i&&(l.super_=i),c)c.hasOwnProperty(h)&&(l.prototype[h]=c[h]);return l},videojs.mergeOptions=mergeOptions$3,videojs.bind=Bi,videojs.registerPlugin=Ga.registerPlugin,videojs.deregisterPlugin=Ga.deregisterPlugin,videojs.plugin=function(i,u){return Qt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ga.registerPlugin(i,u)},videojs.getPlugins=Ga.getPlugins,videojs.getPlugin=Ga.getPlugin,videojs.getPluginVersion=Ga.getPluginVersion,videojs.addLanguage=function(i,u){var l;return i=(""+i).toLowerCase(),(videojs.options.languages=mergeOptions$3(videojs.options.languages,((l={})[i]=u,l)))[i]},videojs.log=Qt,videojs.createLogger=Yt,videojs.createTimeRange=videojs.createTimeRanges=createTimeRanges,videojs.formatTime=formatTime,videojs.setFormatTime=function setFormatTime(i){un=i},videojs.resetFormatTime=function resetFormatTime(){un=sn},videojs.parseUrl=Er,videojs.isCrossOrigin=Pr,videojs.EventTarget=Ui,videojs.on=on,videojs.one=one,videojs.off=off,videojs.trigger=trigger,videojs.xhr=k(),videojs.TextTrack=Or,videojs.AudioTrack=Lr,videojs.VideoTrack=Dr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(i){videojs[i]=function(){return Qt.warn("videojs."+i+"() is deprecated; use videojs.dom."+i+"() instead"),Ei[i].apply(null,arguments)}})),videojs.computedStyle=computedStyle,videojs.dom=Ei,videojs.url=Ar,videojs.defineLazyProperty=Aa,videojs.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Ya=x,$a=function resolveManifestRedirect(i,u,l){return i&&l&&l.responseURL&&u!==l.responseURL?l.responseURL:u},Ja=function logger(i){return videojs.log.debug?videojs.log.debug.bind(videojs,"VHS:",i+" >"):function(){}},Za=1/30,es=.1,is=function filterRanges(i,u){var l,c=[];if(i&&i.length)for(l=0;l<i.length;l++)u(i.start(l),i.end(l))&&c.push([i.start(l),i.end(l)]);return videojs.createTimeRanges(c)},rs=function findRange(i,u){return is(i,(function(i,l){return i-es<=u&&l+es>=u}))},ns=function findNextRange(i,u){return is(i,(function(i){return i-Za>=u}))},as=function printableRange(i){var u=[];if(!i||!i.length)return"";for(var l=0;l<i.length;l++)u.push(i.start(l)+" => "+i.end(l));return u.join(", ")},ss=function timeRangesToArray(i){for(var u=[],l=0;l<i.length;l++)u.push({start:i.start(l),end:i.end(l)});return u},os=function lastBufferedEnd(i){if(i&&i.length&&i.end)return i.end(i.length-1)},us=function timeAheadOf(i,u){var l=0;if(!i||!i.length)return l;for(var c=0;c<i.length;c++){var h=i.start(c),p=i.end(c);u>p||(l+=u>h&&u<=p?p-u:p-h)}return l},ls=videojs.createTimeRange,ds=function segmentDurationWithParts(i,u){if(!u.preload)return u.duration;var l=0;return(u.parts||[]).forEach((function(i){l+=i.duration})),(u.preloadHints||[]).forEach((function(u){"PART"===u.type&&(l+=i.partTargetDuration)})),l},cs=function getPartsAndSegments(i){return(i.segments||[]).reduce((function(i,u,l){return u.parts?u.parts.forEach((function(c,h){i.push({duration:c.duration,segmentIndex:l,partIndex:h,part:c,segment:u})})):i.push({duration:u.duration,segmentIndex:l,partIndex:null,segment:u,part:null}),i}),[])},hs=function getLastParts(i){var u=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return u&&u.parts||[]},ps=function getKnownPartCount(i){var u=i.preloadSegment;if(u){var l=u.parts,c=(u.preloadHints||[]).reduce((function(i,u){return i+("PART"===u.type?1:0)}),0);return c+=l&&l.length?l.length:0}},fs=function liveEdgeDelay(i,u){if(u.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;var l=hs(u).length>0;return l&&u.serverControl&&u.serverControl.partHoldBack?u.serverControl.partHoldBack:l&&u.partTargetDuration?3*u.partTargetDuration:u.serverControl&&u.serverControl.holdBack?u.serverControl.holdBack:u.targetDuration?3*u.targetDuration:0},ms=function intervalDuration(i,u,l){if(void 0===u&&(u=i.mediaSequence+i.segments.length),u<i.mediaSequence)return 0;var c=function backwardDuration(i,u){var l=0,c=u-i.mediaSequence,h=i.segments[c];if(h){if(void 0!==h.start)return{result:h.start,precise:!0};if(void 0!==h.end)return{result:h.end-h.duration,precise:!0}}for(;c--;){if(void 0!==(h=i.segments[c]).end)return{result:l+h.end,precise:!0};if(l+=ds(i,h),void 0!==h.start)return{result:l+h.start,precise:!0}}return{result:l,precise:!1}}(i,u);if(c.precise)return c.result;var h=function forwardDuration(i,u){for(var l,c=0,h=u-i.mediaSequence;h<i.segments.length;h++){if(void 0!==(l=i.segments[h]).start)return{result:l.start-c,precise:!0};if(c+=ds(i,l),void 0!==l.end)return{result:l.end-c,precise:!0}}return{result:-1,precise:!1}}(i,u);return h.precise?h.result:c.result+l},gs=function duration(i,u,l){if(!i)return 0;if("number"!=typeof l&&(l=0),void 0===u){if(i.totalDuration)return i.totalDuration;if(!i.endList)return m()[1/0]}return ms(i,u,l)},vs=function sumDurations(i){var u=i.defaultDuration,l=i.durationList,c=i.startIndex,h=i.endIndex,p=0;if(c>h){var m=[h,c];c=m[0],h=m[1]}if(c<0){for(var g=c;g<Math.min(0,h);g++)p+=u;c=0}for(var v=c;v<h;v++)p+=l[v].duration;return p},_s=function playlistEnd(i,u,l,c){if(!i||!i.segments)return null;if(i.endList)return gs(i);if(null===u)return null;var h=ms(i,i.mediaSequence+i.segments.length,u=u||0);return l&&(h-=c="number"==typeof c?c:fs(null,i)),Math.max(0,h)},ys=function isBlacklisted(i){return i.excludeUntil&&i.excludeUntil>Date.now()},bs=function isIncompatible(i){return i.excludeUntil&&i.excludeUntil===1/0},Ts=function isEnabled(i){var u=ys(i);return!i.disabled&&!u},Ss=function hasAttribute(i,u){return u.attributes&&u.attributes[i]},ks=function isLowestEnabledRendition(i,u){if(1===i.playlists.length)return!0;var l=u.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===i.playlists.filter((function(i){return!!Ts(i)&&(i.attributes.BANDWIDTH||0)<l})).length},Es=function playlistMatch(i,u){return!(!i&&!u||!i&&u||i&&!u)&&(i===u||(!(!i.id||!u.id||i.id!==u.id)||(!(!i.resolvedUri||!u.resolvedUri||i.resolvedUri!==u.resolvedUri)||!(!i.uri||!u.uri||i.uri!==u.uri))))},Cs=function someAudioVariant(i,u){var l=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{},c=!1;for(var h in l){for(var p in l[h])if(c=u(l[h][p]))break;if(c)break}return!!c},ws=function isAudioOnly(i){if(!i||!i.playlists||!i.playlists.length)return Cs(i,(function(i){return i.playlists&&i.playlists.length||i.uri}));for(var u=function _loop(u){var l=i.playlists[u],c=l.attributes&&l.attributes.CODECS;return c&&c.split(",").every((function(i){return $(i)}))||Cs(i,(function(i){return Es(l,i)}))?"continue":{v:!1}},l=0;l<i.playlists.length;l++){var c=u(l);if("continue"!==c&&"object"==typeof c)return c.v}return!0},Ps={liveEdgeDelay:fs,duration:gs,seekable:function seekable(i,u,l){var c=u||0,h=_s(i,u,!0,l);return null===h?ls():ls(c,h)},getMediaInfoForTime:function getMediaInfoForTime(i){for(var u=i.playlist,l=i.currentTime,c=i.startingSegmentIndex,h=i.startingPartIndex,p=i.startTime,m=i.experimentalExactManifestTimings,g=l-p,v=cs(u),_=0,y=0;y<v.length;y++){var b=v[y];if(c===b.segmentIndex&&("number"!=typeof h||"number"!=typeof b.partIndex||h===b.partIndex)){_=y;break}}if(g<0){if(_>0)for(var T=_-1;T>=0;T--){var S=v[T];if(g+=S.duration,m){if(g<0)continue}else if(g+Za<=0)continue;return{partIndex:S.partIndex,segmentIndex:S.segmentIndex,startTime:p-vs({defaultDuration:u.targetDuration,durationList:v,startIndex:_,endIndex:T})}}return{partIndex:v[0]&&v[0].partIndex||null,segmentIndex:v[0]&&v[0].segmentIndex||0,startTime:l}}if(_<0){for(var k=_;k<0;k++)if((g-=u.targetDuration)<0)return{partIndex:v[0]&&v[0].partIndex||null,segmentIndex:v[0]&&v[0].segmentIndex||0,startTime:l};_=0}for(var E=_;E<v.length;E++){var C=v[E];if(g-=C.duration,m){if(g>0)continue}else if(g-Za>=0)continue;return{partIndex:C.partIndex,segmentIndex:C.segmentIndex,startTime:p+vs({defaultDuration:u.targetDuration,durationList:v,startIndex:_,endIndex:E})}}return{segmentIndex:v[v.length-1].segmentIndex,partIndex:v[v.length-1].partIndex,startTime:l}},isEnabled:Ts,isDisabled:function isDisabled(i){return i.disabled},isBlacklisted:ys,isIncompatible:bs,playlistEnd:_s,isAes:function isAes(i){for(var u=0;u<i.segments.length;u++)if(i.segments[u].key)return!0;return!1},hasAttribute:Ss,estimateSegmentRequestTime:function estimateSegmentRequestTime(i,u,l,c){return void 0===c&&(c=0),Ss("BANDWIDTH",l)?(i*l.attributes.BANDWIDTH-8*c)/u:NaN},isLowestEnabledRendition:ks,isAudioOnly:ws,playlistMatch:Es,segmentDurationWithParts:ds},As=videojs.log,xs=function createPlaylistID(i,u){return i+"-"+u},Is=function groupID(i,u,l){return"placeholder-uri-"+i+"-"+u+"-"+l},Os=function forEachMediaGroup(i,u){i.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(l){if(i.mediaGroups[l])for(var c in i.mediaGroups[l])for(var h in i.mediaGroups[l][c]){u(i.mediaGroups[l][c][h],l,c,h)}}))},Ls=function setupMediaPlaylist(i){var u=i.playlist,l=i.uri;u.id=i.id,u.playlistErrors_=0,l&&(u.uri=l),u.attributes=u.attributes||{}},Ds=function addPropertiesToMaster(i,u,l){void 0===l&&(l=Is),i.uri=u;for(var c=0;c<i.playlists.length;c++){if(!i.playlists[c].uri)i.playlists[c].uri="placeholder-uri-"+c}var h=ws(i);Os(i,(function(u,c,p,m){if(!u.playlists||!u.playlists.length){if(h&&"AUDIO"===c&&!u.uri)for(var g=0;g<i.playlists.length;g++){var v=i.playlists[g];if(v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===p)return}u.playlists=[_extends({},u)]}u.playlists.forEach((function(u,h){var g=l(c,p,m,u),v=xs(h,g);u.uri?u.resolvedUri=u.resolvedUri||Ya(i.uri,u.uri):(u.uri=0===h?g:v,u.resolvedUri=u.uri),u.id=u.id||v,u.attributes=u.attributes||{},i.playlists[u.id]=u,i.playlists[u.uri]=u}))})),function setupMediaPlaylists(i){for(var u=i.playlists.length;u--;){var l=i.playlists[u];Ls({playlist:l,id:xs(u,l.uri)}),l.resolvedUri=Ya(i.uri,l.uri),i.playlists[l.id]=l,i.playlists[l.uri]=l,l.attributes.BANDWIDTH||As.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(i),function resolveMediaGroupUris(i){Os(i,(function(u){u.uri&&(u.resolvedUri=Ya(i.uri,u.uri))}))}(i)},Vs=videojs.mergeOptions,Rs=function updateSegment(i,u){if(!i)return u;var l=Vs(i,u);if(i.preloadHints&&!u.preloadHints&&delete l.preloadHints,i.parts&&!u.parts)delete l.parts;else if(i.parts&&u.parts)for(var c=0;c<u.parts.length;c++)i.parts&&i.parts[c]&&(l.parts[c]=Vs(i.parts[c],u.parts[c]));return!i.skipped&&u.skipped&&(l.skipped=!1),i.preload&&!u.preload&&(l.preload=!1),l},Ms=function resolveSegmentUris(i,u){!i.resolvedUri&&i.uri&&(i.resolvedUri=Ya(u,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=Ya(u,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=Ya(u,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=Ya(u,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach((function(i){i.resolvedUri||(i.resolvedUri=Ya(u,i.uri))})),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach((function(i){i.resolvedUri||(i.resolvedUri=Ya(u,i.uri))}))},Ns=function getAllSegments(i){var u=i.segments||[],l=i.preloadSegment;if(l&&l.parts&&l.parts.length){if(l.preloadHints)for(var c=0;c<l.preloadHints.length;c++)if("MAP"===l.preloadHints[c].type)return u;l.duration=i.targetDuration,l.preload=!0,u.push(l)}return u},Bs=function isPlaylistUnchanged(i,u){return i===u||i.segments&&u.segments&&i.segments.length===u.segments.length&&i.endList===u.endList&&i.mediaSequence===u.mediaSequence&&i.preloadSegment===u.preloadSegment},Fs=function updateMaster(i,u,l){void 0===l&&(l=Bs);var c=Vs(i,{}),h=c.playlists[u.id];if(!h)return null;if(l(h,u))return null;u.segments=Ns(u);var p=Vs(h,u);if(p.preloadSegment&&!u.preloadSegment&&delete p.preloadSegment,h.segments){if(u.skip){u.segments=u.segments||[];for(var m=0;m<u.skip.skippedSegments;m++)u.segments.unshift({skipped:!0})}p.segments=function updateSegments(i,u,l){var c=i.slice(),h=u.slice();l=l||0;for(var p,m=[],g=0;g<h.length;g++){var v=c[g+l],_=h[g];v?(p=v.map||p,m.push(Rs(v,_))):(p&&!_.map&&(_.map=p),m.push(_))}return m}(h.segments,u.segments,u.mediaSequence-h.mediaSequence)}p.segments.forEach((function(i){Ms(i,p.resolvedUri)}));for(var g=0;g<c.playlists.length;g++)c.playlists[g].id===u.id&&(c.playlists[g]=p);return c.playlists[u.id]=p,c.playlists[u.uri]=p,Os(i,(function(i,l,c,h){if(i.playlists)for(var m=0;m<i.playlists.length;m++)u.id===i.playlists[m].id&&(i.playlists[m]=p)})),c},Us=function refreshDelay(i,u){var l=i.segments||[],c=l[l.length-1],h=c&&c.parts&&c.parts[c.parts.length-1],p=h&&h.duration||c&&c.duration;return u&&p?1e3*p:500*(i.partTargetDuration||i.targetDuration||10)},js=function(i){function PlaylistLoader(u,l,c){var h;if(void 0===c&&(c={}),h=i.call(this)||this,!u)throw new Error("A non-empty playlist URL or object is required");h.logger_=Ja("PlaylistLoader");var p=c.withCredentials,m=void 0!==p&&p,g=c.handleManifestRedirects,v=void 0!==g&&g;h.src=u,h.vhs_=l,h.withCredentials=m,h.handleManifestRedirects=v;var _=l.options_;return h.customTagParsers=_&&_.customTagParsers||[],h.customTagMappers=_&&_.customTagMappers||[],h.experimentalLLHLS=_&&_.experimentalLLHLS||!1,videojs.browser.IE_VERSION&&(h.experimentalLLHLS=!1),h.state="HAVE_NOTHING",h.handleMediaupdatetimeout_=h.handleMediaupdatetimeout_.bind(_assertThisInitialized(h)),h.on("mediaupdatetimeout",h.handleMediaupdatetimeout_),h}_inheritsLoose(PlaylistLoader,i);var u=PlaylistLoader.prototype;return u.handleMediaupdatetimeout_=function handleMediaupdatetimeout_(){var i=this;if("HAVE_METADATA"===this.state){var u=this.media(),l=Ya(this.master.uri,u.uri);this.experimentalLLHLS&&(l=function addLLHLSQueryDirectives(i,u){if(u.endList||!u.serverControl)return i;var l={};if(u.serverControl.canBlockReload){var c=u.preloadSegment,h=u.mediaSequence+u.segments.length;if(c){var p=c.parts||[],g=ps(u)-1;g>-1&&g!==p.length-1&&(l._HLS_part=g),(g>-1||p.length)&&h--}l._HLS_msn=h}if(u.serverControl&&u.serverControl.canSkipUntil&&(l._HLS_skip=u.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(l).length){var v=new(m().URL)(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(i){l.hasOwnProperty(i)&&v.searchParams.set(i,l[i])})),i=v.toString()}return i}(l,u)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:l,withCredentials:this.withCredentials},(function(u,l){if(i.request)return u?i.playlistRequestError(i.request,i.media(),"HAVE_METADATA"):(i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id}),void 0)}))}},u.playlistRequestError=function playlistRequestError(i,u,l){var c=u.uri,h=u.id;this.request=null,l&&(this.state=l),this.error={playlist:this.master.playlists[h],status:i.status,message:"HLS playlist request error at URL: "+c+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},u.parseManifest_=function parseManifest_(i){var u=this,l=i.url;return function parseManifest(i){var u=i.onwarn,l=i.oninfo,c=i.manifestString,h=i.customTagParsers,p=void 0===h?[]:h,m=i.customTagMappers,g=void 0===m?[]:m,v=i.experimentalLLHLS,_=new W;u&&_.on("warn",u),l&&_.on("info",l),p.forEach((function(i){return _.addParser(i)})),g.forEach((function(i){return _.addTagMapper(i)})),_.push(c),_.end();var y=_.manifest;if(v||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(i){y.hasOwnProperty(i)&&delete y[i]})),y.segments&&y.segments.forEach((function(i){["parts","preloadHints"].forEach((function(u){i.hasOwnProperty(u)&&delete i[u]}))}))),!y.targetDuration){var b=10;y.segments&&y.segments.length&&(b=y.segments.reduce((function(i,u){return Math.max(i,u.duration)}),0)),u&&u("manifest has no targetDuration defaulting to "+b),y.targetDuration=b}var T=hs(y);if(T.length&&!y.partTargetDuration){var S=T.reduce((function(i,u){return Math.max(i,u.duration)}),0);u&&(u("manifest has no partTargetDuration defaulting to "+S),As.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),y.partTargetDuration=S}return y}({onwarn:function onwarn(i){return u.logger_("m3u8-parser warn for "+l+": "+i.message)},oninfo:function oninfo(i){return u.logger_("m3u8-parser info for "+l+": "+i.message)},manifestString:i.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},u.haveMetadata=function haveMetadata(i){var u=i.playlistString,l=i.playlistObject,c=i.url,h=i.id;this.request=null,this.state="HAVE_METADATA";var p=l||this.parseManifest_({url:c,manifestString:u});p.lastRequest=Date.now(),Ls({playlist:p,uri:c,id:h});var m=Fs(this.master,p);this.targetDuration=p.partTargetDuration||p.targetDuration,this.pendingMedia_=null,m?(this.master=m,this.media_=this.master.playlists[h]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Us(this.media(),!!m)),this.trigger("loadedplaylist")},u.dispose=function dispose(){this.trigger("dispose"),this.stopRequest(),m().clearTimeout(this.mediaUpdateTimeout),m().clearTimeout(this.finalRenditionTimeout),this.off()},u.stopRequest=function stopRequest(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},u.media=function media(i,u){var l=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(m().clearTimeout(this.finalRenditionTimeout),u){var c=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;return this.finalRenditionTimeout=m().setTimeout(this.media.bind(this,i,!1),c),void 0}var h=this.state,p=!this.media_||i.id!==this.media_.id,g=this.master.playlists[i.id];if(g&&g.endList||i.endList&&i.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,p&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===h?"loadedmetadata":"mediachange")),void 0;if(this.updateMediaUpdateTimeout_(Us(i,!0)),p){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},(function(u,c){if(l.request){if(i.lastRequest=Date.now(),i.resolvedUri=$a(l.handleManifestRedirects,i.resolvedUri,c),u)return l.playlistRequestError(l.request,i,h);l.haveMetadata({playlistString:c.responseText,url:i.uri,id:i.id}),l.trigger("HAVE_MASTER"===h?"loadedmetadata":"mediachange")}}))}},u.pause=function pause(){this.mediaUpdateTimeout&&(m().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},u.load=function load(i){var u=this;this.mediaUpdateTimeout&&(m().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var l=this.media();if(i){var c=l?(l.partTargetDuration||l.targetDuration)/2*1e3:5e3;return this.mediaUpdateTimeout=m().setTimeout((function(){u.mediaUpdateTimeout=null,u.load()}),c),void 0}if(!this.started)return this.start(),void 0;this.trigger(l&&!l.endList?"mediaupdatetimeout":"loadedplaylist")},u.updateMediaUpdateTimeout_=function updateMediaUpdateTimeout_(i){var u=this;this.mediaUpdateTimeout&&(m().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=m().setTimeout((function(){u.mediaUpdateTimeout=null,u.trigger("mediaupdatetimeout"),u.updateMediaUpdateTimeout_(i)}),i))},u.start=function start(){var i=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=m().location.href),this.src.resolvedUri=this.src.uri,setTimeout((function(){i.setupInitialPlaylist(i.src)}),0),void 0;this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(u,l){if(i.request){if(i.request=null,u)return i.error={status:l.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:l.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.src=$a(i.handleManifestRedirects,i.src,l);var c=i.parseManifest_({manifestString:l.responseText,url:i.src});i.setupInitialPlaylist(c)}}))},u.srcUri=function srcUri(){return"string"==typeof this.src?this.src:this.src.uri},u.setupInitialPlaylist=function setupInitialPlaylist(i){if(this.state="HAVE_MASTER",i.playlists)return this.master=i,Ds(this.master,this.srcUri()),i.playlists.forEach((function(i){i.segments=Ns(i),i.segments.forEach((function(u){Ms(u,i.resolvedUri)}))})),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]),void 0;var u=this.srcUri()||m().location.href;this.master=function masterForMedia(i,u){var l=xs(0,u),c={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:m().location.href,resolvedUri:m().location.href,playlists:[{uri:u,id:l,resolvedUri:u,attributes:{}}]};return c.playlists[l]=c.playlists[0],c.playlists[u]=c.playlists[0],c}(0,u),this.haveMetadata({playlistObject:i,url:u,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},PlaylistLoader}(videojs.EventTarget),Hs=videojs.xhr,qs=videojs.mergeOptions,Ws=function callbackWrapper(i,u,l,c){var h="arraybuffer"===i.responseType?i.response:i.responseText;!u&&h&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=h.byteLength||h.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),l.headers&&(i.responseHeaders=l.headers),u&&"ETIMEDOUT"===u.code&&(i.timedout=!0),u||i.aborted||200===l.statusCode||206===l.statusCode||0===l.statusCode||(u=new Error("XHR Failed with a response of: "+(i&&(h||i.responseText)))),c(u,i)},Gs=function xhrFactory(){var i=function XhrFunction(i,u){i=qs({timeout:45e3},i);var l=XhrFunction.beforeRequest||videojs.Vhs.xhr.beforeRequest;if(l&&"function"==typeof l){var c=l(i);c&&(i=c)}var h=(!0===videojs.Vhs.xhr.original?Hs:videojs.Vhs.xhr)(i,(function(i,l){return Ws(h,i,l,u)})),p=h.abort;return h.abort=function(){return h.aborted=!0,p.apply(h,arguments)},h.uri=i.uri,h.requestTime=Date.now(),h};return i.original=!0,i},zs=function segmentXhrHeaders(i){var u={};return i.byterange&&(u.Range=function byterangeStr(i){return"bytes="+i.offset+"-"+("bigint"==typeof i.offset||"bigint"==typeof i.length?m().BigInt(i.offset)+m().BigInt(i.length)-m().BigInt(1):i.offset+i.length-1)}(i.byterange)),u},Xs=function textRange(i,u){return i.start(u)+"-"+i.end(u)},Ks=function formatHexString(i,u){var l=i.toString(16);return"00".substring(0,2-l.length)+l+(u%2?" ":"")},Qs=function formatAsciiString(i){return i>=32&&i<126?String.fromCharCode(i):"."},Ys=function createTransferableMessage(i){var u={};return Object.keys(i).forEach((function(l){var c=i[l];u[l]=se(c)?{bytes:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength}:c})),u},$s=function initSegmentId(i){var u=i.byterange||{length:1/0,offset:0};return[u.length,u.offset,i.resolvedUri].join(",")},Js=function segmentKeyId(i){return i.resolvedUri},Zs=function hexDump(i){for(var u=Array.prototype.slice.call(i),l=16,c="",h=0;h<u.length/l;h++)c+=u.slice(h*l,h*l+l).map(Ks).join("")+" "+u.slice(h*l,h*l+l).map(Qs).join("")+"\n";return c},eo=Object.freeze({__proto__:null,createTransferableMessage:Ys,initSegmentId:$s,segmentKeyId:Js,hexDump:Zs,tagDump:function tagDump(i){return Zs(i.bytes)},textRanges:function textRanges(i){var u,l="";for(u=0;u<i.length;u++)l+=Xs(i,u)+" ";return l}}),to=function getProgramTime(i){var u=i.playlist,l=i.time,c=void 0===l?void 0:l,h=i.callback;if(!h)throw new Error("getProgramTime: callback must be provided");if(!u||void 0===c)return h({message:"getProgramTime: playlist and time must be provided"});var p=function findSegmentForPlayerTime(i,u){if(!u||!u.segments||0===u.segments.length)return null;for(var l,c=0,h=0;h<u.segments.length&&!(i<=(c=(l=u.segments[h]).videoTimingInfo?l.videoTimingInfo.transmuxedPresentationEnd:c+l.duration));h++);var p=u.segments[u.segments.length-1];if(p.videoTimingInfo&&p.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>c){if(i>c+.25*p.duration)return null;l=p}return{segment:l,estimatedStart:l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationStart:c-l.duration,type:l.videoTimingInfo?"accurate":"estimate"}}(c,u);if(!p)return h({message:"valid programTime was not found"});if("estimate"===p.type)return h({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:p.estimatedStart});var m={mediaSeconds:c},g=function playerTimeToProgramTime(i,u){if(!u.dateTimeObject)return null;var l=i-(u.videoTimingInfo.transmuxedPresentationStart+u.videoTimingInfo.transmuxerPrependedSeconds);return new Date(u.dateTimeObject.getTime()+1e3*l)}(c,p.segment);return g&&(m.programDateTime=g.toISOString()),h(null,m)},io=function seekToProgramTime(i){var u=i.programTime,l=i.playlist,c=i.retryCount,h=void 0===c?2:c,p=i.seekTo,m=i.pauseAfterSeek,g=void 0===m||m,v=i.tech,_=i.callback;if(!_)throw new Error("seekToProgramTime: callback must be provided");if(void 0===u||!l||!p)return _({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!l.endList&&!v.hasStarted_)return _({message:"player must be playing a live stream to start buffering"});if(!function verifyProgramDateTimeTags(i){if(!i.segments||0===i.segments.length)return!1;for(var u=0;u<i.segments.length;u++)if(!i.segments[u].dateTimeObject)return!1;return!0}(l))return _({message:"programDateTime tags must be provided in the manifest "+l.resolvedUri});var y=function findSegmentForProgramTime(i,u){var l;try{l=new Date(i)}catch(i){return null}if(!u||!u.segments||0===u.segments.length)return null;var c=u.segments[0];if(l<c.dateTimeObject)return null;for(var h=0;h<u.segments.length-1&&(c=u.segments[h],!(l<u.segments[h+1].dateTimeObject));h++);var p=u.segments[u.segments.length-1],m=p.dateTimeObject,g=p.videoTimingInfo?function originalSegmentVideoDuration(i){return i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds}(p.videoTimingInfo):p.duration+.25*p.duration;return l>new Date(m.getTime()+1e3*g)?null:(l>m&&(c=p),{segment:c,estimatedStart:c.videoTimingInfo?c.videoTimingInfo.transmuxedPresentationStart:Ps.duration(u,u.mediaSequence+u.segments.indexOf(c)),type:c.videoTimingInfo?"accurate":"estimate"})}(u,l);if(!y)return _({message:u+" was not found in the stream"});var b=y.segment,T=function getOffsetFromTimestamp(i,u){var l,c;try{l=new Date(i),c=new Date(u)}catch(i){}var h=l.getTime();return(c.getTime()-h)/1e3}(b.dateTimeObject,u);if("estimate"===y.type)return 0===h?_({message:u+" is not buffered yet. Try again"}):(p(y.estimatedStart+T),v.one("seeked",(function(){seekToProgramTime({programTime:u,playlist:l,retryCount:h-1,seekTo:p,pauseAfterSeek:g,tech:v,callback:_})})),void 0);var S=b.start+T;v.one("seeked",(function seekedCallback(){return _(null,v.currentTime())})),g&&v.pause(),p(S)},ro=function callbackOnCompleted(i,u){if(4===i.readyState)return u()},no=function containerRequest(i,u,l){var c,h=[],p=!1,m=function endRequestAndCallback(i,u,c,h){return u.abort(),p=!0,l(i,u,c,h)},g=function progressListener(i,u){if(!p){if(i)return m(i,u,"",h);var l=u.responseText.substring(h&&h.byteLength||0,u.responseText.length);if(h=function concatTypedArrays(){for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];if(u=u.filter((function(i){return i&&(i.byteLength||i.length)&&"string"!=typeof i})),u.length<=1)return oe(u[0]);var c=u.reduce((function(i,u,l){return i+(u.byteLength||u.length)}),0),h=new Uint8Array(c),p=0;return u.forEach((function(i){i=oe(i),h.set(i,p),p+=i.byteLength})),h}(h,he(l,!0)),c=c||vt(h),h.length<10||c&&h.length<c+2)return ro(u,(function(){return m(i,u,"",h)}));var g=Mt(h);return"ts"===g&&h.length<188||!g&&h.length<376?ro(u,(function(){return m(i,u,"",h)})):m(null,u,g,h)}},v={uri:i,beforeSend:function beforeSend(i){i.overrideMimeType("text/plain; charset=x-user-defined"),i.addEventListener("progress",(function(u){return u.total,Ws(i,null,{statusCode:i.status},g)}))}},_=u(v,(function(i,u){return Ws(_,i,u,g)}));return _},ao=videojs.mergeOptions,so=function dashPlaylistUnchanged(i,u){if(!Bs(i,u))return!1;if(i.sidx&&u.sidx&&(i.sidx.offset!==u.sidx.offset||i.sidx.length!==u.sidx.length))return!1;if(!i.sidx&&u.sidx||i.sidx&&!u.sidx)return!1;if(i.segments&&!u.segments||!i.segments&&u.segments)return!1;if(!i.segments&&!u.segments)return!0;for(var l=0;l<i.segments.length;l++){var c=i.segments[l],h=u.segments[l];if(c.uri!==h.uri)return!1;if(c.byterange||h.byterange){var p=c.byterange,m=h.byterange;if(p&&!m||!p&&m)return!1;if(p.offset!==m.offset||p.length!==m.length)return!1}}return!0},oo=function dashGroupId(i,u,l,c){return"placeholder-uri-"+i+"-"+u+"-"+(c.attributes.NAME||l)},uo=function updateMaster(i,u,l){for(var c=!0,h=ao(i,{duration:u.duration,minimumUpdatePeriod:u.minimumUpdatePeriod,timelineStarts:u.timelineStarts}),p=0;p<u.playlists.length;p++){var m=u.playlists[p];if(m.sidx){var g=Be(m.sidx);l&&l[g]&&l[g].sidx&&Le(m,l[g].sidx,m.sidx.resolvedUri)}var v=Fs(h,m,so);v&&(h=v,c=!1)}return Os(u,(function(i,u,l,p){if(i.playlists&&i.playlists.length){var m=i.playlists[0].id,g=Fs(h,i.playlists[0],so);g&&(p in(h=g).mediaGroups[u][l]||(h.mediaGroups[u][l][p]=i),h.mediaGroups[u][l][p].playlists[0]=h.playlists[m],c=!1)}})),function removeOldMediaGroupLabels(i,u){Os(i,(function(l,c,h,p){p in u.mediaGroups[c][h]||delete i.mediaGroups[c][h][p]}))}(h,u),u.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(c=!1),c?null:h},lo=function equivalentSidx(i,u){return(Boolean(!i.map&&!u.map)||Boolean(i.map&&u.map&&i.map.byterange.offset===u.map.byterange.offset&&i.map.byterange.length===u.map.byterange.length))&&i.uri===u.uri&&i.byterange.offset===u.byterange.offset&&i.byterange.length===u.byterange.length},co=function compareSidxEntry(i,u){var l={};for(var c in i){var h=i[c].sidx;if(h){var p=Be(h);if(!u[p])break;lo(u[p].sidxInfo,h)&&(l[p]=u[p])}}return l},ho=function(i){function DashPlaylistLoader(u,l,c,h){var p;void 0===c&&(c={}),(p=i.call(this)||this).masterPlaylistLoader_=h||_assertThisInitialized(p),h||(p.isMaster_=!0);var m=c.withCredentials,g=void 0!==m&&m,v=c.handleManifestRedirects,_=void 0!==v&&v;if(p.vhs_=l,p.withCredentials=g,p.handleManifestRedirects=_,!u)throw new Error("A non-empty playlist URL or object is required");return p.on("minimumUpdatePeriod",(function(){p.refreshXml_()})),p.on("mediaupdatetimeout",(function(){p.refreshMedia_(p.media().id)})),p.state="HAVE_NOTHING",p.loadedPlaylists_={},p.logger_=Ja("DashPlaylistLoader"),p.isMaster_?(p.masterPlaylistLoader_.srcUrl=u,p.masterPlaylistLoader_.sidxMapping_={}):p.childPlaylist_=u,p}_inheritsLoose(DashPlaylistLoader,i);var u=DashPlaylistLoader.prototype;return u.requestErrored_=function requestErrored_(i,u,l){return!this.request||(this.request=null,i?(this.error="object"!=typeof i||i instanceof Error?{status:u.status,message:"DASH request error at URL: "+u.uri,response:u.response,code:2}:i,l&&(this.state=l),this.trigger("error"),!0):void 0)},u.addSidxSegments_=function addSidxSegments_(i,u,l){var c=this,h=i.sidx&&Be(i.sidx);if(!i.sidx||!h||this.masterPlaylistLoader_.sidxMapping_[h])return this.mediaRequest_=m().setTimeout((function(){return l(!1)}),0),void 0;var p=$a(this.handleManifestRedirects,i.sidx.resolvedUri),g=function fin(p,m){if(!c.requestErrored_(p,m,u)){var g,v=c.masterPlaylistLoader_.sidxMapping_;try{g=mt()(oe(m.response).subarray(8))}catch(i){return c.requestErrored_(i,m,u),void 0}return v[h]={sidxInfo:i.sidx,sidx:g},Le(i,g,i.sidx.resolvedUri),l(!0)}};this.request=no(p,this.vhs_.xhr,(function(u,l,h,m){if(u)return g(u,l);if(!h||"mp4"!==h)return g({status:l.status,message:"Unsupported "+(h||"unknown")+" container type for sidx segment at URL: "+p,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},l);var v=i.sidx.byterange,_=v.offset,y=v.length;if(m.length>=y+_)return g(u,{response:m.subarray(_,_+y),status:l.status,uri:l.uri});c.request=c.vhs_.xhr({uri:p,responseType:"arraybuffer",headers:zs({byterange:i.sidx.byterange})},g)}))},u.dispose=function dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},m().clearTimeout(this.minimumUpdatePeriodTimeout_),m().clearTimeout(this.mediaRequest_),m().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},u.hasPendingRequest=function hasPendingRequest(){return this.request||this.mediaRequest_},u.stopRequest=function stopRequest(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},u.media=function media(i){var u=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var l=this.state;if("string"==typeof i){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var c=!this.media_||i.id!==this.media_.id;if(c&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList)return this.state="HAVE_METADATA",this.media_=i,c&&(this.trigger("mediachanging"),this.trigger("mediachange")),void 0;c&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,l,(function(c){u.haveMetadata({startingState:l,playlist:i})})))},u.haveMetadata=function haveMetadata(i){var u=i.startingState,l=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[l.id]=l,this.mediaRequest_=null,this.refreshMedia_(l.id),this.trigger("HAVE_MASTER"===u?"loadedmetadata":"mediachange")},u.pause=function pause(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),m().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(m().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},u.load=function load(i){var u=this;m().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var l=this.media();if(i){var c=l?l.targetDuration/2*1e3:5e3;return this.mediaUpdateTimeout=m().setTimeout((function(){return u.load()}),c),void 0}if(!this.started)return this.start(),void 0;l&&!l.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},u.start=function start(){var i=this;if(this.started=!0,!this.isMaster_)return this.mediaRequest_=m().setTimeout((function(){return i.haveMaster_()}),0),void 0;this.requestMaster_((function(u,l){i.haveMaster_(),i.hasPendingRequest()||i.media_||i.media(i.masterPlaylistLoader_.master.playlists[0])}))},u.requestMaster_=function requestMaster_(i){var u=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(l,c){if(u.requestErrored_(l,c))return"HAVE_NOTHING"===u.state&&(u.started=!1),void 0;var h=c.responseText!==u.masterPlaylistLoader_.masterXml_;return u.masterPlaylistLoader_.masterXml_=c.responseText,u.masterLoaded_=c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):Date.now(),u.masterPlaylistLoader_.srcUrl=$a(u.handleManifestRedirects,u.masterPlaylistLoader_.srcUrl,c),h?(u.handleMaster_(),u.syncClientServerClock_((function(){return i(c,h)})),void 0):i(c,h)}))},u.syncClientServerClock_=function syncClientServerClock_(i){var u=this,l=pt(this.masterPlaylistLoader_.masterXml_);return null===l?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===l.method?(this.masterPlaylistLoader_.clientOffset_=l.value-Date.now(),i()):(this.request=this.vhs_.xhr({uri:Ya(this.masterPlaylistLoader_.srcUrl,l.value),method:l.method,withCredentials:this.withCredentials},(function(c,h){if(u.request){if(c)return u.masterPlaylistLoader_.clientOffset_=u.masterLoaded_-Date.now(),i();var p;p="HEAD"===l.method?h.responseHeaders&&h.responseHeaders.date?Date.parse(h.responseHeaders.date):u.masterLoaded_:Date.parse(h.responseText),u.masterPlaylistLoader_.clientOffset_=p-Date.now(),i()}})),void 0)},u.haveMaster_=function haveMaster_(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},u.handleMaster_=function handleMaster_(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,u=function parseMasterXml(i){var u=i.srcUrl,l=ht(i.masterXml,{manifestUri:u,clientOffset:i.clientOffset,sidxMapping:i.sidxMapping,previousManifest:i.previousManifest});return Ds(l,u,oo),l}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(u=uo(i,u,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=u||i;var l=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return l&&l!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=l),(!i||u&&u.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(u)},u.updateMinimumUpdatePeriodTimeout_=function updateMinimumUpdatePeriodTimeout_(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(m().clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var u=i.master&&i.master.minimumUpdatePeriod;if(0===u&&(i.media()?u=1e3*i.media().targetDuration:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),"number"!=typeof u||u<=0)return u<0&&this.logger_("found invalid minimumUpdatePeriod of "+u+", not setting a timeout"),void 0;this.createMUPTimeout_(u)},u.createMUPTimeout_=function createMUPTimeout_(i){var u=this.masterPlaylistLoader_;u.minimumUpdatePeriodTimeout_=m().setTimeout((function(){u.minimumUpdatePeriodTimeout_=null,u.trigger("minimumUpdatePeriod"),u.createMUPTimeout_(i)}),i)},u.refreshXml_=function refreshXml_(){var i=this;this.requestMaster_((function(u,l){l&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=function filterChangedSidxMappings(i,u){var l=co(i.playlists,u);return Os(i,(function(i,c,h,p){i.playlists&&i.playlists.length&&(l=ao(l,co(i.playlists,u)))})),l}(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,(function(u){i.refreshMedia_(i.media().id)})))}))},u.refreshMedia_=function refreshMedia_(i){var u=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var l=this.masterPlaylistLoader_.master.playlists,c=!this.media_||this.media_!==l[i];if(c?this.media_=l[i]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){!function createMediaUpdateTimeout(){u.media().endList||(u.mediaUpdateTimeout=m().setTimeout((function(){u.trigger("mediaupdatetimeout"),createMediaUpdateTimeout()}),Us(u.media(),Boolean(c))))}()}this.trigger("loadedplaylist")},DashPlaylistLoader}(videojs.EventTarget),po={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},fo=function browserWorkerPolyFill(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},mo=function factory(i){return function(){var u=function createObjectURL(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch(l){var u=new BlobBuilder;return u.append(i),URL.createObjectURL(u.getBlob())}}(i),l=fo(new Worker(u));l.objURL=u;var c=l.terminate;return l.on=l.addEventListener,l.off=l.removeEventListener,l.terminate=function(){return URL.revokeObjectURL(u),c.call(this)},l}},go=function transform(i){return"var browserWorkerPolyFill = "+fo.toString()+";\nbrowserWorkerPolyFill(self);\n"+i},vo=function getWorkerString(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},_o=go(vo((function(){var i=function Stream(){this.init=function(){var i={};this.on=function(u,l){i[u]||(i[u]=[]),i[u]=i[u].concat(l)},this.off=function(u,l){var c;return!!i[u]&&(c=i[u].indexOf(l),i[u]=i[u].slice(),i[u].splice(c,1),c>-1)},this.trigger=function(u){var l,c,h,p;if(l=i[u])if(2===arguments.length)for(h=l.length,c=0;c<h;++c)l[c].call(this,arguments[1]);else{for(p=[],c=arguments.length,c=1;c<arguments.length;++c)p.push(arguments[c]);for(h=l.length,c=0;c<h;++c)l[c].apply(this,p)}},this.dispose=function(){i={}}}};i.prototype.pipe=function(i){return this.on("data",(function(u){i.push(u)})),this.on("done",(function(u){i.flush(u)})),this.on("partialdone",(function(u){i.partialFlush(u)})),this.on("endedtimeline",(function(u){i.endTimeline(u)})),this.on("reset",(function(u){i.reset(u)})),i},i.prototype.push=function(i){this.trigger("data",i)},i.prototype.flush=function(i){this.trigger("done",i)},i.prototype.partialFlush=function(i){this.trigger("partialdone",i)},i.prototype.endTimeline=function(i){this.trigger("endedtimeline",i)},i.prototype.reset=function(i){this.trigger("reset",i)};var u,l,c,h,p,m,g,v,_,y,b,T,S,k,E,C,w,P,A,x,I,O,L,D,V,R,M,N,B,j,H,W,z,X,K,Q,Y,$,Z,ee,te=i,ie=Math.pow(2,32),re={getUint64:function getUint64(i){var u,l=new DataView(i.buffer,i.byteOffset,i.byteLength);return l.getBigUint64?(u=l.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(u):u:l.getUint32(0)*ie+l.getUint32(4)},MAX_UINT32:ie},ne=re.MAX_UINT32;!function(){var i;if(O={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(i in O)O.hasOwnProperty(i)&&(O[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);L=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),V=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),D=new Uint8Array([0,0,0,1]),R=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),M=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),N={video:R,audio:M},H=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),j=new Uint8Array([0,0,0,0,0,0,0,0]),W=new Uint8Array([0,0,0,0,0,0,0,0]),z=W,X=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),K=W,B=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),u=function box(i){var u,l,c=[],h=0;for(u=1;u<arguments.length;u++)c.push(arguments[u]);for(u=c.length;u--;)h+=c[u].byteLength;for(l=new Uint8Array(h+8),new DataView(l.buffer,l.byteOffset,l.byteLength).setUint32(0,l.byteLength),l.set(i,4),u=0,h=8;u<c.length;u++)l.set(c[u],h),h+=c[u].byteLength;return l},l=function dinf(){return u(O.dinf,u(O.dref,H))},c=function esds(i){return u(O.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,i.audioobjecttype<<3|i.samplingfrequencyindex>>>1,i.samplingfrequencyindex<<7|i.channelcount<<3,6,1,2]))},E=function hdlr(i){return u(O.hdlr,N[i])},k=function mdhd(i){var l=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,i.duration>>>24&255,i.duration>>>16&255,i.duration>>>8&255,255&i.duration,85,196,0,0]);return i.samplerate&&(l[12]=i.samplerate>>>24&255,l[13]=i.samplerate>>>16&255,l[14]=i.samplerate>>>8&255,l[15]=255&i.samplerate),u(O.mdhd,l)},S=function mdia(i){return u(O.mdia,k(i),E(i.type),m(i))},p=function mfhd(i){return u(O.mfhd,new Uint8Array([0,0,0,0,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))},m=function minf(i){return u(O.minf,"video"===i.type?u(O.vmhd,B):u(O.smhd,j),l(),w(i))},g=function moof(i,l){for(var c=[],h=l.length;h--;)c[h]=A(l[h]);return u.apply(null,[O.moof,p(i)].concat(c))},v=function moov(i){for(var l=i.length,c=[];l--;)c[l]=b(i[l]);return u.apply(null,[O.moov,y(4294967295)].concat(c).concat(_(i)))},_=function mvex(i){for(var l=i.length,c=[];l--;)c[l]=x(i[l]);return u.apply(null,[O.mvex].concat(c))},y=function mvhd(i){var l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(O.mvhd,l)},C=function sdtp(i){var l,c,h=i.samples||[],p=new Uint8Array(4+h.length);for(c=0;c<h.length;c++)p[c+4]=(l=h[c].flags).dependsOn<<4|l.isDependedOn<<2|l.hasRedundancy;return u(O.sdtp,p)},w=function stbl(i){return u(O.stbl,P(i),u(O.stts,K),u(O.stsc,z),u(O.stsz,X),u(O.stco,W))},P=function stsd(i){return u(O.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?Q(i):Y(i))},Q=function videoSample(i){var l,c,h=i.sps||[],p=i.pps||[],m=[],g=[];for(l=0;l<h.length;l++)m.push((65280&h[l].byteLength)>>>8),m.push(255&h[l].byteLength),m=m.concat(Array.prototype.slice.call(h[l]));for(l=0;l<p.length;l++)g.push((65280&p[l].byteLength)>>>8),g.push(255&p[l].byteLength),g=g.concat(Array.prototype.slice.call(p[l]));if(c=[O.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&i.width)>>8,255&i.width,(65280&i.height)>>8,255&i.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(O.avcC,new Uint8Array([1,i.profileIdc,i.profileCompatibility,i.levelIdc,255].concat([h.length],m,[p.length],g))),u(O.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],i.sarRatio){var v=i.sarRatio[0],_=i.sarRatio[1];c.push(u(O.pasp,new Uint8Array([(4278190080&v)>>24,(16711680&v)>>16,(65280&v)>>8,255&v,(4278190080&_)>>24,(16711680&_)>>16,(65280&_)>>8,255&_])))}return u.apply(null,c)},Y=function audioSample(i){return u(O.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&i.channelcount)>>8,255&i.channelcount,(65280&i.samplesize)>>8,255&i.samplesize,0,0,0,0,(65280&i.samplerate)>>8,255&i.samplerate,0,0]),c(i))},T=function tkhd(i){var l=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,0,(4278190080&i.duration)>>24,(16711680&i.duration)>>16,(65280&i.duration)>>8,255&i.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&i.width)>>8,255&i.width,0,0,(65280&i.height)>>8,255&i.height,0,0]);return u(O.tkhd,l)},A=function traf(i){var l,c,h,p,m,g;return l=u(O.tfhd,new Uint8Array([0,0,0,58,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),m=Math.floor(i.baseMediaDecodeTime/ne),g=Math.floor(i.baseMediaDecodeTime%ne),c=u(O.tfdt,new Uint8Array([1,0,0,0,m>>>24&255,m>>>16&255,m>>>8&255,255&m,g>>>24&255,g>>>16&255,g>>>8&255,255&g])),92,"audio"===i.type?(h=I(i,92),u(O.traf,l,c,h)):(p=C(i),h=I(i,p.length+92),u(O.traf,l,c,h,p))},b=function trak(i){return i.duration=i.duration||4294967295,u(O.trak,T(i),S(i))},x=function trex(i){var l=new Uint8Array([0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==i.type&&(l[l.length-1]=0),u(O.trex,l)},ee=function trunHeader(i,u){var l=0,c=0,h=0,p=0;return i.length&&(void 0!==i[0].duration&&(l=1),void 0!==i[0].size&&(c=2),void 0!==i[0].flags&&(h=4),void 0!==i[0].compositionTimeOffset&&(p=8)),[0,0,l|c|h|p,1,(4278190080&i.length)>>>24,(16711680&i.length)>>>16,(65280&i.length)>>>8,255&i.length,(4278190080&u)>>>24,(16711680&u)>>>16,(65280&u)>>>8,255&u]},Z=function videoTrun(i,l){var c,h,p,m,g,v;for(p=ee(m=i.samples||[],l+=20+16*m.length),(h=new Uint8Array(p.length+16*m.length)).set(p),c=p.length,v=0;v<m.length;v++)h[c++]=(4278190080&(g=m[v]).duration)>>>24,h[c++]=(16711680&g.duration)>>>16,h[c++]=(65280&g.duration)>>>8,h[c++]=255&g.duration,h[c++]=(4278190080&g.size)>>>24,h[c++]=(16711680&g.size)>>>16,h[c++]=(65280&g.size)>>>8,h[c++]=255&g.size,h[c++]=g.flags.isLeading<<2|g.flags.dependsOn,h[c++]=g.flags.isDependedOn<<6|g.flags.hasRedundancy<<4|g.flags.paddingValue<<1|g.flags.isNonSyncSample,h[c++]=61440&g.flags.degradationPriority,h[c++]=15&g.flags.degradationPriority,h[c++]=(4278190080&g.compositionTimeOffset)>>>24,h[c++]=(16711680&g.compositionTimeOffset)>>>16,h[c++]=(65280&g.compositionTimeOffset)>>>8,h[c++]=255&g.compositionTimeOffset;return u(O.trun,h)},$=function audioTrun(i,l){var c,h,p,m,g,v;for(p=ee(m=i.samples||[],l+=20+8*m.length),(c=new Uint8Array(p.length+8*m.length)).set(p),h=p.length,v=0;v<m.length;v++)c[h++]=(4278190080&(g=m[v]).duration)>>>24,c[h++]=(16711680&g.duration)>>>16,c[h++]=(65280&g.duration)>>>8,c[h++]=255&g.duration,c[h++]=(4278190080&g.size)>>>24,c[h++]=(16711680&g.size)>>>16,c[h++]=(65280&g.size)>>>8,c[h++]=255&g.size;return u(O.trun,c)},I=function trun(i,u){return"audio"===i.type?$(i,u):Z(i,u)};h=function ftyp(){return u(O.ftyp,L,D,L,V)};var ae,se,oe,ue,le,de,ce,he,pe=function mdat(i){return u(O.mdat,i)},fe=g,me=function initSegment(i){var u,l=h(),c=v(i);return(u=new Uint8Array(l.byteLength+c.byteLength)).set(l),u.set(c,l.byteLength),u},ge=function sampleForFrame(i,u){var l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return l.dataOffset=u,l.compositionTimeOffset=i.pts-i.dts,l.duration=i.duration,l.size=4*i.length,l.size+=i.byteLength,i.keyFrame&&(l.flags.dependsOn=2,l.flags.isNonSyncSample=0),l},ve=function groupNalsIntoFrames(i){var u,l,c=[],h=[];for(h.byteLength=0,h.nalCount=0,h.duration=0,c.byteLength=0,u=0;u<i.length;u++)"access_unit_delimiter_rbsp"===(l=i[u]).nalUnitType?(c.length&&(c.duration=l.dts-c.dts,h.byteLength+=c.byteLength,h.nalCount+=c.length,h.duration+=c.duration,h.push(c)),(c=[l]).byteLength=l.data.byteLength,c.pts=l.pts,c.dts=l.dts):("slice_layer_without_partitioning_rbsp_idr"===l.nalUnitType&&(c.keyFrame=!0),c.duration=l.dts-c.dts,c.byteLength+=l.data.byteLength,c.push(l));return h.length&&(!c.duration||c.duration<=0)&&(c.duration=h[h.length-1].duration),h.byteLength+=c.byteLength,h.nalCount+=c.length,h.duration+=c.duration,h.push(c),h},_e=function groupFramesIntoGops(i){var u,l,c=[],h=[];for(c.byteLength=0,c.nalCount=0,c.duration=0,c.pts=i[0].pts,c.dts=i[0].dts,h.byteLength=0,h.nalCount=0,h.duration=0,h.pts=i[0].pts,h.dts=i[0].dts,u=0;u<i.length;u++)(l=i[u]).keyFrame?(c.length&&(h.push(c),h.byteLength+=c.byteLength,h.nalCount+=c.nalCount,h.duration+=c.duration),(c=[l]).nalCount=l.length,c.byteLength=l.byteLength,c.pts=l.pts,c.dts=l.dts,c.duration=l.duration):(c.duration+=l.duration,c.nalCount+=l.length,c.byteLength+=l.byteLength,c.push(l));return h.length&&c.duration<=0&&(c.duration=h[h.length-1].duration),h.byteLength+=c.byteLength,h.nalCount+=c.nalCount,h.duration+=c.duration,h.push(c),h},ye=function extendFirstKeyFrame(i){var u;return!i[0][0].keyFrame&&i.length>1&&(u=i.shift(),i.byteLength-=u.byteLength,i.nalCount-=u.nalCount,i[0][0].dts=u.dts,i[0][0].pts=u.pts,i[0][0].duration+=u.duration),i},be=function generateSampleTable(i,u){var l,c,h,p,m=u||0,g=[];for(l=0;l<i.length;l++)for(p=i[l],c=0;c<p.length;c++)m+=(h=ge(p[c],m)).size,g.push(h);return g},Te=function concatenateNalData(i){var u,l,c,h,p,m,g=0,v=new Uint8Array(i.byteLength+4*i.nalCount),_=new DataView(v.buffer);for(u=0;u<i.length;u++)for(h=i[u],l=0;l<h.length;l++)for(p=h[l],c=0;c<p.length;c++)_.setUint32(g,(m=p[c]).data.byteLength),v.set(m.data,g+=4),g+=m.data.byteLength;return v},Se=[33,16,5,32,164,27],ke=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ee=function zeroFill(i){for(var u=[];i--;)u.push(0);return u},Ce=function silence_1(){if(!ae){var i={96e3:[Se,[227,64],Ee(154),[56]],88200:[Se,[231],Ee(170),[56]],64e3:[Se,[248,192],Ee(240),[56]],48e3:[Se,[255,192],Ee(268),[55,148,128],Ee(54),[112]],44100:[Se,[255,192],Ee(268),[55,163,128],Ee(84),[112]],32e3:[Se,[255,192],Ee(268),[55,234],Ee(226),[112]],24e3:[Se,[255,192],Ee(268),[55,255,128],Ee(268),[111,112],Ee(126),[224]],16e3:[Se,[255,192],Ee(268),[55,255,128],Ee(268),[111,255],Ee(269),[223,108],Ee(195),[1,192]],12e3:[ke,Ee(268),[3,127,248],Ee(268),[6,255,240],Ee(268),[13,255,224],Ee(268),[27,253,128],Ee(259),[56]],11025:[ke,Ee(268),[3,127,248],Ee(268),[6,255,240],Ee(268),[13,255,224],Ee(268),[27,255,192],Ee(268),[55,175,128],Ee(108),[112]],8e3:[ke,Ee(268),[3,121,16],Ee(47),[7]]};ae=function makeTable(i){return Object.keys(i).reduce((function(u,l){return u[l]=new Uint8Array(i[l].reduce((function(i,u){return i.concat(u)}),[])),u}),{})}(i)}return ae},we=9e4;de=function audioTsToVideoTs(i,u){return se(le(i,u))},ce=function videoTsToAudioTs(i,u){return oe(ue(i),u)},he=function metadataTsToSeconds(i,u,l){return ue(l?i:i-u)};var Pe=we,Ae=se=function secondsToVideoTs(i){return i*we},xe=(oe=function secondsToAudioTs(i,u){return i*u},ue=function videoTsToSeconds(i){return i/we}),Ie=(le=function audioTsToSeconds(i,u){return i/u},de),Oe=ce,Le=he,De=function prefixWithSilence(i,u,l,c){var h,p,m,g,v,_=0,y=0,b=0;if(u.length&&(h=Ie(i.baseMediaDecodeTime,i.samplerate),p=Math.ceil(Pe/(i.samplerate/1024)),l&&c&&(_=h-Math.max(l,c),b=(y=Math.floor(_/p))*p),!(y<1||b>Pe/2))){for((m=Ce()[i.samplerate])||(m=u[0].data),g=0;g<y;g++)u.splice(0,0,{data:m,dts:(v=u[0]).dts-p,pts:v.pts-p});return i.baseMediaDecodeTime-=Math.floor(Oe(b,i.samplerate)),b}},Ve=function trimAdtsFramesByEarliestDts(i,u,l){return u.minSegmentDts>=l?i:(u.minSegmentDts=1/0,i.filter((function(i){return i.dts>=l&&(u.minSegmentDts=Math.min(u.minSegmentDts,i.dts),u.minSegmentPts=u.minSegmentDts,!0)})))},Re=function generateSampleTable(i){var u,l=[];for(u=0;u<i.length;u++)l.push({size:i[u].data.byteLength,duration:1024});return l},Me=function concatenateFrameData(i){var u,l,c=0,h=new Uint8Array(function sumFrameByteLengths(i){var u,l=0;for(u=0;u<i.length;u++)l+=i[u].data.byteLength;return l}(i));for(u=0;u<i.length;u++)h.set((l=i[u]).data,c),c+=l.data.byteLength;return h},Ne=Pe,Be=function clearDtsInfo(i){delete i.minSegmentDts,delete i.maxSegmentDts,delete i.minSegmentPts,delete i.maxSegmentPts},Fe=function calculateTrackBaseMediaDecodeTime(i,u){var l,c=i.minSegmentDts;return u||(c-=i.timelineStartInfo.dts),l=i.timelineStartInfo.baseMediaDecodeTime,l+=c,l=Math.max(0,l),"audio"===i.type&&(l*=i.samplerate/Ne,l=Math.floor(l)),l},Ue=function collectDtsInfo(i,u){"number"==typeof u.pts&&(void 0===i.timelineStartInfo.pts&&(i.timelineStartInfo.pts=u.pts),i.minSegmentPts=void 0===i.minSegmentPts?u.pts:Math.min(i.minSegmentPts,u.pts),i.maxSegmentPts=void 0===i.maxSegmentPts?u.pts:Math.max(i.maxSegmentPts,u.pts)),"number"==typeof u.dts&&(void 0===i.timelineStartInfo.dts&&(i.timelineStartInfo.dts=u.dts),i.minSegmentDts=void 0===i.minSegmentDts?u.dts:Math.min(i.minSegmentDts,u.dts),i.maxSegmentDts=void 0===i.maxSegmentDts?u.dts:Math.max(i.maxSegmentDts,u.dts))},je=function parseSei(i){for(var u=0,l={payloadType:-1,payloadSize:0},c=0,h=0;u<i.byteLength&&128!==i[u];){for(;255===i[u];)c+=255,u++;for(c+=i[u++];255===i[u];)h+=255,u++;if(h+=i[u++],!l.payload&&4===c){if("GA94"===String.fromCharCode(i[u+3],i[u+4],i[u+5],i[u+6])){l.payloadType=c,l.payloadSize=h,l.payload=i.subarray(u,u+h);break}l.payload=void 0}u+=h,c=0,h=0}return l},He=function parseUserData(i){return 181!==i.payload[0]||49!=(i.payload[1]<<8|i.payload[2])||"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])||3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1)},qe=function parseCaptionPackets(i,u){var l,c,h,p,m=[];if(!(64&u[0]))return m;for(c=31&u[0],l=0;l<c;l++)p={type:3&u[(h=3*l)+2],pts:i},4&u[h+2]&&(p.ccData=u[h+3]<<8|u[h+4],m.push(p));return m},We=function discardEmulationPreventionBytes(i){for(var u,l,c=i.byteLength,h=[],p=1;p<c-2;)0===i[p]&&0===i[p+1]&&3===i[p+2]?(h.push(p+2),p+=2):p++;if(0===h.length)return i;u=c-h.length,l=new Uint8Array(u);var m=0;for(p=0;p<u;m++,p++)m===h[0]&&(m++,h.shift()),l[p]=i[m];return l},Ge=4,ze=function CaptionStream(i){i=i||{},CaptionStream.prototype.init.call(this),this.parse708captions_="boolean"!=typeof i.parse708captions||i.parse708captions,this.captionPackets_=[],this.ccStreams_=[new it(0,0),new it(0,1),new it(1,0),new it(1,1)],this.parse708captions_&&(this.cc708Stream_=new $e({captionServices:i.captionServices})),this.reset(),this.ccStreams_.forEach((function(i){i.on("data",this.trigger.bind(this,"data")),i.on("partialdone",this.trigger.bind(this,"partialdone")),i.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(ze.prototype=new te).push=function(i){var u,l,c;if("sei_rbsp"===i.nalUnitType&&(u=je(i.escapedRBSP)).payload&&u.payloadType===Ge&&(l=He(u))){if(i.dts<this.latestDts_)return this.ignoreNextEqualDts_=!0,void 0;if(i.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1),void 0;c=qe(i.pts,l),this.captionPackets_=this.captionPackets_.concat(c),this.latestDts_!==i.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=i.dts}},ze.prototype.flushCCStreams=function(i){this.ccStreams_.forEach((function(u){return"flush"===i?u.flush():u.partialFlush()}),this)},ze.prototype.flushStream=function(i){if(!this.captionPackets_.length)return this.flushCCStreams(i),void 0;this.captionPackets_.forEach((function(i,u){i.presortIndex=u})),this.captionPackets_.sort((function(i,u){return i.pts===u.pts?i.presortIndex-u.presortIndex:i.pts-u.pts})),this.captionPackets_.forEach((function(i){i.type<2?this.dispatchCea608Packet(i):this.dispatchCea708Packet(i)}),this),this.captionPackets_.length=0,this.flushCCStreams(i)},ze.prototype.flush=function(){return this.flushStream("flush")},ze.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ze.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(i){i.reset()}))},ze.prototype.dispatchCea608Packet=function(i){this.setsTextOrXDSActive(i)?this.activeCea608Channel_[i.type]=null:this.setsChannel1Active(i)?this.activeCea608Channel_[i.type]=0:this.setsChannel2Active(i)&&(this.activeCea608Channel_[i.type]=1),null!==this.activeCea608Channel_[i.type]&&this.ccStreams_[(i.type<<1)+this.activeCea608Channel_[i.type]].push(i)},ze.prototype.setsChannel1Active=function(i){return 4096==(30720&i.ccData)},ze.prototype.setsChannel2Active=function(i){return 6144==(30720&i.ccData)},ze.prototype.setsTextOrXDSActive=function(i){return 256==(28928&i.ccData)||4138==(30974&i.ccData)||6186==(30974&i.ccData)},ze.prototype.dispatchCea708Packet=function(i){this.parse708captions_&&this.cc708Stream_.push(i)};var Xe={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ke=function within708TextBlock(i){return 32<=i&&i<=127||160<=i&&i<=255},Qe=function Cea708Window(i){this.windowNum=i,this.reset()};Qe.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Qe.prototype.getText=function(){return this.rows.join("\n")},Qe.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Qe.prototype.newLine=function(i){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(i),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Qe.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Qe.prototype.addText=function(i){this.rows[this.rowIdx]+=i},Qe.prototype.backspace=function(){if(!this.isEmpty()){var i=this.rows[this.rowIdx];this.rows[this.rowIdx]=i.substr(0,i.length-1)}};var Ye=function Cea708Service(i,u,l){this.serviceNum=i,this.text="",this.currentWindow=new Qe(-1),this.windows=[],this.stream=l,"string"==typeof u&&this.createTextDecoder(u)};Ye.prototype.init=function(i,u){this.startPts=i;for(var l=0;l<8;l++)this.windows[l]=new Qe(l),"function"==typeof u&&(this.windows[l].beforeRowOverflow=u)},Ye.prototype.setCurrentWindow=function(i){this.currentWindow=this.windows[i]},Ye.prototype.createTextDecoder=function(i){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(i)}catch(u){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+i+" encoding. "+u})}};var $e=function Cea708Stream(i){i=i||{},Cea708Stream.prototype.init.call(this);var u,l=this,c=i.captionServices||{},h={};Object.keys(c).forEach((function(i){u=c[i],/^SERVICE/.test(i)&&(h[i]=u.encoding)})),this.serviceEncodings=h,this.current708Packet=null,this.services={},this.push=function(i){3===i.type?(l.new708Packet(),l.add708Bytes(i)):(null===l.current708Packet&&l.new708Packet(),l.add708Bytes(i))}};$e.prototype=new te,$e.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},$e.prototype.add708Bytes=function(i){var u=i.ccData,l=u>>>8,c=255&u;this.current708Packet.ptsVals.push(i.pts),this.current708Packet.data.push(l),this.current708Packet.data.push(c)},$e.prototype.push708Packet=function(){var i=this.current708Packet,u=i.data,l=null,c=null,h=0,p=u[h++];for(i.seq=p>>6,i.sizeCode=63&p;h<u.length;h++)c=31&(p=u[h++]),7===(l=p>>5)&&c>0&&(l=p=u[h++]),this.pushServiceBlock(l,h,c),c>0&&(h+=c-1)},$e.prototype.pushServiceBlock=function(i,u,l){var c,h=u,p=this.current708Packet.data,m=this.services[i];for(m||(m=this.initService(i,h));h<u+l&&h<p.length;h++)Ke(c=p[h])?h=this.handleText(h,m):24===c?h=this.multiByteCharacter(h,m):16===c?h=this.extendedCommands(h,m):128<=c&&c<=135?h=this.setCurrentWindow(h,m):152<=c&&c<=159?h=this.defineWindow(h,m):136===c?h=this.clearWindows(h,m):140===c?h=this.deleteWindows(h,m):137===c?h=this.displayWindows(h,m):138===c?h=this.hideWindows(h,m):139===c?h=this.toggleWindows(h,m):151===c?h=this.setWindowAttributes(h,m):144===c?h=this.setPenAttributes(h,m):145===c?h=this.setPenColor(h,m):146===c?h=this.setPenLocation(h,m):143===c?m=this.reset(h,m):8===c?m.currentWindow.backspace():12===c?m.currentWindow.clearText():13===c?m.currentWindow.pendingNewLine=!0:14===c?m.currentWindow.clearText():141===c&&h++},$e.prototype.extendedCommands=function(i,u){var l=this.current708Packet.data[++i];return Ke(l)&&(i=this.handleText(i,u,{isExtended:!0})),i},$e.prototype.getPts=function(i){return this.current708Packet.ptsVals[Math.floor(i/2)]},$e.prototype.initService=function(i,u){var l,c,h=this;return(l="SERVICE"+i)in this.serviceEncodings&&(c=this.serviceEncodings[l]),this.services[i]=new Ye(i,c,h),this.services[i].init(this.getPts(u),(function(u){h.flushDisplayed(u,h.services[i])})),this.services[i]},$e.prototype.handleText=function(i,u,l){var c,h,p=l&&l.isExtended,m=this.current708Packet.data,g=p?4096:0,v=m[i],_=u.currentWindow;return u.textDecoder_&&!p?(l&&l.isMultiByte?(h=[v,m[i+1]],i++):h=[v],c=u.textDecoder_.decode(new Uint8Array(h))):c=function get708CharFromCode(i){var u=Xe[i]||i;return 4096&i&&i===u?"":String.fromCharCode(u)}(g|v),_.pendingNewLine&&!_.isEmpty()&&_.newLine(this.getPts(i)),_.pendingNewLine=!1,_.addText(c),i},$e.prototype.multiByteCharacter=function(i,u){var l=this.current708Packet.data,c=l[i+2];return Ke(l[i+1])&&Ke(c)&&(i=this.handleText(++i,u,{isMultiByte:!0})),i},$e.prototype.setCurrentWindow=function(i,u){return u.setCurrentWindow(7&this.current708Packet.data[i]),i},$e.prototype.defineWindow=function(i,u){var l=this.current708Packet.data,c=l[i];u.setCurrentWindow(7&c);var h=u.currentWindow;return c=l[++i],h.visible=(32&c)>>5,h.rowLock=(16&c)>>4,h.columnLock=(8&c)>>3,h.priority=7&c,c=l[++i],h.relativePositioning=(128&c)>>7,h.anchorVertical=127&c,c=l[++i],h.anchorHorizontal=c,c=l[++i],h.anchorPoint=(240&c)>>4,h.rowCount=15&c,c=l[++i],h.columnCount=63&c,c=l[++i],h.windowStyle=(56&c)>>3,h.penStyle=7&c,h.virtualRowCount=h.rowCount+1,i},$e.prototype.setWindowAttributes=function(i,u){var l=this.current708Packet.data,c=l[i],h=u.currentWindow.winAttr;return c=l[++i],h.fillOpacity=(192&c)>>6,h.fillRed=(48&c)>>4,h.fillGreen=(12&c)>>2,h.fillBlue=3&c,c=l[++i],h.borderType=(192&c)>>6,h.borderRed=(48&c)>>4,h.borderGreen=(12&c)>>2,h.borderBlue=3&c,c=l[++i],h.borderType+=(128&c)>>5,h.wordWrap=(64&c)>>6,h.printDirection=(48&c)>>4,h.scrollDirection=(12&c)>>2,h.justify=3&c,c=l[++i],h.effectSpeed=(240&c)>>4,h.effectDirection=(12&c)>>2,h.displayEffect=3&c,i},$e.prototype.flushDisplayed=function(i,u){for(var l=[],c=0;c<8;c++)u.windows[c].visible&&!u.windows[c].isEmpty()&&l.push(u.windows[c].getText());u.endPts=i,u.text=l.join("\n\n"),this.pushCaption(u),u.startPts=i},$e.prototype.pushCaption=function(i){""!==i.text&&(this.trigger("data",{startPts:i.startPts,endPts:i.endPts,text:i.text,stream:"cc708_"+i.serviceNum}),i.text="",i.startPts=i.endPts)},$e.prototype.displayWindows=function(i,u){var l=this.current708Packet.data[++i],c=this.getPts(i);this.flushDisplayed(c,u);for(var h=0;h<8;h++)l&1<<h&&(u.windows[h].visible=1);return i},$e.prototype.hideWindows=function(i,u){var l=this.current708Packet.data[++i],c=this.getPts(i);this.flushDisplayed(c,u);for(var h=0;h<8;h++)l&1<<h&&(u.windows[h].visible=0);return i},$e.prototype.toggleWindows=function(i,u){var l=this.current708Packet.data[++i],c=this.getPts(i);this.flushDisplayed(c,u);for(var h=0;h<8;h++)l&1<<h&&(u.windows[h].visible^=1);return i},$e.prototype.clearWindows=function(i,u){var l=this.current708Packet.data[++i],c=this.getPts(i);this.flushDisplayed(c,u);for(var h=0;h<8;h++)l&1<<h&&u.windows[h].clearText();return i},$e.prototype.deleteWindows=function(i,u){var l=this.current708Packet.data[++i],c=this.getPts(i);this.flushDisplayed(c,u);for(var h=0;h<8;h++)l&1<<h&&u.windows[h].reset();return i},$e.prototype.setPenAttributes=function(i,u){var l=this.current708Packet.data,c=l[i],h=u.currentWindow.penAttr;return c=l[++i],h.textTag=(240&c)>>4,h.offset=(12&c)>>2,h.penSize=3&c,c=l[++i],h.italics=(128&c)>>7,h.underline=(64&c)>>6,h.edgeType=(56&c)>>3,h.fontStyle=7&c,i},$e.prototype.setPenColor=function(i,u){var l=this.current708Packet.data,c=l[i],h=u.currentWindow.penColor;return c=l[++i],h.fgOpacity=(192&c)>>6,h.fgRed=(48&c)>>4,h.fgGreen=(12&c)>>2,h.fgBlue=3&c,c=l[++i],h.bgOpacity=(192&c)>>6,h.bgRed=(48&c)>>4,h.bgGreen=(12&c)>>2,h.bgBlue=3&c,c=l[++i],h.edgeRed=(48&c)>>4,h.edgeGreen=(12&c)>>2,h.edgeBlue=3&c,i},$e.prototype.setPenLocation=function(i,u){var l=this.current708Packet.data,c=l[i],h=u.currentWindow.penLoc;return u.currentWindow.pendingNewLine=!0,c=l[++i],h.row=15&c,c=l[++i],h.column=63&c,i},$e.prototype.reset=function(i,u){var l=this.getPts(i);return this.flushDisplayed(l,u),this.initService(u.serviceNum,i)};var Je={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ze=function getCharFromCode(i){return null===i?"":(i=Je[i]||i,String.fromCharCode(i))},et=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],tt=function createDisplayBuffer(){for(var i=[],u=15;u--;)i.push("");return i},it=function Cea608Stream(i,u){Cea608Stream.prototype.init.call(this),this.field_=i||0,this.dataChannel_=u||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(i){var u,l,c,h,p;if((u=32639&i.ccData)===this.lastControlCode_)return this.lastControlCode_=null,void 0;if(4096==(61440&u)?this.lastControlCode_=u:u!==this.PADDING_&&(this.lastControlCode_=null),c=u>>>8,h=255&u,u!==this.PADDING_)if(u===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(u===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(i.pts),this.flushDisplayed(i.pts),l=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=l,this.startPts_=i.pts;else if(u===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(i.pts);else if(u===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(i.pts);else if(u===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(i.pts);else if(u===this.CARRIAGE_RETURN_)this.clearFormatting(i.pts),this.flushDisplayed(i.pts),this.shiftRowsUp_(),this.startPts_=i.pts;else if(u===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(u===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(i.pts),this.displayed_=tt();else if(u===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=tt();else if(u===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(i.pts),this.displayed_=tt()),this.mode_="paintOn",this.startPts_=i.pts;else if(this.isSpecialCharacter(c,h))p=Ze((c=(3&c)<<8)|h),this[this.mode_](i.pts,p),this.column_++;else if(this.isExtCharacter(c,h))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),p=Ze((c=(3&c)<<8)|h),this[this.mode_](i.pts,p),this.column_++;else if(this.isMidRowCode(c,h))this.clearFormatting(i.pts),this[this.mode_](i.pts," "),this.column_++,14&~h||this.addFormatting(i.pts,["i"]),1&~h||this.addFormatting(i.pts,["u"]);else if(this.isOffsetControlCode(c,h))this.column_+=3&h;else if(this.isPAC(c,h)){var m=et.indexOf(7968&u);"rollUp"===this.mode_&&(m-this.rollUpRows_+1<0&&(m=this.rollUpRows_-1),this.setRollUp(i.pts,m)),m!==this.row_&&(this.clearFormatting(i.pts),this.row_=m),1&h&&-1===this.formatting_.indexOf("u")&&this.addFormatting(i.pts,["u"]),16&~u||(this.column_=4*((14&u)>>1)),this.isColorPAC(h)&&(14&~h||this.addFormatting(i.pts,["i"]))}else this.isNormalChar(c)&&(0===h&&(h=null),p=Ze(c),p+=Ze(h),this[this.mode_](i.pts,p),this.column_+=p.length)}};it.prototype=new te,it.prototype.flushDisplayed=function(i){var u=this.displayed_.map((function(i,u){try{return i.trim()}catch(i){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+u+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");u.length&&this.trigger("data",{startPts:this.startPts_,endPts:i,text:u,stream:this.name_})},it.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=tt(),this.nonDisplayed_=tt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},it.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},it.prototype.isSpecialCharacter=function(i,u){return i===this.EXT_&&u>=48&&u<=63},it.prototype.isExtCharacter=function(i,u){return(i===this.EXT_+1||i===this.EXT_+2)&&u>=32&&u<=63},it.prototype.isMidRowCode=function(i,u){return i===this.EXT_&&u>=32&&u<=47},it.prototype.isOffsetControlCode=function(i,u){return i===this.OFFSET_&&u>=33&&u<=35},it.prototype.isPAC=function(i,u){return i>=this.BASE_&&i<this.BASE_+8&&u>=64&&u<=127},it.prototype.isColorPAC=function(i){return i>=64&&i<=79||i>=96&&i<=127},it.prototype.isNormalChar=function(i){return i>=32&&i<=127},it.prototype.setRollUp=function(i,u){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(i),this.nonDisplayed_=tt(),this.displayed_=tt()),void 0!==u&&u!==this.row_)for(var l=0;l<this.rollUpRows_;l++)this.displayed_[u-l]=this.displayed_[this.row_-l],this.displayed_[this.row_-l]="";void 0===u&&(u=this.row_),this.topRow_=u-this.rollUpRows_+1},it.prototype.addFormatting=function(i,u){this.formatting_=this.formatting_.concat(u);var l=u.reduce((function(i,u){return i+"<"+u+">"}),"");this[this.mode_](i,l)},it.prototype.clearFormatting=function(i){if(this.formatting_.length){var u=this.formatting_.reverse().reduce((function(i,u){return i+"</"+u+">"}),"");this.formatting_=[],this[this.mode_](i,u)}},it.prototype.popOn=function(i,u){var l=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=l+=u},it.prototype.rollUp=function(i,u){var l=this.displayed_[this.row_];this.displayed_[this.row_]=l+=u},it.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++)this.displayed_[i]="";for(i=this.row_+1;i<15;i++)this.displayed_[i]="";for(i=this.topRow_;i<this.row_;i++)this.displayed_[i]=this.displayed_[i+1];this.displayed_[this.row_]=""},it.prototype.paintOn=function(i,u){var l=this.displayed_[this.row_];this.displayed_[this.row_]=l+=u};var rt={CaptionStream:ze,Cea608Stream:it,Cea708Stream:$e},nt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},at="shared",st=function handleRollover(i,u){var l=1;for(i>u&&(l=-1);Math.abs(u-i)>4294967296;)i+=8589934592*l;return i},ot=function TimestampRolloverStream(i){var u,l;TimestampRolloverStream.prototype.init.call(this),this.type_=i||at,this.push=function(i){this.type_!==at&&i.type!==this.type_||(void 0===l&&(l=i.dts),i.dts=st(i.dts,l),i.pts=st(i.pts,l),u=i.dts,this.trigger("data",i))},this.flush=function(){l=u,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){l=void 0,u=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ot.prototype=new te;var ut,lt=ot,dt=st,ct=function percentEncode(i,u,l){var c,h="";for(c=u;c<l;c++)h+="%"+("00"+i[c].toString(16)).slice(-2);return h},ht=function parseUtf8(i,u,l){return decodeURIComponent(ct(i,u,l))},pt=function parseIso88591(i,u,l){return unescape(ct(i,u,l))},ft=function parseSyncSafeInteger(i){return i[0]<<21|i[1]<<14|i[2]<<7|i[3]},mt={TXXX:function TXXX(i){var u;if(3===i.data[0]){for(u=1;u<i.data.length;u++)if(0===i.data[u]){i.description=ht(i.data,1,u),i.value=ht(i.data,u+1,i.data.length).replace(/\0*$/,"");break}i.data=i.value}},WXXX:function WXXX(i){var u;if(3===i.data[0])for(u=1;u<i.data.length;u++)if(0===i.data[u]){i.description=ht(i.data,1,u),i.url=ht(i.data,u+1,i.data.length);break}},PRIV:function PRIV(i){var u;for(u=0;u<i.data.length;u++)if(0===i.data[u]){i.owner=pt(i.data,0,u);break}i.privateData=i.data.subarray(u+1),i.data=i.privateData}};ut=function MetadataStream(i){var u,l={descriptor:i&&i.descriptor},c=0,h=[],p=0;if(ut.prototype.init.call(this),this.dispatchType=nt.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(u=0;u<l.descriptor.length;u++)this.dispatchType+=("00"+l.descriptor[u].toString(16)).slice(-2);this.push=function(i){var u,l,m,g,v;if("timed-metadata"===i.type){if(i.dataAlignmentIndicator&&(p=0,h.length=0),0===h.length&&(i.data.length<10||i.data[0]!=="I".charCodeAt(0)||i.data[1]!=="D".charCodeAt(0)||i.data[2]!=="3".charCodeAt(0)))return this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"}),void 0;if(h.push(i),p+=i.data.byteLength,1===h.length&&(c=ft(i.data.subarray(6,10)),c+=10),!(p<c)){for(u={data:new Uint8Array(c),frames:[],pts:h[0].pts,dts:h[0].dts},v=0;v<c;)u.data.set(h[0].data.subarray(0,c-v),v),v+=h[0].data.byteLength,p-=h[0].data.byteLength,h.shift();l=10,64&u.data[5]&&(l+=4,l+=ft(u.data.subarray(10,14)),c-=ft(u.data.subarray(16,20)));do{if((m=ft(u.data.subarray(l+4,l+8)))<1)return this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."}),void 0;if((g={id:String.fromCharCode(u.data[l],u.data[l+1],u.data[l+2],u.data[l+3]),data:u.data.subarray(l+10,l+m+10)}).key=g.id,mt[g.id]&&(mt[g.id](g),"com.apple.streaming.transportStreamTimestamp"===g.owner)){var _=g.data,y=(1&_[3])<<30|_[4]<<22|_[5]<<14|_[6]<<6|_[7]>>>2;y*=4,g.timeStamp=y+=3&_[7],void 0===u.pts&&void 0===u.dts&&(u.pts=g.timeStamp,u.dts=g.timeStamp),this.trigger("timestamp",g)}u.frames.push(g),l+=10,l+=m}while(l<c);this.trigger("data",u)}}}},ut.prototype=new te;var gt,vt,_t,yt=ut,bt=lt,Tt=188;(gt=function TransportPacketStream(){var i=new Uint8Array(Tt),u=0;gt.prototype.init.call(this),this.push=function(l){var c,h=0,p=Tt;for(u?((c=new Uint8Array(l.byteLength+u)).set(i.subarray(0,u)),c.set(l,u),u=0):c=l;p<c.byteLength;)71!==c[h]||71!==c[p]?(h++,p++):(this.trigger("data",c.subarray(h,p)),h+=Tt,p+=Tt);h<c.byteLength&&(i.set(c.subarray(h),0),u=c.byteLength-h)},this.flush=function(){u===Tt&&71===i[0]&&(this.trigger("data",i),u=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){u=0,this.trigger("reset")}}).prototype=new te,vt=function TransportParseStream(){var i,u,l,c;vt.prototype.init.call(this),c=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,i=function parsePsi(i,c){var h=0;c.payloadUnitStartIndicator&&(h+=i[h]+1),"pat"===c.type?u(i.subarray(h),c):l(i.subarray(h),c)},u=function parsePat(i,u){u.section_number=i[7],u.last_section_number=i[8],c.pmtPid=(31&i[10])<<8|i[11],u.pmtPid=c.pmtPid},l=function parsePmt(i,u){var l,h;if(1&i[5]){for(c.programMapTable={video:null,audio:null,"timed-metadata":{}},l=3+((15&i[1])<<8|i[2])-4,h=12+((15&i[10])<<8|i[11]);h<l;){var p=i[h],m=(31&i[h+1])<<8|i[h+2];p===nt.H264_STREAM_TYPE&&null===c.programMapTable.video?c.programMapTable.video=m:p===nt.ADTS_STREAM_TYPE&&null===c.programMapTable.audio?c.programMapTable.audio=m:p===nt.METADATA_STREAM_TYPE&&(c.programMapTable["timed-metadata"][m]=p),h+=5+((15&i[h+3])<<8|i[h+4])}u.programMapTable=c.programMapTable}},this.push=function(u){var l={},c=4;if(l.payloadUnitStartIndicator=!!(64&u[1]),l.pid=31&u[1],l.pid<<=8,l.pid|=u[2],(48&u[3])>>>4>1&&(c+=u[c]+1),0===l.pid)l.type="pat",i(u.subarray(c),l),this.trigger("data",l);else if(l.pid===this.pmtPid)for(l.type="pmt",i(u.subarray(c),l),this.trigger("data",l);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([u,c,l]):this.processPes_(u,c,l)},this.processPes_=function(i,u,l){l.streamType=l.pid===this.programMapTable.video?nt.H264_STREAM_TYPE:l.pid===this.programMapTable.audio?nt.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][l.pid],l.type="pes",l.data=i.subarray(u),this.trigger("data",l)}},vt.prototype=new te,vt.STREAM_TYPES={h264:27,adts:15},_t=function ElementaryStream(){var i,u=this,l=!1,c={data:[],size:0},h={data:[],size:0},p={data:[],size:0},m=function flushStream(i,l,c){var h,p,m=new Uint8Array(i.size),g={type:l},v=0,_=0;if(i.data.length&&!(i.size<9)){for(g.trackId=i.data[0].pid,v=0;v<i.data.length;v++)m.set((p=i.data[v]).data,_),_+=p.data.byteLength;!function parsePes(i,u){var l,c=i[0]<<16|i[1]<<8|i[2];u.data=new Uint8Array,1===c&&(u.packetLength=6+(i[4]<<8|i[5]),u.dataAlignmentIndicator=!!(4&i[6]),192&(l=i[7])&&(u.pts=(14&i[9])<<27|(255&i[10])<<20|(254&i[11])<<12|(255&i[12])<<5|(254&i[13])>>>3,u.pts*=4,u.pts+=(6&i[13])>>>1,u.dts=u.pts,64&l&&(u.dts=(14&i[14])<<27|(255&i[15])<<20|(254&i[16])<<12|(255&i[17])<<5|(254&i[18])>>>3,u.dts*=4,u.dts+=(6&i[18])>>>1)),u.data=i.subarray(9+i[8]))}(m,g),h="video"===l||g.packetLength<=i.size,(c||h)&&(i.size=0,i.data.length=0),h&&u.trigger("data",g)}};_t.prototype.init.call(this),this.push=function(g){({pat:function pat(){},pes:function pes(){var i,u;switch(g.streamType){case nt.H264_STREAM_TYPE:i=c,u="video";break;case nt.ADTS_STREAM_TYPE:i=h,u="audio";break;case nt.METADATA_STREAM_TYPE:i=p,u="timed-metadata";break;default:return}g.payloadUnitStartIndicator&&m(i,u,!0),i.data.push(g),i.size+=g.data.byteLength},pmt:function pmt(){var c={type:"metadata",tracks:[]};null!==(i=g.programMapTable).video&&c.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&c.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),l=!0,u.trigger("data",c)}})[g.type]()},this.reset=function(){c.size=0,c.data.length=0,h.size=0,h.data.length=0,this.trigger("reset")},this.flushStreams_=function(){m(c,"video"),m(h,"audio"),m(p,"timed-metadata")},this.flush=function(){if(!l&&i){var c={type:"metadata",tracks:[]};null!==i.video&&c.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&c.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),u.trigger("data",c)}l=!1,this.flushStreams_(),this.trigger("done")}},_t.prototype=new te;var St={PAT_PID:0,MP2T_PACKET_LENGTH:Tt,TransportPacketStream:gt,TransportParseStream:vt,ElementaryStream:_t,TimestampRolloverStream:bt,CaptionStream:rt.CaptionStream,Cea608Stream:rt.Cea608Stream,Cea708Stream:rt.Cea708Stream,MetadataStream:yt};for(var kt in nt)nt.hasOwnProperty(kt)&&(St[kt]=nt[kt]);var Et,Ct=St,wt=Pe,Pt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Et=function AdtsStream(i){var u,l=0;Et.prototype.init.call(this),this.skipWarn_=function(i,u){this.trigger("log",{level:"warn",message:"adts skiping bytes "+i+" to "+u+" in frame "+l+" outside syncword"})},this.push=function(c){var h,p,m,g,v,_=0;if(i||(l=0),"audio"===c.type){var y;for(u&&u.length?(m=u,(u=new Uint8Array(m.byteLength+c.data.byteLength)).set(m),u.set(c.data,m.byteLength)):u=c.data;_+7<u.length;)if(255===u[_]&&240==(246&u[_+1])){if("number"==typeof y&&(this.skipWarn_(y,_),y=null),p=2*(1&~u[_+1]),v=(g=1024*(1+(3&u[_+6])))*wt/Pt[(60&u[_+2])>>>2],u.byteLength-_<(h=(3&u[_+3])<<11|u[_+4]<<3|(224&u[_+5])>>5))break;this.trigger("data",{pts:c.pts+l*v,dts:c.dts+l*v,sampleCount:g,audioobjecttype:1+(u[_+2]>>>6&3),channelcount:(1&u[_+2])<<2|(192&u[_+3])>>>6,samplerate:Pt[(60&u[_+2])>>>2],samplingfrequencyindex:(60&u[_+2])>>>2,samplesize:16,data:u.subarray(_+7+p,_+h)}),l++,_+=h}else"number"!=typeof y&&(y=_),_++;"number"==typeof y&&(this.skipWarn_(y,_),y=null),u=u.subarray(_)}},this.flush=function(){l=0,this.trigger("done")},this.reset=function(){u=void 0,this.trigger("reset")},this.endTimeline=function(){u=void 0,this.trigger("endedtimeline")}},Et.prototype=new te;var At,xt,It,Ot=Et,Lt=function ExpGolomb(i){var u=i.byteLength,l=0,c=0;this.length=function(){return 8*u},this.bitsAvailable=function(){return 8*u+c},this.loadWord=function(){var h=i.byteLength-u,p=new Uint8Array(4),m=Math.min(4,u);if(0===m)throw new Error("no bytes available");p.set(i.subarray(h,h+m)),l=new DataView(p.buffer).getUint32(0),c=8*m,u-=m},this.skipBits=function(i){var h;c>i?(l<<=i,c-=i):(i-=c,i-=8*(h=Math.floor(i/8)),u-=h,this.loadWord(),l<<=i,c-=i)},this.readBits=function(i){var h=Math.min(c,i),p=l>>>32-h;return(c-=h)>0?l<<=h:u>0&&this.loadWord(),(h=i-h)>0?p<<h|this.readBits(h):p},this.skipLeadingZeros=function(){var i;for(i=0;i<c;++i)if(l&2147483648>>>i)return l<<=i,c-=i,i;return this.loadWord(),i+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var i=this.skipLeadingZeros();return this.readBits(i+1)-1},this.readExpGolomb=function(){var i=this.readUnsignedExpGolomb();return 1&i?1+i>>>1:-1*(i>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};xt=function NalByteStream(){var i,u,l=0;xt.prototype.init.call(this),this.push=function(c){var h;u?((h=new Uint8Array(u.byteLength+c.data.byteLength)).set(u),h.set(c.data,u.byteLength),u=h):u=c.data;for(var p=u.byteLength;l<p-3;l++)if(1===u[l+2]){i=l+5;break}for(;i<p;)switch(u[i]){case 0:if(0!==u[i-1]){i+=2;break}if(0!==u[i-2]){i++;break}l+3!==i-2&&this.trigger("data",u.subarray(l+3,i-2));do{i++}while(1!==u[i]&&i<p);l=i-2,i+=3;break;case 1:if(0!==u[i-1]||0!==u[i-2]){i+=3;break}this.trigger("data",u.subarray(l+3,i-2)),l=i-2,i+=3;break;default:i+=3}u=u.subarray(l),i-=l,l=0},this.reset=function(){u=null,l=0,this.trigger("reset")},this.flush=function(){u&&u.byteLength>3&&this.trigger("data",u.subarray(l+3)),u=null,l=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},xt.prototype=new te,It={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},At=function H264Stream(){var i,u,l,c,h,p,m,g=new xt;At.prototype.init.call(this),i=this,this.push=function(i){"video"===i.type&&(u=i.trackId,l=i.pts,c=i.dts,g.push(i))},g.on("data",(function(m){var g={trackId:u,pts:l,dts:c,data:m,nalUnitTypeCode:31&m[0]};switch(g.nalUnitTypeCode){case 5:g.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:g.nalUnitType="sei_rbsp",g.escapedRBSP=h(m.subarray(1));break;case 7:g.nalUnitType="seq_parameter_set_rbsp",g.escapedRBSP=h(m.subarray(1)),g.config=p(g.escapedRBSP);break;case 8:g.nalUnitType="pic_parameter_set_rbsp";break;case 9:g.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",g)})),g.on("done",(function(){i.trigger("done")})),g.on("partialdone",(function(){i.trigger("partialdone")})),g.on("reset",(function(){i.trigger("reset")})),g.on("endedtimeline",(function(){i.trigger("endedtimeline")})),this.flush=function(){g.flush()},this.partialFlush=function(){g.partialFlush()},this.reset=function(){g.reset()},this.endTimeline=function(){g.endTimeline()},m=function skipScalingList(i,u){var l,c=8,h=8;for(l=0;l<i;l++)0!==h&&(h=(c+u.readExpGolomb()+256)%256),c=0===h?c:h},h=function discardEmulationPreventionBytes(i){for(var u,l,c=i.byteLength,h=[],p=1;p<c-2;)0===i[p]&&0===i[p+1]&&3===i[p+2]?(h.push(p+2),p+=2):p++;if(0===h.length)return i;u=c-h.length,l=new Uint8Array(u);var m=0;for(p=0;p<u;m++,p++)m===h[0]&&(m++,h.shift()),l[p]=i[m];return l},p=function readSequenceParameterSet(i){var u,l,c,h,p,g,v,_,y,b,T,S,k=0,E=0,C=0,w=0,P=[1,1];if(l=(u=new Lt(i)).readUnsignedByte(),h=u.readUnsignedByte(),c=u.readUnsignedByte(),u.skipUnsignedExpGolomb(),It[l]&&(3===(p=u.readUnsignedExpGolomb())&&u.skipBits(1),u.skipUnsignedExpGolomb(),u.skipUnsignedExpGolomb(),u.skipBits(1),u.readBoolean()))for(T=3!==p?8:12,S=0;S<T;S++)u.readBoolean()&&m(S<6?16:64,u);if(u.skipUnsignedExpGolomb(),0===(g=u.readUnsignedExpGolomb()))u.readUnsignedExpGolomb();else if(1===g)for(u.skipBits(1),u.skipExpGolomb(),u.skipExpGolomb(),v=u.readUnsignedExpGolomb(),S=0;S<v;S++)u.skipExpGolomb();if(u.skipUnsignedExpGolomb(),u.skipBits(1),_=u.readUnsignedExpGolomb(),y=u.readUnsignedExpGolomb(),0===(b=u.readBits(1))&&u.skipBits(1),u.skipBits(1),u.readBoolean()&&(k=u.readUnsignedExpGolomb(),E=u.readUnsignedExpGolomb(),C=u.readUnsignedExpGolomb(),w=u.readUnsignedExpGolomb()),u.readBoolean()&&u.readBoolean()){switch(u.readUnsignedByte()){case 1:P=[1,1];break;case 2:P=[12,11];break;case 3:P=[10,11];break;case 4:P=[16,11];break;case 5:P=[40,33];break;case 6:P=[24,11];break;case 7:P=[20,11];break;case 8:P=[32,11];break;case 9:P=[80,33];break;case 10:P=[18,11];break;case 11:P=[15,11];break;case 12:P=[64,33];break;case 13:P=[160,99];break;case 14:P=[4,3];break;case 15:P=[3,2];break;case 16:P=[2,1];break;case 255:P=[u.readUnsignedByte()<<8|u.readUnsignedByte(),u.readUnsignedByte()<<8|u.readUnsignedByte()]}P&&P[0]/P[1]}return{profileIdc:l,levelIdc:c,profileCompatibility:h,width:16*(_+1)-2*k-2*E,height:(2-b)*(y+1)*16-2*C-2*w,sarRatio:P}}},At.prototype=new te;var Dt,Vt={H264Stream:At,NalByteStream:xt},Rt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Mt=function parseId3TagSize(i,u){var l=i[u+6]<<21|i[u+7]<<14|i[u+8]<<7|i[u+9];return l=l>=0?l:0,(16&i[u+5])>>4?l+20:l+10},Nt=function getId3Offset(i,u){return i.length-u<10||i[u]!=="I".charCodeAt(0)||i[u+1]!=="D".charCodeAt(0)||i[u+2]!=="3".charCodeAt(0)?u:getId3Offset(i,u+=Mt(i,u))},Bt=function parseSyncSafeInteger(i){return i[0]<<21|i[1]<<14|i[2]<<7|i[3]},Ft=function parseIso88591(i,u,l){return unescape(function percentEncode(i,u,l){var c,h="";for(c=u;c<l;c++)h+="%"+("00"+i[c].toString(16)).slice(-2);return h}(i,u,l))},Ut={isLikelyAacData:function isLikelyAacData(i){var u=Nt(i,0);return i.length>=u+2&&!(255&~i[u])&&!(240&~i[u+1])&&16==(22&i[u+1])},parseId3TagSize:Mt,parseAdtsSize:function parseAdtsSize(i,u){return 6144&i[u+3]|i[u+4]<<3|(224&i[u+5])>>5},parseType:function parseType(i,u){return i[u]==="I".charCodeAt(0)&&i[u+1]==="D".charCodeAt(0)&&i[u+2]==="3".charCodeAt(0)?"timed-metadata":!0&i[u]&&!(240&~i[u+1])?"audio":null},parseSampleRate:function parseSampleRate(i){for(var u=0;u+5<i.length;){if(255===i[u]&&240==(246&i[u+1]))return Rt[(60&i[u+2])>>>2];u++}return null},parseAacTimestamp:function parseAacTimestamp(i){var u,l,c;u=10,64&i[5]&&(u+=4,u+=Bt(i.subarray(10,14)));do{if((l=Bt(i.subarray(u+4,u+8)))<1)return null;if("PRIV"===String.fromCharCode(i[u],i[u+1],i[u+2],i[u+3])){c=i.subarray(u+10,u+l+10);for(var h=0;h<c.byteLength;h++)if(0===c[h]){if("com.apple.streaming.transportStreamTimestamp"===Ft(c,0,h)){var p=c.subarray(h+1),m=(1&p[3])<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]>>>2;return m*=4,m+=3&p[7]}break}}u+=10,u+=l}while(u<i.byteLength);return null}};(Dt=function AacStream(){var i=new Uint8Array,u=0;Dt.prototype.init.call(this),this.setTimestamp=function(i){u=i},this.push=function(l){var c,h,p,m=0,g=0;for(i.length?(p=i.length,(i=new Uint8Array(l.byteLength+p)).set(i.subarray(0,p)),i.set(l,p)):i=l;i.length-g>=3;)if(i[g]!=="I".charCodeAt(0)||i[g+1]!=="D".charCodeAt(0)||i[g+2]!=="3".charCodeAt(0))if(255&~i[g]||240&~i[g+1])g++;else{if(i.length-g<7)break;if(g+(m=Ut.parseAdtsSize(i,g))>i.length)break;h={type:"audio",data:i.subarray(g,g+m),pts:u,dts:u},this.trigger("data",h),g+=m}else{if(i.length-g<10)break;if(g+(m=Ut.parseId3TagSize(i,g))>i.length)break;c={type:"timed-metadata",data:i.subarray(g,g+m)},this.trigger("data",c),g+=m}i=i.length-g>0?i.subarray(g):new Uint8Array},this.reset=function(){i=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){i=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new te;var jt,Ht,qt,Wt,Gt=Dt,zt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Xt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Kt=Vt.H264Stream,Qt=Ut.isLikelyAacData,Yt=Pe,$t=function retriggerForStream(i,u){u.stream=i,this.trigger("log",u)},Jt=function addPipelineLogRetriggers(i,u){for(var l=Object.keys(u),c=0;c<l.length;c++){var h=l[c];"headOfPipeline"!==h&&u[h].on&&u[h].on("log",$t.bind(i,h))}},Zt=function arrayEquals(i,u){var l;if(i.length!==u.length)return!1;for(l=0;l<i.length;l++)if(i[l]!==u[l])return!1;return!0},ei=function generateSegmentTimingInfo(i,u,l,c,h,p){return{start:{dts:i,pts:i+(l-u)},end:{dts:i+(c-u),pts:i+(h-l)},prependedContentDuration:p,baseMediaDecodeTime:i}};Ht=function AudioSegmentStream(i,u){var l,c=[],h=0,p=0,m=1/0;l=(u=u||{}).firstSequenceNumber||0,Ht.prototype.init.call(this),this.push=function(u){Ue(i,u),i&&zt.forEach((function(l){i[l]=u[l]})),c.push(u)},this.setEarliestDts=function(i){h=i},this.setVideoBaseMediaDecodeTime=function(i){m=i},this.setAudioAppendStart=function(i){p=i},this.flush=function(){var g,v,_,y,b,T,S;if(0===c.length)return this.trigger("done","AudioSegmentStream"),void 0;g=Ve(c,i,h),i.baseMediaDecodeTime=Fe(i,u.keepOriginalTimestamps),S=De(i,g,p,m),i.samples=Re(g),_=pe(Me(g)),c=[],v=fe(l,[i]),y=new Uint8Array(v.byteLength+_.byteLength),l++,y.set(v),y.set(_,v.byteLength),Be(i),b=Math.ceil(1024*Yt/i.samplerate),g.length&&(T=g.length*b,this.trigger("segmentTimingInfo",ei(Ie(i.baseMediaDecodeTime,i.samplerate),g[0].dts,g[0].pts,g[0].dts+T,g[0].pts+T,S||0)),this.trigger("timingInfo",{start:g[0].pts,end:g[0].pts+T})),this.trigger("data",{track:i,boxes:y}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Be(i),c=[],this.trigger("reset")}},Ht.prototype=new te,jt=function VideoSegmentStream(i,u){var l,c,h,p=[],m=[];l=(u=u||{}).firstSequenceNumber||0,jt.prototype.init.call(this),delete i.minPTS,this.gopCache_=[],this.push=function(u){Ue(i,u),"seq_parameter_set_rbsp"!==u.nalUnitType||c||(c=u.config,i.sps=[u.data],Xt.forEach((function(u){i[u]=c[u]}),this)),"pic_parameter_set_rbsp"!==u.nalUnitType||h||(h=u.data,i.pps=[u.data]),p.push(u)},this.flush=function(){for(var c,h,g,v,_,y,b,T,S=0;p.length&&"access_unit_delimiter_rbsp"!==p[0].nalUnitType;)p.shift();if(0===p.length)return this.resetStream_(),this.trigger("done","VideoSegmentStream"),void 0;if(c=ve(p),(g=_e(c))[0][0].keyFrame||((h=this.getGopForFusion_(p[0],i))?(S=h.duration,g.unshift(h),g.byteLength+=h.byteLength,g.nalCount+=h.nalCount,g.pts=h.pts,g.dts=h.dts,g.duration+=h.duration):g=ye(g)),m.length){var k;if(!(k=u.alignGopsAtEnd?this.alignGopsAtEnd_(g):this.alignGopsAtStart_(g)))return this.gopCache_.unshift({gop:g.pop(),pps:i.pps,sps:i.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.resetStream_(),this.trigger("done","VideoSegmentStream"),void 0;Be(i),g=k}Ue(i,g),i.samples=be(g),_=pe(Te(g)),i.baseMediaDecodeTime=Fe(i,u.keepOriginalTimestamps),this.trigger("processedGopsInfo",g.map((function(i){return{pts:i.pts,dts:i.dts,byteLength:i.byteLength}}))),this.trigger("segmentTimingInfo",ei(i.baseMediaDecodeTime,(b=g[0]).dts,b.pts,(T=g[g.length-1]).dts+T.duration,T.pts+T.duration,S)),this.trigger("timingInfo",{start:g[0].pts,end:g[g.length-1].pts+g[g.length-1].duration}),this.gopCache_.unshift({gop:g.pop(),pps:i.pps,sps:i.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),p=[],this.trigger("baseMediaDecodeTime",i.baseMediaDecodeTime),this.trigger("timelineStartInfo",i.timelineStartInfo),v=fe(l,[i]),y=new Uint8Array(v.byteLength+_.byteLength),l++,y.set(v),y.set(_,v.byteLength),this.trigger("data",{track:i,boxes:y}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),p=[],this.gopCache_.length=0,m.length=0,this.trigger("reset")},this.resetStream_=function(){Be(i),c=void 0,h=void 0},this.getGopForFusion_=function(u){var l,c,h,p,m,g=1/0;for(m=0;m<this.gopCache_.length;m++)h=(p=this.gopCache_[m]).gop,i.pps&&Zt(i.pps[0],p.pps[0])&&i.sps&&Zt(i.sps[0],p.sps[0])&&(h.dts<i.timelineStartInfo.dts||(l=u.dts-h.dts-h.duration)>=-1e4&&l<=45e3&&(!c||g>l)&&(c=p,g=l));return c?c.gop:null},this.alignGopsAtStart_=function(i){var u,l,c,h,p,g,v,_;for(p=i.byteLength,g=i.nalCount,v=i.duration,u=l=0;u<m.length&&l<i.length&&(c=m[u]).pts!==(h=i[l]).pts;)h.pts>c.pts?u++:(l++,p-=h.byteLength,g-=h.nalCount,v-=h.duration);return 0===l?i:l===i.length?null:((_=i.slice(l)).byteLength=p,_.duration=v,_.nalCount=g,_.pts=_[0].pts,_.dts=_[0].dts,_)},this.alignGopsAtEnd_=function(i){var u,l,c,h,p,g,v;for(u=m.length-1,l=i.length-1,p=null,g=!1;u>=0&&l>=0;){if((c=m[u]).pts===(h=i[l]).pts){g=!0;break}c.pts>h.pts?u--:(u===m.length-1&&(p=l),l--)}if(!g&&null===p)return null;if(0===(v=g?l:p))return i;var _=i.slice(v),y=_.reduce((function(i,u){return i.byteLength+=u.byteLength,i.duration+=u.duration,i.nalCount+=u.nalCount,i}),{byteLength:0,duration:0,nalCount:0});return _.byteLength=y.byteLength,_.duration=y.duration,_.nalCount=y.nalCount,_.pts=_[0].pts,_.dts=_[0].dts,_},this.alignGopsWith=function(i){m=i}},jt.prototype=new te,Wt=function CoalesceStream(i,u){this.numberOfTracks=0,this.metadataStream=u,this.remuxTracks=void 0===(i=i||{}).remux||!!i.remux,this.keepOriginalTimestamps="boolean"==typeof i.keepOriginalTimestamps&&i.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Wt.prototype.init.call(this),this.push=function(i){return i.text?this.pendingCaptions.push(i):i.frames?this.pendingMetadata.push(i):(this.pendingTracks.push(i.track),this.pendingBytes+=i.boxes.byteLength,"video"===i.track.type&&(this.videoTrack=i.track,this.pendingBoxes.push(i.boxes)),"audio"===i.track.type&&(this.audioTrack=i.track,this.pendingBoxes.unshift(i.boxes)),void 0)}},Wt.prototype=new te,Wt.prototype.flush=function(i){var u,l,c,h,p=0,m={captions:[],captionStreams:{},metadata:[],info:{}},g=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==i&&"AudioSegmentStream"!==i)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0),void 0}if(this.videoTrack?(g=this.videoTrack.timelineStartInfo.pts,Xt.forEach((function(i){m.info[i]=this.videoTrack[i]}),this)):this.audioTrack&&(g=this.audioTrack.timelineStartInfo.pts,zt.forEach((function(i){m.info[i]=this.audioTrack[i]}),this)),this.videoTrack||this.audioTrack){for(m.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,c=me(this.pendingTracks),m.initSegment=new Uint8Array(c.byteLength),m.initSegment.set(c),m.data=new Uint8Array(this.pendingBytes),h=0;h<this.pendingBoxes.length;h++)m.data.set(this.pendingBoxes[h],p),p+=this.pendingBoxes[h].byteLength;for(h=0;h<this.pendingCaptions.length;h++)(u=this.pendingCaptions[h]).startTime=Le(u.startPts,g,this.keepOriginalTimestamps),u.endTime=Le(u.endPts,g,this.keepOriginalTimestamps),m.captionStreams[u.stream]=!0,m.captions.push(u);for(h=0;h<this.pendingMetadata.length;h++)(l=this.pendingMetadata[h]).cueTime=Le(l.pts,g,this.keepOriginalTimestamps),m.metadata.push(l);for(m.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",m),h=0;h<m.captions.length;h++)this.trigger("caption",u=m.captions[h]);for(h=0;h<m.metadata.length;h++)this.trigger("id3Frame",l=m.metadata[h])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Wt.prototype.setRemux=function(i){this.remuxTracks=i},qt=function Transmuxer(i){var u,l,c=this,h=!0;qt.prototype.init.call(this),this.baseMediaDecodeTime=(i=i||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var h={};this.transmuxPipeline_=h,h.type="aac",h.metadataStream=new Ct.MetadataStream,h.aacStream=new Gt,h.audioTimestampRolloverStream=new Ct.TimestampRolloverStream("audio"),h.timedMetadataTimestampRolloverStream=new Ct.TimestampRolloverStream("timed-metadata"),h.adtsStream=new Ot,h.coalesceStream=new Wt(i,h.metadataStream),h.headOfPipeline=h.aacStream,h.aacStream.pipe(h.audioTimestampRolloverStream).pipe(h.adtsStream),h.aacStream.pipe(h.timedMetadataTimestampRolloverStream).pipe(h.metadataStream).pipe(h.coalesceStream),h.metadataStream.on("timestamp",(function(i){h.aacStream.setTimestamp(i.timeStamp)})),h.aacStream.on("data",(function(p){"timed-metadata"!==p.type&&"audio"!==p.type||h.audioSegmentStream||(l=l||{timelineStartInfo:{baseMediaDecodeTime:c.baseMediaDecodeTime},codec:"adts",type:"audio"},h.coalesceStream.numberOfTracks++,h.audioSegmentStream=new Ht(l,i),h.audioSegmentStream.on("log",c.getLogTrigger_("audioSegmentStream")),h.audioSegmentStream.on("timingInfo",c.trigger.bind(c,"audioTimingInfo")),h.adtsStream.pipe(h.audioSegmentStream).pipe(h.coalesceStream),c.trigger("trackinfo",{hasAudio:!!l,hasVideo:!!u}))})),h.coalesceStream.on("data",this.trigger.bind(this,"data")),h.coalesceStream.on("done",this.trigger.bind(this,"done")),Jt(this,h)},this.setupTsPipeline=function(){var h={};this.transmuxPipeline_=h,h.type="ts",h.metadataStream=new Ct.MetadataStream,h.packetStream=new Ct.TransportPacketStream,h.parseStream=new Ct.TransportParseStream,h.elementaryStream=new Ct.ElementaryStream,h.timestampRolloverStream=new Ct.TimestampRolloverStream,h.adtsStream=new Ot,h.h264Stream=new Kt,h.captionStream=new Ct.CaptionStream(i),h.coalesceStream=new Wt(i,h.metadataStream),h.headOfPipeline=h.packetStream,h.packetStream.pipe(h.parseStream).pipe(h.elementaryStream).pipe(h.timestampRolloverStream),h.timestampRolloverStream.pipe(h.h264Stream),h.timestampRolloverStream.pipe(h.adtsStream),h.timestampRolloverStream.pipe(h.metadataStream).pipe(h.coalesceStream),h.h264Stream.pipe(h.captionStream).pipe(h.coalesceStream),h.elementaryStream.on("data",(function(p){var m;if("metadata"===p.type){for(m=p.tracks.length;m--;)u||"video"!==p.tracks[m].type?l||"audio"!==p.tracks[m].type||((l=p.tracks[m]).timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime):(u=p.tracks[m]).timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime;u&&!h.videoSegmentStream&&(h.coalesceStream.numberOfTracks++,h.videoSegmentStream=new jt(u,i),h.videoSegmentStream.on("log",c.getLogTrigger_("videoSegmentStream")),h.videoSegmentStream.on("timelineStartInfo",(function(u){l&&!i.keepOriginalTimestamps&&(l.timelineStartInfo=u,h.audioSegmentStream.setEarliestDts(u.dts-c.baseMediaDecodeTime))})),h.videoSegmentStream.on("processedGopsInfo",c.trigger.bind(c,"gopInfo")),h.videoSegmentStream.on("segmentTimingInfo",c.trigger.bind(c,"videoSegmentTimingInfo")),h.videoSegmentStream.on("baseMediaDecodeTime",(function(i){l&&h.audioSegmentStream.setVideoBaseMediaDecodeTime(i)})),h.videoSegmentStream.on("timingInfo",c.trigger.bind(c,"videoTimingInfo")),h.h264Stream.pipe(h.videoSegmentStream).pipe(h.coalesceStream)),l&&!h.audioSegmentStream&&(h.coalesceStream.numberOfTracks++,h.audioSegmentStream=new Ht(l,i),h.audioSegmentStream.on("log",c.getLogTrigger_("audioSegmentStream")),h.audioSegmentStream.on("timingInfo",c.trigger.bind(c,"audioTimingInfo")),h.audioSegmentStream.on("segmentTimingInfo",c.trigger.bind(c,"audioSegmentTimingInfo")),h.adtsStream.pipe(h.audioSegmentStream).pipe(h.coalesceStream)),c.trigger("trackinfo",{hasAudio:!!l,hasVideo:!!u})}})),h.coalesceStream.on("data",this.trigger.bind(this,"data")),h.coalesceStream.on("id3Frame",(function(i){i.dispatchType=h.metadataStream.dispatchType,c.trigger("id3Frame",i)})),h.coalesceStream.on("caption",this.trigger.bind(this,"caption")),h.coalesceStream.on("done",this.trigger.bind(this,"done")),Jt(this,h)},this.setBaseMediaDecodeTime=function(c){var h=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=c),l&&(l.timelineStartInfo.dts=void 0,l.timelineStartInfo.pts=void 0,Be(l),h.audioTimestampRolloverStream&&h.audioTimestampRolloverStream.discontinuity()),u&&(h.videoSegmentStream&&(h.videoSegmentStream.gopCache_=[]),u.timelineStartInfo.dts=void 0,u.timelineStartInfo.pts=void 0,Be(u),h.captionStream.reset()),h.timestampRolloverStream&&h.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(i){l&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(i)},this.setRemux=function(u){var l=this.transmuxPipeline_;i.remux=u,l&&l.coalesceStream&&l.coalesceStream.setRemux(u)},this.alignGopsWith=function(i){u&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(i)},this.getLogTrigger_=function(i){var u=this;return function(l){l.stream=i,u.trigger("log",l)}},this.push=function(i){if(h){var u=Qt(i);u&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():u||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),h=!1}this.transmuxPipeline_.headOfPipeline.push(i)},this.flush=function(){h=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},qt.prototype=new te;var ti,ii,ri,ni={Transmuxer:qt,VideoSegmentStream:jt,AudioSegmentStream:Ht,AUDIO_PROPERTIES:zt,VIDEO_PROPERTIES:Xt,generateSegmentTimingInfo:ei},ai=function toUnsigned(i){return i>>>0},si=function parseType(i){var u="";return u+=String.fromCharCode(i[0]),u+=String.fromCharCode(i[1]),u+=String.fromCharCode(i[2]),u+=String.fromCharCode(i[3])},oi=ai,ui=function findBox(i,u){var l,c,h,p,m,g=[];if(!u.length)return null;for(l=0;l<i.byteLength;)c=oi(i[l]<<24|i[l+1]<<16|i[l+2]<<8|i[l+3]),h=si(i.subarray(l+4,l+8)),p=c>1?l+c:i.byteLength,h===u[0]&&(1===u.length?g.push(i.subarray(l+8,p)):(m=findBox(i.subarray(l+8,p),u.slice(1))).length&&(g=g.concat(m))),l=p;return g},li=ai,di=re.getUint64,ci=function tfdt(i){var u={version:i[0],flags:new Uint8Array(i.subarray(1,4))};return u.baseMediaDecodeTime=1===u.version?di(i.subarray(4)):li(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),u},hi=function parseSampleFlags(i){return{isLeading:(12&i[0])>>>2,dependsOn:3&i[0],isDependedOn:(192&i[1])>>>6,hasRedundancy:(48&i[1])>>>4,paddingValue:(14&i[1])>>>1,isNonSyncSample:1&i[1],degradationPriority:i[2]<<8|i[3]}},pi=function trun(i){var u,l={version:i[0],flags:new Uint8Array(i.subarray(1,4)),samples:[]},c=new DataView(i.buffer,i.byteOffset,i.byteLength),h=1&l.flags[2],p=4&l.flags[2],m=1&l.flags[1],g=2&l.flags[1],v=4&l.flags[1],_=8&l.flags[1],y=c.getUint32(4),b=8;for(h&&(l.dataOffset=c.getInt32(b),b+=4),p&&y&&(u={flags:hi(i.subarray(b,b+4))},b+=4,m&&(u.duration=c.getUint32(b),b+=4),g&&(u.size=c.getUint32(b),b+=4),_&&(u.compositionTimeOffset=1===l.version?c.getInt32(b):c.getUint32(b),b+=4),l.samples.push(u),y--);y--;)u={},m&&(u.duration=c.getUint32(b),b+=4),g&&(u.size=c.getUint32(b),b+=4),v&&(u.flags=hi(i.subarray(b,b+4)),b+=4),_&&(u.compositionTimeOffset=1===l.version?c.getInt32(b):c.getUint32(b),b+=4),l.samples.push(u);return l},fi=function tfhd(i){var u,l=new DataView(i.buffer,i.byteOffset,i.byteLength),c={version:i[0],flags:new Uint8Array(i.subarray(1,4)),trackId:l.getUint32(4)},h=1&c.flags[2],p=2&c.flags[2],m=8&c.flags[2],g=16&c.flags[2],v=32&c.flags[2],_=65536&c.flags[0],y=131072&c.flags[0];return u=8,h&&(u+=4,c.baseDataOffset=l.getUint32(12),u+=4),p&&(c.sampleDescriptionIndex=l.getUint32(u),u+=4),m&&(c.defaultSampleDuration=l.getUint32(u),u+=4),g&&(c.defaultSampleSize=l.getUint32(u),u+=4),v&&(c.defaultSampleFlags=l.getUint32(u)),_&&(c.durationIsEmpty=!0),!h&&y&&(c.baseDataOffsetIsMoof=!0),c},mi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},gi="undefined"!=typeof window?window:void 0!==mi?mi:"undefined"!=typeof self?self:{},vi=We,_i=rt.CaptionStream,yi=function mapToSample(i,u){for(var l=i,c=0;c<u.length;c++){var h=u[c];if(l<h.size)return h;l-=h.size}return null},bi=function parseCaptionNals(i,u){var l=ui(i,["moof","traf"]),c=ui(i,["mdat"]),h={},p=[];return c.forEach((function(i,u){p.push({mdat:i,traf:l[u]})})),p.forEach((function(i){var l,c,p=i.mdat,m=i.traf,g=ui(m,["tfhd"]),v=fi(g[0]),_=v.trackId,y=ui(m,["tfdt"]),b=y.length>0?ci(y[0]).baseMediaDecodeTime:0,T=ui(m,["trun"]);u===_&&T.length>0&&(l=function parseSamples(i,u,l){var c=u,h=l.defaultSampleDuration||0,p=l.defaultSampleSize||0,m=l.trackId,g=[];return i.forEach((function(i){var u=pi(i).samples;u.forEach((function(i){void 0===i.duration&&(i.duration=h),void 0===i.size&&(i.size=p),i.trackId=m,i.dts=c,void 0===i.compositionTimeOffset&&(i.compositionTimeOffset=0),"bigint"==typeof c?(i.pts=c+gi.BigInt(i.compositionTimeOffset),c+=gi.BigInt(i.duration)):(i.pts=c+i.compositionTimeOffset,c+=i.duration)})),g=g.concat(u)})),g}(T,b,v),c=function findSeiNals(i,u,l){var c,h,p,m,g=new DataView(i.buffer,i.byteOffset,i.byteLength),v={logs:[],seiNals:[]};for(h=0;h+4<i.length;h+=p)if(p=g.getUint32(h),h+=4,!(p<=0))switch(31&i[h]){case 6:var _=i.subarray(h+1,h+1+p),y=yi(h,u);if(c={nalUnitType:"sei_rbsp",size:p,data:_,escapedRBSP:vi(_),trackId:l},y)c.pts=y.pts,c.dts=y.dts,m=y;else{if(!m){v.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+h+" for trackId "+l+". See mux.js#223."});break}c.pts=m.pts,c.dts=m.dts}v.seiNals.push(c)}return v}(p,l,_),h[_]||(h[_]={seiNals:[],logs:[]}),h[_].seiNals=h[_].seiNals.concat(c.seiNals),h[_].logs=h[_].logs.concat(c.logs))})),h},Ti=function CaptionParser(){var i,u,l,c,h,p,m=!1;this.isInitialized=function(){return m},this.init=function(u){i=new _i,m=!0,p=!!u&&u.isPartial,i.on("data",(function(i){i.startTime=i.startPts/c,i.endTime=i.endPts/c,h.captions.push(i),h.captionStreams[i.stream]=!0})),i.on("log",(function(i){h.logs.push(i)}))},this.isNewInit=function(i,u){return!(i&&0===i.length||u&&"object"==typeof u&&0===Object.keys(u).length)&&(l!==i[0]||c!==u[l])},this.parse=function(i,p,m){var g;if(!this.isInitialized())return null;if(!p||!m)return null;if(this.isNewInit(p,m))c=m[l=p[0]];else if(null===l||!c)return u.push(i),null;for(;u.length>0;){var v=u.shift();this.parse(v,p,m)}return g=function parseEmbeddedCaptions(i,u,l){if(null===u)return null;var c=bi(i,u)[u]||{};return{seiNals:c.seiNals,logs:c.logs,timescale:l}}(i,l,c),g&&g.logs&&(h.logs=h.logs.concat(g.logs)),null!==g&&g.seiNals?(this.pushNals(g.seiNals),this.flushStream(),h):h.logs.length?{logs:h.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(u){if(!this.isInitialized()||!u||0===u.length)return null;u.forEach((function(u){i.push(u)}))},this.flushStream=function(){if(!this.isInitialized())return null;p?i.partialFlush():i.flush()},this.clearParsedCaptions=function(){h.captions=[],h.captionStreams={},h.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;i.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){u=[],l=null,c=null,h?this.clearParsedCaptions():h={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Si=ai,ki=function toHexString(i){return("00"+i.toString(16)).slice(-2)},Ei=re.getUint64;(function timescale(i){return ui(i,["moov","trak"]).reduce((function(i,u){var l,c,h,p;return(l=ui(u,["tkhd"])[0])?(h=Si(l[c=0===l[0]?12:20]<<24|l[c+1]<<16|l[c+2]<<8|l[c+3]),(p=ui(u,["mdia","mdhd"])[0])?(i[h]=Si(p[c=0===p[0]?12:20]<<24|p[c+1]<<16|p[c+2]<<8|p[c+3]),i):null):null}),{})}),ti=function startTime(i,u){var l=ui(u,["moof","traf"]).reduce((function(u,l){var c,h,p=ui(l,["tfhd"])[0],m=Si(p[4]<<24|p[5]<<16|p[6]<<8|p[7]),g=i[m]||9e4,v=ui(l,["tfdt"])[0],_=new DataView(v.buffer,v.byteOffset,v.byteLength);return"bigint"==typeof(c=1===v[0]?Ei(v.subarray(4,12)):_.getUint32(4))?h=c/gi.BigInt(g):"number"!=typeof c||isNaN(c)||(h=c/g),h<Number.MAX_SAFE_INTEGER&&(h=Number(h)),h<u&&(u=h),u}),1/0);return"bigint"==typeof l||isFinite(l)?l:0},function compositionStartTime(i,u){var l,c=ui(u,["moof","traf"]),h=0,p=0;if(c&&c.length){var m=ui(c[0],["tfhd"])[0],g=ui(c[0],["trun"])[0],v=ui(c[0],["tfdt"])[0];if(m)l=fi(m).trackId;if(v)h=ci(v).baseMediaDecodeTime;if(g){var _=pi(g);_.samples&&_.samples.length&&(p=_.samples[0].compositionTimeOffset||0)}}var y=i[l]||9e4;"bigint"==typeof h&&(p=gi.BigInt(p),y=gi.BigInt(y));var b=(h+p)/y;return"bigint"==typeof b&&b<Number.MAX_SAFE_INTEGER&&(b=Number(b)),b},function getVideoTrackIds(i){var u=ui(i,["moov","trak"]),l=[];return u.forEach((function(i){var u=ui(i,["mdia","hdlr"]),c=ui(i,["tkhd"]);u.forEach((function(i,u){var h,p,m,g=si(i.subarray(8,12)),v=c[u];"vide"===g&&(p=(h=new DataView(v.buffer,v.byteOffset,v.byteLength)).getUint8(0),m=h.getUint32(0===p?12:20),l.push(m))}))})),l},ri=function getTimescaleFromMediaHeader(i){var u=0===i[0]?12:20;return Si(i[u]<<24|i[u+1]<<16|i[u+2]<<8|i[u+3])},ii=function getTracks(i){var u=ui(i,["moov","trak"]),l=[];return u.forEach((function(i){var u,c,h={},p=ui(i,["tkhd"])[0];p&&(c=(u=new DataView(p.buffer,p.byteOffset,p.byteLength)).getUint8(0),h.id=u.getUint32(0===c?12:20));var m=ui(i,["mdia","hdlr"])[0];if(m){var g=si(m.subarray(8,12));h.type="vide"===g?"video":"soun"===g?"audio":g}var v=ui(i,["mdia","minf","stbl","stsd"])[0];if(v){var _=v.subarray(8);h.codec=si(_.subarray(4,8));var y,b=ui(_,[h.codec])[0];b&&(/^[asm]vc[1-9]$/i.test(h.codec)?(y=b.subarray(78),"avcC"===si(y.subarray(4,8))&&y.length>11?(h.codec+=".",h.codec+=ki(y[9]),h.codec+=ki(y[10]),h.codec+=ki(y[11])):h.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(h.codec)?(y=b.subarray(28),"esds"===si(y.subarray(4,8))&&y.length>20&&0!==y[19]?(h.codec+="."+ki(y[19]),h.codec+="."+ki(y[20]>>>2&63).replace(/^0/,"")):h.codec="mp4a.40.2"):h.codec=h.codec.toLowerCase())}var T=ui(i,["mdia","mdhd"])[0];T&&(h.timescale=ri(T)),l.push(h)})),l};var Ci=ti,wi=ii,Pi=function parsePid(i){var u=31&i[1];return u<<=8,u|=i[2]},Ai=function parsePayloadUnitStartIndicator(i){return!!(64&i[1])},xi=function parseAdaptionField(i){var u=0;return(48&i[3])>>>4>1&&(u+=i[4]+1),u},Ii=function parseNalUnitType(i){switch(i){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Oi={parseType:function parseType(i,u){var l=Pi(i);return 0===l?"pat":l===u?"pmt":u?"pes":null},parsePat:function parsePat(i){var u=Ai(i),l=4+xi(i);return u&&(l+=i[l]+1),(31&i[l+10])<<8|i[l+11]},parsePmt:function parsePmt(i){var u={},l=Ai(i),c=4+xi(i);if(l&&(c+=i[c]+1),1&i[c+5]){var h;h=3+((15&i[c+1])<<8|i[c+2])-4;for(var p=12+((15&i[c+10])<<8|i[c+11]);p<h;){var m=c+p;u[(31&i[m+1])<<8|i[m+2]]=i[m],p+=5+((15&i[m+3])<<8|i[m+4])}return u}},parsePayloadUnitStartIndicator:Ai,parsePesType:function parsePesType(i,u){switch(u[Pi(i)]){case nt.H264_STREAM_TYPE:return"video";case nt.ADTS_STREAM_TYPE:return"audio";case nt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function parsePesTime(i){if(!Ai(i))return null;var u=4+xi(i);if(u>=i.byteLength)return null;var l,c=null;return 192&(l=i[u+7])&&((c={}).pts=(14&i[u+9])<<27|(255&i[u+10])<<20|(254&i[u+11])<<12|(255&i[u+12])<<5|(254&i[u+13])>>>3,c.pts*=4,c.pts+=(6&i[u+13])>>>1,c.dts=c.pts,64&l&&(c.dts=(14&i[u+14])<<27|(255&i[u+15])<<20|(254&i[u+16])<<12|(255&i[u+17])<<5|(254&i[u+18])>>>3,c.dts*=4,c.dts+=(6&i[u+18])>>>1)),c},videoPacketContainsKeyFrame:function videoPacketContainsKeyFrame(i){for(var u=4+xi(i),l=i.subarray(u),c=0,h=0,p=!1;h<l.byteLength-3;h++)if(1===l[h+2]){c=h+5;break}for(;c<l.byteLength;)switch(l[c]){case 0:if(0!==l[c-1]){c+=2;break}if(0!==l[c-2]){c++;break}h+3!==c-2&&"slice_layer_without_partitioning_rbsp_idr"===Ii(31&l[h+3])&&(p=!0);do{c++}while(1!==l[c]&&c<l.length);h=c-2,c+=3;break;case 1:if(0!==l[c-1]||0!==l[c-2]){c+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Ii(31&l[h+3])&&(p=!0),h=c-2,c+=3;break;default:c+=3}return l=l.subarray(h),c-=h,h=0,l&&l.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Ii(31&l[h+3])&&(p=!0),p}},Li=dt,Di={};Di.ts=Oi,Di.aac=Ut;var Vi=Pe,Ri=188,Mi=71,Ni=function parseAudioPes_(i,u,l){for(var c,h,p,m,g=0,v=Ri,_=!1;v<=i.byteLength;)if(i[g]!==Mi||i[v]!==Mi&&v!==i.byteLength)g++,v++;else{if(c=i.subarray(g,v),"pes"===Di.ts.parseType(c,u.pid))h=Di.ts.parsePesType(c,u.table),p=Di.ts.parsePayloadUnitStartIndicator(c),"audio"===h&&p&&(m=Di.ts.parsePesTime(c))&&(m.type="audio",l.audio.push(m),_=!0);if(_)break;g+=Ri,v+=Ri}for(g=(v=i.byteLength)-Ri,_=!1;g>=0;)if(i[g]!==Mi||i[v]!==Mi&&v!==i.byteLength)g--,v--;else{if(c=i.subarray(g,v),"pes"===Di.ts.parseType(c,u.pid))h=Di.ts.parsePesType(c,u.table),p=Di.ts.parsePayloadUnitStartIndicator(c),"audio"===h&&p&&(m=Di.ts.parsePesTime(c))&&(m.type="audio",l.audio.push(m),_=!0);if(_)break;g-=Ri,v-=Ri}},Bi=function parseVideoPes_(i,u,l){for(var c,h,p,m,g,v,_,y=0,b=Ri,T=!1,S={data:[],size:0};b<i.byteLength;)if(i[y]!==Mi||i[b]!==Mi)y++,b++;else{if(c=i.subarray(y,b),"pes"===Di.ts.parseType(c,u.pid))if(h=Di.ts.parsePesType(c,u.table),p=Di.ts.parsePayloadUnitStartIndicator(c),"video"===h&&(p&&!T&&(m=Di.ts.parsePesTime(c))&&(m.type="video",l.video.push(m),T=!0),!l.firstKeyFrame)){if(p&&0!==S.size){for(g=new Uint8Array(S.size),v=0;S.data.length;)_=S.data.shift(),g.set(_,v),v+=_.byteLength;if(Di.ts.videoPacketContainsKeyFrame(g)){var k=Di.ts.parsePesTime(g);k?(l.firstKeyFrame=k,l.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}S.size=0}S.data.push(c),S.size+=c.byteLength}if(T&&l.firstKeyFrame)break;y+=Ri,b+=Ri}for(y=(b=i.byteLength)-Ri,T=!1;y>=0;)if(i[y]!==Mi||i[b]!==Mi)y--,b--;else{if(c=i.subarray(y,b),"pes"===Di.ts.parseType(c,u.pid))h=Di.ts.parsePesType(c,u.table),p=Di.ts.parsePayloadUnitStartIndicator(c),"video"===h&&p&&(m=Di.ts.parsePesTime(c))&&(m.type="video",l.video.push(m),T=!0);if(T)break;y-=Ri,b-=Ri}},Fi=function inspectTs_(i){var u={pid:null,table:null},l={};for(var c in!function parsePsi_(i,u){for(var l,c=0,h=Ri;h<i.byteLength;)if(i[c]!==Mi||i[h]!==Mi)c++,h++;else{switch(l=i.subarray(c,h),Di.ts.parseType(l,u.pid)){case"pat":u.pid=Di.ts.parsePat(l);break;case"pmt":var p=Di.ts.parsePmt(l);u.table=u.table||{},Object.keys(p).forEach((function(i){u.table[i]=p[i]}))}c+=Ri,h+=Ri}}(i,u),u.table){if(u.table.hasOwnProperty(c))switch(u.table[c]){case nt.H264_STREAM_TYPE:l.video=[],Bi(i,u,l),0===l.video.length&&delete l.video;break;case nt.ADTS_STREAM_TYPE:l.audio=[],Ni(i,u,l),0===l.audio.length&&delete l.audio}}return l},Ui=function inspect(i,u){var l;return l=Di.aac.isLikelyAacData(i)?function inspectAac_(i){for(var u,l=!1,c=0,h=null,p=null,m=0,g=0;i.length-g>=3;){switch(Di.aac.parseType(i,g)){case"timed-metadata":if(i.length-g<10){l=!0;break}if((m=Di.aac.parseId3TagSize(i,g))>i.length){l=!0;break}null===p&&(u=i.subarray(g,g+m),p=Di.aac.parseAacTimestamp(u)),g+=m;break;case"audio":if(i.length-g<7){l=!0;break}if((m=Di.aac.parseAdtsSize(i,g))>i.length){l=!0;break}null===h&&(u=i.subarray(g,g+m),h=Di.aac.parseSampleRate(u)),c++,g+=m;break;default:g++}if(l)return null}if(null===h||null===p)return null;var v=Vi/h;return{audio:[{type:"audio",dts:p,pts:p},{type:"audio",dts:p+1024*c*v,pts:p+1024*c*v}]}}(i):Fi(i),l&&(l.audio||l.video)?(!function adjustTimestamp_(i,u){if(i.audio&&i.audio.length){var l=u;(void 0===l||isNaN(l))&&(l=i.audio[0].dts),i.audio.forEach((function(i){i.dts=Li(i.dts,l),i.pts=Li(i.pts,l),i.dtsTime=i.dts/Vi,i.ptsTime=i.pts/Vi}))}if(i.video&&i.video.length){var c=u;if((void 0===c||isNaN(c))&&(c=i.video[0].dts),i.video.forEach((function(i){i.dts=Li(i.dts,c),i.pts=Li(i.pts,c),i.dtsTime=i.dts/Vi,i.ptsTime=i.pts/Vi})),i.firstKeyFrame){var h=i.firstKeyFrame;h.dts=Li(h.dts,c),h.pts=Li(h.pts,c),h.dtsTime=h.dts/Vi,h.ptsTime=h.pts/Vi}}}(l,u),l):null},ji=function(){function MessageHandlers(i,u){this.options=u||{},this.self=i,this.init()}var i=MessageHandlers.prototype;return i.init=function init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ni.Transmuxer(this.options),function wireTransmuxerEvents(i,u){u.on("data",(function(u){var l=u.initSegment;u.initSegment={data:l.buffer,byteOffset:l.byteOffset,byteLength:l.byteLength};var c=u.data;u.data=c.buffer,i.postMessage({action:"data",segment:u,byteOffset:c.byteOffset,byteLength:c.byteLength},[u.data])})),u.on("done",(function(u){i.postMessage({action:"done"})})),u.on("gopInfo",(function(u){i.postMessage({action:"gopInfo",gopInfo:u})})),u.on("videoSegmentTimingInfo",(function(u){var l={start:{decode:xe(u.start.dts),presentation:xe(u.start.pts)},end:{decode:xe(u.end.dts),presentation:xe(u.end.pts)},baseMediaDecodeTime:xe(u.baseMediaDecodeTime)};u.prependedContentDuration&&(l.prependedContentDuration=xe(u.prependedContentDuration)),i.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:l})})),u.on("audioSegmentTimingInfo",(function(u){var l={start:{decode:xe(u.start.dts),presentation:xe(u.start.pts)},end:{decode:xe(u.end.dts),presentation:xe(u.end.pts)},baseMediaDecodeTime:xe(u.baseMediaDecodeTime)};u.prependedContentDuration&&(l.prependedContentDuration=xe(u.prependedContentDuration)),i.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:l})})),u.on("id3Frame",(function(u){i.postMessage({action:"id3Frame",id3Frame:u})})),u.on("caption",(function(u){i.postMessage({action:"caption",caption:u})})),u.on("trackinfo",(function(u){i.postMessage({action:"trackinfo",trackInfo:u})})),u.on("audioTimingInfo",(function(u){i.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:xe(u.start),end:xe(u.end)}})})),u.on("videoTimingInfo",(function(u){i.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:xe(u.start),end:xe(u.end)}})})),u.on("log",(function(u){i.postMessage({action:"log",log:u})}))}(this.self,this.transmuxer)},i.pushMp4Captions=function pushMp4Captions(i){this.captionParser||(this.captionParser=new Ti,this.captionParser.init());var u=new Uint8Array(i.data,i.byteOffset,i.byteLength),l=this.captionParser.parse(u,i.trackIds,i.timescales);this.self.postMessage({action:"mp4Captions",captions:l&&l.captions||[],logs:l&&l.logs||[],data:u.buffer},[u.buffer])},i.probeMp4StartTime=function probeMp4StartTime(i){var u=i.data,l=Ci(i.timescales,u);this.self.postMessage({action:"probeMp4StartTime",startTime:l,data:u},[u.buffer])},i.probeMp4Tracks=function probeMp4Tracks(i){var u=i.data,l=wi(u);this.self.postMessage({action:"probeMp4Tracks",tracks:l,data:u},[u.buffer])},i.probeTs=function probeTs(i){var u=i.data,l=i.baseStartTime,c="number"!=typeof l||isNaN(l)?void 0:l*Pe,h=Ui(u,c),p=null;h&&((p={hasVideo:h.video&&2===h.video.length||!1,hasAudio:h.audio&&2===h.audio.length||!1}).hasVideo&&(p.videoStart=h.video[0].ptsTime),p.hasAudio&&(p.audioStart=h.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:p,data:u},[u.buffer])},i.clearAllMp4Captions=function clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()},i.clearParsedMp4Captions=function clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()},i.push=function push(i){var u=new Uint8Array(i.data,i.byteOffset,i.byteLength);this.transmuxer.push(u)},i.reset=function reset(){this.transmuxer.reset()},i.setTimestampOffset=function setTimestampOffset(i){this.transmuxer.setBaseMediaDecodeTime(Math.round(Ae(i.timestampOffset||0)))},i.setAudioAppendStart=function setAudioAppendStart(i){this.transmuxer.setAudioAppendStart(Math.ceil(Ae(i.appendStart)))},i.setRemux=function setRemux(i){this.transmuxer.setRemux(i.remux)},i.flush=function flush(i){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},i.endTimeline=function endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},i.alignGopsWith=function alignGopsWith(i){this.transmuxer.alignGopsWith(i.gopsToAlignWith.slice())},MessageHandlers}();self.onmessage=function(i){if("init"===i.data.action&&i.data.options)return this.messageHandlers=new ji(self,i.data.options),void 0;this.messageHandlers||(this.messageHandlers=new ji(self)),i.data&&i.data.action&&"init"!==i.data.action&&this.messageHandlers[i.data.action]&&this.messageHandlers[i.data.action](i.data)}}))),yo=mo(_o),bo=function processTransmux(i){var u=i.transmuxer,l=i.bytes,c=i.audioAppendStart,h=i.gopsToAlignWith,p=i.remux,m=i.onData,g=i.onTrackInfo,v=i.onAudioTimingInfo,_=i.onVideoTimingInfo,y=i.onVideoSegmentTimingInfo,b=i.onAudioSegmentTimingInfo,T=i.onId3,S=i.onCaptions,k=i.onDone,E=i.onEndedTimeline,C=i.onTransmuxerLog,w=i.isEndOfTimeline,P={buffer:[]},A=w;if(u.onmessage=function handleMessage(l){u.currentTransmux===i&&("data"===l.data.action&&!function handleData_(i,u,l){var c=i.data.segment,h=c.type,p=c.initSegment,m=c.videoFrameDtsTime,g=c.videoFramePtsTime;u.buffer.push({captions:c.captions,captionStreams:c.captionStreams,metadata:c.metadata});var v=i.data.segment.boxes||{data:i.data.segment.data},_={type:h,data:new Uint8Array(v.data,v.data.byteOffset,v.data.byteLength),initSegment:new Uint8Array(p.data,p.byteOffset,p.byteLength)};void 0!==m&&(_.videoFrameDtsTime=m),void 0!==g&&(_.videoFramePtsTime=g),l(_)}(l,P,m),"trackinfo"===l.data.action&&g(l.data.trackInfo),"gopInfo"===l.data.action&&function handleGopInfo_(i,u){u.gopInfo=i.data.gopInfo}(l,P),"audioTimingInfo"===l.data.action&&v(l.data.audioTimingInfo),"videoTimingInfo"===l.data.action&&_(l.data.videoTimingInfo),"videoSegmentTimingInfo"===l.data.action&&y(l.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===l.data.action&&b(l.data.audioSegmentTimingInfo),"id3Frame"===l.data.action&&T([l.data.id3Frame],l.data.id3Frame.dispatchType),"caption"===l.data.action&&S(l.data.caption),"endedtimeline"===l.data.action&&(A=!1,E()),"log"===l.data.action&&C(l.data.log),"transmuxed"===l.data.type&&(A||(u.onmessage=null,function handleDone_(i){var u=i.transmuxedData,l=i.callback;u.buffer=[],l(u)}({transmuxedData:P,callback:k}),To(u))))},c&&u.postMessage({action:"setAudioAppendStart",appendStart:c}),Array.isArray(h)&&u.postMessage({action:"alignGopsWith",gopsToAlignWith:h}),void 0!==p&&u.postMessage({action:"setRemux",remux:p}),l.byteLength){var x=l instanceof ArrayBuffer?l:l.buffer,I=l instanceof ArrayBuffer?0:l.byteOffset;u.postMessage({action:"push",data:x,byteOffset:I,byteLength:l.byteLength},[x])}w&&u.postMessage({action:"endTimeline"}),u.postMessage({action:"flush"})},To=function dequeue(i){i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),"function"==typeof i.currentTransmux?i.currentTransmux():bo(i.currentTransmux))},So=function processAction(i,u){i.postMessage({action:u}),To(i)},ko=function enqueueAction(i,u){if(!u.currentTransmux)return u.currentTransmux=i,So(u,i),void 0;u.transmuxQueue.push(So.bind(null,u,i))},Eo=function transmux(i){if(!i.transmuxer.currentTransmux)return i.transmuxer.currentTransmux=i,bo(i),void 0;i.transmuxer.transmuxQueue.push(i)},Co=function reset(i){ko("reset",i)},wo=function createTransmuxer(i){var u=new yo;u.currentTransmux=null,u.transmuxQueue=[];var l=u.terminate;return u.terminate=function(){return u.currentTransmux=null,u.transmuxQueue.length=0,l.call(u)},u.postMessage({action:"init",options:i}),u},Po=function workerCallback(i){var u=i.transmuxer,l=i.endAction||i.action,c=i.callback,h=_extends({},i,{endAction:null,transmuxer:null,callback:null});if(u.addEventListener("message",(function listenForEndEvent(h){h.data.action===l&&(u.removeEventListener("message",listenForEndEvent),h.data.data&&(h.data.data=new Uint8Array(h.data.data,i.byteOffset||0,i.byteLength||h.data.data.byteLength),i.data&&(i.data=h.data.data)),c(h.data))})),i.data){var p=i.data instanceof ArrayBuffer;h.byteOffset=p?0:i.data.byteOffset,h.byteLength=i.data.byteLength,u.postMessage(h,[p?i.data:i.data.buffer])}else u.postMessage(h)},Ao=2,xo=-101,Io=-102,Oo=function abortAll(i){i.forEach((function(i){i.abort()}))},Lo=function handleErrors(i,u){return u.timedout?{status:u.status,message:"HLS request timed-out at URL: "+u.uri,code:xo,xhr:u}:u.aborted?{status:u.status,message:"HLS request aborted at URL: "+u.uri,code:Io,xhr:u}:i?{status:u.status,message:"HLS request errored at URL: "+u.uri,code:Ao,xhr:u}:"arraybuffer"===u.responseType&&0===u.response.byteLength?{status:u.status,message:"Empty HLS response at URL: "+u.uri,code:Ao,xhr:u}:null},Do=function handleKeyResponse(i,u,l){return function(c,h){var p=h.response,m=Lo(c,h);if(m)return l(m,i);if(16!==p.byteLength)return l({status:h.status,message:"Invalid HLS key at URL: "+h.uri,code:Ao,xhr:h},i);for(var g=new DataView(p),v=new Uint32Array([g.getUint32(0),g.getUint32(4),g.getUint32(8),g.getUint32(12)]),_=0;_<u.length;_++)u[_].bytes=v;return l(null,i)}},Vo=function parseInitSegment(i,u){var l=Mt(i.map.bytes);if("mp4"!==l)return u({internal:!0,message:"Found unsupported "+(l||"unknown")+" container for initialization segment at URL: "+(i.map.resolvedUri||i.map.uri),code:Ao});Po({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:function callback(l){var c=l.tracks;return i.map.bytes=l.data,c.forEach((function(u){i.map.tracks=i.map.tracks||{},i.map.tracks[u.type]||(i.map.tracks[u.type]=u,"number"==typeof u.id&&u.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[u.id]=u.timescale))})),u(null)}})},Ro=function handleSegmentResponse(i){var u=i.segment,l=i.finishProcessingFn,c=i.responseType;return function(i,h){var p=Lo(i,h);if(p)return l(p,u);var m="arraybuffer"!==c&&h.responseText?function stringToArrayBuffer(i){for(var u=new Uint8Array(new ArrayBuffer(i.length)),l=0;l<i.length;l++)u[l]=i.charCodeAt(l);return u.buffer}(h.responseText.substring(u.lastReachedChar||0)):h.response;return u.stats=function getRequestStats(i){return{bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}}(h),u.key?u.encryptedBytes=new Uint8Array(m):u.bytes=new Uint8Array(m),l(null,u)}},Mo=function transmuxAndNotify(i){var u=i.segment,l=i.bytes,c=i.trackInfoFn,h=i.timingInfoFn,p=i.videoSegmentTimingInfoFn,m=i.audioSegmentTimingInfoFn,g=i.id3Fn,v=i.captionsFn,_=i.isEndOfTimeline,y=i.endedTimelineFn,b=i.dataFn,T=i.doneFn,S=i.onTransmuxerLog,k=u.map&&u.map.tracks||{},E=Boolean(k.audio&&k.video),C=h.bind(null,u,"audio","start"),w=h.bind(null,u,"audio","end"),P=h.bind(null,u,"video","start"),A=h.bind(null,u,"video","end");Po({action:"probeTs",transmuxer:u.transmuxer,data:l,baseStartTime:u.baseStartTime,callback:function callback(i){u.bytes=l=i.data;var h=i.result;h&&(c(u,{hasAudio:h.hasAudio,hasVideo:h.hasVideo,isMuxed:E}),c=null,h.hasAudio&&!E&&C(h.audioStart),h.hasVideo&&P(h.videoStart),C=null,P=null),function finish(){Eo({bytes:l,transmuxer:u.transmuxer,audioAppendStart:u.audioAppendStart,gopsToAlignWith:u.gopsToAlignWith,remux:E,onData:function onData(i){i.type="combined"===i.type?"video":i.type,b(u,i)},onTrackInfo:function onTrackInfo(i){c&&(E&&(i.isMuxed=!0),c(u,i))},onAudioTimingInfo:function onAudioTimingInfo(i){C&&void 0!==i.start&&(C(i.start),C=null),w&&void 0!==i.end&&w(i.end)},onVideoTimingInfo:function onVideoTimingInfo(i){P&&void 0!==i.start&&(P(i.start),P=null),A&&void 0!==i.end&&A(i.end)},onVideoSegmentTimingInfo:function onVideoSegmentTimingInfo(i){p(i)},onAudioSegmentTimingInfo:function onAudioSegmentTimingInfo(i){m(i)},onId3:function onId3(i,l){g(u,i,l)},onCaptions:function onCaptions(i){v(u,[i])},isEndOfTimeline:_,onEndedTimeline:function onEndedTimeline(){y()},onTransmuxerLog:S,onDone:function onDone(i){T&&(i.type="combined"===i.type?"video":i.type,T(null,u,i))}})}()}})},No=function handleSegmentBytes(i){var u=i.segment,l=i.bytes,c=i.trackInfoFn,h=i.timingInfoFn,p=i.videoSegmentTimingInfoFn,m=i.audioSegmentTimingInfoFn,g=i.id3Fn,v=i.captionsFn,_=i.isEndOfTimeline,y=i.endedTimelineFn,b=i.dataFn,T=i.doneFn,S=i.onTransmuxerLog,k=new Uint8Array(l);if(function isLikelyFmp4MediaSegment(i){return bt(i,["moof"]).length>0}(k)){u.isFmp4=!0;var E=u.map.tracks,C={isFmp4:!0,hasVideo:!!E.video,hasAudio:!!E.audio};E.audio&&E.audio.codec&&"enca"!==E.audio.codec&&(C.audioCodec=E.audio.codec),E.video&&E.video.codec&&"encv"!==E.video.codec&&(C.videoCodec=E.video.codec),E.video&&E.audio&&(C.isMuxed=!0),c(u,C);var w=function finishLoading(i){b(u,{data:k,type:C.hasAudio&&!C.isMuxed?"audio":"video"}),i&&i.length&&v(u,i),T(null,u,{})};return Po({action:"probeMp4StartTime",timescales:u.map.timescales,data:k,transmuxer:u.transmuxer,callback:function callback(i){var c=i.data,p=i.startTime;if(l=c.buffer,u.bytes=k=c,C.hasAudio&&!C.isMuxed&&h(u,"audio","start",p),C.hasVideo&&h(u,"video","start",p),!E.video||!c.byteLength||!u.transmuxer)return w(),void 0;Po({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:u.transmuxer,data:k,timescales:u.map.timescales,trackIds:[E.video.id],callback:function callback(i){l=i.data.buffer,u.bytes=k=i.data,i.logs.forEach((function(i){S(videojs.mergeOptions(i,{stream:"mp4CaptionParser"}))})),w(i.captions)}})}}),void 0}return u.transmuxer?(void 0===u.container&&(u.container=Mt(k)),"ts"!==u.container&&"aac"!==u.container?(c(u,{hasAudio:!1,hasVideo:!1}),T(null,u,{}),void 0):(Mo({segment:u,bytes:l,trackInfoFn:c,timingInfoFn:h,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:m,id3Fn:g,captionsFn:v,isEndOfTimeline:_,endedTimelineFn:y,dataFn:b,doneFn:T,onTransmuxerLog:S}),void 0)):(T(null,u,{}),void 0)},Bo=function decrypt(i,u){var l,c=i.id,h=i.key,p=i.encryptedBytes,m=i.decryptionWorker;m.addEventListener("message",(function decryptionHandler(i){if(i.data.source===c){m.removeEventListener("message",decryptionHandler);var l=i.data.decrypted;u(new Uint8Array(l.bytes,l.byteOffset,l.byteLength))}})),l=h.bytes.slice?h.bytes.slice():new Uint32Array(Array.prototype.slice.call(h.bytes)),m.postMessage(Ys({source:c,encrypted:p,key:l,iv:h.iv}),[p.buffer,l.buffer])},Fo=function waitForCompletion(i){var u=i.activeXhrs,l=i.decryptionWorker,c=i.trackInfoFn,h=i.timingInfoFn,p=i.videoSegmentTimingInfoFn,m=i.audioSegmentTimingInfoFn,g=i.id3Fn,v=i.captionsFn,_=i.isEndOfTimeline,y=i.endedTimelineFn,b=i.dataFn,T=i.doneFn,S=i.onTransmuxerLog,k=0,E=!1;return function(i,C){if(!E){if(i)return E=!0,Oo(u),T(i,C);if((k+=1)===u.length){var w=function segmentFinish(){if(C.encryptedBytes)return function decryptSegment(i){var u=i.segment,l=i.trackInfoFn,c=i.timingInfoFn,h=i.videoSegmentTimingInfoFn,p=i.audioSegmentTimingInfoFn,m=i.id3Fn,g=i.captionsFn,v=i.isEndOfTimeline,_=i.endedTimelineFn,y=i.dataFn,b=i.doneFn,T=i.onTransmuxerLog;Bo({id:u.requestId,key:u.key,encryptedBytes:u.encryptedBytes,decryptionWorker:i.decryptionWorker},(function(i){u.bytes=i,No({segment:u,bytes:u.bytes,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:p,id3Fn:m,captionsFn:g,isEndOfTimeline:v,endedTimelineFn:_,dataFn:y,doneFn:b,onTransmuxerLog:T})}))}({decryptionWorker:l,segment:C,trackInfoFn:c,timingInfoFn:h,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:m,id3Fn:g,captionsFn:v,isEndOfTimeline:_,endedTimelineFn:y,dataFn:b,doneFn:T,onTransmuxerLog:S});No({segment:C,bytes:C.bytes,trackInfoFn:c,timingInfoFn:h,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:m,id3Fn:g,captionsFn:v,isEndOfTimeline:_,endedTimelineFn:y,dataFn:b,doneFn:T,onTransmuxerLog:S})};if(C.endOfAllRequests=Date.now(),C.map&&C.map.encryptedBytes&&!C.map.bytes)return Bo({decryptionWorker:l,id:C.requestId+"-init",encryptedBytes:C.map.encryptedBytes,key:C.map.key},(function(i){C.map.bytes=i,Vo(C,(function(i){if(i)return Oo(u),T(i,C);w()}))}));w()}}}},Uo=function handleProgress(i){var u=i.segment,l=i.progressFn;return i.trackInfoFn,function(i){if(!i.target.aborted)return u.stats=videojs.mergeOptions(u.stats,function getProgressStats(i){var u=i.target,l={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-u.requestTime||0};return l.bytesReceived=i.loaded,l.bandwidth=Math.floor(l.bytesReceived/l.roundTripTime*8*1e3),l}(i)),!u.stats.firstBytesReceivedAt&&u.stats.bytesReceived&&(u.stats.firstBytesReceivedAt=Date.now()),l(i,u)}},jo=function mediaSegmentRequest(i){var u=i.xhr,l=i.xhrOptions,c=i.segment,h=i.abortFn,p=i.progressFn,m=i.trackInfoFn,g=i.timingInfoFn,v=i.videoSegmentTimingInfoFn,_=i.audioSegmentTimingInfoFn,y=i.id3Fn,b=i.captionsFn,T=i.isEndOfTimeline,S=i.endedTimelineFn,k=i.dataFn,E=[],C=Fo({activeXhrs:E,decryptionWorker:i.decryptionWorker,trackInfoFn:m,timingInfoFn:g,videoSegmentTimingInfoFn:v,audioSegmentTimingInfoFn:_,id3Fn:y,captionsFn:b,isEndOfTimeline:T,endedTimelineFn:S,dataFn:k,doneFn:i.doneFn,onTransmuxerLog:i.onTransmuxerLog});if(c.key&&!c.key.bytes){var w=[c.key];c.map&&!c.map.bytes&&c.map.key&&c.map.key.resolvedUri===c.key.resolvedUri&&w.push(c.map.key);var P=u(videojs.mergeOptions(l,{uri:c.key.resolvedUri,responseType:"arraybuffer"}),Do(c,w,C));E.push(P)}if(c.map&&!c.map.bytes){if(c.map.key&&(!c.key||c.key.resolvedUri!==c.map.key.resolvedUri)){var A=u(videojs.mergeOptions(l,{uri:c.map.key.resolvedUri,responseType:"arraybuffer"}),Do(c,[c.map.key],C));E.push(A)}var x=videojs.mergeOptions(l,{uri:c.map.resolvedUri,responseType:"arraybuffer",headers:zs(c.map)}),I=function handleInitSegmentResponse(i){var u=i.segment,l=i.finishProcessingFn;return function(i,c){var h=Lo(i,c);if(h)return l(h,u);var p=new Uint8Array(c.response);if(u.map.key)return u.map.encryptedBytes=p,l(null,u);u.map.bytes=p,Vo(u,(function(i){if(i)return i.xhr=c,i.status=c.status,l(i,u);l(null,u)}))}}({segment:c,finishProcessingFn:C}),O=u(x,I);E.push(O)}var L=videojs.mergeOptions(l,{uri:c.part&&c.part.resolvedUri||c.resolvedUri,responseType:"arraybuffer",headers:zs(c)}),D=u(L,Ro({segment:c,finishProcessingFn:C,responseType:L.responseType}));D.addEventListener("progress",Uo({segment:c,progressFn:p,trackInfoFn:m,timingInfoFn:g,videoSegmentTimingInfoFn:v,audioSegmentTimingInfoFn:_,id3Fn:y,captionsFn:b,isEndOfTimeline:T,endedTimelineFn:S,dataFn:k})),E.push(D);var V={};return E.forEach((function(i){i.addEventListener("loadend",function handleLoadEnd(i){var u=i.loadendState,l=i.abortFn;return function(i){i.target.aborted&&l&&!u.calledAbortFn&&(l(),u.calledAbortFn=!0)}}({loadendState:V,abortFn:h}))})),function(){return Oo(E)}},Ho=Ja("CodecUtils"),qo=function isMaat(i,u){var l=u.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&l.AUDIO&&i.mediaGroups.AUDIO[l.AUDIO]},Wo=function unwrapCodecList(i){var u={};return i.forEach((function(i){var l=i.mediaType,c=i.type,h=i.details;u[l]=u[l]||[],u[l].push(Q(""+c+h))})),Object.keys(u).forEach((function(i){if(u[i].length>1)return Ho("multiple "+i+" codecs found as attributes: "+u[i].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),u[i]=null,void 0;u[i]=u[i][0]})),u},Go=function codecCount(i){var u=0;return i.audio&&u++,i.video&&u++,u},zo=function codecsForPlaylist(i,u){var l=u.attributes||{},c=Wo(function getCodecs(i){var u=i.attributes||{};if(u.CODECS)return Y(u.CODECS)}(u)||[]);if(qo(i,u)&&!c.audio&&!function isMuxed(i,u){if(!qo(i,u))return!0;var l=i.mediaGroups.AUDIO[(u.attributes||{}).AUDIO];for(var c in l)if(!l[c].uri&&!l[c].playlists)return!0;return!1}(i,u)){var h=Wo(function codecsFromDefault(i,u){if(!i.mediaGroups.AUDIO||!u)return null;var l=i.mediaGroups.AUDIO[u];if(!l)return null;for(var c in l){var h=l[c];if(h.default&&h.playlists)return Y(h.playlists[0].attributes.CODECS)}return null}(i,l.AUDIO)||[]);h.audio&&(c.audio=h.audio)}return c},Xo=Ja("PlaylistSelector"),Ko=function representationToString(i){if(i&&i.playlist){var u=i.playlist;return JSON.stringify({id:u.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:u.attributes&&u.attributes.CODECS||""})}},Qo=function safeGetComputedStyle(i,u){if(!i)return"";var l=m().getComputedStyle(i);return l?l[u]:""},Yo=function stableSort(i,u){var l=i.slice();i.sort((function(i,c){var h=u(i,c);return 0===h?l.indexOf(i)-l.indexOf(c):h}))},$o=function comparePlaylistBandwidth(i,u){var l,c;return i.attributes.BANDWIDTH&&(l=i.attributes.BANDWIDTH),l=l||m().Number.MAX_VALUE,u.attributes.BANDWIDTH&&(c=u.attributes.BANDWIDTH),l-(c=c||m().Number.MAX_VALUE)},Jo=function simpleSelector(i,u,l,c,h,p){if(i){var g={bandwidth:u,width:l,height:c,limitRenditionByPlayerDimensions:h},v=i.playlists;Ps.isAudioOnly(i)&&(v=p.getAudioTrackPlaylists_(),g.audioOnly=!0);var _=v.map((function(i){var u=i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width,l=i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height;return{bandwidth:i.attributes&&i.attributes.BANDWIDTH||m().Number.MAX_VALUE,width:u,height:l,playlist:i}}));Yo(_,(function(i,u){return i.bandwidth-u.bandwidth}));var y=(_=_.filter((function(i){return!Ps.isIncompatible(i.playlist)}))).filter((function(i){return Ps.isEnabled(i.playlist)}));y.length||(y=_.filter((function(i){return!Ps.isDisabled(i.playlist)})));var b=y.filter((function(i){return i.bandwidth*po.BANDWIDTH_VARIANCE<u})),T=b[b.length-1],S=b.filter((function(i){return i.bandwidth===T.bandwidth}))[0];if(!1===h){var k=S||y[0]||_[0];if(k&&k.playlist){var E="sortedPlaylistReps";return S&&(E="bandwidthBestRep"),y[0]&&(E="enabledPlaylistReps"),Xo("choosing "+Ko(k)+" using "+E+" with options",g),k.playlist}return Xo("could not choose a playlist with options",g),null}var C=b.filter((function(i){return i.width&&i.height}));Yo(C,(function(i,u){return i.width-u.width}));var w=C.filter((function(i){return i.width===l&&i.height===c}));T=w[w.length-1];var P,A,x,I,O=w.filter((function(i){return i.bandwidth===T.bandwidth}))[0];if(O||(A=(P=C.filter((function(i){return i.width>l||i.height>c}))).filter((function(i){return i.width===P[0].width&&i.height===P[0].height})),T=A[A.length-1],x=A.filter((function(i){return i.bandwidth===T.bandwidth}))[0]),p.experimentalLeastPixelDiffSelector){var L=C.map((function(i){return i.pixelDiff=Math.abs(i.width-l)+Math.abs(i.height-c),i}));Yo(L,(function(i,u){return i.pixelDiff===u.pixelDiff?u.bandwidth-i.bandwidth:i.pixelDiff-u.pixelDiff})),I=L[0]}var D=I||x||O||S||y[0]||_[0];if(D&&D.playlist){var V="sortedPlaylistReps";return I?V="leastPixelDiffRep":x?V="resolutionPlusOneRep":O?V="resolutionBestRep":S?V="bandwidthBestRep":y[0]&&(V="enabledPlaylistReps"),Xo("choosing "+Ko(D)+" using "+V+" with options",g),D.playlist}return Xo("could not choose a playlist with options",g),null}},Zo=function lastBandwidthSelector(){var i=this.useDevicePixelRatio&&m().devicePixelRatio||1;return Jo(this.playlists.master,this.systemBandwidth,parseInt(Qo(this.tech_.el(),"width"),10)*i,parseInt(Qo(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},eu=function addMetadata(i){var u=i.inbandTextTracks,l=i.metadataArray,c=i.timestampOffset,h=i.videoDuration;if(l){var p=m().WebKitDataCue||m().VTTCue,g=u.metadataTrack_;if(g&&(l.forEach((function(i){var u=i.cueTime+c;!("number"!=typeof u||m().isNaN(u)||u<0)&&u<1/0&&i.frames.forEach((function(i){var l=new p(u,u,i.value||i.url||i.data||"");l.frame=i,l.value=i,function deprecateOldCue(i){Object.defineProperties(i.frame,{id:{get:function get(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get:function get(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get:function get(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})}(l),g.addCue(l)}))})),g.cues&&g.cues.length)){for(var v=g.cues,_=[],y=0;y<v.length;y++)v[y]&&_.push(v[y]);var b=_.reduce((function(i,u){var l=i[u.startTime]||[];return l.push(u),i[u.startTime]=l,i}),{}),T=Object.keys(b).sort((function(i,u){return Number(i)-Number(u)}));T.forEach((function(i,u){var l=b[i],c=Number(T[u+1])||h;l.forEach((function(i){i.endTime=c}))}))}}},tu=function removeCuesFromTrack(i,u,l){var c,h;if(l&&l.cues)for(c=l.cues.length;c--;)(h=l.cues[c]).startTime>=i&&h.endTime<=u&&l.removeCue(h)},iu=function finite(i){return"number"==typeof i&&isFinite(i)},ru=1/60,nu=function segmentInfoString(i){var u=i.startOfSegment,l=i.duration,c=i.segment,h=i.part,p=i.playlist,m=p.mediaSequence,g=p.id,v=p.segments,_=i.mediaIndex,y=i.partIndex,b=i.timeline,T=(void 0===v?[]:v).length-1,S="mediaIndex/partIndex increment";i.getMediaInfoForTime?S="getMediaInfoForTime ("+i.getMediaInfoForTime+")":i.isSyncRequest&&(S="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(S+=" with independent "+i.independent);var k="number"==typeof y,E=i.segment.uri?"segment":"pre-segment",C=k?ps({preloadSegment:c})-1:0;return E+" ["+(m+_)+"/"+(m+T)+"]"+(k?" part ["+y+"/"+C+"]":"")+" segment start/end ["+c.start+" => "+c.end+"]"+(k?" part start/end ["+h.start+" => "+h.end+"]":"")+" startOfSegment ["+u+"] duration ["+l+"] timeline ["+b+"] selected by ["+S+"] playlist ["+g+"]"},au=function timingInfoPropertyForMedia(i){return i+"TimingInfo"},su=function shouldWaitForTimelineChange(i){var u=i.timelineChangeController,l=i.segmentTimeline,c=i.loaderType,h=i.audioDisabled;if(i.currentTimeline===l)return!1;if("audio"===c){var p=u.lastTimelineChange({type:"main"});return!p||p.to!==l}if("main"===c&&h){var m=u.pendingTimelineChange({type:"audio"});return!m||m.to!==l}return!1},ou=function segmentTooLong(i){var u=i.segmentDuration,l=i.maxDuration;return!!u&&Math.round(u)>l+Za},uu=function getTroublesomeSegmentDurationMessage(i,u){if("hls"!==u)return null;var l=function mediaDuration(i){var u=0;return["video","audio"].forEach((function(l){var c=i[l+"TimingInfo"];if(c){var h,p=c.start,g=c.end;"bigint"==typeof p||"bigint"==typeof g?h=m().BigInt(g)-m().BigInt(p):"number"==typeof p&&"number"==typeof g&&(h=g-p),void 0!==h&&h>u&&(u=h)}})),"bigint"==typeof u&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),u}({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!l)return null;var c=i.playlist.targetDuration,h=ou({segmentDuration:l,maxDuration:2*c}),p=ou({segmentDuration:l,maxDuration:c});return h||p?{severity:h?"warn":"info",message:"Segment with index "+i.mediaIndex+" from playlist "+i.playlist.id+" has a duration of "+l+" when the reported duration is "+i.duration+" and the target duration is "+c+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null},lu=function(i){function SegmentLoader(u,l){var c;if(c=i.call(this)||this,!u)throw new TypeError("Initialization settings are required");if("function"!=typeof u.currentTime)throw new TypeError("No currentTime getter specified");if(!u.mediaSource)throw new TypeError("No MediaSource specified");return c.bandwidth=u.bandwidth,c.throughput={rate:0,count:0},c.roundTrip=NaN,c.resetStats_(),c.mediaIndex=null,c.partIndex=null,c.hasPlayed_=u.hasPlayed,c.currentTime_=u.currentTime,c.seekable_=u.seekable,c.seeking_=u.seeking,c.duration_=u.duration,c.mediaSource_=u.mediaSource,c.vhs_=u.vhs,c.loaderType_=u.loaderType,c.currentMediaInfo_=void 0,c.startingMediaInfo_=void 0,c.segmentMetadataTrack_=u.segmentMetadataTrack,c.goalBufferLength_=u.goalBufferLength,c.sourceType_=u.sourceType,c.sourceUpdater_=u.sourceUpdater,c.inbandTextTracks_=u.inbandTextTracks,c.state_="INIT",c.timelineChangeController_=u.timelineChangeController,c.shouldSaveSegmentTimingInfo_=!0,c.parse708captions_=u.parse708captions,c.useDtsForTimestampOffset_=u.useDtsForTimestampOffset,c.captionServices_=u.captionServices,c.experimentalExactManifestTimings=u.experimentalExactManifestTimings,c.checkBufferTimeout_=null,c.error_=void 0,c.currentTimeline_=-1,c.pendingSegment_=null,c.xhrOptions_=null,c.pendingSegments_=[],c.audioDisabled_=!1,c.isPendingTimestampOffset_=!1,c.gopBuffer_=[],c.timeMapping_=0,c.safeAppend_=videojs.browser.IE_VERSION>=11,c.appendInitSegment_={audio:!0,video:!0},c.playlistOfLastInitSegment_={audio:null,video:null},c.callQueue_=[],c.loadQueue_=[],c.metadataQueue_={id3:[],caption:[]},c.waitingOnRemove_=!1,c.quotaExceededErrorRetryTimeout_=null,c.activeInitSegmentId_=null,c.initSegments_={},c.cacheEncryptionKeys_=u.cacheEncryptionKeys,c.keyCache_={},c.decrypter_=u.decrypter,c.syncController_=u.syncController,c.syncPoint_={segmentIndex:0,time:0},c.transmuxer_=c.createTransmuxer_(),c.triggerSyncInfoUpdate_=function(){return c.trigger("syncinfoupdate")},c.syncController_.on("syncinfoupdate",c.triggerSyncInfoUpdate_),c.mediaSource_.addEventListener("sourceopen",(function(){c.isEndOfStream_()||(c.ended_=!1)})),c.fetchAtBuffer_=!1,c.logger_=Ja("SegmentLoader["+c.loaderType_+"]"),Object.defineProperty(_assertThisInitialized(c),"state",{get:function get(){return this.state_},set:function set(i){i!==this.state_&&(this.logger_(this.state_+" -> "+i),this.state_=i,this.trigger("statechange"))}}),c.sourceUpdater_.on("ready",(function(){c.hasEnoughInfoToAppend_()&&c.processCallQueue_()})),"main"===c.loaderType_&&c.timelineChangeController_.on("pendingtimelinechange",(function(){c.hasEnoughInfoToAppend_()&&c.processCallQueue_()})),"audio"===c.loaderType_&&c.timelineChangeController_.on("timelinechange",(function(){c.hasEnoughInfoToLoad_()&&c.processLoadQueue_(),c.hasEnoughInfoToAppend_()&&c.processCallQueue_()})),c}_inheritsLoose(SegmentLoader,i);var u=SegmentLoader.prototype;return u.createTransmuxer_=function createTransmuxer_(){return wo({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},u.resetStats_=function resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},u.dispose=function dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&m().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},u.setAudio=function setAudio(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},u.abort=function abort(){if("WAITING"!==this.state)return this.pendingSegment_&&(this.pendingSegment_=null),void 0;this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},u.abort_=function abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,m().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},u.checkForAbort_=function checkForAbort_(i){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==i:(this.state="READY",!0)},u.error=function error(i){return void 0!==i&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},u.endOfStream=function endOfStream(){this.ended_=!0,this.transmuxer_&&Co(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},u.buffered_=function buffered_(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return videojs.createTimeRanges();if("main"===this.loaderType_){var u=i.hasVideo;if(u&&i.hasAudio&&!this.audioDisabled_&&!i.isMuxed)return this.sourceUpdater_.buffered();if(u)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},u.initSegmentForMap=function initSegmentForMap(i,u){if(void 0===u&&(u=!1),!i)return null;var l=$s(i),c=this.initSegments_[l];return u&&!c&&i.bytes&&(this.initSegments_[l]=c={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),c||i},u.segmentKey=function segmentKey(i,u){if(void 0===u&&(u=!1),!i)return null;var l=Js(i),c=this.keyCache_[l];this.cacheEncryptionKeys_&&u&&!c&&i.bytes&&(this.keyCache_[l]=c={resolvedUri:i.resolvedUri,bytes:i.bytes});var h={resolvedUri:(c||i).resolvedUri};return c&&(h.bytes=c.bytes),h},u.couldBeginLoading_=function couldBeginLoading_(){return this.playlist_&&!this.paused()},u.load=function load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"),void 0)},u.init_=function init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},u.playlist=function playlist(i,u){if(void 0===u&&(u={}),i){var l=this.playlist_,c=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=u,"INIT"===this.state&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(i));var h=null;if(l&&(l.id?h=l.id:l.uri&&(h=l.uri)),this.logger_("playlist update ["+h+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!l||l.uri!==i.uri)return null!==this.mediaIndex&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate"),void 0;var p=i.mediaSequence-l.mediaSequence;if(this.logger_("live window shift ["+p+"]"),null!==this.mediaIndex)if(this.mediaIndex-=p,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var m=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!m.parts||!m.parts.length||!m.parts[this.partIndex])){var g=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=g}}c&&(c.mediaIndex-=p,c.mediaIndex<0?(c.mediaIndex=null,c.partIndex=null):(c.mediaIndex>=0&&(c.segment=i.segments[c.mediaIndex]),c.partIndex>=0&&c.segment.parts&&(c.part=c.segment.parts[c.partIndex]))),this.syncController_.saveExpiredSegmentInfo(l,i)}},u.pause=function pause(){this.checkBufferTimeout_&&(m().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},u.paused=function paused(){return null===this.checkBufferTimeout_},u.resetEverything=function resetEverything(i){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},u.resetLoader=function resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()},u.resyncLoader=function resyncLoader(){this.transmuxer_&&Co(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},u.remove=function remove(i,u,l,c){if(void 0===l&&(l=function done(){}),void 0===c&&(c=!1),u===1/0&&(u=this.duration_()),u<=i)return this.logger_("skipping remove because end ${end} is <= start ${start}"),void 0;if(!this.sourceUpdater_||!this.getMediaInfo_())return this.logger_("skipping remove because no source updater or starting media info"),void 0;var h=1,p=function removeFinished(){0===--h&&l()};for(var m in!c&&this.audioDisabled_||(h++,this.sourceUpdater_.removeAudio(i,u,p)),(c||"main"===this.loaderType_)&&(this.gopBuffer_=function removeGopBuffer(i,u,l,c){for(var h=Math.ceil((u-c)*Nt.ONE_SECOND_IN_TS),p=Math.ceil((l-c)*Nt.ONE_SECOND_IN_TS),m=i.slice(),g=i.length;g--&&!(i[g].pts<=p););if(-1===g)return m;for(var v=g+1;v--&&!(i[v].pts<=h););return v=Math.max(v,0),m.splice(v,g-v+1),m}(this.gopBuffer_,i,u,this.timeMapping_),h++,this.sourceUpdater_.removeVideo(i,u,p)),this.inbandTextTracks_)tu(i,u,this.inbandTextTracks_[m]);tu(i,u,this.segmentMetadataTrack_),p()},u.monitorBuffer_=function monitorBuffer_(){this.checkBufferTimeout_&&m().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=m().setTimeout(this.monitorBufferTick_.bind(this),1)},u.monitorBufferTick_=function monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&m().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=m().setTimeout(this.monitorBufferTick_.bind(this),500)},u.fillBuffer_=function fillBuffer_(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();i&&("number"==typeof i.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},u.isEndOfStream_=function isEndOfStream_(i,u,l){if(void 0===i&&(i=this.mediaIndex),void 0===u&&(u=this.playlist_),void 0===l&&(l=this.partIndex),!u||!this.mediaSource_)return!1;var c="number"==typeof i&&u.segments[i];return u.endList&&"open"===this.mediaSource_.readyState&&i+1===u.segments.length&&(!c||!c.parts||l+1===c.parts.length)},u.chooseNextRequest_=function chooseNextRequest_(){var i=this.buffered_(),u=os(i)||0,l=us(i,this.currentTime_()),c=!this.hasPlayed_()&&l>=1,h=l>=this.goalBufferLength_(),p=this.playlist_.segments;if(!p.length||c||h)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var m={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(m.isSyncRequest)m.mediaIndex=function getSyncSegmentCandidate(i,u,l){u=u||[];for(var c=[],h=0,p=0;p<u.length;p++){var m=u[p];if(i===m.timeline&&(c.push(p),(h+=m.duration)>l))return p}return 0===c.length?0:c[c.length-1]}(this.currentTimeline_,p,u);else if(null!==this.mediaIndex){var g=p[this.mediaIndex],v="number"==typeof this.partIndex?this.partIndex:-1;m.startOfSegment=g.end?g.end:u,g.parts&&g.parts[v+1]?(m.mediaIndex=this.mediaIndex,m.partIndex=v+1):m.mediaIndex=this.mediaIndex+1}else{var _=Ps.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?u:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),y=_.segmentIndex,b=_.startTime,T=_.partIndex;m.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+u:"currentTime "+this.currentTime_(),m.mediaIndex=y,m.startOfSegment=b,m.partIndex=T}var S=p[m.mediaIndex],k=S&&"number"==typeof m.partIndex&&S.parts&&S.parts[m.partIndex];if(!S||"number"==typeof m.partIndex&&!k)return null;if("number"!=typeof m.partIndex&&S.parts&&(m.partIndex=0,k=S.parts[0]),!l&&k&&!k.independent)if(0===m.partIndex){var E=p[m.mediaIndex-1],C=E.parts&&E.parts.length&&E.parts[E.parts.length-1];C&&C.independent&&(m.mediaIndex-=1,m.partIndex=E.parts.length-1,m.independent="previous segment")}else S.parts[m.partIndex-1].independent&&(m.partIndex-=1,m.independent="previous part");return m.mediaIndex>=p.length-1&&(this.mediaSource_&&"ended"===this.mediaSource_.readyState)&&!this.seeking_()?null:this.generateSegmentInfo_(m)},u.generateSegmentInfo_=function generateSegmentInfo_(i){var u=i.independent,l=i.playlist,c=i.mediaIndex,h=i.startOfSegment,p=i.isSyncRequest,m=i.partIndex,g=i.forceTimestampOffset,v=i.getMediaInfoForTime,_=l.segments[c],y="number"==typeof m&&_.parts[m],b={requestId:"segment-loader-"+Math.random(),uri:y&&y.resolvedUri||_.resolvedUri,mediaIndex:c,partIndex:y?m:null,isSyncRequest:p,startOfSegment:h,playlist:l,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:_.timeline,duration:y&&y.duration||_.duration,segment:_,part:y,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:v,independent:u},T=void 0!==g?g:this.isPendingTimestampOffset_;b.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:_.timeline,currentTimeline:this.currentTimeline_,startOfSegment:h,buffered:this.buffered_(),overrideCheck:T});var S=os(this.sourceUpdater_.audioBuffered());return"number"==typeof S&&(b.audioAppendStart=S-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(b.gopsToAlignWith=function gopsSafeToAlignWith(i,u,l){if(null==u||!i.length)return[];var c,h=Math.ceil((u-l+3)*Nt.ONE_SECOND_IN_TS);for(c=0;c<i.length&&!(i[c].pts>h);c++);return i.slice(c)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),b},u.timestampOffsetForSegment_=function timestampOffsetForSegment_(i){return function timestampOffsetForSegment(i){var u=i.segmentTimeline,l=i.currentTimeline,c=i.startOfSegment,h=i.buffered;return i.overrideCheck||u!==l?u<l?c:h.length?h.end(h.length-1):c:null}(i)},u.earlyAbortWhenNeeded_=function earlyAbortWhenNeeded_(i){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var u=this.currentTime_(),l=i.bandwidth,c=this.pendingSegment_.duration,h=Ps.estimateSegmentRequestTime(c,l,this.playlist_,i.bytesReceived),p=function timeUntilRebuffer(i,u,l){return void 0===l&&(l=1),((i.length?i.end(i.length-1):0)-u)/l}(this.buffered_(),u,this.vhs_.tech_.playbackRate())-1;if(!(h<=p)){var m=function minRebufferMaxBandwidthSelector(i){var u=i.currentTime,l=i.bandwidth,c=i.duration,h=i.segmentDuration,p=i.timeUntilRebuffer,m=i.currentTimeline,g=i.syncController,v=i.master.playlists.filter((function(i){return!Ps.isIncompatible(i)})),_=v.filter(Ps.isEnabled);_.length||(_=v.filter((function(i){return!Ps.isDisabled(i)})));var y=_.filter(Ps.hasAttribute.bind(null,"BANDWIDTH")).map((function(i){var v=g.getSyncPoint(i,c,m,u)?1:2;return{playlist:i,rebufferingImpact:Ps.estimateSegmentRequestTime(h,l,i)*v-p}})),b=y.filter((function(i){return i.rebufferingImpact<=0}));return Yo(b,(function(i,u){return $o(u.playlist,i.playlist)})),b.length?b[0]:(Yo(y,(function(i,u){return i.rebufferingImpact-u.rebufferingImpact})),y[0]||null)}({master:this.vhs_.playlists.master,currentTime:u,bandwidth:l,duration:this.duration_(),segmentDuration:c,timeUntilRebuffer:p,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(m){var g=.5;p<=Za&&(g=1),!m.playlist||m.playlist.uri===this.playlist_.uri||h-p-m.rebufferingImpact<g||(this.bandwidth=m.playlist.attributes.BANDWIDTH*po.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},u.handleAbort_=function handleAbort_(i){this.logger_("Aborting "+nu(i)),this.mediaRequestsAborted+=1},u.handleProgress_=function handleProgress_(i,u){this.earlyAbortWhenNeeded_(u.stats),this.checkForAbort_(u.requestId)||this.trigger("progress")},u.handleTrackInfo_=function handleTrackInfo_(i,u){this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId)||this.checkForIllegalMediaSwitch(u)||(function shallowEqual(i,u){if(!i&&!u||!i&&u||i&&!u)return!1;if(i===u)return!0;var l=Object.keys(i).sort(),c=Object.keys(u).sort();if(l.length!==c.length)return!1;for(var h=0;h<l.length;h++){var p=l[h];if(p!==c[h])return!1;if(i[p]!==u[p])return!1}return!0}(this.currentMediaInfo_,u=u||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=u,this.currentMediaInfo_=u,this.logger_("trackinfo update",u),this.trigger("trackinfo")),this.checkForAbort_(i.requestId)||(this.pendingSegment_.trackInfo=u,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},u.handleTimingInfo_=function handleTimingInfo_(i,u,l,c){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var h=this.pendingSegment_,p=au(u);h[p]=h[p]||{},h[p][l]=c,this.logger_("timinginfo: "+u+" - "+l+" - "+c),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},u.handleCaptions_=function handleCaptions_(i,u){var l=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(0===u.length)return this.logger_("SegmentLoader received no captions from a caption event"),void 0;if(!this.pendingSegment_.hasAppendedData_)return this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,u)),void 0;var c=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),h={};u.forEach((function(i){h[i.stream]=h[i.stream]||{startTime:1/0,captions:[],endTime:0};var u=h[i.stream];u.startTime=Math.min(u.startTime,i.startTime+c),u.endTime=Math.max(u.endTime,i.endTime+c),u.captions.push(i)})),Object.keys(h).forEach((function(i){var u=h[i],p=u.startTime,g=u.endTime,v=u.captions,_=l.inbandTextTracks_;l.logger_("adding cues from "+p+" -> "+g+" for "+i),function createCaptionsTrackIfNotExists(i,u,l){if(!i[l]){u.trigger({type:"usage",name:"vhs-608"}),u.trigger({type:"usage",name:"hls-608"});var c=l;/^cc708_/.test(l)&&(c="SERVICE"+l.split("_")[1]);var h=u.textTracks().getTrackById(c);if(h)i[l]=h;else{var p=l,m=l,g=!1,v=(u.options_.vhs&&u.options_.vhs.captionServices||{})[c];v&&(p=v.label,m=v.language,g=v.default),i[l]=u.addRemoteTextTrack({kind:"captions",id:c,default:g,label:p,language:m},!1).track}}}(_,l.vhs_.tech_,i),tu(p,g,_[i]),function addCaptionData(i){var u=i.inbandTextTracks,l=i.captionArray,c=i.timestampOffset;if(l){var h=m().WebKitDataCue||m().VTTCue;l.forEach((function(i){u[i.stream].addCue(new h(i.startTime+c,i.endTime+c,i.text))}))}}({captionArray:v,inbandTextTracks:_,timestampOffset:c})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},u.handleId3_=function handleId3_(i,u,l){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(!this.pendingSegment_.hasAppendedData_)return this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,u,l)),void 0;var c=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function createMetadataTrackIfNotExists(i,u,l){i.metadataTrack_||(i.metadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,i.metadataTrack_.inBandMetadataTrackDispatchType=u)}(this.inbandTextTracks_,l,this.vhs_.tech_),eu({inbandTextTracks:this.inbandTextTracks_,metadataArray:u,timestampOffset:c,videoDuration:this.duration_()})}},u.processMetadataQueue_=function processMetadataQueue_(){this.metadataQueue_.id3.forEach((function(i){return i()})),this.metadataQueue_.caption.forEach((function(i){return i()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},u.processCallQueue_=function processCallQueue_(){var i=this.callQueue_;this.callQueue_=[],i.forEach((function(i){return i()}))},u.processLoadQueue_=function processLoadQueue_(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach((function(i){return i()}))},u.hasEnoughInfoToLoad_=function hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;var i=this.pendingSegment_;return!!i&&(!this.getCurrentMediaInfo_()||!su({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},u.getCurrentMediaInfo_=function getCurrentMediaInfo_(i){return void 0===i&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},u.getMediaInfo_=function getMediaInfo_(i){return void 0===i&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},u.getPendingSegmentPlaylist=function getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null},u.hasEnoughInfoToAppend_=function hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,u=this.getCurrentMediaInfo_();return!(!i||!u)&&(!(u.hasVideo&&!i.videoTimingInfo)&&(!(u.hasAudio&&!this.audioDisabled_&&!u.isMuxed&&!i.audioTimingInfo)&&!su({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})))},u.handleData_=function handleData_(i,u){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return this.callQueue_.push(this.handleData_.bind(this,i,u)),void 0;var l=this.pendingSegment_;if(this.setTimeMapping_(l.timeline),this.updateMediaSecondsLoaded_(l.part||l.segment),"closed"!==this.mediaSource_.readyState){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),l.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),l.isFmp4=i.isFmp4,l.timingInfo=l.timingInfo||{},l.isFmp4)this.trigger("fmp4"),l.timingInfo.start=l[au(u.type)].start;else{var c,h=this.getCurrentMediaInfo_(),p="main"===this.loaderType_&&h&&h.hasVideo;p&&(c=l.videoTimingInfo.start),l.timingInfo.start=this.trueSegmentStart_({currentStart:l.timingInfo.start,playlist:l.playlist,mediaIndex:l.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:p,firstVideoFrameTimeForData:c,videoTimingInfo:l.videoTimingInfo,audioTimingInfo:l.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(l,u.type),this.updateSourceBufferTimestampOffset_(l),l.isSyncRequest){this.updateTimingInfoEnd_(l),this.syncController_.saveSegmentTimingInfo({segmentInfo:l,shouldSaveTimelineMapping:"main"===this.loaderType_});var m=this.chooseNextRequest_();if(m.mediaIndex!==l.mediaIndex||m.partIndex!==l.partIndex)return this.logger_("sync segment was incorrect, not appending"),void 0;this.logger_("sync segment was correct, appending")}l.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(l,u)}}},u.updateAppendInitSegmentStatus=function updateAppendInitSegmentStatus(i,u){"main"!==this.loaderType_||"number"!=typeof i.timestampOffset||i.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[u]!==i.playlist&&(this.appendInitSegment_[u]=!0)},u.getInitSegmentAndUpdateState_=function getInitSegmentAndUpdateState_(i){var u=i.type,l=i.initSegment,c=i.map,h=i.playlist;if(c){var p=$s(c);if(this.activeInitSegmentId_===p)return null;l=this.initSegmentForMap(c,!0).bytes,this.activeInitSegmentId_=p}return l&&this.appendInitSegment_[u]?(this.playlistOfLastInitSegment_[u]=h,this.appendInitSegment_[u]=!1,this.activeInitSegmentId_=null,l):null},u.handleQuotaExceededError_=function handleQuotaExceededError_(i,u){var l=this,c=i.segmentInfo,h=i.type,p=i.bytes,g=this.sourceUpdater_.audioBuffered(),v=this.sourceUpdater_.videoBuffered();g.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ss(g).join(", ")),v.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ss(v).join(", "));var _=g.length?g.start(0):0,y=g.length?g.end(g.length-1):0,b=v.length?v.start(0):0,T=v.length?v.end(v.length-1):0;if(y-_<=1&&T-b<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+p.byteLength+", audio buffer: "+ss(g).join(", ")+", video buffer: "+ss(v).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error"),void 0;this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:c,type:h,bytes:p}));var S=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+S),this.remove(0,S,(function(){l.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),l.waitingOnRemove_=!1,l.quotaExceededErrorRetryTimeout_=m().setTimeout((function(){l.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),l.quotaExceededErrorRetryTimeout_=null,l.processCallQueue_()}),1e3)}),!0)},u.handleAppendError_=function handleAppendError_(i,u){var l=i.segmentInfo,c=i.type,h=i.bytes;if(u){if(22===u.code)return this.handleQuotaExceededError_({segmentInfo:l,type:c,bytes:h}),void 0;this.logger_("Received non QUOTA_EXCEEDED_ERR on append",u),this.error(c+" append of "+h.length+"b failed for segment #"+l.mediaIndex+" in playlist "+l.playlist.id),this.trigger("appenderror")}},u.appendToSourceBuffer_=function appendToSourceBuffer_(i){var u=i.segmentInfo,l=i.type,c=i.initSegment,h=i.data,p=i.bytes;if(!p){var m=[h],g=h.byteLength;c&&(m.unshift(c),g+=c.byteLength),p=function concatSegments(i){var u,l=0;return i.bytes&&(u=new Uint8Array(i.bytes),i.segments.forEach((function(i){u.set(i,l),l+=i.byteLength}))),u}({bytes:g,segments:m})}this.sourceUpdater_.appendBuffer({segmentInfo:u,type:l,bytes:p},this.handleAppendError_.bind(this,{segmentInfo:u,type:l,bytes:p}))},u.handleSegmentTimingInfo_=function handleSegmentTimingInfo_(i,u,l){if(this.pendingSegment_&&u===this.pendingSegment_.requestId){var c=this.pendingSegment_.segment,h=i+"TimingInfo";c[h]||(c[h]={}),c[h].transmuxerPrependedSeconds=l.prependedContentDuration||0,c[h].transmuxedPresentationStart=l.start.presentation,c[h].transmuxedDecodeStart=l.start.decode,c[h].transmuxedPresentationEnd=l.end.presentation,c[h].transmuxedDecodeEnd=l.end.decode,c[h].baseMediaDecodeTime=l.baseMediaDecodeTime}},u.appendData_=function appendData_(i,u){var l=u.type,c=u.data;if(c&&c.byteLength&&("audio"!==l||!this.audioDisabled_)){var h=this.getInitSegmentAndUpdateState_({type:l,initSegment:u.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:l,initSegment:h,data:c})}},u.loadSegment_=function loadSegment_(i){var u=this;if(this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),"number"==typeof i.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_())return this.loadQueue_.push((function(){var l=_extends({},i,{forceTimestampOffset:!0});_extends(i,u.generateSegmentInfo_(l)),u.isPendingTimestampOffset_=!1,u.updateTransmuxerAndRequestSegment_(i)})),void 0;this.updateTransmuxerAndRequestSegment_(i)},u.updateTransmuxerAndRequestSegment_=function updateTransmuxerAndRequestSegment_(i){var u=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var l=this.createSimplifiedSegmentObj_(i),c=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)||null!==this.mediaIndex&&(i.timeline!==this.currentTimeline_&&i.timeline>0);this.logger_("Requesting "+nu(i)),l.map&&!l.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=jo({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:l,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function endedTimelineFn(){u.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function onTransmuxerLog(l){var c=l.message,h=l.level,p=l.stream;u.logger_(nu(i)+" logged from transmuxer stream "+p+" as a "+h+": "+c)}})},u.trimBackBuffer_=function trimBackBuffer_(i){var u=function safeBackBufferTrimTime(i,u,l){var c=u-po.BACK_BUFFER_LENGTH;return i.length&&(c=Math.max(c,i.start(0))),Math.min(u-l,c)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);u>0&&this.remove(0,u)},u.createSimplifiedSegmentObj_=function createSimplifiedSegmentObj_(i){var u=i.segment,l=i.part,c={resolvedUri:l?l.resolvedUri:u.resolvedUri,byterange:l?l.byterange:u.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},h=i.playlist.segments[i.mediaIndex-1];if(h&&h.timeline===u.timeline&&(h.videoTimingInfo?c.baseStartTime=h.videoTimingInfo.transmuxedDecodeEnd:h.audioTimingInfo&&(c.baseStartTime=h.audioTimingInfo.transmuxedDecodeEnd)),u.key){var p=u.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);c.key=this.segmentKey(u.key),c.key.iv=p}return u.map&&(c.map=this.initSegmentForMap(u.map)),c},u.saveTransferStats_=function saveTransferStats_(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},u.saveBandwidthRelatedStats_=function saveBandwidthRelatedStats_(i,u){if(this.pendingSegment_.byteLength=u.bytesReceived,i<ru)return this.logger_("Ignoring segment's bandwidth because its duration of "+i+" is less than the min to record "+ru),void 0;this.bandwidth=u.bandwidth,this.roundTrip=u.roundTripTime},u.handleTimeout_=function handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},u.segmentRequestFinished_=function segmentRequestFinished_(i,u,l){if(this.callQueue_.length)return this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,u,l)),void 0;if(this.saveTransferStats_(u.stats),this.pendingSegment_&&u.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===Io)return;return this.pause(),i.code===xo?(this.handleTimeout_(),void 0):(this.mediaRequestsErrored+=1,this.error(i),this.trigger("error"),void 0)}var c=this.pendingSegment_;this.saveBandwidthRelatedStats_(c.duration,u.stats),c.endOfAllRequests=u.endOfAllRequests,l.gopInfo&&(this.gopBuffer_=function updateGopBuffer(i,u,l){if(!u.length)return i;if(l)return u.slice();var c=u[0].pts,h=0;for(h;h<i.length&&!(i[h].pts>=c);h++);return i.slice(0,h).concat(u)}(this.gopBuffer_,l.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(c)}},u.setTimeMapping_=function setTimeMapping_(i){var u=this.syncController_.mappingForTimeline(i);null!==u&&(this.timeMapping_=u)},u.updateMediaSecondsLoaded_=function updateMediaSecondsLoaded_(i){this.mediaSecondsLoaded+="number"==typeof i.start&&"number"==typeof i.end?i.end-i.start:i.duration},u.shouldUpdateTransmuxerTimestampOffset_=function shouldUpdateTransmuxerTimestampOffset_(i){return null!==i&&("main"===this.loaderType_&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset())},u.trueSegmentStart_=function trueSegmentStart_(i){var u=i.currentStart,l=i.mediaIndex,c=i.firstVideoFrameTimeForData;if(void 0!==u)return u;if(!i.useVideoTimingInfo)return i.audioTimingInfo.start;var h=i.playlist.segments[l-1];return 0!==l&&h&&void 0!==h.start&&h.end===c+i.currentVideoTimestampOffset?i.videoTimingInfo.start:c},u.waitForAppendsToComplete_=function waitForAppendsToComplete_(i){var u=this.getCurrentMediaInfo_(i);if(!u)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error"),void 0;var l="main"===this.loaderType_&&u.hasVideo,c=!this.audioDisabled_&&u.hasAudio&&!u.isMuxed;if(i.waitingOnAppends=0,!i.hasAppendedData_)return i.timingInfo||"number"!=typeof i.timestampOffset||(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),this.checkAppendsDone_(i),void 0;l&&i.waitingOnAppends++,c&&i.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},u.checkAppendsDone_=function checkAppendsDone_(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,0===i.waitingOnAppends&&this.handleAppendsDone_())},u.checkForIllegalMediaSwitch=function checkForIllegalMediaSwitch(i){var u=function illegalMediaSwitch(i,u,l){return"main"===i&&u&&l?l.hasAudio||l.hasVideo?u.hasVideo&&!l.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!u.hasVideo&&l.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),i);return!!u&&(this.error({message:u,blacklistDuration:1/0}),this.trigger("error"),!0)},u.updateSourceBufferTimestampOffset_=function updateSourceBufferTimestampOffset_(i){if(null!==i.timestampOffset&&"number"==typeof i.timingInfo.start&&!i.changedTimestampOffset&&"main"===this.loaderType_){var u=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),u=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),u=!0),u&&this.trigger("timestampoffset")}},u.getSegmentStartTimeForTimestampOffsetCalculation_=function getSegmentStartTimeForTimestampOffsetCalculation_(i){var u=i.videoTimingInfo,l=i.audioTimingInfo,c=i.timingInfo;return this.useDtsForTimestampOffset_?u&&"number"==typeof u.transmuxedDecodeStart?u.transmuxedDecodeStart:l&&"number"==typeof l.transmuxedDecodeStart?l.transmuxedDecodeStart:c.start:c.start},u.updateTimingInfoEnd_=function updateTimingInfoEnd_(i){i.timingInfo=i.timingInfo||{};var u=this.getMediaInfo_(),l="main"===this.loaderType_&&u&&u.hasVideo&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;l&&(i.timingInfo.end="number"==typeof l.end?l.end:l.start+i.duration)},u.handleAppendsDone_=function handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",this.paused()||this.monitorBuffer_(),void 0;var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var u=uu(i,this.sourceType_);if(u&&("warn"===u.severity?videojs.log.warn(u.message):this.logger_(u.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest&&(this.trigger("syncinfoupdate"),!i.hasAppendedData_))return this.logger_("Throwing away un-appended sync request "+nu(i)),void 0;this.logger_("Appended "+nu(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var l=i.segment,c=i.part,h=l.end&&this.currentTime_()-l.end>3*i.playlist.targetDuration,p=c&&c.end&&this.currentTime_()-c.end>3*i.playlist.partTargetDuration;if(h||p)return this.logger_("bad "+(h?"segment":"part")+" "+nu(i)),this.resetEverything(),void 0;null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},u.recordThroughput_=function recordThroughput_(i){if(i.duration<ru)return this.logger_("Ignoring segment's throughput because its duration of "+i.duration+" is less than the min to record "+ru),void 0;var u=this.throughput.rate,l=Date.now()-i.endOfAllRequests+1,c=Math.floor(i.byteLength/l*8*1e3);this.throughput.rate+=(c-u)/++this.throughput.count},u.addSegmentMetadataCue_=function addSegmentMetadataCue_(i){if(this.segmentMetadataTrack_){var u=i.segment,l=u.start,c=u.end;if(iu(l)&&iu(c)){tu(l,c,this.segmentMetadataTrack_);var h=m().WebKitDataCue||m().VTTCue,p={custom:u.custom,dateTimeObject:u.dateTimeObject,dateTimeString:u.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:l,end:c},g=new h(l,c,JSON.stringify(p));g.value=p,this.segmentMetadataTrack_.addCue(g)}}},SegmentLoader}(videojs.EventTarget);function noop(){}var du,cu=function toTitleCase(i){return"string"!=typeof i?i:i.replace(/./,(function(i){return i.toUpperCase()}))},hu=["video","audio"],pu=function updating(i,u){var l=u[i+"Buffer"];return l&&l.updating||u.queuePending[i]},fu=function shiftQueue(i,u){if(0!==u.queue.length){var l=0,c=u.queue[l];if("mediaSource"===c.type)return u.updating()||"closed"===u.mediaSource.readyState||(u.queue.shift(),c.action(u),c.doneFn&&c.doneFn(),shiftQueue("audio",u),shiftQueue("video",u)),void 0;if("mediaSource"!==i&&u.ready()&&"closed"!==u.mediaSource.readyState&&!pu(i,u)){if(c.type!==i){if(l=function nextQueueIndexOfType(i,u){for(var l=0;l<u.length;l++){var c=u[l];if("mediaSource"===c.type)return null;if(c.type===i)return l}return null}(i,u.queue),null===l)return;c=u.queue[l]}return u.queue.splice(l,1),u.queuePending[i]=c,c.action(i,u),c.doneFn||(u.queuePending[i]=null,shiftQueue(i,u)),void 0}}},mu=function cleanupBuffer(i,u){var l=u[i+"Buffer"],c=cu(i);l&&(l.removeEventListener("updateend",u["on"+c+"UpdateEnd_"]),l.removeEventListener("error",u["on"+c+"Error_"]),u.codecs[i]=null,u[i+"Buffer"]=null)},gu=function inSourceBuffers(i,u){return i&&u&&-1!==Array.prototype.indexOf.call(i.sourceBuffers,u)},vu=function appendBuffer(i,u,l){return function(c,h){var p=h[c+"Buffer"];if(gu(h.mediaSource,p)){h.logger_("Appending segment "+u.mediaIndex+"'s "+i.length+" bytes to "+c+"Buffer");try{p.appendBuffer(i)}catch(i){h.logger_("Error with code "+i.code+" "+(22===i.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+u.mediaIndex+" to "+c+"Buffer"),h.queuePending[c]=null,l(i)}}}},_u=function remove(i,u){return function(l,c){var h=c[l+"Buffer"];if(gu(c.mediaSource,h)){c.logger_("Removing "+i+" to "+u+" from "+l+"Buffer");try{h.remove(i,u)}catch(h){c.logger_("Remove "+i+" to "+u+" from "+l+"Buffer failed")}}}},yu=function timestampOffset(i){return function(u,l){var c=l[u+"Buffer"];gu(l.mediaSource,c)&&(l.logger_("Setting "+u+"timestampOffset to "+i),c.timestampOffset=i)}},bu=function callback(i){return function(u,l){i()}},Tu=function endOfStream(i){return function(u){if("open"===u.mediaSource.readyState){u.logger_("Calling mediaSource endOfStream("+(i||"")+")");try{u.mediaSource.endOfStream(i)}catch(i){videojs.log.warn("Failed to call media source endOfStream",i)}}}},Su=function duration(i){return function(u){u.logger_("Setting mediaSource duration to "+i);try{u.mediaSource.duration=i}catch(i){videojs.log.warn("Failed to set media source duration",i)}}},ku=function abort(){return function(i,u){if("open"===u.mediaSource.readyState){var l=u[i+"Buffer"];if(gu(u.mediaSource,l)){u.logger_("calling abort on "+i+"Buffer");try{l.abort()}catch(u){videojs.log.warn("Failed to abort on "+i+"Buffer",u)}}}}},Eu=function addSourceBuffer(i,u){return function(l){var c=cu(i),h=Z(u);l.logger_("Adding "+i+"Buffer with codec "+u+" to mediaSource");var p=l.mediaSource.addSourceBuffer(h);p.addEventListener("updateend",l["on"+c+"UpdateEnd_"]),p.addEventListener("error",l["on"+c+"Error_"]),l.codecs[i]=u,l[i+"Buffer"]=p}},Cu=function removeSourceBuffer(i){return function(u){var l=u[i+"Buffer"];if(mu(i,u),gu(u.mediaSource,l)){u.logger_("Removing "+i+"Buffer with codec "+u.codecs[i]+" from mediaSource");try{u.mediaSource.removeSourceBuffer(l)}catch(u){videojs.log.warn("Failed to removeSourceBuffer "+i+"Buffer",u)}}}},wu=function changeType(i){return function(u,l){var c=l[u+"Buffer"],h=Z(i);if(gu(l.mediaSource,c)&&l.codecs[u]!==i){l.logger_("changing "+u+"Buffer codec from "+l.codecs[u]+" to "+i);try{c.changeType(h),l.codecs[u]=i}catch(i){videojs.log.warn("Failed to changeType on "+u+"Buffer",i)}}}},Pu=function pushQueue(i){var u=i.type,l=i.sourceUpdater;l.queue.push({type:u,action:i.action,doneFn:i.doneFn,name:i.name}),fu(u,l)},Au=function onUpdateend(i,u){return function(l){if(u.queuePending[i]){var c=u.queuePending[i].doneFn;u.queuePending[i]=null,c&&c(u[i+"Error_"])}fu(i,u)}},xu=function(i){function SourceUpdater(u){var l;return(l=i.call(this)||this).mediaSource=u,l.sourceopenListener_=function(){return fu("mediaSource",_assertThisInitialized(l))},l.mediaSource.addEventListener("sourceopen",l.sourceopenListener_),l.logger_=Ja("SourceUpdater"),l.audioTimestampOffset_=0,l.videoTimestampOffset_=0,l.queue=[],l.queuePending={audio:null,video:null},l.delayedAudioAppendQueue_=[],l.videoAppendQueued_=!1,l.codecs={},l.onVideoUpdateEnd_=Au("video",_assertThisInitialized(l)),l.onAudioUpdateEnd_=Au("audio",_assertThisInitialized(l)),l.onVideoError_=function(i){l.videoError_=i},l.onAudioError_=function(i){l.audioError_=i},l.createdSourceBuffers_=!1,l.initializedEme_=!1,l.triggeredReady_=!1,l}_inheritsLoose(SourceUpdater,i);var u=SourceUpdater.prototype;return u.initializedEme=function initializedEme(){this.initializedEme_=!0,this.triggerReady()},u.hasCreatedSourceBuffers=function hasCreatedSourceBuffers(){return this.createdSourceBuffers_},u.hasInitializedAnyEme=function hasInitializedAnyEme(){return this.initializedEme_},u.ready=function ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},u.createSourceBuffers=function createSourceBuffers(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},u.triggerReady=function triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},u.addSourceBuffer=function addSourceBuffer(i,u){Pu({type:"mediaSource",sourceUpdater:this,action:Eu(i,u),name:"addSourceBuffer"})},u.abort=function abort(i){Pu({type:i,sourceUpdater:this,action:ku(i),name:"abort"})},u.removeSourceBuffer=function removeSourceBuffer(i){if(!this.canRemoveSourceBuffer())return videojs.log.error("removeSourceBuffer is not supported!"),void 0;Pu({type:"mediaSource",sourceUpdater:this,action:Cu(i),name:"removeSourceBuffer"})},u.canRemoveSourceBuffer=function canRemoveSourceBuffer(){return!videojs.browser.IE_VERSION&&!videojs.browser.IS_FIREFOX&&m().MediaSource&&m().MediaSource.prototype&&"function"==typeof m().MediaSource.prototype.removeSourceBuffer},SourceUpdater.canChangeType=function canChangeType(){return m().SourceBuffer&&m().SourceBuffer.prototype&&"function"==typeof m().SourceBuffer.prototype.changeType},u.canChangeType=function canChangeType(){return this.constructor.canChangeType()},u.changeType=function changeType(i,u){if(!this.canChangeType())return videojs.log.error("changeType is not supported!"),void 0;Pu({type:i,sourceUpdater:this,action:wu(u),name:"changeType"})},u.addOrChangeSourceBuffers=function addOrChangeSourceBuffers(i){var u=this;if(!i||"object"!=typeof i||0===Object.keys(i).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach((function(l){var c=i[l];if(!u.hasCreatedSourceBuffers())return u.addSourceBuffer(l,c);u.canChangeType()&&u.changeType(l,c)}))},u.appendBuffer=function appendBuffer(i,u){var l=this,c=i.segmentInfo,h=i.type,p=i.bytes;if(this.processedAppend_=!0,"audio"===h&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([i,u]),this.logger_("delayed audio append of "+p.length+" until video append"),void 0;if(Pu({type:h,sourceUpdater:this,action:vu(p,c||{mediaIndex:-1},u),doneFn:u,name:"appendBuffer"}),"video"===h){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var m=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+m.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,m.forEach((function(i){l.appendBuffer.apply(l,i)}))}},u.audioBuffered=function audioBuffered(){return gu(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:videojs.createTimeRange()},u.videoBuffered=function videoBuffered(){return gu(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:videojs.createTimeRange()},u.buffered=function buffered(){var i=gu(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,u=gu(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return u&&!i?this.audioBuffered():i&&!u?this.videoBuffered():function bufferIntersection(i,u){var l=null,c=null,h=0,p=[],m=[];if(!(i&&i.length&&u&&u.length))return videojs.createTimeRange();for(var g=i.length;g--;)p.push({time:i.start(g),type:"start"}),p.push({time:i.end(g),type:"end"});for(g=u.length;g--;)p.push({time:u.start(g),type:"start"}),p.push({time:u.end(g),type:"end"});for(p.sort((function(i,u){return i.time-u.time})),g=0;g<p.length;g++)"start"===p[g].type?2==++h&&(l=p[g].time):"end"===p[g].type&&1==--h&&(c=p[g].time),null!==l&&null!==c&&(m.push([l,c]),l=null,c=null);return videojs.createTimeRanges(m)}(this.audioBuffered(),this.videoBuffered())},u.setDuration=function setDuration(i,u){void 0===u&&(u=noop),Pu({type:"mediaSource",sourceUpdater:this,action:Su(i),name:"duration",doneFn:u})},u.endOfStream=function endOfStream(i,u){void 0===i&&(i=null),void 0===u&&(u=noop),"string"!=typeof i&&(i=void 0),Pu({type:"mediaSource",sourceUpdater:this,action:Tu(i),name:"endOfStream",doneFn:u})},u.removeAudio=function removeAudio(i,u,l){if(void 0===l&&(l=noop),!this.audioBuffered().length||0===this.audioBuffered().end(0))return l(),void 0;Pu({type:"audio",sourceUpdater:this,action:_u(i,u),doneFn:l,name:"remove"})},u.removeVideo=function removeVideo(i,u,l){if(void 0===l&&(l=noop),!this.videoBuffered().length||0===this.videoBuffered().end(0))return l(),void 0;Pu({type:"video",sourceUpdater:this,action:_u(i,u),doneFn:l,name:"remove"})},u.updating=function updating(){return!(!pu("audio",this)&&!pu("video",this))},u.audioTimestampOffset=function audioTimestampOffset(i){return void 0!==i&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(Pu({type:"audio",sourceUpdater:this,action:yu(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},u.videoTimestampOffset=function videoTimestampOffset(i){return void 0!==i&&this.videoBuffer&&this.videoTimestampOffset!==i&&(Pu({type:"video",sourceUpdater:this,action:yu(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},u.audioQueueCallback=function audioQueueCallback(i){this.audioBuffer&&Pu({type:"audio",sourceUpdater:this,action:bu(i),name:"callback"})},u.videoQueueCallback=function videoQueueCallback(i){this.videoBuffer&&Pu({type:"video",sourceUpdater:this,action:bu(i),name:"callback"})},u.dispose=function dispose(){var i=this;this.trigger("dispose"),hu.forEach((function(u){i.abort(u),i.canRemoveSourceBuffer()?i.removeSourceBuffer(u):i[u+"QueueCallback"]((function(){return mu(u,i)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},SourceUpdater}(videojs.EventTarget),Iu=function uint8ToUtf8(i){return decodeURIComponent(escape(String.fromCharCode.apply(null,i)))},Ou=new Uint8Array("\n\n".split("").map((function(i){return i.charCodeAt(0)}))),Lu=function(i){function NoVttJsError(){return i.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return _inheritsLoose(NoVttJsError,i),NoVttJsError}(_wrapNativeSuper(Error)),Du=function(i){function VTTSegmentLoader(u,l){var c;return void 0===l&&(l={}),(c=i.call(this,u,l)||this).mediaSource_=null,c.subtitlesTrack_=null,c.loaderType_="subtitle",c.featuresNativeTextTracks_=u.featuresNativeTextTracks,c.loadVttJs=u.loadVttJs,c.shouldSaveSegmentTimingInfo_=!1,c}_inheritsLoose(VTTSegmentLoader,i);var u=VTTSegmentLoader.prototype;return u.createTransmuxer_=function createTransmuxer_(){return null},u.buffered_=function buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return videojs.createTimeRanges();var i=this.subtitlesTrack_.cues;return videojs.createTimeRanges([[i[0].startTime,i[i.length-1].startTime]])},u.initSegmentForMap=function initSegmentForMap(i,u){if(void 0===u&&(u=!1),!i)return null;var l=$s(i),c=this.initSegments_[l];if(u&&!c&&i.bytes){var h=new Uint8Array(Ou.byteLength+i.bytes.byteLength);h.set(i.bytes),h.set(Ou,i.bytes.byteLength),this.initSegments_[l]=c={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:h}}return c||i},u.couldBeginLoading_=function couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},u.init_=function init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},u.track=function track(i){return void 0===i||(this.subtitlesTrack_=i,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},u.remove=function remove(i,u){tu(i,u,this.subtitlesTrack_)},u.fillBuffer_=function fillBuffer_(){var i=this,u=this.chooseNextRequest_();if(u){if(null===this.syncController_.timestampOffsetForTimeline(u.timeline)){return this.syncController_.one("timestampoffset",(function checkTimestampOffset(){i.state="READY",i.paused()||i.monitorBuffer_()})),this.state="WAITING_ON_TIMELINE",void 0}this.loadSegment_(u)}},u.timestampOffsetForSegment_=function timestampOffsetForSegment_(){return null},u.chooseNextRequest_=function chooseNextRequest_(){return this.skipEmptySegments_(i.prototype.chooseNextRequest_.call(this))},u.skipEmptySegments_=function skipEmptySegments_(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},u.stopForError=function stopForError(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},u.segmentRequestFinished_=function segmentRequestFinished_(i,u,l){var c=this;if(!this.subtitlesTrack_)return this.state="READY",void 0;if(this.saveTransferStats_(u.stats),!this.pendingSegment_)return this.state="READY",this.mediaRequestsAborted+=1,void 0;if(i)return i.code===xo&&this.handleTimeout_(),i.code===Io?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(i),void 0;var h=this.pendingSegment_;this.saveBandwidthRelatedStats_(h.duration,u.stats),u.key&&this.segmentKey(u.key,!0),this.state="APPENDING",this.trigger("appending");var p=h.segment;if(p.map&&(p.map.bytes=u.map.bytes),h.bytes=u.bytes,"function"!=typeof m().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",this.loadVttJs().then((function(){return c.segmentRequestFinished_(i,u,l)}),(function(){return c.stopForError({message:"Error loading vtt.js"})})),void 0;p.requested=!0;try{this.parseVTTCues_(h)}catch(i){return this.stopForError({message:i.message}),void 0}if(this.updateTimeMapping_(h,this.syncController_.timelines[h.timeline],this.playlist_),h.timingInfo=h.cues.length?{start:h.cues[0].startTime,end:h.cues[h.cues.length-1].endTime}:{start:h.startOfSegment,end:h.startOfSegment+h.duration},h.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY",void 0;h.byteLength=h.bytes.byteLength,this.mediaSecondsLoaded+=p.duration,h.cues.forEach((function(i){c.subtitlesTrack_.addCue(c.featuresNativeTextTracks_?new(m().VTTCue)(i.startTime,i.endTime,i.text):i)})),function removeDuplicateCuesFromTrack(i){var u=i.cues;if(u)for(var l=0;l<u.length;l++){for(var c=[],h=0,p=0;p<u.length;p++)u[l].startTime===u[p].startTime&&u[l].endTime===u[p].endTime&&u[l].text===u[p].text&&++h>1&&c.push(u[p]);c.length&&c.forEach((function(u){return i.removeCue(u)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()},u.handleData_=function handleData_(){},u.updateTimingInfoEnd_=function updateTimingInfoEnd_(){},u.parseVTTCues_=function parseVTTCues_(i){var u,l=!1;if("function"!=typeof m().WebVTT)throw new Lu;"function"==typeof m().TextDecoder?u=new(m().TextDecoder)("utf8"):(u=m().WebVTT.StringDecoder(),l=!0);var c=new(m().WebVTT.Parser)(m(),m().vttjs,u);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},c.oncue=i.cues.push.bind(i.cues),c.ontimestampmap=function(u){i.timestampmap=u},c.onparsingerror=function(i){videojs.log.warn("Error encountered when parsing cues: "+i.message)},i.segment.map){var h=i.segment.map.bytes;l&&(h=Iu(h)),c.parse(h)}var p=i.bytes;l&&(p=Iu(p)),c.parse(p),c.flush()},u.updateTimeMapping_=function updateTimeMapping_(i,u,l){var c=i.segment;if(u){if(!i.cues.length)return c.empty=!0,void 0;var h=i.timestampmap,p=h.MPEGTS/Nt.ONE_SECOND_IN_TS-h.LOCAL+u.mapping;if(i.cues.forEach((function(i){i.startTime+=p,i.endTime+=p})),!l.syncInfo)l.syncInfo={mediaSequence:l.mediaSequence+i.mediaIndex,time:Math.min(i.cues[0].startTime,i.cues[i.cues.length-1].startTime-c.duration)}}},VTTSegmentLoader}(lu),Vu=function findAdCue(i,u){for(var l=i.cues,c=0;c<l.length;c++){var h=l[c];if(u>=h.adStartTime&&u<=h.adEndTime)return h}return null},Ru=[{name:"VOD",run:function run(i,u,l,c,h){if(l!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null}},{name:"ProgramDateTime",run:function run(i,u,l,c,h){if(!Object.keys(i.timelineToDatetimeMappings).length)return null;var p=null,m=null,g=cs(u);h=h||0;for(var v=0;v<g.length;v++){var _=g[u.endList||0===h?v:g.length-(v+1)],y=_.segment,b=i.timelineToDatetimeMappings[y.timeline];if(b&&y.dateTimeObject){var T=y.dateTimeObject.getTime()/1e3+b;if(y.parts&&"number"==typeof _.partIndex)for(var S=0;S<_.partIndex;S++)T+=y.parts[S].duration;var k=Math.abs(h-T);if(null!==m&&(0===k||m<k))break;m=k,p={time:T,segmentIndex:_.segmentIndex,partIndex:_.partIndex}}}return p}},{name:"Segment",run:function run(i,u,l,c,h){var p=null,m=null;h=h||0;for(var g=cs(u),v=0;v<g.length;v++){var _=g[u.endList||0===h?v:g.length-(v+1)],y=_.segment,b=_.part&&_.part.start||y&&y.start;if(y.timeline===c&&void 0!==b){var T=Math.abs(h-b);if(null!==m&&m<T)break;(!p||null===m||m>=T)&&(m=T,p={time:b,segmentIndex:_.segmentIndex,partIndex:_.partIndex})}}return p}},{name:"Discontinuity",run:function run(i,u,l,c,h){var p=null;if(h=h||0,u.discontinuityStarts&&u.discontinuityStarts.length)for(var m=null,g=0;g<u.discontinuityStarts.length;g++){var v=u.discontinuityStarts[g],_=i.discontinuities[u.discontinuitySequence+g+1];if(_){var y=Math.abs(h-_.time);if(null!==m&&m<y)break;(!p||null===m||m>=y)&&(m=y,p={time:_.time,segmentIndex:v,partIndex:null})}}return p}},{name:"Playlist",run:function run(i,u,l,c,h){return u.syncInfo?{time:u.syncInfo.time,segmentIndex:u.syncInfo.mediaSequence-u.mediaSequence,partIndex:null}:null}}],Mu=function(i){function SyncController(u){var l;return(l=i.call(this)||this).timelines=[],l.discontinuities=[],l.timelineToDatetimeMappings={},l.logger_=Ja("SyncController"),l}_inheritsLoose(SyncController,i);var u=SyncController.prototype;return u.getSyncPoint=function getSyncPoint(i,u,l,c){var h=this.runStrategies_(i,u,l,c);return h.length?this.selectSyncPoint_(h,{key:"time",value:c}):null},u.getExpiredTime=function getExpiredTime(i,u){if(!i||!i.segments)return null;var l=this.runStrategies_(i,u,i.discontinuitySequence,0);if(!l.length)return null;var c=this.selectSyncPoint_(l,{key:"segmentIndex",value:0});return c.segmentIndex>0&&(c.time*=-1),Math.abs(c.time+vs({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:c.segmentIndex,endIndex:0}))},u.runStrategies_=function runStrategies_(i,u,l,c){for(var h=[],p=0;p<Ru.length;p++){var m=Ru[p],g=m.run(this,i,u,l,c);g&&(g.strategy=m.name,h.push({strategy:m.name,syncPoint:g}))}return h},u.selectSyncPoint_=function selectSyncPoint_(i,u){for(var l=i[0].syncPoint,c=Math.abs(i[0].syncPoint[u.key]-u.value),h=i[0].strategy,p=1;p<i.length;p++){var m=Math.abs(i[p].syncPoint[u.key]-u.value);m<c&&(c=m,l=i[p].syncPoint,h=i[p].strategy)}return this.logger_("syncPoint for ["+u.key+": "+u.value+"] chosen with strategy ["+h+"]: [time:"+l.time+", segmentIndex:"+l.segmentIndex+("number"==typeof l.partIndex?",partIndex:"+l.partIndex:"")+"]"),l},u.saveExpiredSegmentInfo=function saveExpiredSegmentInfo(i,u){var l=u.mediaSequence-i.mediaSequence;if(l>86400)return videojs.log.warn("Not saving expired segment info. Media sequence gap "+l+" is too large."),void 0;for(var c=l-1;c>=0;c--){var h=i.segments[c];if(h&&void 0!==h.start){u.syncInfo={mediaSequence:i.mediaSequence+c,time:h.start},this.logger_("playlist refresh sync: [time:"+u.syncInfo.time+", mediaSequence: "+u.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},u.setDateTimeMappingForStart=function setDateTimeMappingForStart(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var u=i.segments[0],l=u.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[u.timeline]=-l}},u.saveSegmentTimingInfo=function saveSegmentTimingInfo(i){var u=i.segmentInfo,l=i.shouldSaveTimelineMapping,c=this.calculateSegmentTimeMapping_(u,u.timingInfo,l),h=u.segment;c&&(this.saveDiscontinuitySyncInfo_(u),u.playlist.syncInfo||(u.playlist.syncInfo={mediaSequence:u.playlist.mediaSequence+u.mediaIndex,time:h.start}));var p=h.dateTimeObject;h.discontinuity&&l&&p&&(this.timelineToDatetimeMappings[h.timeline]=-p.getTime()/1e3)},u.timestampOffsetForTimeline=function timestampOffsetForTimeline(i){return void 0===this.timelines[i]?null:this.timelines[i].time},u.mappingForTimeline=function mappingForTimeline(i){return void 0===this.timelines[i]?null:this.timelines[i].mapping},u.calculateSegmentTimeMapping_=function calculateSegmentTimeMapping_(i,u,l){var c,h,p=i.segment,m=i.part,g=this.timelines[i.timeline];if("number"==typeof i.timestampOffset)g={time:i.startOfSegment,mapping:i.startOfSegment-u.start},l&&(this.timelines[i.timeline]=g,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": [time: "+g.time+"] [mapping: "+g.mapping+"]")),c=i.startOfSegment,h=u.end+g.mapping;else{if(!g)return!1;c=u.start+g.mapping,h=u.end+g.mapping}return m&&(m.start=c,m.end=h),(!p.start||c<p.start)&&(p.start=c),p.end=h,!0},u.saveDiscontinuitySyncInfo_=function saveDiscontinuitySyncInfo_(i){var u=i.playlist,l=i.segment;if(l.discontinuity)this.discontinuities[l.timeline]={time:l.start,accuracy:0};else if(u.discontinuityStarts&&u.discontinuityStarts.length)for(var c=0;c<u.discontinuityStarts.length;c++){var h=u.discontinuityStarts[c],p=u.discontinuitySequence+c+1,m=h-i.mediaIndex,g=Math.abs(m);if(!this.discontinuities[p]||this.discontinuities[p].accuracy>g){var v=void 0;v=m<0?l.start-vs({defaultDuration:u.targetDuration,durationList:u.segments,startIndex:i.mediaIndex,endIndex:h}):l.end+vs({defaultDuration:u.targetDuration,durationList:u.segments,startIndex:i.mediaIndex+1,endIndex:h}),this.discontinuities[p]={time:v,accuracy:g}}}},u.dispose=function dispose(){this.trigger("dispose"),this.off()},SyncController}(videojs.EventTarget),Nu=function(i){function TimelineChangeController(){var u;return(u=i.call(this)||this).pendingTimelineChanges_={},u.lastTimelineChanges_={},u}_inheritsLoose(TimelineChangeController,i);var u=TimelineChangeController.prototype;return u.clearPendingTimelineChange=function clearPendingTimelineChange(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},u.pendingTimelineChange=function pendingTimelineChange(i){var u=i.type,l=i.from,c=i.to;return"number"==typeof l&&"number"==typeof c&&(this.pendingTimelineChanges_[u]={type:u,from:l,to:c},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[u]},u.lastTimelineChange=function lastTimelineChange(i){var u=i.type,l=i.from,c=i.to;return"number"==typeof l&&"number"==typeof c&&(this.lastTimelineChanges_[u]={type:u,from:l,to:c},delete this.pendingTimelineChanges_[u],this.trigger("timelinechange")),this.lastTimelineChanges_[u]},u.dispose=function dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},TimelineChangeController}(videojs.EventTarget),Bu=go(vo((function(){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(i,u,l){return i(l={path:u,exports:{},require:function require(i,u){return function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},l.exports),l.exports}var u=createCommonjsModule((function(i){function _defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}i.exports=function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),i},i.exports.default=i.exports,i.exports.__esModule=!0})),l=createCommonjsModule((function(i){function _setPrototypeOf(u,l){return i.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,u){return i.__proto__=u,i},i.exports.default=i.exports,i.exports.__esModule=!0,_setPrototypeOf(u,l)}i.exports=_setPrototypeOf,i.exports.default=i.exports,i.exports.__esModule=!0})),c=createCommonjsModule((function(i){i.exports=function _inheritsLoose(i,u){i.prototype=Object.create(u.prototype),i.prototype.constructor=i,l(i,u)},i.exports.default=i.exports,i.exports.__esModule=!0})),h=function(){function Stream(){this.listeners={}}var i=Stream.prototype;return i.on=function on(i,u){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(u)},i.off=function off(i,u){if(!this.listeners[i])return!1;var l=this.listeners[i].indexOf(u);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(l,1),l>-1},i.trigger=function trigger(i){var u=this.listeners[i];if(u)if(2===arguments.length)for(var l=u.length,c=0;c<l;++c)u[c].call(this,arguments[1]);else for(var h=Array.prototype.slice.call(arguments,1),p=u.length,m=0;m<p;++m)u[m].apply(this,h)},i.dispose=function dispose(){this.listeners={}},i.pipe=function pipe(i){this.on("data",(function(u){i.push(u)}))},Stream}();var p,m=null,g=function(){function AES(i){var u,l,c;m||(m=function precompute(){var i,u,l,c,h,p,m,g,v=[[[],[],[],[],[]],[[],[],[],[],[]]],_=v[0],y=v[1],b=_[4],T=y[4],S=[],k=[];for(i=0;i<256;i++)k[(S[i]=i<<1^283*(i>>7))^i]=i;for(u=l=0;!b[u];u^=c||1,l=k[l]||1)for(b[u]=p=(p=l^l<<1^l<<2^l<<3^l<<4)>>8^255&p^99,T[p]=u,g=16843009*S[h=S[c=S[u]]]^65537*h^257*c^16843008*u,m=257*S[p]^16843008*p,i=0;i<4;i++)_[i][u]=m=m<<24^m>>>8,y[i][p]=g=g<<24^g>>>8;for(i=0;i<5;i++)_[i]=_[i].slice(0),y[i]=y[i].slice(0);return v}()),this._tables=[[m[0][0].slice(),m[0][1].slice(),m[0][2].slice(),m[0][3].slice(),m[0][4].slice()],[m[1][0].slice(),m[1][1].slice(),m[1][2].slice(),m[1][3].slice(),m[1][4].slice()]];var h=this._tables[0][4],p=this._tables[1],g=i.length,v=1;if(4!==g&&6!==g&&8!==g)throw new Error("Invalid aes key size");var _=i.slice(0),y=[];for(this._key=[_,y],u=g;u<4*g+28;u++)c=_[u-1],(u%g==0||8===g&&u%g==4)&&(c=h[c>>>24]<<24^h[c>>16&255]<<16^h[c>>8&255]<<8^h[255&c],u%g==0&&(c=c<<8^c>>>24^v<<24,v=v<<1^283*(v>>7))),_[u]=_[u-g]^c;for(l=0;u;l++,u--)c=_[3&l?u:u-4],y[l]=u<=4||l<4?c:p[0][h[c>>>24]]^p[1][h[c>>16&255]]^p[2][h[c>>8&255]]^p[3][h[255&c]]}return AES.prototype.decrypt=function decrypt(i,u,l,c,h,p){var m,g,v,_,y=this._key[1],b=i^y[0],T=c^y[1],S=l^y[2],k=u^y[3],E=y.length/4-2,C=4,w=this._tables[1],P=w[0],A=w[1],x=w[2],I=w[3],O=w[4];for(_=0;_<E;_++)m=P[b>>>24]^A[T>>16&255]^x[S>>8&255]^I[255&k]^y[C],g=P[T>>>24]^A[S>>16&255]^x[k>>8&255]^I[255&b]^y[C+1],v=P[S>>>24]^A[k>>16&255]^x[b>>8&255]^I[255&T]^y[C+2],k=P[k>>>24]^A[b>>16&255]^x[T>>8&255]^I[255&S]^y[C+3],C+=4,b=m,T=g,S=v;for(_=0;_<4;_++)h[(3&-_)+p]=O[b>>>24]<<24^O[T>>16&255]<<16^O[S>>8&255]<<8^O[255&k]^y[C++],m=b,b=T,T=S,S=k,k=m},AES}(),v=function(i){function AsyncStream(){var u;return(u=i.call(this,h)||this).jobs=[],u.delay=1,u.timeout_=null,u}c(AsyncStream,i);var u=AsyncStream.prototype;return u.processJob_=function processJob_(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},u.push=function push(i){this.jobs.push(i),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},AsyncStream}(h),_=function ntoh(i){return i<<24|(65280&i)<<8|(16711680&i)>>8|i>>>24},y=function(){function Decrypter(i,u,l,c){var h=Decrypter.STEP,p=new Int32Array(i.buffer),m=new Uint8Array(i.byteLength),g=0;for(this.asyncStream_=new v,this.asyncStream_.push(this.decryptChunk_(p.subarray(g,g+h),u,l,m)),g=h;g<p.length;g+=h)l=new Uint32Array([_(p[g-4]),_(p[g-3]),_(p[g-2]),_(p[g-1])]),this.asyncStream_.push(this.decryptChunk_(p.subarray(g,g+h),u,l,m));this.asyncStream_.push((function(){c(null,function unpad(i){return i.subarray(0,i.byteLength-i[i.byteLength-1])}(m))}))}return Decrypter.prototype.decryptChunk_=function decryptChunk_(i,u,l,c){return function(){var h=function decrypt(i,u,l){var c,h,p,m,v,y,b,T,S,k=new Int32Array(i.buffer,i.byteOffset,i.byteLength>>2),E=new g(Array.prototype.slice.call(u)),C=new Uint8Array(i.byteLength),w=new Int32Array(C.buffer);for(c=l[0],h=l[1],p=l[2],m=l[3],S=0;S<k.length;S+=4)v=_(k[S]),y=_(k[S+1]),b=_(k[S+2]),T=_(k[S+3]),E.decrypt(v,y,b,T,w,S),w[S]=_(w[S]^c),w[S+1]=_(w[S+1]^h),w[S+2]=_(w[S+2]^p),w[S+3]=_(w[S+3]^m),c=v,h=y,p=b,m=T;return C}(i,u,l);c.set(h,i.byteOffset)}},u(Decrypter,null,[{key:"STEP",get:function get(){return 32e3}}]),Decrypter}();p="undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:{};var b=p.BigInt||Number;[b("0x1"),b("0x100"),b("0x10000"),b("0x1000000"),b("0x100000000"),b("0x10000000000"),b("0x1000000000000"),b("0x100000000000000"),b("0x10000000000000000")];var T=function createTransferableMessage(i){var u={};return Object.keys(i).forEach((function(l){var c=i[l];u[l]=function isArrayBufferView(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer}(c)?{bytes:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength}:c})),u};self.onmessage=function(i){var u=i.data,l=new Uint8Array(u.encrypted.bytes,u.encrypted.byteOffset,u.encrypted.byteLength),c=new Uint32Array(u.key.bytes,u.key.byteOffset,u.key.byteLength/4),h=new Uint32Array(u.iv.bytes,u.iv.byteOffset,u.iv.byteLength/4);new y(l,c,h,(function(i,l){self.postMessage(T({source:u.source,decrypted:l}),[l.buffer])}))}}))),Fu=mo(Bu),Uu=function audioTrackKind_(i){var u=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(u="main-desc"),u},ju=function stopLoaders(i,u){i.abort(),i.pause(),u&&u.activePlaylistLoader&&(u.activePlaylistLoader.pause(),u.activePlaylistLoader=null)},Hu=function startLoaders(i,u){u.activePlaylistLoader=i,i.load()},qu={AUDIO:function AUDIO(i,u){return function(){var l=u.mediaTypes[i],c=u.blacklistCurrentPlaylist;ju(u.segmentLoaders[i],l);var h=l.activeTrack(),p=l.activeGroup(),m=(p.filter((function(i){return i.default}))[0]||p[0]).id,g=l.tracks[m];if(h===g)return c({message:"Problem encountered loading the default audio track."}),void 0;for(var v in videojs.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),l.tracks)l.tracks[v].enabled=l.tracks[v]===g;l.onTrackChanged()}},SUBTITLES:function SUBTITLES(i,u){return function(){var l=u.segmentLoaders[i],c=u.mediaTypes[i];videojs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),ju(l,c);var h=c.activeTrack();h&&(h.mode="disabled"),c.onTrackChanged()}}},Wu={AUDIO:function AUDIO(i,u,l){if(u){var c=l.tech,h=l.requestOptions,p=l.segmentLoaders[i];u.on("loadedmetadata",(function(){var i=u.media();p.playlist(i,h),(!c.paused()||i.endList&&"none"!==c.preload())&&p.load()})),u.on("loadedplaylist",(function(){p.playlist(u.media(),h),c.paused()||p.load()})),u.on("error",qu[i](i,l))}},SUBTITLES:function SUBTITLES(i,u,l){var c=l.tech,h=l.requestOptions,p=l.segmentLoaders[i],m=l.mediaTypes[i];u.on("loadedmetadata",(function(){var i=u.media();p.playlist(i,h),p.track(m.activeTrack()),(!c.paused()||i.endList&&"none"!==c.preload())&&p.load()})),u.on("loadedplaylist",(function(){p.playlist(u.media(),h),c.paused()||p.load()})),u.on("error",qu[i](i,l))}},Gu={AUDIO:function AUDIO(i,u){var l=u.vhs,c=u.sourceType,h=u.segmentLoaders[i],p=u.requestOptions,m=u.master.mediaGroups,g=u.mediaTypes[i],v=g.groups,_=g.tracks,y=g.logger_,b=u.masterPlaylistLoader,T=ws(b.master);for(var S in m[i]&&0!==Object.keys(m[i]).length||(m[i]={main:{default:{default:!0}}},T&&(m[i].main.default.playlists=b.master.playlists)),m[i])for(var k in v[S]||(v[S]=[]),m[i][S]){var E=m[i][S][k],C=void 0;if(T?(y("AUDIO group '"+S+"' label '"+k+"' is a master playlist"),E.isMasterPlaylist=!0,C=null):C="vhs-json"===c&&E.playlists?new js(E.playlists[0],l,p):E.resolvedUri?new js(E.resolvedUri,l,p):E.playlists&&"dash"===c?new ho(E.playlists[0],l,p,b):null,E=videojs.mergeOptions({id:k,playlistLoader:C},E),Wu[i](i,E.playlistLoader,u),v[S].push(E),void 0===_[k]){var w=new videojs.AudioTrack({id:k,kind:Uu(E),enabled:!1,language:E.language,default:E.default,label:k});_[k]=w}}h.on("error",qu[i](i,u))},SUBTITLES:function SUBTITLES(i,u){var l=u.tech,c=u.vhs,h=u.sourceType,p=u.segmentLoaders[i],m=u.requestOptions,g=u.master.mediaGroups,v=u.mediaTypes[i],_=v.groups,y=v.tracks,b=u.masterPlaylistLoader;for(var T in g[i])for(var S in _[T]||(_[T]=[]),g[i][T])if(!g[i][T][S].forced){var k=g[i][T][S],E=void 0;if("hls"===h)E=new js(k.resolvedUri,c,m);else if("dash"===h){if(!k.playlists.filter((function(i){return i.excludeUntil!==1/0})).length)return;E=new ho(k.playlists[0],c,m,b)}else"vhs-json"===h&&(E=new js(k.playlists?k.playlists[0]:k.resolvedUri,c,m));if(k=videojs.mergeOptions({id:S,playlistLoader:E},k),Wu[i](i,k.playlistLoader,u),_[T].push(k),void 0===y[S]){var C=l.addRemoteTextTrack({id:S,kind:"subtitles",default:k.default&&k.autoselect,language:k.language,label:S},!1).track;y[S]=C}}p.on("error",qu[i](i,u))},"CLOSED-CAPTIONS":function CLOSEDCAPTIONS(i,u){var l=u.tech,c=u.master.mediaGroups,h=u.mediaTypes[i],p=h.groups,m=h.tracks;for(var g in c[i])for(var v in p[g]||(p[g]=[]),c[i][g]){var _=c[i][g][v];if(/^(?:CC|SERVICE)/.test(_.instreamId)){var y=l.options_.vhs&&l.options_.vhs.captionServices||{},b={label:v,language:_.language,instreamId:_.instreamId,default:_.default&&_.autoselect};if(y[b.instreamId]&&(b=videojs.mergeOptions(b,y[b.instreamId])),void 0===b.default&&delete b.default,p[g].push(videojs.mergeOptions({id:v},_)),void 0===m[v]){var T=l.addRemoteTextTrack({id:b.instreamId,kind:"captions",default:b.default,language:b.language,label:b.label},!1).track;m[v]=T}}}}},zu=function groupMatch(i,u){for(var l=0;l<i.length;l++){if(Es(u,i[l]))return!0;if(i[l].playlists&&groupMatch(i[l].playlists,u))return!0}return!1},Xu={AUDIO:function AUDIO(i,u){return function(){var l=u.mediaTypes[i].tracks;for(var c in l)if(l[c].enabled)return l[c];return null}},SUBTITLES:function SUBTITLES(i,u){return function(){var l=u.mediaTypes[i].tracks;for(var c in l)if("showing"===l[c].mode||"hidden"===l[c].mode)return l[c];return null}}},Ku=function setupMediaGroups(i){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(u){Gu[u](u,i)}));var u=i.mediaTypes,l=i.masterPlaylistLoader,c=i.tech,h=i.vhs,p=i.segmentLoaders,m=p.AUDIO,g=p.main;["AUDIO","SUBTITLES"].forEach((function(l){u[l].activeGroup=function activeGroup(i,u){return function(l){var c=u.mediaTypes[i].groups,h=u.masterPlaylistLoader.media();if(!h)return null;var p=null;h.attributes[i]&&(p=c[h.attributes[i]]);var m=Object.keys(c);if(!p)if("AUDIO"===i&&m.length>1&&ws(u.master))for(var g=0;g<m.length;g++){var v=c[m[g]];if(zu(v,h)){p=v;break}}else c.main?p=c.main:1===m.length&&(p=c[m[0]]);return void 0===l?p:null!==l&&p&&p.filter((function(i){return i.id===l.id}))[0]||null}}(l,i),u[l].activeTrack=Xu[l](l,i),u[l].onGroupChanged=function onGroupChanged(i,u){return function(){var l=u.segmentLoaders,c=l[i],h=l.main,p=u.mediaTypes[i],m=p.activeTrack(),g=p.getActiveGroup(),v=p.activePlaylistLoader,_=p.lastGroup_;if((!g||!_||g.id!==_.id)&&(p.lastGroup_=g,p.lastTrack_=m,ju(c,p),g&&!g.isMasterPlaylist)){if(!g.playlistLoader)return v&&h.resetEverything(),void 0;c.resyncLoader(),Hu(g.playlistLoader,p)}}}(l,i),u[l].onGroupChanging=function onGroupChanging(i,u){return function(){var l=u.segmentLoaders[i];u.mediaTypes[i].lastGroup_=null,l.abort(),l.pause()}}(l,i),u[l].onTrackChanged=function onTrackChanged(i,u){return function(){var l=u.masterPlaylistLoader,c=u.segmentLoaders,h=c[i],p=c.main,m=u.mediaTypes[i],g=m.activeTrack(),v=m.getActiveGroup(),_=m.activePlaylistLoader,y=m.lastTrack_;if((!y||!g||y.id!==g.id)&&(m.lastGroup_=v,m.lastTrack_=g,ju(h,m),v)){if(v.isMasterPlaylist){if(!g||!y||g.id===y.id)return;var b=u.vhs.masterPlaylistController_,T=b.selectPlaylist();if(b.media()===T)return;return m.logger_("track change. Switching master audio from "+y.id+" to "+g.id),l.pause(),p.resetEverything(),b.fastQualityChange_(T),void 0}if("AUDIO"===i){if(!v.playlistLoader)return p.setAudio(!0),p.resetEverything(),void 0;h.setAudio(!0),p.setAudio(!1)}if(_===v.playlistLoader)return Hu(v.playlistLoader,m),void 0;h.track&&h.track(g),h.resetEverything(),Hu(v.playlistLoader,m)}}}(l,i),u[l].getActiveGroup=function getActiveGroup(i,u){var l=u.mediaTypes;return function(){var u=l[i].activeTrack();return u?l[i].activeGroup(u):null}}(l,i)}));var v=u.AUDIO.activeGroup();if(v){var _=(v.filter((function(i){return i.default}))[0]||v[0]).id;u.AUDIO.tracks[_].enabled=!0,u.AUDIO.onGroupChanged(),u.AUDIO.onTrackChanged(),u.AUDIO.getActiveGroup().playlistLoader?(g.setAudio(!1),m.setAudio(!0)):g.setAudio(!0)}l.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(i){return u[i].onGroupChanged()}))})),l.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(i){return u[i].onGroupChanging()}))}));var y=function onAudioTrackChanged(){u.AUDIO.onTrackChanged(),c.trigger({type:"usage",name:"vhs-audio-change"}),c.trigger({type:"usage",name:"hls-audio-change"})};for(var b in c.audioTracks().addEventListener("change",y),c.remoteTextTracks().addEventListener("change",u.SUBTITLES.onTrackChanged),h.on("dispose",(function(){c.audioTracks().removeEventListener("change",y),c.remoteTextTracks().removeEventListener("change",u.SUBTITLES.onTrackChanged)})),c.clearTracks("audio"),u.AUDIO.tracks)c.audioTracks().addTrack(u.AUDIO.tracks[b])},Qu=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Yu=function sumLoaderStat(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},$u=function(i){function MasterPlaylistController(u){var l;l=i.call(this)||this;var c=u.src,h=u.handleManifestRedirects,p=u.withCredentials,g=u.tech,v=u.bandwidth,_=u.externVhs,y=u.useCueTags,b=u.blacklistDuration,T=u.enableLowInitialPlaylist,S=u.sourceType,k=u.cacheEncryptionKeys,E=u.experimentalBufferBasedABR,C=u.experimentalLeastPixelDiffSelector,w=u.captionServices;if(!c)throw new Error("A non-empty playlist URL or JSON manifest string is required");var P=u.maxPlaylistRetries;null==P&&(P=1/0),du=_,l.experimentalBufferBasedABR=Boolean(E),l.experimentalLeastPixelDiffSelector=Boolean(C),l.withCredentials=p,l.tech_=g,l.vhs_=g.vhs,l.sourceType_=S,l.useCueTags_=y,l.blacklistDuration=b,l.maxPlaylistRetries=P,l.enableLowInitialPlaylist=T,l.useCueTags_&&(l.cueTagsTrack_=l.tech_.addTextTrack("metadata","ad-cues"),l.cueTagsTrack_.inBandMetadataTrackDispatchType=""),l.requestOptions_={withCredentials:p,handleManifestRedirects:h,maxPlaylistRetries:P,timeout:null},l.on("error",l.pauseLoading),l.mediaTypes_=function createMediaTypes(){var i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(u){i[u]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,getActiveGroup:noop,onGroupChanged:noop,onTrackChanged:noop,lastTrack_:null,logger_:Ja("MediaGroups["+u+"]")}})),i}(),l.mediaSource=new(m().MediaSource),l.handleDurationChange_=l.handleDurationChange_.bind(_assertThisInitialized(l)),l.handleSourceOpen_=l.handleSourceOpen_.bind(_assertThisInitialized(l)),l.handleSourceEnded_=l.handleSourceEnded_.bind(_assertThisInitialized(l)),l.mediaSource.addEventListener("durationchange",l.handleDurationChange_),l.mediaSource.addEventListener("sourceopen",l.handleSourceOpen_),l.mediaSource.addEventListener("sourceended",l.handleSourceEnded_),l.seekable_=videojs.createTimeRanges(),l.hasPlayed_=!1,l.syncController_=new Mu(u),l.segmentMetadataTrack_=g.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,l.decrypter_=new Fu,l.sourceUpdater_=new xu(l.mediaSource),l.inbandTextTracks_={},l.timelineChangeController_=new Nu;var A={vhs:l.vhs_,parse708captions:u.parse708captions,useDtsForTimestampOffset:u.useDtsForTimestampOffset,captionServices:w,mediaSource:l.mediaSource,currentTime:l.tech_.currentTime.bind(l.tech_),seekable:function seekable(){return l.seekable()},seeking:function seeking(){return l.tech_.seeking()},duration:function duration(){return l.duration()},hasPlayed:function hasPlayed(){return l.hasPlayed_},goalBufferLength:function goalBufferLength(){return l.goalBufferLength()},bandwidth:v,syncController:l.syncController_,decrypter:l.decrypter_,sourceType:l.sourceType_,inbandTextTracks:l.inbandTextTracks_,cacheEncryptionKeys:k,sourceUpdater:l.sourceUpdater_,timelineChangeController:l.timelineChangeController_,experimentalExactManifestTimings:u.experimentalExactManifestTimings};l.masterPlaylistLoader_="dash"===l.sourceType_?new ho(c,l.vhs_,l.requestOptions_):new js(c,l.vhs_,l.requestOptions_),l.setupMasterPlaylistLoaderListeners_(),l.mainSegmentLoader_=new lu(videojs.mergeOptions(A,{segmentMetadataTrack:l.segmentMetadataTrack_,loaderType:"main"}),u),l.audioSegmentLoader_=new lu(videojs.mergeOptions(A,{loaderType:"audio"}),u),l.subtitleSegmentLoader_=new Du(videojs.mergeOptions(A,{loaderType:"vtt",featuresNativeTextTracks:l.tech_.featuresNativeTextTracks,loadVttJs:function loadVttJs(){return new Promise((function(i,u){function onLoad(){g.off("vttjserror",onError),i()}function onError(){g.off("vttjsloaded",onLoad),u()}g.one("vttjsloaded",onLoad),g.one("vttjserror",onError),g.addWebVttScript_()}))}}),u),l.setupSegmentLoaderListeners_(),l.experimentalBufferBasedABR&&(l.masterPlaylistLoader_.one("loadedplaylist",(function(){return l.startABRTimer_()})),l.tech_.on("pause",(function(){return l.stopABRTimer_()})),l.tech_.on("play",(function(){return l.startABRTimer_()}))),Qu.forEach((function(i){l[i+"_"]=Yu.bind(_assertThisInitialized(l),i)})),l.logger_=Ja("MPC"),l.triggeredFmp4Usage=!1,"none"===l.tech_.preload()?(l.loadOnPlay_=function(){l.loadOnPlay_=null,l.masterPlaylistLoader_.load()},l.tech_.one("play",l.loadOnPlay_)):l.masterPlaylistLoader_.load(),l.timeToLoadedData__=-1,l.mainAppendsToLoadedData__=-1,l.audioAppendsToLoadedData__=-1;var x="none"===l.tech_.preload()?"play":"loadstart";return l.tech_.one(x,(function(){var i=Date.now();l.tech_.one("loadeddata",(function(){l.timeToLoadedData__=Date.now()-i,l.mainAppendsToLoadedData__=l.mainSegmentLoader_.mediaAppends,l.audioAppendsToLoadedData__=l.audioSegmentLoader_.mediaAppends}))})),l}_inheritsLoose(MasterPlaylistController,i);var u=MasterPlaylistController.prototype;return u.mainAppendsToLoadedData_=function mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__},u.audioAppendsToLoadedData_=function audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__},u.appendsToLoadedData_=function appendsToLoadedData_(){var i=this.mainAppendsToLoadedData_(),u=this.audioAppendsToLoadedData_();return-1===i||-1===u?-1:i+u},u.timeToLoadedData_=function timeToLoadedData_(){return this.timeToLoadedData__},u.checkABR_=function checkABR_(i){void 0===i&&(i="abr");var u=this.selectPlaylist();u&&this.shouldSwitchToMedia_(u)&&this.switchMedia_(u,i)},u.switchMedia_=function switchMedia_(i,u,l){var c=this.media(),h=c&&(c.id||c.uri),p=i.id||i.uri;h&&h!==p&&(this.logger_("switch media "+h+" -> "+p+" from "+u),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+u})),this.masterPlaylistLoader_.media(i,l)},u.startABRTimer_=function startABRTimer_(){var i=this;this.stopABRTimer_(),this.abrTimer_=m().setInterval((function(){return i.checkABR_()}),250)},u.stopABRTimer_=function stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(m().clearInterval(this.abrTimer_),this.abrTimer_=null)},u.getAudioTrackPlaylists_=function getAudioTrackPlaylists_(){var i=this.master(),u=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return u;var l,c=i.mediaGroups.AUDIO,h=Object.keys(c);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var p=c.main||h.length&&c[h[0]];for(var m in p)if(p[m].default){l={label:m};break}}if(!l)return u;var g=[];for(var v in c)if(c[v][l.label]){var _=c[v][l.label];if(_.playlists&&_.playlists.length)g.push.apply(g,_.playlists);else if(_.uri)g.push(_);else if(i.playlists.length)for(var y=0;y<i.playlists.length;y++){var b=i.playlists[y];b.attributes&&b.attributes.AUDIO&&b.attributes.AUDIO===v&&g.push(b)}}return g.length?g:u},u.setupMasterPlaylistLoaderListeners_=function setupMasterPlaylistLoaderListeners_(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var u=i.masterPlaylistLoader_.media(),l=1.5*u.targetDuration*1e3;i.requestOptions_.timeout=ks(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?0:l,u.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(u,i.requestOptions_),i.mainSegmentLoader_.load()),Ku({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),u),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){i.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var u=i.masterPlaylistLoader_.media();if(!u){var l;if(i.excludeUnsupportedVariants_(),i.enableLowInitialPlaylist&&(l=i.selectInitialPlaylist()),l||(l=i.selectPlaylist()),!l||!i.shouldSwitchToMedia_(l))return;if(i.initialMedia_=l,i.switchMedia_(i.initialMedia_,"initial"),!("vhs-json"===i.sourceType_&&i.initialMedia_.segments))return;u=i.initialMedia_}i.handleUpdatedMediaPlaylist(u)})),this.masterPlaylistLoader_.on("error",(function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var u=i.masterPlaylistLoader_.media(),l=1.5*u.targetDuration*1e3;i.requestOptions_.timeout=ks(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?0:l,i.masterPlaylistLoader_.load(),i.mainSegmentLoader_.playlist(u,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var u=i.masterPlaylistLoader_.media();"playlist-unchanged"!==u.lastExcludeReason_&&(i.stuckAtPlaylistEnd_(u)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck")))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},u.handleUpdatedMediaPlaylist=function handleUpdatedMediaPlaylist(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},u.triggerPresenceUsage_=function triggerPresenceUsage_(i,u){var l=i.mediaGroups||{},c=!0,h=Object.keys(l.AUDIO);for(var p in l.AUDIO)for(var m in l.AUDIO[p]){l.AUDIO[p][m].uri||(c=!1)}c&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(l.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),du.Playlist.isAes(u)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),h.length&&Object.keys(l.AUDIO[h[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},u.shouldSwitchToMedia_=function shouldSwitchToMedia_(i){var u=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,l=this.tech_.currentTime(),c=this.bufferLowWaterLine(),h=this.bufferHighWaterLine();return function shouldSwitchToMedia(i){var u=i.currentPlaylist,l=i.buffered,c=i.currentTime,h=i.nextPlaylist,p=i.bufferLowWaterLine,m=i.bufferHighWaterLine,g=i.duration,v=i.experimentalBufferBasedABR,_=i.log;if(!h)return videojs.log.warn("We received no playlist to switch to. Please check your stream."),!1;var y="allowing switch "+(u&&u.id||"null")+" -> "+h.id;if(!u)return _(y+" as current playlist is not set"),!0;if(h.id===u.id)return!1;var b=Boolean(rs(l,c).length);if(!u.endList)return b||"number"!=typeof u.partTargetDuration?(_(y+" as current playlist is live"),!0):(_("not "+y+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var T=us(l,c),S=v?po.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:po.MAX_BUFFER_LOW_WATER_LINE;if(g<S)return _(y+" as duration < max low water line ("+g+" < "+S+")"),!0;var k=h.attributes.BANDWIDTH,E=u.attributes.BANDWIDTH;if(k<E&&(!v||T<m)){var C=y+" as next bandwidth < current bandwidth ("+k+" < "+E+")";return v&&(C+=" and forwardBuffer < bufferHighWaterLine ("+T+" < "+m+")"),_(C),!0}if((!v||k>E)&&T>=p){var w=y+" as forwardBuffer >= bufferLowWaterLine ("+T+" >= "+p+")";return v&&(w+=" and next bandwidth > current bandwidth ("+k+" > "+E+")"),_(w),!0}return _("not "+y+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:l,currentPlaylist:u,nextPlaylist:i,bufferLowWaterLine:c,bufferHighWaterLine:h,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},u.setupSegmentLoaderListeners_=function setupSegmentLoaderListeners_(){var i=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){i.checkABR_("bandwidthupdate"),i.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(function(){i.experimentalBufferBasedABR&&i.mainSegmentLoader_.load()})),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",(function(){i.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){i.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){i.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){i.logger_("main segment loader ended"),i.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(u){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var u=function updateCodecs(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var u=i.getCodecsOrExclude_();u&&i.sourceUpdater_.addOrChangeSourceBuffers(u)};this.mainSegmentLoader_.on("trackinfo",u),this.audioSegmentLoader_.on("trackinfo",u),this.mainSegmentLoader_.on("fmp4",(function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()}))},u.mediaSecondsLoaded_=function mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},u.load=function load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},u.smoothQualityChange_=function smoothQualityChange_(i){void 0===i&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},u.fastQualityChange_=function fastQualityChange_(i){var u=this;if(void 0===i&&(i=this.selectPlaylist()),i===this.masterPlaylistLoader_.media())return this.logger_("skipping fastQualityChange because new media is same as old"),void 0;this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){u.tech_.setCurrentTime(videojs.browser.IE_VERSION||videojs.browser.IS_EDGE?u.tech_.currentTime()+.04:u.tech_.currentTime())}))},u.play=function play(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0)?this.tech_.setCurrentTime(i.end(i.length-1)):void 0}},u.setupFirstPlay=function setupFirstPlay(){var i=this,u=this.masterPlaylistLoader_.media();if(!u||this.tech_.paused()||this.hasPlayed_)return!1;if(!u.endList){var l=this.seekable();if(!l.length)return!1;if(videojs.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){i.trigger("firstplay"),i.tech_.setCurrentTime(l.end(0)),i.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(l.end(0))}return this.hasPlayed_=!0,this.load(),!0},u.handleSourceOpen_=function handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();void 0!==i&&"function"==typeof i.then&&i.then(null,(function(i){}))}this.trigger("sourceopen")},u.handleSourceEnded_=function handleSourceEnded_(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(i&&i.length){var u=this.duration();i[i.length-1].endTime=isNaN(u)||Math.abs(u)===1/0?Number.MAX_VALUE:u}}},u.handleDurationChange_=function handleDurationChange_(){this.tech_.trigger("durationchange")},u.onEndOfStream=function onEndOfStream(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var u=this.mainSegmentLoader_.getCurrentMediaInfo_();i=!u||u.hasVideo?i&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}i&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},u.stuckAtPlaylistEnd_=function stuckAtPlaylistEnd_(i){if(!this.seekable().length)return!1;var u=this.syncController_.getExpiredTime(i,this.duration());if(null===u)return!1;var l=du.Playlist.playlistEnd(i,u),c=this.tech_.currentTime(),h=this.tech_.buffered();if(!h.length)return l-c<=es;var p=h.end(h.length-1);return p-c<=es&&l-p<=es},u.blacklistCurrentPlaylist=function blacklistCurrentPlaylist(i,u){void 0===i&&(i={});var l=i.playlist||this.masterPlaylistLoader_.media();if(u=u||i.blacklistDuration||this.blacklistDuration,!l)return this.error=i,"open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"),void 0;l.playlistErrors_++;var c,h=this.masterPlaylistLoader_.master.playlists,p=h.filter(Ts),m=1===p.length&&p[0]===l;if(1===h.length&&u!==1/0)return videojs.log.warn("Problem encountered with playlist "+l.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(m);if(m){var g=!1;h.forEach((function(i){if(i!==l){var u=i.excludeUntil;void 0!==u&&u!==1/0&&(g=!0,delete i.excludeUntil)}})),g&&(videojs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}c=l.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*u,l.excludeUntil=c,i.reason&&(l.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var v=this.selectPlaylist();if(!v)return this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error"),void 0;(i.internal?this.logger_:videojs.log.warn)((i.internal?"Internal problem":"Problem")+" encountered with playlist "+l.id+"."+(i.message?" "+i.message:"")+" Switching to playlist "+v.id+"."),v.attributes.AUDIO!==l.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),v.attributes.SUBTITLES!==l.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var _=v.targetDuration/2*1e3||5e3,y="number"==typeof v.lastRequest&&Date.now()-v.lastRequest<=_;return this.switchMedia_(v,"exclude",m||y)},u.pauseLoading=function pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},u.delegateLoaders_=function delegateLoaders_(i,u){var l=this,c=[],h="all"===i;(h||"main"===i)&&c.push(this.masterPlaylistLoader_);var p=[];(h||"audio"===i)&&p.push("AUDIO"),(h||"subtitle"===i)&&(p.push("CLOSED-CAPTIONS"),p.push("SUBTITLES")),p.forEach((function(i){var u=l.mediaTypes_[i]&&l.mediaTypes_[i].activePlaylistLoader;u&&c.push(u)})),["main","audio","subtitle"].forEach((function(u){var h=l[u+"SegmentLoader_"];!h||i!==u&&"all"!==i||c.push(h)})),c.forEach((function(i){return u.forEach((function(u){"function"==typeof i[u]&&i[u]()}))}))},u.setCurrentTime=function setCurrentTime(i){var u=rs(this.tech_.buffered(),i);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?u&&u.length?i:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load(),void 0):0},u.duration=function duration(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:du.Playlist.duration(i):1/0:0},u.seekable=function seekable(){return this.seekable_},u.onSyncInfoUpdate_=function onSyncInfoUpdate_(){var i;if(this.masterPlaylistLoader_){var u=this.masterPlaylistLoader_.media();if(u){var l=this.syncController_.getExpiredTime(u,this.duration());if(null!==l){var c=this.masterPlaylistLoader_.master,h=du.Playlist.seekable(u,l,du.Playlist.liveEdgeDelay(c,u));if(0!==h.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(u=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(l=this.syncController_.getExpiredTime(u,this.duration())))return;if(0===(i=du.Playlist.seekable(u,l,du.Playlist.liveEdgeDelay(c,u))).length)return}var p,m;this.seekable_&&this.seekable_.length&&(p=this.seekable_.end(0),m=this.seekable_.start(0)),this.seekable_=i?i.start(0)>h.end(0)||h.start(0)>i.end(0)?h:videojs.createTimeRanges([[i.start(0)>h.start(0)?i.start(0):h.start(0),i.end(0)<h.end(0)?i.end(0):h.end(0)]]):h,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===p&&this.seekable_.start(0)===m||(this.logger_("seekable updated ["+as(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},u.updateDuration=function updateDuration(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,i),this.mediaSource.addEventListener("sourceopen",this.updateDuration_),void 0;if(i){var u=this.seekable();if(!u.length)return;return(isNaN(this.mediaSource.duration)||this.mediaSource.duration<u.end(u.length-1))&&this.sourceUpdater_.setDuration(u.end(u.length-1)),void 0}var l=this.tech_.buffered(),c=du.Playlist.duration(this.masterPlaylistLoader_.media());l.length>0&&(c=Math.max(c,l.end(l.length-1))),this.mediaSource.duration!==c&&this.sourceUpdater_.setDuration(c)},u.dispose=function dispose(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(u){var l=i.mediaTypes_[u].groups;for(var c in l)l[c].forEach((function(i){i.playlistLoader&&i.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},u.master=function master(){return this.masterPlaylistLoader_.master},u.media=function media(){return this.masterPlaylistLoader_.media()||this.initialMedia_},u.areMediaTypesKnown_=function areMediaTypesKnown_(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,u=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),l=!i||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!u||!l)},u.getCodecsOrExclude_=function getCodecsOrExclude_(){var i=this,u={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},l=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();u.video=u.main;var c=zo(this.master(),l),h={},p=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(u.main.hasVideo&&(h.video=c.video||u.main.videoCodec||"avc1.4d400d"),u.main.isMuxed&&(h.video+=","+(c.audio||u.main.audioCodec||ie)),(u.main.hasAudio&&!u.main.isMuxed||u.audio.hasAudio||p)&&(h.audio=c.audio||u.main.audioCodec||u.audio.audioCodec||ie,u.audio.isFmp4=u.main.hasAudio&&!u.main.isMuxed?u.main.isFmp4:u.audio.isFmp4),!h.audio&&!h.video)return this.blacklistCurrentPlaylist({playlist:l,message:"Could not determine codecs for playlist.",blacklistDuration:1/0}),void 0;var m,g={};if(["video","audio"].forEach((function(i){if(h.hasOwnProperty(i)&&!function supportFunction(i,u){return i?ee(u):te(u)}(u[i].isFmp4,h[i])){var l=u[i].isFmp4?"browser":"muxer";g[l]=g[l]||[],g[l].push(h[i]),"audio"===i&&(m=l)}})),p&&m&&l.attributes.AUDIO){var v=l.attributes.AUDIO;this.master().playlists.forEach((function(i){(i.attributes&&i.attributes.AUDIO)===v&&i!==l&&(i.excludeUntil=1/0)})),this.logger_("excluding audio group "+v+" as "+m+' does not support codec(s): "'+h.audio+'"')}if(Object.keys(g).length){var _=Object.keys(g).reduce((function(i,u){return i&&(i+=", "),i+=u+' does not support codec(s): "'+g[u].join(",")+'"'}),"")+".";return this.blacklistCurrentPlaylist({playlist:l,internal:!0,message:_,blacklistDuration:1/0}),void 0}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var y=[];if(["video","audio"].forEach((function(u){var l=(Y(i.sourceUpdater_.codecs[u]||"")[0]||{}).type,c=(Y(h[u]||"")[0]||{}).type;l&&c&&l.toLowerCase()!==c.toLowerCase()&&y.push('"'+i.sourceUpdater_.codecs[u]+'" -> "'+h[u]+'"')})),y.length)return this.blacklistCurrentPlaylist({playlist:l,message:"Codec switching not supported: "+y.join(", ")+".",blacklistDuration:1/0,internal:!0}),void 0}return h},u.tryToCreateSourceBuffers_=function tryToCreateSourceBuffers_(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var u=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(u)}}},u.excludeUnsupportedVariants_=function excludeUnsupportedVariants_(){var i=this,u=this.master().playlists,l=[];Object.keys(u).forEach((function(c){var h=u[c];if(-1===l.indexOf(h.id)){l.push(h.id);var p=zo(i.master,h),m=[];!p.audio||te(p.audio)||ee(p.audio)||m.push("audio codec "+p.audio),!p.video||te(p.video)||ee(p.video)||m.push("video codec "+p.video),p.text&&"stpp.ttml.im1t"===p.text&&m.push("text codec "+p.text),m.length&&(h.excludeUntil=1/0,i.logger_("excluding "+h.id+" for unsupported: "+m.join(", ")))}}))},u.excludeIncompatibleVariants_=function excludeIncompatibleVariants_(i){var u=this,l=[],c=this.master().playlists,h=Wo(Y(i)),p=Go(h),m=h.video&&Y(h.video)[0]||null,g=h.audio&&Y(h.audio)[0]||null;Object.keys(c).forEach((function(i){var h=c[i];if(-1===l.indexOf(h.id)&&h.excludeUntil!==1/0){l.push(h.id);var v=[],_=zo(u.masterPlaylistLoader_.master,h),y=Go(_);if(_.audio||_.video){if(y!==p&&v.push('codec count "'+y+'" !== "'+p+'"'),!u.sourceUpdater_.canChangeType()){var b=_.video&&Y(_.video)[0]||null,T=_.audio&&Y(_.audio)[0]||null;b&&m&&b.type.toLowerCase()!==m.type.toLowerCase()&&v.push('video codec "'+b.type+'" !== "'+m.type+'"'),T&&g&&T.type.toLowerCase()!==g.type.toLowerCase()&&v.push('audio codec "'+T.type+'" !== "'+g.type+'"')}v.length&&(h.excludeUntil=1/0,u.logger_("blacklisting "+h.id+": "+v.join(" && ")))}}}))},u.updateAdCues_=function updateAdCues_(i){var u=0,l=this.seekable();l.length&&(u=l.start(0)),function updateAdCues(i,u,l){if(void 0===l&&(l=0),i.segments)for(var c,h=l,p=0;p<i.segments.length;p++){var g=i.segments[p];if(c||(c=Vu(u,h+g.duration/2)),c){if("cueIn"in g){c.endTime=h,c.adEndTime=h,h+=g.duration,c=null;continue}if(h<c.endTime){h+=g.duration;continue}c.endTime+=g.duration}else if("cueOut"in g&&((c=new(m().VTTCue)(h,h+g.duration,g.cueOut)).adStartTime=h,c.adEndTime=h+parseFloat(g.cueOut),u.addCue(c)),"cueOutCont"in g){var v=g.cueOutCont.split("/").map(parseFloat),_=v[0],y=v[1];(c=new(m().VTTCue)(h,h+g.duration,"")).adStartTime=h-_,c.adEndTime=c.adStartTime+y,u.addCue(c)}h+=g.duration}}(i,this.cueTagsTrack_,u)},u.goalBufferLength=function goalBufferLength(){var i=this.tech_.currentTime(),u=po.GOAL_BUFFER_LENGTH,l=po.GOAL_BUFFER_LENGTH_RATE,c=Math.max(u,po.MAX_GOAL_BUFFER_LENGTH);return Math.min(u+i*l,c)},u.bufferLowWaterLine=function bufferLowWaterLine(){var i=this.tech_.currentTime(),u=po.BUFFER_LOW_WATER_LINE,l=po.BUFFER_LOW_WATER_LINE_RATE,c=Math.max(u,po.MAX_BUFFER_LOW_WATER_LINE),h=Math.max(u,po.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(u+i*l,this.experimentalBufferBasedABR?h:c)},u.bufferHighWaterLine=function bufferHighWaterLine(){return po.BUFFER_HIGH_WATER_LINE},MasterPlaylistController}(videojs.EventTarget),Ju=function Representation(i,u,l){var c=i.masterPlaylistController_,h=c[(i.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(c);if(u.attributes){var p=u.attributes.RESOLUTION;this.width=p&&p.width,this.height=p&&p.height,this.bandwidth=u.attributes.BANDWIDTH,this.frameRate=u.attributes["FRAME-RATE"]}this.codecs=zo(c.master(),u),this.playlist=u,this.id=l,this.enabled=function enableFunction(i,u,l){return function(c){var h=i.master.playlists[u],p=bs(h),m=Ts(h);return void 0===c?m:(c?delete h.disabled:h.disabled=!0,c===m||p||(l(),i.trigger(c?"renditionenabled":"renditiondisabled")),c)}}(i.playlists,u.id,h)},Zu=["seeking","seeked","pause","playing","error"],tl=function(){function PlaybackWatcher(i){var u=this;this.masterPlaylistController_=i.masterPlaylistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ja("PlaybackWatcher"),this.logger_("initialize");var l=function playHandler(){return u.monitorCurrentTime_()},c=function canPlayHandler(){return u.monitorCurrentTime_()},h=function waitingHandler(){return u.techWaiting_()},p=function cancelTimerHandler(){return u.cancelTimer_()},g=this.masterPlaylistController_,v=["main","subtitle","audio"],_={};v.forEach((function(i){_[i]={reset:function reset(){return u.resetSegmentDownloads_(i)},updateend:function updateend(){return u.checkSegmentDownloads_(i)}},g[i+"SegmentLoader_"].on("appendsdone",_[i].updateend),g[i+"SegmentLoader_"].on("playlistupdate",_[i].reset),u.tech_.on(["seeked","seeking"],_[i].reset)}));var y=function setSeekingHandlers(i){["main","audio"].forEach((function(l){g[l+"SegmentLoader_"][i]("appended",u.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){u.fixesBadSeeks_()&&(u.consecutiveUpdates=0,u.lastRecordedTime=u.tech_.currentTime(),y("off"))},this.clearSeekingAppendCheck_=function(){return y("off")},this.watchForBadSeeking_=function(){u.clearSeekingAppendCheck_(),y("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",h),this.tech_.on(Zu,p),this.tech_.on("canplay",c),this.tech_.one("play",l),this.dispose=function(){u.clearSeekingAppendCheck_(),u.logger_("dispose"),u.tech_.off("waiting",h),u.tech_.off(Zu,p),u.tech_.off("canplay",c),u.tech_.off("play",l),u.tech_.off("seeking",u.watchForBadSeeking_),u.tech_.off("seeked",u.clearSeekingAppendCheck_),v.forEach((function(i){g[i+"SegmentLoader_"].off("appendsdone",_[i].updateend),g[i+"SegmentLoader_"].off("playlistupdate",_[i].reset),u.tech_.off(["seeked","seeking"],_[i].reset)})),u.checkCurrentTimeTimeout_&&m().clearTimeout(u.checkCurrentTimeTimeout_),u.cancelTimer_()}}var i=PlaybackWatcher.prototype;return i.monitorCurrentTime_=function monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&m().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=m().setTimeout(this.monitorCurrentTime_.bind(this),250)},i.resetSegmentDownloads_=function resetSegmentDownloads_(i){var u=this.masterPlaylistController_[i+"SegmentLoader_"];this[i+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+i+" loader"),this[i+"StalledDownloads_"]=0,this[i+"Buffered_"]=u.buffered_()},i.checkSegmentDownloads_=function checkSegmentDownloads_(i){var u=this.masterPlaylistController_,l=u[i+"SegmentLoader_"],c=l.buffered_(),h=function isRangeDifferent(i,u){if(i===u)return!1;if(!i&&u||!u&&i)return!0;if(i.length!==u.length)return!0;for(var l=0;l<i.length;l++)if(i.start(l)!==u.start(l)||i.end(l)!==u.end(l))return!0;return!1}(this[i+"Buffered_"],c);if(this[i+"Buffered_"]=c,h)return this.resetSegmentDownloads_(i),void 0;this[i+"StalledDownloads_"]++,this.logger_("found #"+this[i+"StalledDownloads_"]+" "+i+" appends that did not increase buffer (possible stalled download)",{playlistId:l.playlist_&&l.playlist_.id,buffered:ss(c)}),this[i+"StalledDownloads_"]<10||(this.logger_(i+" loader stalled download exclusion"),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:"vhs-"+i+"-download-exclusion"}),"subtitle"!==i&&u.blacklistCurrentPlaylist({message:"Excessive "+i+" segment downloading detected."},1/0))},i.checkCurrentTime_=function checkCurrentTime_(){if(!this.tech_.paused()&&!this.tech_.seeking()){var i=this.tech_.currentTime(),u=this.tech_.buffered();if(this.lastRecordedTime===i&&(!u.length||i+es>=u.end(u.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&i===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):i===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=i)}},i.cancelTimer_=function cancelTimer_(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},i.fixesBadSeeks_=function fixesBadSeeks_(){if(!this.tech_.seeking())return!1;var i,u=this.seekable(),l=this.tech_.currentTime();this.afterSeekableWindow_(u,l,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=u.end(u.length-1));if(this.beforeSeekableWindow_(u,l)){var c=u.start(0);i=c+(c===u.end(0)?0:es)}if(void 0!==i)return this.logger_("Trying to seek outside of seekable at time "+l+" with seekable range "+as(u)+". Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0;for(var h=this.masterPlaylistController_.sourceUpdater_,p=this.tech_.buffered(),m=h.audioBuffer?h.audioBuffered():null,g=h.videoBuffer?h.videoBuffered():null,v=this.media(),_=v.partTargetDuration?v.partTargetDuration:2*(v.targetDuration-Za),y=[m,g],b=0;b<y.length;b++){if(y[b])if(us(y[b],l)<_)return!1}var T=ns(p,l);return 0!==T.length&&(i=T.start(0)+es,this.logger_("Buffered region starts ("+T.start(0)+")  just beyond seek point ("+l+"). Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0)},i.waiting_=function waiting_(){if(!this.techWaiting_()){var i=this.tech_.currentTime(),u=this.tech_.buffered(),l=rs(u,i);return l.length&&i+3<=l.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(i),this.logger_("Stopped at "+i+" while inside a buffered region ["+l.start(0)+" -> "+l.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}),void 0):void 0}},i.techWaiting_=function techWaiting_(){var i=this.seekable(),u=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(i,u)){var l=i.end(i.length-1);return this.logger_("Fell out of live window at time "+u+". Seeking to live point (seekable end) "+l),this.cancelTimer_(),this.tech_.setCurrentTime(l),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var c=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,h=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:c.audioBuffered(),videoBuffered:c.videoBuffered(),currentTime:u}))return this.cancelTimer_(),this.tech_.setCurrentTime(u),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var p=ns(h,u);if(p.length>0){var m=p.start(0)-u;return this.logger_("Stopped at "+u+", setting timer for "+m+", seeking to "+p.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*m,u),!0}return!1},i.afterSeekableWindow_=function afterSeekableWindow_(i,u,l,c){if(void 0===c&&(c=!1),!i.length)return!1;var h=i.end(i.length-1)+es;return!l.endList&&c&&(h=i.end(i.length-1)+3*l.targetDuration),u>h},i.beforeSeekableWindow_=function beforeSeekableWindow_(i,u){return!!(i.length&&i.start(0)>0&&u<i.start(0)-this.liveRangeSafeTimeDelta)},i.videoUnderflow_=function videoUnderflow_(i){var u=i.videoBuffered,l=i.audioBuffered,c=i.currentTime;if(u){var h;if(u.length&&l.length){var p=rs(u,c-3),m=rs(u,c),g=rs(l,c);g.length&&!m.length&&p.length&&(h={start:p.end(0),end:g.end(0)})}else{ns(u,c).length||(h=this.gapFromVideoUnderflow_(u,c))}return!!h&&(this.logger_("Encountered a gap in video from "+h.start+" to "+h.end+". Seeking to current time "+c),!0)}},i.skipTheGap_=function skipTheGap_(i){var u=this.tech_.buffered(),l=this.tech_.currentTime(),c=ns(u,l);this.cancelTimer_(),0!==c.length&&l===i&&(this.logger_("skipTheGap_:","currentTime:",l,"scheduled currentTime:",i,"nextRange start:",c.start(0)),this.tech_.setCurrentTime(c.start(0)+Za),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},i.gapFromVideoUnderflow_=function gapFromVideoUnderflow_(i,u){for(var l=function findGaps(i){if(i.length<2)return videojs.createTimeRanges();for(var u=[],l=1;l<i.length;l++){var c=i.end(l-1),h=i.start(l);u.push([c,h])}return videojs.createTimeRanges(u)}(i),c=0;c<l.length;c++){var h=l.start(c),p=l.end(c);if(u-h<4&&u-h>2)return{start:h,end:p}}return null},PlaybackWatcher}(),il={errorInterval:30,getSource:function getSource(i){return i(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},rl=function initPlugin(i,u){var l=0,c=0,h=videojs.mergeOptions(il,u);i.ready((function(){i.trigger({type:"usage",name:"vhs-error-reload-initialized"}),i.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var p=function loadedMetadataHandler(){c&&i.currentTime(c)},m=function setSource(u){null!=u&&(c=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",p),i.src(u),i.trigger({type:"usage",name:"vhs-error-reload"}),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())},g=function errorHandler(){return Date.now()-l<1e3*h.errorInterval?(i.trigger({type:"usage",name:"vhs-error-reload-canceled"}),i.trigger({type:"usage",name:"hls-error-reload-canceled"}),void 0):h.getSource&&"function"==typeof h.getSource?(l=Date.now(),h.getSource.call(i,m)):(videojs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!"),void 0)},v=function cleanupEvents(){i.off("loadedmetadata",p),i.off("error",g),i.off("dispose",cleanupEvents)};i.on("error",g),i.on("dispose",v),i.reloadSourceOnError=function reinitPlugin(u){v(),initPlugin(i,u)}},nl="2.16.3",al={PlaylistLoader:js,Playlist:Ps,utils:eo,STANDARD_PLAYLIST_SELECTOR:Zo,INITIAL_PLAYLIST_SELECTOR:function lowestBitrateCompatibleVariantSelector(){var i=this,u=this.playlists.master.playlists.filter(Ps.isEnabled);return Yo(u,(function(i,u){return $o(i,u)})),u.filter((function(u){return!!zo(i.playlists.master,u).video}))[0]||null},lastBandwidthSelector:Zo,movingAverageBandwidthSelector:function movingAverageBandwidthSelector(i){var u=-1,l=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var c=this.useDevicePixelRatio&&m().devicePixelRatio||1;return u<0&&(u=this.systemBandwidth,l=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==l&&(u=i*this.systemBandwidth+(1-i)*u,l=this.systemBandwidth),Jo(this.playlists.master,u,parseInt(Qo(this.tech_.el(),"width"),10)*c,parseInt(Qo(this.tech_.el(),"height"),10)*c,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:$o,comparePlaylistResolution:function comparePlaylistResolution(i,u){var l,c;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(l=i.attributes.RESOLUTION.width),l=l||m().Number.MAX_VALUE,u.attributes.RESOLUTION&&u.attributes.RESOLUTION.width&&(c=u.attributes.RESOLUTION.width),l===(c=c||m().Number.MAX_VALUE)&&i.attributes.BANDWIDTH&&u.attributes.BANDWIDTH?i.attributes.BANDWIDTH-u.attributes.BANDWIDTH:l-c},xhr:Gs()};Object.keys(po).forEach((function(i){Object.defineProperty(al,i,{get:function get(){return videojs.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),po[i]},set:function set(u){if(videojs.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),"number"!=typeof u||u<0)return videojs.log.warn("value of Vhs."+i+" must be greater than or equal to 0"),void 0;po[i]=u}})}));var sl="videojs-vhs",ol=function handleVhsMediaChange(i,u){for(var l=u.media(),c=-1,h=0;h<i.length;h++)if(i[h].id===l.id){c=h;break}i.selectedIndex_=c,i.trigger({selectedIndex:c,type:"change"})};al.canPlaySource=function(){return videojs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ul=function waitForKeySessionCreation(i){var u=i.player,l=i.sourceKeySystems,c=i.audioMedia,h=i.mainPlaylists;if(!u.eme.initializeMediaKeys)return Promise.resolve();var p=function getAllPsshKeySystemsOptions(i,u){return i.reduce((function(i,l){if(!l.contentProtection)return i;var c=u.reduce((function(i,u){var c=l.contentProtection[u];return c&&c.pssh&&(i[u]={pssh:c.pssh}),i}),{});return Object.keys(c).length&&i.push(c),i}),[])}(c?h.concat([c]):h,Object.keys(l)),m=[],g=[];return p.forEach((function(i){g.push(new Promise((function(i,l){u.tech_.one("keysessioncreated",i)}))),m.push(new Promise((function(l,c){u.eme.initializeMediaKeys({keySystems:i},(function(i){if(i)return c(i),void 0;l()}))})))})),Promise.race([Promise.all(m),Promise.race(g)])},ll=function setupEmeOptions(i){var u=i.player,l=function emeKeySystems(i,u,l){if(!i)return i;var c={};u&&u.attributes&&u.attributes.CODECS&&(c=Wo(Y(u.attributes.CODECS))),l&&l.attributes&&l.attributes.CODECS&&(c.audio=l.attributes.CODECS);var h=Z(c.video),p=Z(c.audio),m={};for(var g in i)m[g]={},p&&(m[g].audioContentType=p),h&&(m[g].videoContentType=h),u.contentProtection&&u.contentProtection[g]&&u.contentProtection[g].pssh&&(m[g].pssh=u.contentProtection[g].pssh),"string"==typeof i[g]&&(m[g].url=i[g]);return videojs.mergeOptions(i,m)}(i.sourceKeySystems,i.media,i.audioMedia);return!!l&&(u.currentSource().keySystems=l,!(l&&!u.eme)||(videojs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},dl=function getVhsLocalStorage(){if(!m().localStorage)return null;var i=m().localStorage.getItem(sl);if(!i)return null;try{return JSON.parse(i)}catch(i){return null}};al.supportsNativeHls=function(){if(!v()||!v().createElement)return!1;var i=v().createElement("video");if(!videojs.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(u){return/maybe|probably/i.test(i.canPlayType(u))}))}(),al.supportsNativeDash=!!(v()&&v().createElement&&videojs.getTech("Html5").isSupported())&&/maybe|probably/i.test(v().createElement("video").canPlayType("application/dash+xml")),al.supportsTypeNatively=function(i){return"hls"===i?al.supportsNativeHls:"dash"===i&&al.supportsNativeDash},al.isSupported=function(){return videojs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var cl=function(i){function VhsHandler(u,l,c){var h;if(h=i.call(this,l,videojs.mergeOptions(c.hls,c.vhs))||this,c.hls&&Object.keys(c.hls).length&&videojs.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof c.initialBandwidth&&(h.options_.bandwidth=c.initialBandwidth),h.logger_=Ja("VhsHandler"),l.options_&&l.options_.playerId){var p=videojs(l.options_.playerId);p.hasOwnProperty("hls")||Object.defineProperty(p,"hls",{get:function get(){return videojs.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),l.trigger({type:"usage",name:"hls-player-access"}),_assertThisInitialized(h)},configurable:!0}),p.hasOwnProperty("vhs")||Object.defineProperty(p,"vhs",{get:function get(){return videojs.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),l.trigger({type:"usage",name:"vhs-player-access"}),_assertThisInitialized(h)},configurable:!0}),p.hasOwnProperty("dash")||Object.defineProperty(p,"dash",{get:function get(){return videojs.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),_assertThisInitialized(h)},configurable:!0}),h.player_=p}if(h.tech_=l,h.source_=u,h.stats={},h.ignoreNextSeekingEvent_=!1,h.setOptions_(),h.options_.overrideNative&&l.overrideNativeAudioTracks&&l.overrideNativeVideoTracks)l.overrideNativeAudioTracks(!0),l.overrideNativeVideoTracks(!0);else if(h.options_.overrideNative&&(l.featuresNativeVideoTracks||l.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(v(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(i){var u=v().fullscreenElement||v().webkitFullscreenElement||v().mozFullScreenElement||v().msFullscreenElement;u&&u.contains(h.tech_.el())?h.masterPlaylistController_.fastQualityChange_():h.masterPlaylistController_.checkABR_()})),h.on(h.tech_,"seeking",(function(){if(this.ignoreNextSeekingEvent_)return this.ignoreNextSeekingEvent_=!1,void 0;this.setCurrentTime(this.tech_.currentTime())})),h.on(h.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),h.on(h.tech_,"play",h.play),h}_inheritsLoose(VhsHandler,i);var u=VhsHandler.prototype;return u.setOptions_=function setOptions_(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var u=dl();u&&u.bandwidth&&(this.options_.bandwidth=u.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),u&&u.throughput&&(this.options_.throughput=u.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=po.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===po.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(u){void 0!==i.source_[u]&&(i.options_[u]=i.source_[u])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},u.src=function src(i,u){var l=this;if(i){this.setOptions_(),this.options_.src=function expandDataUri(i){return 0===i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=al,this.options_.sourceType=ae(u),this.options_.seekTo=function(i){l.tech_.setCurrentTime(i)},this.options_.smoothQualityChange&&videojs.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new $u(this.options_);var c=videojs.mergeOptions({liveRangeSafeTimeDelta:es},this.options_,{seekable:function seekable(){return l.seekable()},media:function media(){return l.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new tl(c),this.masterPlaylistController_.on("error",(function(){var i=videojs.players[l.tech_.options_.playerId],u=l.masterPlaylistController_.error;"object"!=typeof u||u.code?"string"==typeof u&&(u={message:u,code:3}):u.code=3,i.error(u)}));var h=this.options_.experimentalBufferBasedABR?al.movingAverageBandwidthSelector(.55):al.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):h.bind(this),this.masterPlaylistController_.selectInitialPlaylist=al.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function get(){return this.masterPlaylistController_.selectPlaylist},set:function set(i){this.masterPlaylistController_.selectPlaylist=i.bind(this)}},throughput:{get:function get(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function set(i){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=i,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function get(){var i=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,u=m().navigator.connection||m().navigator.mozConnection||m().navigator.webkitConnection,l=1e7;if(this.options_.useNetworkInformationApi&&u){var c=1e3*u.downlink*1e3;i=c>=l&&i>=l?Math.max(i,c):c}return i},set:function set(i){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=i,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function get(){var i;return i=this.throughput>0?1/this.throughput:0,Math.floor(1/(1/(this.bandwidth||1)+i))},set:function set(){videojs.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function get(){return l.bandwidth||0},enumerable:!0},mediaRequests:{get:function get(){return l.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function get(){return l.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function get(){return l.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function get(){return l.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function get(){return l.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function get(){return l.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function get(){return l.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function get(){return l.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function get(){return l.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function get(){return l.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function get(){return l.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function get(){return l.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function get(){return ss(l.tech_.buffered())},enumerable:!0},currentTime:{get:function get(){return l.tech_.currentTime()},enumerable:!0},currentSource:{get:function get(){return l.tech_.currentSource_},enumerable:!0},currentTech:{get:function get(){return l.tech_.name_},enumerable:!0},duration:{get:function get(){return l.tech_.duration()},enumerable:!0},master:{get:function get(){return l.playlists.master},enumerable:!0},playerDimensions:{get:function get(){return l.tech_.currentDimensions()},enumerable:!0},seekable:{get:function get(){return ss(l.tech_.seekable())},enumerable:!0},timestamp:{get:function get(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function get(){return l.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){l.options_.useBandwidthFromLocalStorage&&!function updateVhsLocalStorage(i){if(!m().localStorage)return!1;var u=dl();u=u?videojs.mergeOptions(u,i):i;try{m().localStorage.setItem(sl,JSON.stringify(u))}catch(i){return!1}return u}({bandwidth:l.bandwidth,throughput:Math.round(l.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){!function renditionSelectionMixin(i){i.representations=function(){var u=i.masterPlaylistController_.master(),l=ws(u)?i.masterPlaylistController_.getAudioTrackPlaylists_():u.playlists;return l?l.filter((function(i){return!bs(i)})).map((function(u,l){return new Ju(i,u,u.id)})):[]}}(l)})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){l.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=m().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},u.createKeySessions_=function createKeySessions_(){var i=this,u=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),ul({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:u&&u.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(u){i.logger_("error while creating EME key session",u),i.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},u.handleWaitingForKey_=function handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},u.setupEme_=function setupEme_(){var i=this,u=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,l=ll({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:u&&u.media()});if(this.player_.tech_.on("keystatuschange",(function(u){if("output-restricted"===u.status){var l=i.masterPlaylistController_.master();if(l&&l.playlists){var c,h=[];if(l.playlists.forEach((function(i){i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height>=720&&(!i.excludeUntil||i.excludeUntil<1/0)&&(i.excludeUntil=1/0,h.push(i))})),h.length)(c=videojs.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(h)),i.masterPlaylistController_.fastQualityChange_()}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11===videojs.browser.IE_VERSION||!l)return this.masterPlaylistController_.sourceUpdater_.initializedEme(),void 0;this.createKeySessions_()},u.setupQualityLevels_=function setupQualityLevels_(){var i=this,u=videojs.players[this.tech_.options_.playerId];u&&u.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=u.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){!function handleVhsLoadedMetadata(i,u){u.representations().forEach((function(u){i.addQualityLevel(u)})),ol(i,u.playlists)}(i.qualityLevels_,i)})),this.playlists.on("mediachange",(function(){ol(i.qualityLevels_,i.playlists)})))},VhsHandler.version=function version$5(){return{"@videojs/http-streaming":nl,"mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},u.version=function version(){return this.constructor.version()},u.canChangeType=function canChangeType(){return xu.canChangeType()},u.play=function play(){this.masterPlaylistController_.play()},u.setCurrentTime=function setCurrentTime(i){this.masterPlaylistController_.setCurrentTime(i)},u.duration=function duration(){return this.masterPlaylistController_.duration()},u.seekable=function seekable(){return this.masterPlaylistController_.seekable()},u.dispose=function dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&m().URL.revokeObjectURL&&(m().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),i.prototype.dispose.call(this)},u.convertToProgramTime=function convertToProgramTime(i,u){return to({playlist:this.masterPlaylistController_.media(),time:i,callback:u})},u.seekToProgramTime=function seekToProgramTime$1(i,u,l,c){return void 0===l&&(l=!0),void 0===c&&(c=2),io({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:c,pauseAfterSeek:l,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:u})},VhsHandler}(videojs.getComponent("Component")),hl={name:"videojs-http-streaming",VERSION:nl,canHandleSource:function canHandleSource(i,u){void 0===u&&(u={});var l=videojs.mergeOptions(videojs.options,u);return hl.canPlayType(i.type,l)},handleSource:function handleSource(i,u,l){void 0===l&&(l={});var c=videojs.mergeOptions(videojs.options,l);return u.vhs=new cl(i,u,c),videojs.hasOwnProperty("hls")||Object.defineProperty(u,"hls",{get:function get(){return videojs.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),u.vhs},configurable:!0}),u.vhs.xhr=Gs(),u.vhs.src(i.src,i.type),u.vhs},canPlayType:function canPlayType(i,u){var l=ae(i);if(!l)return"";var c=hl.getOverrideNative(u);return!al.supportsTypeNatively(l)||c?"maybe":""},getOverrideNative:function getOverrideNative(i){void 0===i&&(i={});var u=i.vhs,l=i.hls,c=(void 0===u?{}:u).overrideNative,h=(void 0===l?{}:l).overrideNative;return void 0!==h&&h||(void 0===c?!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS):c)}};(function supportsNativeMediaSources(){return ee("avc1.4d400d,mp4a.40.2")}()&&videojs.getTech("Html5").registerSourceHandler(hl,0),videojs.VhsHandler=cl,Object.defineProperty(videojs,"HlsHandler",{get:function get(){return videojs.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),cl},configurable:!0}),videojs.VhsSourceHandler=hl,Object.defineProperty(videojs,"HlsSourceHandler",{get:function get(){return videojs.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),hl},configurable:!0}),videojs.Vhs=al,Object.defineProperty(videojs,"Hls",{get:function get(){return videojs.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),al},configurable:!0}),videojs.use||(videojs.registerComponent("Hls",al),videojs.registerComponent("Vhs",al)),videojs.options.vhs=videojs.options.vhs||{},videojs.options.hls=videojs.options.hls||{},videojs.getPlugin&&videojs.getPlugin("reloadSourceOnError"))||(videojs.registerPlugin||videojs.plugin)("reloadSourceOnError",(function reloadSourceOnError(i){rl(this,i)}));const pl=videojs,fl=pl.getComponent("Tech");let ml=(()=>{class VideoJSOgvJS extends fl{constructor(i,u){var l,h;super(i,u),this.parentElement=null,this.placeholderElement=document.createElement("div"),this.el_.src=i.src||(null===(l=i.source)||void 0===l?void 0:l.src)||(null===(h=i.sources)||void 0===h||null===(h=h[0])||void 0===h?void 0:h.src)||this.el_.src,VideoJSOgvJS.setIfAvailable(this.el_,"autoplay",i.autoplay),VideoJSOgvJS.setIfAvailable(this.el_,"loop",i.loop),VideoJSOgvJS.setIfAvailable(this.el_,"poster",i.poster),VideoJSOgvJS.setIfAvailable(this.el_,"preload",i.preload),this.playerId=i.playerId,this.on("loadedmetadata",(()=>{if(c.CorePlatform.isIPhone()){const i=this.el_.getElementsByTagName("canvas")[0];i.style.removeProperty("width"),i.style.removeProperty("margin")}this.triggerReady()}))}static setIfAvailable(i,u,l){i.hasOwnProperty(u)&&(i[u]=l)}static isSupported(){return h.OGVCompat.supported("OGVPlayer")}static canPlayType(i){return-1!==i.indexOf("/ogg")||i.indexOf("/webm")?"maybe":""}static canPlaySource(i){return VideoJSOgvJS.canPlayType(i.type)}static canControlVolume(){if(c.CorePlatform.isIPhone()||c.CorePlatform.isIPad())return!1;return(new h.OGVPlayer).hasOwnProperty("volume")}static canMuteVolume(){return!0}static canControlPlaybackRate(){return!0}static supportsNativeTextTracks(){return!1}static supportsFullscreenResize(){return!0}static supportsProgressEvents(){return!0}static supportsTimeupdateEvents(){return!0}createEl(){const i=this.options_;if(i.base)h.OGVLoader.base=i.base;else if(!h.OGVLoader.base)throw new Error("Please specify the base for the ogv.js library");const u=new h.OGVPlayer(i);return u.className+=" vjs-tech",i.tag=u,u}play(){this.ended()&&this.el_.stop(),this.el_.play()}playbackRate(){return this.el_.playbackRate||1}setPlaybackRate(i){this.el_.hasOwnProperty("playbackRate")&&(this.el_.playbackRate=i)}played(){return this.el_.played}pause(){this.el_.pause()}paused(){return this.el_.paused}currentTime(){return this.el_.currentTime}setCurrentTime(i){try{this.el_.currentTime=i}catch(i){pl.log(i,"Media is not ready. (Video.JS)")}}duration(){return this.el_.duration&&this.el_.duration!==1/0?this.el_.duration:0}buffered(){return this.el_.buffered}volume(){return this.el_.hasOwnProperty("volume")?this.el_.volume:1}setVolume(i){c.CorePlatform.isIPhone()||c.CorePlatform.isIPad()||!this.el_.hasOwnProperty("volume")||(this.el_.volume=i)}muted(){return this.el_.muted}setMuted(i){this.el_.muted=!!i}defaultMuted(){return this.el_.defaultMuted||!1}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}videoWidth(){var i;return null!==(i=this.el_.videoWidth)&&void 0!==i?i:0}videoHeight(){var i;return null!==(i=this.el_.videoHeight)&&void 0!==i?i:0}src(i){if(void 0===i)return this.el_.src;this.el_.src=i}load(){this.el_.load()}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}poster(){return"poster"in this.el_?this.el_.poster:""}setPoster(i){this.el_.poster=i}preload(){return this.el_.preload||"none"}setPreload(i){this.el_.hasOwnProperty("preload")&&(this.el_.preload=i)}autoplay(){return this.el_.autoplay||!1}setAutoplay(i){this.el_.hasOwnProperty("autoplay")&&(this.el_.autoplay=!!i)}controls(){return this.el_.controls||!1}setControls(i){this.el_.hasOwnProperty("controls")&&(this.el_.controls=!!i)}loop(){return this.el_.loop||!1}setLoop(i){this.el_.hasOwnProperty("loop")&&(this.el_.loop=!!i)}seekable(){return this.el_.seekable}seeking(){return this.el_.seeking}ended(){return this.el_.ended}networkState(){return this.el_.networkState}readyState(){return this.el_.readyState}supportsFullScreen(){return!!this.playerId}error(){return this.el_.error}enterFullScreen(){var i;const u=pl.getPlayer(null!==(i=this.playerId)&&void 0!==i?i:"");if(!u)return;const l=u.el();this.parentElement=l.parentElement,this.parentElement&&(this.parentElement.replaceChild(this.placeholderElement,l),document.body.appendChild(l),l.classList.add("vjs-ios-moodleapp-fs"),u.isFullscreen(!0))}exitFullScreen(){var i;if(!this.parentElement)return;const u=pl.getPlayer(null!==(i=this.playerId)&&void 0!==i?i:"");if(!u)return;const l=u.el();this.parentElement.replaceChild(l,this.placeholderElement),l.classList.remove("vjs-ios-moodleapp-fs"),u.isFullscreen(!1)}}return VideoJSOgvJS.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],VideoJSOgvJS})();function initializeVideoJSOgvJS(){h.OGVLoader.base="assets/lib/ogv",pl.getComponent("Tech").registerTech("OgvJS",ml)}[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresFullscreenResize","supportsFullscreenResize"],["featuresProgressEvents","supportsProgressEvents"],["featuresTimeupdateEvents","supportsTimeupdateEvents"]].forEach((([i,u])=>{((i,u,l,c=!0)=>{const set=l=>{Object.defineProperty(i,u,{value:l,enumerable:!0,writable:!0})},h={configurable:!0,enumerable:!0,get(){const i=l();return set(i),i}};return c&&(h.set=set),Object.defineProperty(i,u,h)})(ml.prototype,i,(()=>ml[u]()),!0)}))},1452:(i,u,l)=>{"use strict";var c=l(12843);i.exports=function httpResponseHandler(i,u){return void 0===u&&(u=!1),function(l,h,p){if(l)return i(l),void 0;if(h.statusCode>=400&&h.statusCode<=599){var m=p;if(u)if(c.TextDecoder){var g=function getCharset(i){void 0===i&&(i="");return i.toLowerCase().split(";").reduce((function(i,u){var l=u.split("="),c=l[1];return"charset"===l[0].trim()?c.trim():i}),"utf-8")}(h.headers&&h.headers["content-type"]);try{m=new TextDecoder(g).decode(p)}catch(i){}}else m=String.fromCharCode.apply(null,new Uint8Array(p));return i({cause:m}),void 0}i(null,p)}}},17621:(i,u,l)=>{"use strict";var c=l(12843),h=l(94634),p=l(59819);createXHR.httpHandler=l(1452);var m=function parseHeaders(i){var u={};return i?(i.trim().split("\n").forEach((function(i){var l=i.indexOf(":"),c=i.slice(0,l).trim().toLowerCase(),h=i.slice(l+1).trim();void 0===u[c]?u[c]=h:Array.isArray(u[c])?u[c].push(h):u[c]=[u[c],h]})),u):u};function initParams(i,u,l){var c=i;return p(u)?(l=u,"string"==typeof i&&(c={uri:i})):c=h({},u,{uri:i}),c.callback=l,c}function createXHR(i,u,l){return _createXHR(u=initParams(i,u,l))}function _createXHR(i){if(void 0===i.callback)throw new Error("callback argument missing");var u=!1,l=function cbOnce(l,c,h){u||(u=!0,i.callback(l,c,h))};function getBody(){var i=void 0;if(i=p.response?p.response:p.responseText||function getXml(i){try{if("document"===i.responseType)return i.responseXML;if(""===i.responseType&&!(i.responseXML&&"parsererror"===i.responseXML.documentElement.nodeName))return i.responseXML}catch(i){}return null}(p),S)try{i=JSON.parse(i)}catch(i){}return i}function errorFunc(i){return clearTimeout(g),i instanceof Error||(i=new Error(""+(i||"Unknown XMLHttpRequest Error"))),i.statusCode=0,l(i,k)}function loadFunc(){if(!h){var u;clearTimeout(g);var c=k,y=null;return 0!==(u=i.useXDR&&void 0===p.status?200:1223===p.status?204:p.status)?(c={body:getBody(),statusCode:u,method:_,headers:{},url:v,rawRequest:p},p.getAllResponseHeaders&&(c.headers=m(p.getAllResponseHeaders()))):y=new Error("Internal XMLHttpRequest Error"),l(y,c,c.body)}}var c,h,p=i.xhr||null;p||(p=i.cors||i.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var g,v=p.url=i.uri||i.url,_=p.method=i.method||"GET",y=i.body||i.data,b=p.headers=i.headers||{},T=!!i.sync,S=!1,k={body:void 0,headers:{},statusCode:0,method:_,url:v,rawRequest:p};if("json"in i&&!1!==i.json&&(S=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==_&&"HEAD"!==_&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),y=JSON.stringify(!0===i.json?y:i.json))),p.onreadystatechange=function readystatechange(){4===p.readyState&&setTimeout(loadFunc,0)},p.onload=loadFunc,p.onerror=errorFunc,p.onprogress=function(){},p.onabort=function(){h=!0},p.ontimeout=errorFunc,p.open(_,v,!T,i.username,i.password),T||(p.withCredentials=!!i.withCredentials),!T&&i.timeout>0&&(g=setTimeout((function(){if(!h){h=!0,p.abort("timeout");var i=new Error("XMLHttpRequest timeout");i.code="ETIMEDOUT",errorFunc(i)}}),i.timeout)),p.setRequestHeader)for(c in b)b.hasOwnProperty(c)&&p.setRequestHeader(c,b[c]);else if(i.headers&&!function isEmpty(i){for(var u in i)if(i.hasOwnProperty(u))return!1;return!0}(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(p.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(p),p.send(y||null),p}i.exports=createXHR,i.exports.default=createXHR,createXHR.XMLHttpRequest=c.XMLHttpRequest||function noop(){},createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:c.XDomainRequest,function forEachArray(i,u){for(var l=0;l<i.length;l++)u(i[l])}(["get","put","post","patch","head","delete"],(function(i){createXHR["delete"===i?"del":i]=function(u,l,c){return(l=initParams(u,l,c)).method=i.toUpperCase(),_createXHR(l)}}))},55880:(i,u)=>{"use strict";function freeze(i,u){return void 0===u&&(u=Object),u&&"function"==typeof u.freeze?u.freeze(i):i}var l=freeze({HTML:"text/html",isHTML:function(i){return i===l.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),c=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===c.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});u.assign=function assign(i,u){if(null===i||"object"!=typeof i)throw new TypeError("target is not an object");for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(i[l]=u[l]);return i},u.find=function find(i,u,l){if(void 0===l&&(l=Array.prototype),i&&"function"==typeof l.find)return l.find.call(i,u);for(var c=0;c<i.length;c++)if(Object.prototype.hasOwnProperty.call(i,c)){var h=i[c];if(u.call(void 0,h,c,i))return h}},u.freeze=freeze,u.MIME_TYPE=l,u.NAMESPACE=c},22219:(i,u,l)=>{var c=l(55880),h=l(57315),p=l(31032),m=l(51495),g=h.DOMImplementation,v=c.NAMESPACE,_=m.ParseError,y=m.XMLReader;function normalizeLineEndings(i){return i.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function DOMParser(i){this.options=i||{locator:{}}}function DOMHandler(){this.cdata=!1}function position(i,u){u.lineNumber=i.lineNumber,u.columnNumber=i.columnNumber}function _locator(i){if(i)return"\n@"+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function _toString(i,u,l){return"string"==typeof i?i.substr(u,l):i.length>=u+l||u?new java.lang.String(i,u,l)+"":i}function appendElement(i,u){i.currentElement?i.currentElement.appendChild(u):i.doc.appendChild(u)}DOMParser.prototype.parseFromString=function(i,u){var l=this.options,c=new y,h=l.domBuilder||new DOMHandler,m=l.errorHandler,g=l.locator,_=l.xmlns||{},b=/\/x?html?$/.test(u),T=b?p.HTML_ENTITIES:p.XML_ENTITIES;return g&&h.setDocumentLocator(g),c.errorHandler=function buildErrorHandler(i,u,l){if(!i){if(u instanceof DOMHandler)return u;i=u}var c={},h=i instanceof Function;function build(u){var p=i[u];!p&&h&&(p=2==i.length?function(l){i(u,l)}:i),c[u]=p&&function(i){p("[xmldom "+u+"]\t"+i+_locator(l))}||function(){}}return l=l||{},build("warning"),build("error"),build("fatalError"),c}(m,h,g),c.domBuilder=l.domBuilder||h,b&&(_[""]=v.HTML),_.xml=_.xml||v.XML,i&&"string"==typeof i?c.parse((l.normalizeLineEndings||normalizeLineEndings)(i),_,T):c.errorHandler.error("invalid doc source"),h.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new g).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,u,l,c){var h=this.doc,p=h.createElementNS(i,l||u),m=c.length;appendElement(this,p),this.currentElement=p,this.locator&&position(this.locator,p);for(var g=0;g<m;g++){i=c.getURI(g);var v=c.getValue(g),_=(l=c.getQName(g),h.createAttributeNS(i,l));this.locator&&position(c.getLocator(g),_),_.value=_.nodeValue=v,p.setAttributeNode(_)}},endElement:function(i,u,l){var c=this.currentElement;this.currentElement=c.parentNode},startPrefixMapping:function(i,u){},endPrefixMapping:function(i){},processingInstruction:function(i,u){var l=this.doc.createProcessingInstruction(i,u);this.locator&&position(this.locator,l),appendElement(this,l)},ignorableWhitespace:function(i,u,l){},characters:function(i,u,l){if(i=_toString.apply(this,arguments)){if(this.cdata)var c=this.doc.createCDATASection(i);else c=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(c):/^\s*$/.test(i)&&this.doc.appendChild(c),this.locator&&position(this.locator,c)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,u,l){i=_toString.apply(this,arguments);var c=this.doc.createComment(i);this.locator&&position(this.locator,c),appendElement(this,c)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,u,l){var c=this.doc.implementation;if(c&&c.createDocumentType){var h=c.createDocumentType(i,u,l);this.locator&&position(this.locator,h),appendElement(this,h),this.doc.doctype=h}},warning:function(i){console.warn("[xmldom warning]\t"+i,_locator(this.locator))},error:function(i){console.error("[xmldom error]\t"+i,_locator(this.locator))},fatalError:function(i){throw new _(i,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(i){DOMHandler.prototype[i]=function(){return null}})),DOMHandler,normalizeLineEndings,u.DOMParser=DOMParser},57315:(i,u,l)=>{var c=l(55880),h=c.find,p=c.NAMESPACE;function notEmptyString(i){return""!==i}function orderedSetReducer(i,u){return i.hasOwnProperty(u)||(i[u]=!0),i}function toOrderedSet(i){if(!i)return[];var u=function splitOnASCIIWhitespace(i){return i?i.split(/[\t\n\f\r ]+/).filter(notEmptyString):[]}(i);return Object.keys(u.reduce(orderedSetReducer,{}))}function copy(i,u){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(u[l]=i[l])}function _extends(i,u){var l=i.prototype;if(!(l instanceof u)){function t(){}t.prototype=u.prototype,copy(l,t=new t),i.prototype=l=t}l.constructor!=i&&("function"!=typeof i&&console.error("unknown Class:"+i),l.constructor=i)}var m={},g=m.ELEMENT_NODE=1,v=m.ATTRIBUTE_NODE=2,_=m.TEXT_NODE=3,y=m.CDATA_SECTION_NODE=4,b=m.ENTITY_REFERENCE_NODE=5,T=m.ENTITY_NODE=6,S=m.PROCESSING_INSTRUCTION_NODE=7,k=m.COMMENT_NODE=8,E=m.DOCUMENT_NODE=9,C=m.DOCUMENT_TYPE_NODE=10,w=m.DOCUMENT_FRAGMENT_NODE=11,P=m.NOTATION_NODE=12,A={},x={},I=(A.INDEX_SIZE_ERR=(x[1]="Index size error",1),A.DOMSTRING_SIZE_ERR=(x[2]="DOMString size error",2),A.HIERARCHY_REQUEST_ERR=(x[3]="Hierarchy request error",3)),O=(A.WRONG_DOCUMENT_ERR=(x[4]="Wrong document",4),A.INVALID_CHARACTER_ERR=(x[5]="Invalid character",5),A.NO_DATA_ALLOWED_ERR=(x[6]="No data allowed",6),A.NO_MODIFICATION_ALLOWED_ERR=(x[7]="No modification allowed",7),A.NOT_FOUND_ERR=(x[8]="Not found",8)),L=(A.NOT_SUPPORTED_ERR=(x[9]="Not supported",9),A.INUSE_ATTRIBUTE_ERR=(x[10]="Attribute in use",10));A.INVALID_STATE_ERR=(x[11]="Invalid state",11),A.SYNTAX_ERR=(x[12]="Syntax error",12),A.INVALID_MODIFICATION_ERR=(x[13]="Invalid modification",13),A.NAMESPACE_ERR=(x[14]="Invalid namespace",14),A.INVALID_ACCESS_ERR=(x[15]="Invalid access",15);function DOMException(i,u){if(u instanceof Error)var l=u;else l=this,Error.call(this,x[i]),this.message=x[i],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return l.code=i,u&&(this.message=this.message+": "+u),l}function NodeList(){}function LiveNodeList(i,u){this._node=i,this._refresh=u,_updateLiveList(this)}function _updateLiveList(i){var u=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==u){var l=i._refresh(i._node);if(__set__(i,"length",l.length),!i.$$length||l.length<i.$$length)for(var c=l.length;c in i;c++)Object.prototype.hasOwnProperty.call(i,c)&&delete i[c];copy(l,i),i._inc=u}}function NamedNodeMap(){}function _findNodeIndex(i,u){for(var l=i.length;l--;)if(i[l]===u)return l}function _addNamedNode(i,u,l,c){if(c?u[_findNodeIndex(u,c)]=l:u[u.length++]=l,i){l.ownerElement=i;var h=i.ownerDocument;h&&(c&&_onRemoveAttribute(h,i,c),function _onAddAttribute(i,u,l){i&&i._inc++;var c=l.namespaceURI;c===p.XMLNS&&(u._nsMap[l.prefix?l.localName:""]=l.value)}(h,i,l))}}function _removeNamedNode(i,u,l){var c=_findNodeIndex(u,l);if(!(c>=0))throw new DOMException(O,new Error(i.tagName+"@"+l));for(var h=u.length-1;c<h;)u[c]=u[++c];if(u.length=h,i){var p=i.ownerDocument;p&&(_onRemoveAttribute(p,i,l),l.ownerElement=null)}}function DOMImplementation(){}function Node(){}function _xmlEncoder(i){return("<"==i?"&lt;":">"==i&&"&gt;")||"&"==i&&"&amp;"||'"'==i&&"&quot;"||"&#"+i.charCodeAt()+";"}function _visitNode(i,u){if(u(i))return!0;if(i=i.firstChild)do{if(_visitNode(i,u))return!0}while(i=i.nextSibling)}function Document(){this.ownerDocument=this}function _onRemoveAttribute(i,u,l,c){i&&i._inc++,l.namespaceURI===p.XMLNS&&delete u._nsMap[l.prefix?l.localName:""]}function _onUpdateChild(i,u,l){if(i&&i._inc){i._inc++;var c=u.childNodes;if(l)c[c.length++]=l;else{for(var h=u.firstChild,p=0;h;)c[p++]=h,h=h.nextSibling;c.length=p,delete c[c.length]}}}function _removeChild(i,u){var l=u.previousSibling,c=u.nextSibling;return l?l.nextSibling=c:i.firstChild=c,c?c.previousSibling=l:i.lastChild=l,u.parentNode=null,u.previousSibling=null,u.nextSibling=null,_onUpdateChild(i.ownerDocument,i),u}function isDocTypeNode(i){return i&&i.nodeType===Node.DOCUMENT_TYPE_NODE}function isElementNode(i){return i&&i.nodeType===Node.ELEMENT_NODE}function isTextNode(i){return i&&i.nodeType===Node.TEXT_NODE}function isElementInsertionPossible(i,u){var l=i.childNodes||[];if(h(l,isElementNode)||isDocTypeNode(u))return!1;var c=h(l,isDocTypeNode);return!(u&&c&&l.indexOf(c)>l.indexOf(u))}function isElementReplacementPossible(i,u){var l=i.childNodes||[];if(h(l,(function hasElementChildThatIsNotChild(i){return isElementNode(i)&&i!==u})))return!1;var c=h(l,isDocTypeNode);return!(u&&c&&l.indexOf(c)>l.indexOf(u))}function assertPreInsertionValidity1to5(i,u,l){if(!function hasValidParentNodeType(i){return i&&(i.nodeType===Node.DOCUMENT_NODE||i.nodeType===Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===Node.ELEMENT_NODE)}(i))throw new DOMException(I,"Unexpected parent node type "+i.nodeType);if(l&&l.parentNode!==i)throw new DOMException(O,"child not in parent");if(!function hasInsertableNodeType(i){return i&&(isElementNode(i)||isTextNode(i)||isDocTypeNode(i)||i.nodeType===Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===Node.COMMENT_NODE||i.nodeType===Node.PROCESSING_INSTRUCTION_NODE)}(u)||isDocTypeNode(u)&&i.nodeType!==Node.DOCUMENT_NODE)throw new DOMException(I,"Unexpected node type "+u.nodeType+" for parent node type "+i.nodeType)}function assertPreInsertionValidityInDocument(i,u,l){var c=i.childNodes||[],p=u.childNodes||[];if(u.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var m=p.filter(isElementNode);if(m.length>1||h(p,isTextNode))throw new DOMException(I,"More than one element or text in fragment");if(1===m.length&&!isElementInsertionPossible(i,l))throw new DOMException(I,"Element in fragment can not be inserted before doctype")}if(isElementNode(u)&&!isElementInsertionPossible(i,l))throw new DOMException(I,"Only one element can be added and only after doctype");if(isDocTypeNode(u)){if(h(c,isDocTypeNode))throw new DOMException(I,"Only one doctype is allowed");var g=h(c,isElementNode);if(l&&c.indexOf(g)<c.indexOf(l))throw new DOMException(I,"Doctype can only be inserted before an element");if(!l&&g)throw new DOMException(I,"Doctype can not be appended since element is present")}}function assertPreReplacementValidityInDocument(i,u,l){var c=i.childNodes||[],p=u.childNodes||[];if(u.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var m=p.filter(isElementNode);if(m.length>1||h(p,isTextNode))throw new DOMException(I,"More than one element or text in fragment");if(1===m.length&&!isElementReplacementPossible(i,l))throw new DOMException(I,"Element in fragment can not be inserted before doctype")}if(isElementNode(u)&&!isElementReplacementPossible(i,l))throw new DOMException(I,"Only one element can be added and only after doctype");if(isDocTypeNode(u)){if(h(c,(function hasDoctypeChildThatIsNotChild(i){return isDocTypeNode(i)&&i!==l})))throw new DOMException(I,"Only one doctype is allowed");var g=h(c,isElementNode);if(l&&c.indexOf(g)<c.indexOf(l))throw new DOMException(I,"Doctype can only be inserted before an element")}}function _insertBefore(i,u,l,c){assertPreInsertionValidity1to5(i,u,l),i.nodeType===Node.DOCUMENT_NODE&&(c||assertPreInsertionValidityInDocument)(i,u,l);var h=u.parentNode;if(h&&h.removeChild(u),u.nodeType===w){var p=u.firstChild;if(null==p)return u;var m=u.lastChild}else p=m=u;var g=l?l.previousSibling:i.lastChild;p.previousSibling=g,m.nextSibling=l,g?g.nextSibling=p:i.firstChild=p,null==l?i.lastChild=m:l.previousSibling=m;do{p.parentNode=i}while(p!==m&&(p=p.nextSibling));return _onUpdateChild(i.ownerDocument||i,i),u.nodeType==w&&(u.firstChild=u.lastChild=null),u}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(i,u){var l=[],c=9==this.nodeType&&this.documentElement||this,h=c.prefix,p=c.namespaceURI;if(p&&null==h&&null==(h=c.lookupPrefix(p)))var m=[{namespace:p,prefix:null}];return serializeToString(this,l,i,u,m),l.join("")}function needNamespaceDefine(i,u,l){var c=i.prefix||"",h=i.namespaceURI;if(!h)return!1;if("xml"===c&&h===p.XML||h===p.XMLNS)return!1;for(var m=l.length;m--;){var g=l[m];if(g.prefix===c)return g.namespace!==h}return!0}function addSerializedAttribute(i,u,l){i.push(" ",u,'="',l.replace(/[<>&"\t\n\r]/g,_xmlEncoder),'"')}function serializeToString(i,u,l,c,h){if(h||(h=[]),c){if(!(i=c(i)))return;if("string"==typeof i)return u.push(i),void 0}switch(i.nodeType){case g:var m=i.attributes,T=m.length,P=i.firstChild,A=i.tagName,x=A;if(!(l=p.isHTML(i.namespaceURI)||l)&&!i.prefix&&i.namespaceURI){for(var I,O=0;O<m.length;O++)if("xmlns"===m.item(O).name){I=m.item(O).value;break}if(!I)for(var L=h.length-1;L>=0;L--){if(""===(D=h[L]).prefix&&D.namespace===i.namespaceURI){I=D.namespace;break}}if(I!==i.namespaceURI)for(L=h.length-1;L>=0;L--){var D;if((D=h[L]).namespace===i.namespaceURI){D.prefix&&(x=D.prefix+":"+A);break}}}u.push("<",x);for(var V=0;V<T;V++){"xmlns"==(R=m.item(V)).prefix?h.push({prefix:R.localName,namespace:R.value}):"xmlns"==R.nodeName&&h.push({prefix:"",namespace:R.value})}for(V=0;V<T;V++){var R,M,N;if(needNamespaceDefine(R=m.item(V),0,h))addSerializedAttribute(u,(M=R.prefix||"")?"xmlns:"+M:"xmlns",N=R.namespaceURI),h.push({prefix:M,namespace:N});serializeToString(R,u,l,c,h)}if(A===x&&needNamespaceDefine(i,0,h))addSerializedAttribute(u,(M=i.prefix||"")?"xmlns:"+M:"xmlns",N=i.namespaceURI),h.push({prefix:M,namespace:N});if(P||l&&!/^(?:meta|link|img|br|hr|input)$/i.test(A)){if(u.push(">"),l&&/^script$/i.test(A))for(;P;)P.data?u.push(P.data):serializeToString(P,u,l,c,h.slice()),P=P.nextSibling;else for(;P;)serializeToString(P,u,l,c,h.slice()),P=P.nextSibling;u.push("</",x,">")}else u.push("/>");return;case E:case w:for(P=i.firstChild;P;)serializeToString(P,u,l,c,h.slice()),P=P.nextSibling;return;case v:return addSerializedAttribute(u,i.name,i.value);case _:return u.push(i.data.replace(/[<&>]/g,_xmlEncoder));case y:return u.push("<![CDATA[",i.data,"]]>");case k:return u.push("\x3c!--",i.data,"--\x3e");case C:var B=i.publicId,j=i.systemId;if(u.push("<!DOCTYPE ",i.name),B)u.push(" PUBLIC ",B),j&&"."!=j&&u.push(" ",j),u.push(">");else if(j&&"."!=j)u.push(" SYSTEM ",j,">");else{var H=i.internalSubset;H&&u.push(" [",H,"]"),u.push(">")}return;case S:return u.push("<?",i.target," ",i.data,"?>");case b:return u.push("&",i.nodeName,";");default:u.push("??",i.nodeName)}}function importNode(i,u,l){var c;switch(u.nodeType){case g:(c=u.cloneNode(!1)).ownerDocument=i;case w:break;case v:l=!0}if(c||(c=u.cloneNode(!1)),c.ownerDocument=i,c.parentNode=null,l)for(var h=u.firstChild;h;)c.appendChild(importNode(i,h,l)),h=h.nextSibling;return c}function cloneNode(i,u,l){var c=new u.constructor;for(var h in u)if(Object.prototype.hasOwnProperty.call(u,h)){var p=u[h];"object"!=typeof p&&p!=c[h]&&(c[h]=p)}switch(u.childNodes&&(c.childNodes=new NodeList),c.ownerDocument=i,c.nodeType){case g:var m=u.attributes,_=c.attributes=new NamedNodeMap,y=m.length;_._ownerElement=c;for(var b=0;b<y;b++)c.setAttributeNode(cloneNode(i,m.item(b),!0));break;case v:l=!0}if(l)for(var T=u.firstChild;T;)c.appendChild(cloneNode(i,T,l)),T=T.nextSibling;return c}function __set__(i,u,l){i[u]=l}DOMException.prototype=Error.prototype,copy(A,DOMException),NodeList.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,u){for(var l=[],c=0;c<this.length;c++)serializeToString(this[c],l,i,u);return l.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}},LiveNodeList.prototype.item=function(i){return _updateLiveList(this),this[i]||null},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(i){for(var u=this.length;u--;){var l=this[u];if(l.nodeName==i)return l}},setNamedItem:function(i){var u=i.ownerElement;if(u&&u!=this._ownerElement)throw new DOMException(L);var l=this.getNamedItem(i.nodeName);return _addNamedNode(this._ownerElement,this,i,l),l},setNamedItemNS:function(i){var u,l=i.ownerElement;if(l&&l!=this._ownerElement)throw new DOMException(L);return u=this.getNamedItemNS(i.namespaceURI,i.localName),_addNamedNode(this._ownerElement,this,i,u),u},removeNamedItem:function(i){var u=this.getNamedItem(i);return _removeNamedNode(this._ownerElement,this,u),u},removeNamedItemNS:function(i,u){var l=this.getNamedItemNS(i,u);return _removeNamedNode(this._ownerElement,this,l),l},getNamedItemNS:function(i,u){for(var l=this.length;l--;){var c=this[l];if(c.localName==u&&c.namespaceURI==i)return c}return null}},DOMImplementation.prototype={hasFeature:function(i,u){return!0},createDocument:function(i,u,l){var c=new Document;if(c.implementation=this,c.childNodes=new NodeList,c.doctype=l||null,l&&c.appendChild(l),u){var h=c.createElementNS(i,u);c.appendChild(h)}return c},createDocumentType:function(i,u,l){var c=new DocumentType;return c.name=i,c.nodeName=i,c.publicId=u||"",c.systemId=l||"",c}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,u){return _insertBefore(this,i,u)},replaceChild:function(i,u){_insertBefore(this,i,u,assertPreReplacementValidityInDocument),u&&this.removeChild(u)},removeChild:function(i){return _removeChild(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(i){return cloneNode(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var u=i.nextSibling;u&&u.nodeType==_&&i.nodeType==_?(this.removeChild(u),i.appendData(u.data)):(i.normalize(),i=u)}},isSupported:function(i,u){return this.ownerDocument.implementation.hasFeature(i,u)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var u=this;u;){var l=u._nsMap;if(l)for(var c in l)if(Object.prototype.hasOwnProperty.call(l,c)&&l[c]===i)return c;u=u.nodeType==v?u.ownerDocument:u.parentNode}return null},lookupNamespaceURI:function(i){for(var u=this;u;){var l=u._nsMap;if(l&&Object.prototype.hasOwnProperty.call(l,i))return l[i];u=u.nodeType==v?u.ownerDocument:u.parentNode}return null},isDefaultNamespace:function(i){return null==this.lookupPrefix(i)}},copy(m,Node),copy(m,Node.prototype),Document.prototype={nodeName:"#document",nodeType:E,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,u){if(i.nodeType==w){for(var l=i.firstChild;l;){var c=l.nextSibling;this.insertBefore(l,u),l=c}return i}return _insertBefore(this,i,u),i.ownerDocument=this,null===this.documentElement&&i.nodeType===g&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),_removeChild(this,i)},replaceChild:function(i,u){_insertBefore(this,i,u,assertPreReplacementValidityInDocument),i.ownerDocument=this,u&&this.removeChild(u),isElementNode(i)&&(this.documentElement=i)},importNode:function(i,u){return importNode(this,i,u)},getElementById:function(i){var u=null;return _visitNode(this.documentElement,(function(l){if(l.nodeType==g&&l.getAttribute("id")==i)return u=l,!0})),u},getElementsByClassName:function(i){var u=toOrderedSet(i);return new LiveNodeList(this,(function(l){var c=[];return u.length>0&&_visitNode(l.documentElement,(function(h){if(h!==l&&h.nodeType===g){var p=h.getAttribute("class");if(p){var m=i===p;if(!m){var v=toOrderedSet(p);m=u.every(function arrayIncludes(i){return function(u){return i&&-1!==i.indexOf(u)}}(v))}m&&c.push(h)}}})),c}))},createElement:function(i){var u=new Element;return u.ownerDocument=this,u.nodeName=i,u.tagName=i,u.localName=i,u.childNodes=new NodeList,(u.attributes=new NamedNodeMap)._ownerElement=u,u},createDocumentFragment:function(){var i=new DocumentFragment;return i.ownerDocument=this,i.childNodes=new NodeList,i},createTextNode:function(i){var u=new Text;return u.ownerDocument=this,u.appendData(i),u},createComment:function(i){var u=new Comment;return u.ownerDocument=this,u.appendData(i),u},createCDATASection:function(i){var u=new CDATASection;return u.ownerDocument=this,u.appendData(i),u},createProcessingInstruction:function(i,u){var l=new ProcessingInstruction;return l.ownerDocument=this,l.tagName=l.nodeName=l.target=i,l.nodeValue=l.data=u,l},createAttribute:function(i){var u=new Attr;return u.ownerDocument=this,u.name=i,u.nodeName=i,u.localName=i,u.specified=!0,u},createEntityReference:function(i){var u=new EntityReference;return u.ownerDocument=this,u.nodeName=i,u},createElementNS:function(i,u){var l=new Element,c=u.split(":"),h=l.attributes=new NamedNodeMap;return l.childNodes=new NodeList,l.ownerDocument=this,l.nodeName=u,l.tagName=u,l.namespaceURI=i,2==c.length?(l.prefix=c[0],l.localName=c[1]):l.localName=u,h._ownerElement=l,l},createAttributeNS:function(i,u){var l=new Attr,c=u.split(":");return l.ownerDocument=this,l.nodeName=u,l.name=u,l.namespaceURI=i,l.specified=!0,2==c.length?(l.prefix=c[0],l.localName=c[1]):l.localName=u,l}},_extends(Document,Node),Document.prototype.getElementsByTagName=(Element.prototype={nodeType:g,hasAttribute:function(i){return null!=this.getAttributeNode(i)},getAttribute:function(i){var u=this.getAttributeNode(i);return u&&u.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,u){var l=this.ownerDocument.createAttribute(i);l.value=l.nodeValue=""+u,this.setAttributeNode(l)},removeAttribute:function(i){var u=this.getAttributeNode(i);u&&this.removeAttributeNode(u)},appendChild:function(i){return i.nodeType===w?this.insertBefore(i,null):function _appendSingleChild(i,u){return u.parentNode&&u.parentNode.removeChild(u),u.parentNode=i,u.previousSibling=i.lastChild,u.nextSibling=null,u.previousSibling?u.previousSibling.nextSibling=u:i.firstChild=u,i.lastChild=u,_onUpdateChild(i.ownerDocument,i,u),u}(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,u){var l=this.getAttributeNodeNS(i,u);l&&this.removeAttributeNode(l)},hasAttributeNS:function(i,u){return null!=this.getAttributeNodeNS(i,u)},getAttributeNS:function(i,u){var l=this.getAttributeNodeNS(i,u);return l&&l.value||""},setAttributeNS:function(i,u,l){var c=this.ownerDocument.createAttributeNS(i,u);c.value=c.nodeValue=""+l,this.setAttributeNode(c)},getAttributeNodeNS:function(i,u){return this.attributes.getNamedItemNS(i,u)},getElementsByTagName:function(i){return new LiveNodeList(this,(function(u){var l=[];return _visitNode(u,(function(c){c===u||c.nodeType!=g||"*"!==i&&c.tagName!=i||l.push(c)})),l}))},getElementsByTagNameNS:function(i,u){return new LiveNodeList(this,(function(l){var c=[];return _visitNode(l,(function(h){h===l||h.nodeType!==g||"*"!==i&&h.namespaceURI!==i||"*"!==u&&h.localName!=u||c.push(h)})),c}))}}).getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=v,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(i,u){return this.data.substring(i,i+u)},appendData:function(i){this.nodeValue=this.data=i=this.data+i,this.length=i.length},insertData:function(i,u){this.replaceData(i,0,u)},appendChild:function(i){throw new Error(x[I])},deleteData:function(i,u){this.replaceData(i,u,"")},replaceData:function(i,u,l){var c=this.data.substring(0,i),h=this.data.substring(i+u);this.nodeValue=this.data=l=c+l+h,this.length=l.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:_,splitText:function(i){var u=this.data,l=u.substring(i);u=u.substring(0,i),this.data=this.nodeValue=u,this.length=u.length;var c=this.ownerDocument.createTextNode(l);return this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling),c}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:k},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:y},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=C,_extends(DocumentType,Node),Notation.prototype.nodeType=P,_extends(Notation,Node),Entity.prototype.nodeType=T,_extends(Entity,Node),EntityReference.prototype.nodeType=b,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=w,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=S,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(i,u,l){return nodeSerializeToString.call(i,u,l)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){function getTextContent(i){switch(i.nodeType){case g:case w:var u=[];for(i=i.firstChild;i;)7!==i.nodeType&&8!==i.nodeType&&u.push(getTextContent(i)),i=i.nextSibling;return u.join("");default:return i.nodeValue}}Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(i){switch(this.nodeType){case g:case w:for(;this.firstChild;)this.removeChild(this.firstChild);(i||String(i))&&this.appendChild(this.ownerDocument.createTextNode(i));break;default:this.data=i,this.value=i,this.nodeValue=i}}}),__set__=function(i,u,l){i["$$"+u]=l}}}catch(D){}u.DocumentType=DocumentType,u.DOMException=DOMException,u.DOMImplementation=DOMImplementation,u.Element=Element,u.Node=Node,u.NodeList=NodeList,u.XMLSerializer=XMLSerializer},31032:(i,u,l)=>{"use strict";var c=l(55880).freeze;u.XML_ENTITIES=c({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),u.HTML_ENTITIES=c({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),u.entityMap=u.HTML_ENTITIES},32419:(i,u,l)=>{var c=l(57315);c.DOMImplementation,c.XMLSerializer,u.DOMParser=l(22219).DOMParser},51495:(i,u,l)=>{var c=l(55880).NAMESPACE,h=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=new RegExp("[\\-\\.0-9"+h.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),m=new RegExp("^"+h.source+p.source+"*(?::"+h.source+p.source+"*)?$"),g=0,v=1,_=2,y=3,b=4,T=5,S=6,k=7;function ParseError(i,u){this.message=i,this.locator=u,Error.captureStackTrace&&Error.captureStackTrace(this,ParseError)}function XMLReader(){}function copyLocator(i,u){return u.lineNumber=i.lineNumber,u.columnNumber=i.columnNumber,u}function parseElementStartPart(i,u,l,h,p,m){function addAttribute(i,u,c){l.attributeNames.hasOwnProperty(i)&&m.fatalError("Attribute "+i+" redefined"),l.addValue(i,u.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,p),c)}for(var E,C=++u,w=g;;){var P=i.charAt(C);switch(P){case"=":if(w===v)E=i.slice(u,C),w=y;else{if(w!==_)throw new Error("attribute equal must after attrName");w=y}break;case"'":case'"':if(w===y||w===v){if(w===v&&(m.warning('attribute value must after "="'),E=i.slice(u,C)),!((C=i.indexOf(P,u=C+1))>0))throw new Error("attribute value no end '"+P+"' match");addAttribute(E,A=i.slice(u,C),u-1),w=T}else{if(w!=b)throw new Error('attribute value must after "="');addAttribute(E,A=i.slice(u,C),u),m.warning('attribute "'+E+'" missed start quot('+P+")!!"),u=C+1,w=T}break;case"/":switch(w){case g:l.setTagName(i.slice(u,C));case T:case S:case k:w=k,l.closed=!0;case b:case v:break;case _:l.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return m.error("unexpected end of input"),w==g&&l.setTagName(i.slice(u,C)),C;case">":switch(w){case g:l.setTagName(i.slice(u,C));case T:case S:case k:break;case b:case v:"/"===(A=i.slice(u,C)).slice(-1)&&(l.closed=!0,A=A.slice(0,-1));case _:w===_&&(A=E),w==b?(m.warning('attribute "'+A+'" missed quot(")!'),addAttribute(E,A,u)):(c.isHTML(h[""])&&A.match(/^(?:disabled|checked|selected)$/i)||m.warning('attribute "'+A+'" missed value!! "'+A+'" instead!!'),addAttribute(A,A,u));break;case y:throw new Error("attribute value missed!!")}return C;case"":P=" ";default:if(P<=" ")switch(w){case g:l.setTagName(i.slice(u,C)),w=S;break;case v:E=i.slice(u,C),w=_;break;case b:var A=i.slice(u,C);m.warning('attribute "'+A+'" missed quot(")!!'),addAttribute(E,A,u);case T:w=S}else switch(w){case _:c.isHTML(h[""])&&E.match(/^(?:disabled|checked|selected)$/i)||m.warning('attribute "'+E+'" missed value!! "'+E+'" instead2!!'),addAttribute(E,E,u),u=C,w=v;break;case T:m.warning('attribute space is required"'+E+'"!!');case S:w=v,u=C;break;case y:w=b,u=C;break;case k:throw new Error("elements closed character '/' and '>' must be connected to")}}C++}}function appendElement(i,u,l){for(var h=i.tagName,p=null,m=i.length;m--;){var g=i[m],v=g.qName,_=g.value;if((S=v.indexOf(":"))>0)var y=g.prefix=v.slice(0,S),b=v.slice(S+1),T="xmlns"===y&&b;else b=v,y=null,T="xmlns"===v&&"";g.localName=b,!1!==T&&(null==p&&(p={},_copy(l,l={})),l[T]=p[T]=_,g.uri=c.XMLNS,u.startPrefixMapping(T,_))}for(m=i.length;m--;){(y=(g=i[m]).prefix)&&("xml"===y&&(g.uri=c.XML),"xmlns"!==y&&(g.uri=l[y||""]))}var S;(S=h.indexOf(":"))>0?(y=i.prefix=h.slice(0,S),b=i.localName=h.slice(S+1)):(y=null,b=i.localName=h);var k=i.uri=l[y||""];if(u.startElement(k,b,h,i),!i.closed)return i.currentNSMap=l,i.localNSMap=p,!0;if(u.endElement(k,b,h),p)for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&u.endPrefixMapping(y)}function parseHtmlSpecialContent(i,u,l,c,h){if(/^(?:script|textarea)$/i.test(l)){var p=i.indexOf("</"+l+">",u),m=i.substring(u+1,p);if(/[&<]/.test(m))return/^script$/i.test(l)?(h.characters(m,0,m.length),p):(m=m.replace(/&#?\w+;/g,c),h.characters(m,0,m.length),p)}return u+1}function fixSelfClosed(i,u,l,c){var h=c[l];return null==h&&((h=i.lastIndexOf("</"+l+">"))<u&&(h=i.lastIndexOf("</"+l)),c[l]=h),h<u}function _copy(i,u){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(u[l]=i[l])}function parseDCC(i,u,l,c){if("-"===i.charAt(u+2))return"-"===i.charAt(u+3)?(h=i.indexOf("--\x3e",u+4))>u?(l.comment(i,u+4,h-u-4),h+3):(c.error("Unclosed comment"),-1):-1;if("CDATA["==i.substr(u+3,6)){var h=i.indexOf("]]>",u+9);return l.startCDATA(),l.characters(i,u+9,h-u-9),l.endCDATA(),h+3}var p=function split(i,u){var l,c=[],h=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;h.lastIndex=u,h.exec(i);for(;l=h.exec(i);)if(c.push(l),l[1])return c}(i,u),m=p.length;if(m>1&&/!doctype/i.test(p[0][0])){var g=p[1][0],v=!1,_=!1;m>3&&(/^public$/i.test(p[2][0])?(v=p[3][0],_=m>4&&p[4][0]):/^system$/i.test(p[2][0])&&(_=p[3][0]));var y=p[m-1];return l.startDTD(g,v,_),l.endDTD(),y.index+y[0].length}return-1}function parseInstruction(i,u,l){var c=i.indexOf("?>",u);if(c){var h=i.substring(u,c).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(h){return l.processingInstruction(h[1],h[2]),c+2}return-1}return-1}function ElementAttributes(){this.attributeNames={}}(ParseError.prototype=new Error).name=ParseError.name,XMLReader.prototype={parse:function(i,u,l){var h=this.domBuilder;h.startDocument(),_copy(u,u={}),function parse(i,u,l,h,p){function fixedFromCharCode(i){return i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):String.fromCharCode(i)}function entityReplacer(i){var u=i.slice(1,-1);return Object.hasOwnProperty.call(l,u)?l[u]:"#"===u.charAt(0)?fixedFromCharCode(parseInt(u.substr(1).replace("x","0x"))):(p.error("entity not found:"+i),i)}function appendText(u){if(u>T){var l=i.substring(T,u).replace(/&#?\w+;/g,entityReplacer);_&&position(T),h.characters(l,0,u-T),T=u}}function position(u,l){for(;u>=g&&(l=v.exec(i));)g=(m=l.index)+l[0].length,_.lineNumber++;_.columnNumber=u-m+1}var m=0,g=0,v=/.*(?:\r\n?|\n)|.*$/g,_=h.locator,y=[{currentNSMap:u}],b={},T=0;for(;;){try{var S=i.indexOf("<",T);if(S<0){if(!i.substr(T).match(/^\s*$/)){var k=h.doc,E=k.createTextNode(i.substr(T));k.appendChild(E),h.currentElement=E}return}switch(S>T&&appendText(S),i.charAt(S+1)){case"/":var C=i.indexOf(">",S+3),w=i.substring(S+2,C).replace(/[ \t\n\r]+$/g,""),P=y.pop();C<0?(w=i.substring(S+2).replace(/[\s<].*/,""),p.error("end tag name: "+w+" is not complete:"+P.tagName),C=S+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),p.error("end tag name: "+w+" maybe not complete"),C=S+1+w.length);var A=P.localNSMap,x=P.tagName==w;if(x||P.tagName&&P.tagName.toLowerCase()==w.toLowerCase()){if(h.endElement(P.uri,P.localName,w),A)for(var I in A)Object.prototype.hasOwnProperty.call(A,I)&&h.endPrefixMapping(I);x||p.fatalError("end tag name: "+w+" is not match the current start tagName:"+P.tagName)}else y.push(P);C++;break;case"?":_&&position(S),C=parseInstruction(i,S,h);break;case"!":_&&position(S),C=parseDCC(i,S,h,p);break;default:_&&position(S);var O=new ElementAttributes,L=y[y.length-1].currentNSMap,D=(C=parseElementStartPart(i,S,O,L,entityReplacer,p),O.length);if(!O.closed&&fixSelfClosed(i,C,O.tagName,b)&&(O.closed=!0,l.nbsp||p.warning("unclosed xml attribute")),_&&D){for(var V=copyLocator(_,{}),R=0;R<D;R++){var M=O[R];position(M.offset),M.locator=copyLocator(_,{})}h.locator=V,appendElement(O,h,L)&&y.push(O),h.locator=_}else appendElement(O,h,L)&&y.push(O);c.isHTML(O.uri)&&!O.closed?C=parseHtmlSpecialContent(i,C,O.tagName,entityReplacer,h):C++}}catch(i){if(i instanceof ParseError)throw i;p.error("element parse error: "+i),C=-1}C>T?T=C:appendText(Math.max(S,T)+1)}}(i,u,l,h,this.errorHandler),h.endDocument()}},ElementAttributes.prototype={setTagName:function(i){if(!m.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,u,l){if(!m.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:u,offset:l}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}},u.XMLReader=XMLReader,u.ParseError=ParseError},90410:(i,u,l)=>{var c,h="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},p=l(80542);"undefined"!=typeof document?c=document:(c=h["__GLOBAL_DOCUMENT_CACHE@4"])||(c=h["__GLOBAL_DOCUMENT_CACHE@4"]=p),i.exports=c},12843:i=>{var u;u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i.exports=u},59819:i=>{i.exports=function isFunction(i){if(!i)return!1;var l=u.call(i);return"[object Function]"===l||"function"==typeof i&&"[object RegExp]"!==l||"undefined"!=typeof window&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)};var u=Object.prototype.toString},72610:(i,u)=>{function keyCode(i){if(i&&"object"==typeof i){var u=i.which||i.keyCode||i.charCode;u&&(i=u)}if("number"==typeof i)return p[i];var h,m=String(i);return(h=l[m.toLowerCase()])?h:(h=c[m.toLowerCase()])||(1===m.length?m.charCodeAt(0):void 0)}keyCode.isEventKey=function isEventKey(i,u){if(i&&"object"==typeof i){var h=i.which||i.keyCode||i.charCode;if(null==h)return!1;if("string"==typeof u){var p;if(p=l[u.toLowerCase()])return p===h;if(p=c[u.toLowerCase()])return p===h}else if("number"==typeof u)return u===h;return!1}};var l=(u=i.exports=keyCode).code=u.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},c=u.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(h=97;h<123;h++)l[String.fromCharCode(h)]=h-32;for(var h=48;h<58;h++)l[h-48]=h;for(h=1;h<13;h++)l["f"+h]=h+111;for(h=0;h<10;h++)l["numpad "+h]=h+96;var p=u.names=u.title={};for(h in l)p[l[h]]=h;for(var m in c)l[m]=c[m]},41089:(i,u,l)=>{var c=l(93627).getUint64;i.exports=function(i){var u=new DataView(i.buffer,i.byteOffset,i.byteLength),l={version:i[0],flags:new Uint8Array(i.subarray(1,4)),references:[],referenceId:u.getUint32(4),timescale:u.getUint32(8)},h=12;0===l.version?(l.earliestPresentationTime=u.getUint32(h),l.firstOffset=u.getUint32(h+4),h+=8):(l.earliestPresentationTime=c(i.subarray(h)),l.firstOffset=c(i.subarray(h+8)),h+=16);var p=u.getUint16(h+=2);for(h+=2;p>0;h+=12,p--)l.references.push({referenceType:(128&i[h])>>>7,referencedSize:2147483647&u.getUint32(h),subsegmentDuration:u.getUint32(h+4),startsWithSap:!!(128&i[h+8]),sapType:(112&i[h+8])>>>4,sapDeltaTime:268435455&u.getUint32(h+8)});return l}},12915:i=>{var u,l,c,h,p,m,g,v=9e4;p=function(i,l){return u(h(i,l))},m=function(i,u){return l(c(i),u)},g=function(i,u,l){return c(l?i:i-u)},i.exports={ONE_SECOND_IN_TS:v,secondsToVideoTs:u=function(i){return i*v},secondsToAudioTs:l=function(i,u){return i*u},videoTsToSeconds:c=function(i){return i/v},audioTsToSeconds:h=function(i,u){return i/u},audioTsToVideoTs:p,videoTsToAudioTs:m,metadataTsToSeconds:g}},93627:i=>{var u=Math.pow(2,32);i.exports={getUint64:function(i){var l,c=new DataView(i.buffer,i.byteOffset,i.byteLength);return c.getBigUint64?(l=c.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(l):l:c.getUint32(0)*u+c.getUint32(4)},MAX_UINT32:u}},89997:i=>{!function webpackUniversalModuleDefinition(u,l){i.exports=l()}(globalThis,(function(){return(()=>{var i={506:i=>{i.exports=function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i},i.exports.__esModule=!0,i.exports.default=i.exports},575:i=>{i.exports=function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")},i.exports.__esModule=!0,i.exports.default=i.exports},913:i=>{function _defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}i.exports=function _createClass(i,u,l){return u&&_defineProperties(i.prototype,u),l&&_defineProperties(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i},i.exports.__esModule=!0,i.exports.default=i.exports},525:(i,u,l)=>{var c=l(331);function _get(){return"undefined"!=typeof Reflect&&Reflect.get?(i.exports=_get=Reflect.get,i.exports.__esModule=!0,i.exports.default=i.exports):(i.exports=_get=function _get(i,u,l){var h=c(i,u);if(h){var p=Object.getOwnPropertyDescriptor(h,u);return p.get?p.get.call(arguments.length<3?i:l):p.value}},i.exports.__esModule=!0,i.exports.default=i.exports),_get.apply(this,arguments)}i.exports=_get,i.exports.__esModule=!0,i.exports.default=i.exports},754:i=>{function _getPrototypeOf(u){return i.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)},i.exports.__esModule=!0,i.exports.default=i.exports,_getPrototypeOf(u)}i.exports=_getPrototypeOf,i.exports.__esModule=!0,i.exports.default=i.exports},205:(i,u,l)=>{var c=l(489);i.exports=function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),u&&c(i,u)},i.exports.__esModule=!0,i.exports.default=i.exports},318:i=>{i.exports=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}},i.exports.__esModule=!0,i.exports.default=i.exports},585:(i,u,l)=>{var c=l(8).default,h=l(506);i.exports=function _possibleConstructorReturn(i,u){if(u&&("object"===c(u)||"function"==typeof u))return u;if(void 0!==u)throw new TypeError("Derived constructors may only return object or undefined");return h(i)},i.exports.__esModule=!0,i.exports.default=i.exports},489:i=>{function _setPrototypeOf(u,l){return i.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,u){return i.__proto__=u,i},i.exports.__esModule=!0,i.exports.default=i.exports,_setPrototypeOf(u,l)}i.exports=_setPrototypeOf,i.exports.__esModule=!0,i.exports.default=i.exports},331:(i,u,l)=>{var c=l(754);i.exports=function _superPropBase(i,u){for(;!Object.prototype.hasOwnProperty.call(i,u)&&null!==(i=c(i)););return i},i.exports.__esModule=!0,i.exports.default=i.exports},8:i=>{function _typeof(u){return i.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i.exports.__esModule=!0,i.exports.default=i.exports,_typeof(u)}i.exports=_typeof,i.exports.__esModule=!0,i.exports.default=i.exports},848:i=>{window,i.exports=function(i){var u={};function r(l){if(u[l])return u[l].exports;var c=u[l]={i:l,l:!1,exports:{}};return i[l].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=i,r.c=u,r.d=function(i,u,l){r.o(i,u)||Object.defineProperty(i,u,{enumerable:!0,get:l})},r.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,u){if(1&u&&(i=r(i)),8&u)return i;if(4&u&&"object"==typeof i&&i&&i.__esModule)return i;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),2&u&&"string"!=typeof i)for(var c in i)r.d(l,c,function(u){return i[u]}.bind(null,c));return l},r.n=function(i){var u=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(u,"a",u),u},r.o=function(i,u){return Object.prototype.hasOwnProperty.call(i,u)},r.p="",r(r.s=1)}([function(i,u){function r(i,u){if(i<1||i!==Math.round(i))throw"Invalid channel count for BufferQueue";this.channels=i,this.bufferSize=u,this.flush()}r.prototype.flush=function(){this._buffers=[],this._pendingBuffer=this.createBuffer(this.bufferSize),this._pendingPos=0},r.prototype.sampleCount=function(){var i=0;return this._buffers.forEach((function(u){i+=u[0].length})),i},r.prototype.createBuffer=function(i){for(var u=[],l=0;l<this.channels;l++)u[l]=new Float32Array(i);return u},r.prototype.validate=function(i){if(i.length!==this.channels)return!1;for(var u,l=0;l<i.length;l++){var c=i[l];if(!(c instanceof Float32Array))return!1;if(0==l)u=c.length;else if(c.length!==u)return!1}return!0},r.prototype.appendBuffer=function(i){if(!this.validate(i))throw"Invalid audio buffer passed to BufferQueue.appendBuffer";for(var u=i[0].length,l=this.channels,c=this._pendingPos,h=this._pendingBuffer,p=this.bufferSize,m=0;m<u;m++){for(var g=0;g<l;g++)h[g][c]=i[g][m];++c==p&&(this._buffers.push(h),c=this._pendingPos=0,h=this._pendingBuffer=this.createBuffer(p))}this._pendingPos=c},r.prototype.prependBuffer=function(i){if(!this.validate(i))throw"Invalid audio buffer passed to BufferQueue.prependBuffer";var u=this._buffers.slice(0);u.push(this.trimBuffer(this._pendingBuffer,0,this._pendingPos)),this.flush(),this.appendBuffer(i);for(var l=0;l<u.length;l++)this.appendBuffer(u[l])},r.prototype.nextBuffer=function(){if(this._buffers.length)return this._buffers.shift();var i=this.trimBuffer(this._pendingBuffer,0,this._pendingPos);return this._pendingBuffer=this.createBuffer(this.bufferSize),this._pendingPos=0,i},r.prototype.trimBuffer=function(i,u,l){var c=i[0].length,h=u+Math.min(l,c);if(0==u&&h>=c)return i;for(var p=[],m=0;m<this.channels;m++)p[m]=i[m].subarray(u,h);return p},i.exports=r},function(i,u,l){!function(){l(0);var u=l(2),c=l(4);function n(i){this._options=i||{},this._backend=null,this._resampleFractional=0,this._resampleLastSampleData=void 0,this._tempoChanger=null}n.prototype.rate=0,n.prototype.targetRate=0,n.prototype.channels=0,n.prototype.bufferSize=0,Object.defineProperty(n.prototype,"bufferDuration",{get:function(){return this.targetRate?this.bufferSize/this.targetRate:0}}),Object.defineProperty(n.prototype,"bufferThreshold",{get:function(){return this._backend?this._backend.bufferThreshold/this.targetRate:0},set:function(i){if(!this._backend)throw"Invalid state: AudioFeeder cannot set bufferThreshold before init";this._backend.bufferThreshold=Math.round(i*this.targetRate)}}),Object.defineProperty(n.prototype,"playbackPosition",{get:function(){return this._backend?this.getPlaybackState().playbackPosition:0}}),Object.defineProperty(n.prototype,"outputPlaybackPosition",{get:function(){return this._backend?this.getPlaybackState().outputPlaybackPosition:0}}),Object.defineProperty(n.prototype,"durationBuffered",{get:function(){return this._backend?this.getPlaybackState().samplesQueued/this.targetRate:0}}),Object.defineProperty(n.prototype,"muted",{get:function(){if(this._backend)return this._backend.muted;throw"Invalid state: cannot get mute before init"},set:function(i){if(!this._backend)throw"Invalid state: cannot set mute before init";this._backend.muted=i}}),n.prototype.mute=function(){this.muted=!0},n.prototype.unmute=function(){this.muted=!1},Object.defineProperty(n.prototype,"volume",{get:function(){if(this._backend)return this._backend.volume;throw"Invalid state: cannot get volume before init"},set:function(i){if(!this._backend)throw"Invalid state: cannot set volume before init";this._backend.volume=i}}),Object.defineProperty(n.prototype,"tempo",{get:function(){if(this._tempoChanger)return this._tempoChanger.getTempo();throw"Invalid state: cannot get tempo before init"},set:function(i){if(!this._tempoChanger)throw"Invalid state: cannot set tempo before init";this._tempoChanger.setTempo(i)}}),n.prototype.init=function(i,l){if(this.channels=i,this.rate=l,this._options.backendFactory)this._backend=this._options.backendFactory(i,l,this._options);else{if(!u.isSupported())throw"No supported backend";this._backend=new u(i,l,this._options)}this.targetRate=this._backend.rate,this.bufferSize=this._backend.bufferSize,this._tempoChanger=c({sampleRate:this.targetRate,numChannels:i,tempo:1}),this._backend.onstarved=function(){this.onstarved&&this.onstarved()}.bind(this),this._backend.onbufferlow=function(){this.onbufferlow&&this.onbufferlow()}.bind(this)},n.prototype._resample=function(i){var u=this.rate,l=this.channels,c=this._backend.rate,h=this._backend.channels;if(u==c&&l==h)return i;var p,m=[],g=this._resampleFractional,v=i[0].length*c/u+g,_=Math.floor(v),y=v-_;p=u<c?function(i,l,h,p){for(var a=function(u){return u<0?h&&h.length+u>0?h[h.length+u]:i[0]:i[u]},m=0;m<l.length;m++){var v,_=(m+1-g)*u/c-1,y=Math.floor(_),b=Math.ceil(_);v=y==b?a(y):a(y)*(b-_)+a(b)*(_-y),l[m]=p*v}}:function(i,u,l,c){for(var h=0;h<u.length;h++)u[h]=c*i[h*i.length/u.length|0]};var b=1;h>l&&(b=Math.SQRT1_2);for(var T=0;T<h;T++){var S=T;T>=l&&(S=0);var k=i[S],E=new Float32Array(_);p(k,E,this._resampleLastSampleData?this._resampleLastSampleData[S]:void 0,b),m.push(E)}return this._resampleFractional=y,this._resampleLastSampleData=i,m},n.prototype.bufferData=function(i){if(!this._backend)throw"Invalid state: AudioFeeder cannot bufferData before init";var u=this._resample(i);u=this._tempoChanger.process(u),this._backend.appendBuffer(u)},n.prototype.getPlaybackState=function(){if(this._backend){var i=this._backend.getPlaybackState();return i.outputPlaybackPosition=i.playbackPosition,i.playbackPosition=this._tempoChanger.mapOutputToInputTime(i.outputPlaybackPosition),i}throw"Invalid state: AudioFeeder cannot getPlaybackState before init"},n.prototype.waitUntilReady=function(i){if(!this._backend)throw"Invalid state: AudioFeeder cannot waitUntilReady before init";this._backend.waitUntilReady(i)},n.prototype.start=function(){if(!this._backend)throw"Invalid state: AudioFeeder cannot start before init";this._backend.start()},n.prototype.stop=function(){if(!this._backend)throw"Invalid state: AudioFeeder cannot stop before init";this._backend.stop()},n.prototype.flush=function(){if(this._resampleFractional=0,this._resampleLastSampleData=void 0,!this._backend)throw"Invalid state: AudioFeeder cannot flush before init";this._tempoChanger.flush(this.durationBuffered),this._backend.flush()},n.prototype.close=function(){this._backend&&(this._backend.close(),this._backend=null)},n.prototype.onstarved=null,n.prototype.onbufferlow=null,n.isSupported=function(){return!!Float32Array&&u.isSupported()},n.initSharedAudioContext=function(){return u.isSupported()?u.initSharedAudioContext():null},i.exports=n}()},function(i,u,l){!function(){var u=window.AudioContext||window.webkitAudioContext,c=l(0),h=l(3);function o(i,u,l){var h=l.audioContext||o.initSharedAudioContext();if(this._context=h,this.output=l.output||h.destination,this.rate=h.sampleRate,this.channels=2,l.bufferSize&&(this.bufferSize=0|l.bufferSize),this.bufferThreshold=2*this.bufferSize,this._bufferQueue=new c(this.channels,this.bufferSize),this._playbackTimeAtBufferTail=h.currentTime,this._queuedTime=0,this._delayedTime=0,this._dropped=0,this._liveBuffer=this._bufferQueue.createBuffer(this.bufferSize),h.createScriptProcessor)this._node=h.createScriptProcessor(this.bufferSize,0,this.channels);else{if(!h.createJavaScriptNode)throw new Error("Bad version of web audio API?");this._node=h.createJavaScriptNode(this.bufferSize,0,this.channels)}}o.prototype.bufferSize=4096,o.prototype.bufferThreshold=8192,o.prototype._volume=1,Object.defineProperty(o.prototype,"volume",{get:function(){return this._volume},set:function(i){this._volume=+i}}),o.prototype._muted=!1,Object.defineProperty(o.prototype,"muted",{get:function(){return this._muted},set:function(i){this._muted=!!i}}),o.prototype._audioProcess=function(i){var u,l,c,p,m,g=this._playbackTimeAtBufferTail;if(g<(m="number"==typeof i.playbackTime?i.playbackTime:this._context.currentTime+this.bufferSize/this.rate)&&(this._delayedTime+=m-g),this._bufferQueue.sampleCount()<this.bufferSize&&this.onstarved&&this.onstarved(),this._bufferQueue.sampleCount()<this.bufferSize){for(u=0;u<this.channels;u++)for(c=i.outputBuffer.getChannelData(u),p=0;p<this.bufferSize;p++)c[p]=0;this._dropped++}else{var v=this.muted?0:this.volume,_=this._bufferQueue.nextBuffer();if(_[0].length<this.bufferSize)throw"Audio buffer not expected length.";for(u=0;u<this.channels;u++)for(l=_[u],this._liveBuffer[u].set(_[u]),c=i.outputBuffer.getChannelData(u),p=0;p<l.length;p++)c[p]=l[p]*v;this._queuedTime+=this.bufferSize/this.rate,this._playbackTimeAtBufferTail=m+this.bufferSize/this.rate,this._bufferQueue.sampleCount()<Math.max(this.bufferSize,this.bufferThreshold)&&this.onbufferlow&&h(this.onbufferlow.bind(this))}},o.prototype._samplesQueued=function(){return this._bufferQueue.sampleCount()+Math.floor(this._timeAwaitingPlayback()*this.rate)},o.prototype._timeAwaitingPlayback=function(){return Math.max(0,this._playbackTimeAtBufferTail-this._context.currentTime)},o.prototype.getPlaybackState=function(){return{playbackPosition:this._queuedTime-this._timeAwaitingPlayback(),samplesQueued:this._samplesQueued(),dropped:this._dropped,delayed:this._delayedTime}},o.prototype.waitUntilReady=function(i){i()},o.prototype.appendBuffer=function(i){this._bufferQueue.appendBuffer(i)},o.prototype.start=function(){this._node.onaudioprocess=this._audioProcess.bind(this),this._node.connect(this.output),this._playbackTimeAtBufferTail=this._context.currentTime},o.prototype.stop=function(){if(this._node){var i=this._timeAwaitingPlayback();if(i>0){var u=Math.round(i*this.rate),l=this._liveBuffer?this._liveBuffer[0].length:0;u>l?(this._bufferQueue.prependBuffer(this._liveBuffer),this._bufferQueue.prependBuffer(this._bufferQueue.createBuffer(u-l))):this._bufferQueue.prependBuffer(this._bufferQueue.trimBuffer(this._liveBuffer,l-u,u)),this._playbackTimeAtBufferTail-=i}this._node.onaudioprocess=null,this._node.disconnect()}},o.prototype.flush=function(){this._bufferQueue.flush()},o.prototype.close=function(){this.stop(),this._context=null},o.prototype.onstarved=null,o.prototype.onbufferlow=null,o.isSupported=function(){return!!u},o.sharedAudioContext=null,o.initSharedAudioContext=function(){if(!o.sharedAudioContext&&o.isSupported()){var i,l=new u;if(l.createScriptProcessor)i=l.createScriptProcessor(1024,0,2);else{if(!l.createJavaScriptNode)throw new Error("Bad version of web audio API?");i=l.createJavaScriptNode(1024,0,2)}i.connect(l.destination),i.disconnect(),o.sharedAudioContext=l}return o.sharedAudioContext},i.exports=o}()},function(i,u){i.exports=function(){if(void 0!==window.setImmediate)return window.setImmediate;if(window&&window.postMessage){var i=[];return window.addEventListener("message",(function(u){if(u.source===window){var l=u.data;if("object"==typeof l&&l.nextTickBrowserPingMessage){var c=i.pop();c&&c()}}})),function(u){i.push(u),window.postMessage({nextTickBrowserPingMessage:!0},document.location.toString())}}return function(i){setTimeout(i,0)}}()},function(i,u,l){var c;window,c=function(){return function(i){var u={};function r(l){if(u[l])return u[l].exports;var c=u[l]={i:l,l:!1,exports:{}};return i[l].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=i,r.c=u,r.d=function(i,u,l){r.o(i,u)||Object.defineProperty(i,u,{enumerable:!0,get:l})},r.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,u){if(1&u&&(i=r(i)),8&u)return i;if(4&u&&"object"==typeof i&&i&&i.__esModule)return i;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),2&u&&"string"!=typeof i)for(var c in i)r.d(l,c,function(u){return i[u]}.bind(null,c));return l},r.n=function(i){var u=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(u,"a",u),u},r.o=function(i,u){return Object.prototype.hasOwnProperty.call(i,u)},r.p="",r(r.s=1)}([function(i,u){var l={float_array:function(i){return new Float32Array(i)},blit:function(i,u,l,c,h){l.set(i.subarray(u,u+h),c)}};i.exports=l},function(i,u,l){var c,h;c=l(0),h=l(2),i.exports=function(i){for(var u=(i=i||{}).sampleRate||44100,l=i.wsizeLog||11,p=i.tempo||1,m=(i.numChannels,Math.pow(2,50/1200)-1),g=1<<l,v=h(l),_=1<<l-2,y=c.float_array(g+(_-=_%100)+5),b=c.float_array(g+_+5),T=_,S=_,k=c.float_array(g),E=0;E<g;E++)k[E]=.5*(1-Math.cos(2*Math.PI*E/g));var C=1+(g>>1),w=c.float_array(C),P=c.float_array(C),A=c.float_array(C),x=c.float_array(C),I=c.float_array(C),O=c.float_array(C),L=1+(C>>1),D=[0,0],V=[],R=[],M=[],N=[];for(E=0;E<2;E++)V.push(c.float_array(L)),R.push(c.float_array(L)),M.push(c.float_array(L)),N.push(c.float_array(C));var B=c.float_array(L),j=c.float_array(L),H=0,W=0,z=[{in_time:0,out_time:0,tempo:p}],X=0,K=0,Q=1,Y=0,$=0,Z=0,ee=0,te={mapOutputToInputTime:function(i){for(var u=z.length-1;i<z[u].out_time&&u>0;)u--;var l=z[u];return l.in_time+l.tempo*(i-l.out_time)},flush:function(i){Y=0,D=[0,0],K=0,ee=0,Z=0;for(var u=0;u<2;u++)for(var l=0;l<C;l++)N[u][l]=0;for(u=0;u<y.length;u++)y[u]=0;for(u=0;u<b.length;u++)b[u]=0;if(i){W=Math.max(0,W-i),H=te.mapOutputToInputTime(W);for(var c=z.length-1;W<=z[c].out_time&&c>=0;)z.pop(),c--;z.push({in_time:H,out_time:W,tempo:p})}},getTempo:function(){return p},setTempo:function(i){T=S=_,i>=1?S=Math.round(T/i):T=Math.round(S*i),$=(1/i-1*S/T)*T,Q=function(i,u){for(var l=i.length/u|0,c=0,h=0;h<l;h++)c+=i[h*u];return.9/c}(k,S),p=i;var u=z[z.length-1];u.out_time==W?u.tempo=i:z.push({in_time:H,out_time:W,tempo:i})}};te.flush(0),te.setTempo(p);var J=function(i,u,l){var c=Math.floor(l),h=c%2==1?-1:1;return Math.atan2(h*(u[c]-u[c+1]),h*(i[c]-i[c+1]))},U=function(i,u,l,c,h){var p=2*Math.PI/g*.5*(c+u)*T;return(function(i){return i-2*Math.PI*Math.round(i/(2*Math.PI))}(i-l-p)+p)*h},q=function(i,u,l,c,h,p){for(var v=i%2,_=1-v,y=N[_],b=D[_],T=V[_],S=R[_],k=M[_],E=N[v],C=1;C<E.length;C++)E[C]=u[C]*u[C]+l[C]*l[C];var w=V[v],P=D[v]=function(i,u){for(var l=0,c=0;c<i.length;c++)i[c]>l&&(l=i[c]);var h=1e-8*l,p=1,g=1;for(u[0]=1,c=2;c<i.length;c++){if(i[c]>h&&i[c]>i[c-1]&&i[c]>=i[c+1]){var v=c+(i[c-1]-i[c+1])/(2*(i[c-1]-2*i[c]+i[c+1]));v-u[p-1]>c*m?(u[p++]=v,g=c):i[c]>i[g]&&(u[p-1]=v,g=c)}}return p}(E,w),A=R[v],x=M[v];if(0!=i&&0!=P){var I=0;for($=0;$<P;$++){for(Z=w[$];w[$]>T[I]&&I!=b;)++I;var O=I;I>0&&Z-T[I-1]<T[I]-Z&&(O=I-1);var L=Z*m;if(Math.abs(T[O]-Z)<L&&y[Math.round(T[O])]>.1*E[Math.round(Z)]){var H=J(u,l,Z),W=S[O]+k[O]+U(H,Z,S[O],T[O],p)-H;A[$]=H,x[$]=W,B[$]=Math.cos(W),j[$]=Math.sin(W)}else A[$]=J(u,l,Z),x[$]=0,B[$]=1,j[$]=0}w[P]=2*g;var z=w[O=0],X=w[O+1],K=B[O],Q=j[O];for(C=1;C<u.length-1;C++){C>=z&&C-z>X-C&&(z=w[++O],X=w[O+1],K=B[O],Q=j[O]);var Y=u[C]*Q+l[C]*K;u[C]=u[C]*K-l[C]*Q,l[C]=Y}}else for(var $=0;$<P;$++){var Z=w[$];S[$]=k[$]=J(u,l,Z)}},G=function(){var i=0|(Y+=2*$);Y-=i;for(var u=0;u<g;u++)v.m_re[u]=k[u]*y[u],v.m_im[u]=k[u]*y[T+u];c.blit(y,2*T,y,0,g-T),v.inplace(!1),v.unpack(w,P,A,x),q(X,w,P,0,0,1*S/T),q(X+1,A,x,0,0,1*(S+i)/T),c.blit(A,0,I,0,C),c.blit(x,0,O,0,C),v.repack(w,P,A,x),v.inplace(!0);var l=b.length;for(c.blit(b,K,b,0,l-K),u=l-K;u<l;u++)b[u]=0;var h=0,p=Q;for(u=0;u<S;u++)Math.abs(2*v.m_re[u])>h&&(h=Math.abs(2*v.m_re[u]));for(u=0;u<g-S;u++)Math.abs(v.m_re[u+S+i]+v.m_im[u])>h&&(h=Math.abs(v.m_re[u+S+i]+v.m_im[u]));for(u=g-S;u<g;u++)Math.abs(2*v.m_im[u])>h&&(h=Math.abs(2*v.m_im[u]));var m=1/Math.floor(1*g/(2*S));for(p*h>m&&(p=m/h),u=0;u<g;u++)b[u]+=p*v.m_re[u],b[u+S+i]+=p*v.m_im[u];return X+=2,K=2*S+i};return te.process=function(i){var l=i[0].length,h=i[0];if(i.length>1){h=c.float_array(i[0].length);for(var m=1/i.length,v=0;v<i.length;v++)for(var _=0;_<l;_++)h[_]+=m*i[v][_]}if(1==p){if(ee+Z>0){var k=ee+Z+l,E=[];for(v=0;v<i.length;v++){var C=c.float_array(k);c.blit(b,0,C,0,ee),c.blit(y,0,C,ee,Z),c.blit(i[v],0,C,ee+Z,l),E.push(C)}te.flush(0),l=k,i=E}return H+=l/u,W+=l/u,i}var w=2*Math.floor(Math.max(0,Z+l-(g-T))/(2*T)),P=ee+S*w+Math.floor(Y+$*w);ee>P&&(P=ee);var A=c.float_array(P);c.blit(b,0,A,0,ee);for(var x=0,I=ee,O=0,L=0;;){var D=g+T-Z;if(x+D>l){c.blit(h,x,y,Z,l-x),Z+=l-x,x=l;break}D<=0?Z-=2*T:(c.blit(h,x,y,Z,D),x+=D,Z=g-T),L=G(),H+=2*T/u,W+=L/u,(O=I+L-P)<0&&(O=0),c.blit(b,0,A,I,L-O),I+=L}c.blit(b,L-O,b,0,O),ee=O;var V=[];for(v=0;v<i.length;v++)V.push(A);return V},te}},function(i,u,l){"use strict";var c=l(0);i.exports=function(i){for(var u=1<<i,l={m_logN:i,m_N:u,m_invN:1/u,m_re:c.float_array(u),m_im:c.float_array(u),m_revTgt:new Array(u)},h=0;h<u;h++){for(var p=h,m=0,g=0;g<i;g++)m<<=1,m|=1&p,p>>=1;l.m_revTgt[h]=m}l.twiddleRe=c.float_array(l.m_logN),l.twiddleIm=c.float_array(l.m_logN);for(var v=1,_=0;_<l.m_logN;_++){var y=2*v*Math.PI*l.m_invN;l.twiddleRe[_]=Math.cos(y),l.twiddleIm[_]=Math.sin(y),v<<=1}l.inplace=function(i){var u=l.m_re,c=l.m_im,h=l.m_N,p=l.m_logN,m=h>>1,g=h>>1,v=h;if(i)for(var _=1/h,y=0;y<h;y++)u[y]*=_,c[y]*=_;for(var b=0;b<p;b++){var T=l.twiddleRe[b],S=l.twiddleIm[b];i||(S*=-1);for(var k=0;k<h;){for(var E=k,C=k+g,w=1,P=0,A=0;A<m;A++){var x=u[E],I=c[E],O=u[C],L=c[C];u[E]=x+O,c[E]=I+L,u[C]=(O=x-O)*w-(L=I-L)*P,c[C]=O*P+L*w,E++,C++;var D=w;w=w*T-P*S,P=D*S+P*T}k+=v}m>>=1,g>>=1,v>>=1}for(var V,R,M=l.m_revTgt,N=0;N<h;N++)M[N]>N&&(R=u[V=M[N]],u[V]=u[N],u[N]=R,R=c[V],c[V]=c[N],c[N]=R)};var b=u>>1;return l.unpack=function(i,c,h,p){i[0]=l.m_re[0],h[0]=l.m_im[0],c[0]=p[0]=0,i[b]=l.m_re[b],h[b]=l.m_im[b],c[b]=p[b]=0;for(var m=1;m<b;m++)i[m]=(l.m_re[m]+l.m_re[u-m])/2,c[m]=(l.m_im[m]-l.m_im[u-m])/2,h[m]=(l.m_im[m]+l.m_im[u-m])/2,p[m]=(-l.m_re[m]+l.m_re[u-m])/2},l.repack=function(i,c,h,p){l.m_re[0]=i[0],l.m_im[0]=h[0],l.m_re[b]=i[b],l.m_im[b]=h[b];for(var m=1;m<b;m++)l.m_re[m]=i[m]-p[m],l.m_im[m]=c[m]+h[m],l.m_re[u-m]=i[m]+p[m],l.m_im[u-m]=-c[m]+h[m]},l}}])},i.exports=c()}])},893:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=function(){function Bisector(i){(0,h.default)(this,Bisector),this.lower=i.start,this.upper=i.end,this.onprocess=i.process,this.position=0,this.n=0}return(0,p.default)(Bisector,[{key:"iterate",value:function iterate(){return this.n++,this.position=Math.floor((this.lower+this.upper)/2),this.onprocess(this.lower,this.upper,this.position)}},{key:"start",value:function start(){return this.iterate(),this}},{key:"left",value:function left(){return this.upper=this.position,this.iterate()}},{key:"right",value:function right(){return this.lower=this.position,this.iterate()}}]),Bisector}();u.default=m},523:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=new(function(){function _class(){(0,h.default)(this,_class)}return(0,p.default)(_class,[{key:"hasTypedArrays",value:function hasTypedArrays(){return!!window.Uint32Array}},{key:"hasWebAssembly",value:function hasWebAssembly(){return!!window.WebAssembly}},{key:"hasWebAudio",value:function hasWebAudio(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"hasFlash",value:function hasFlash(){return!1}},{key:"hasAudio",value:function hasAudio(){return this.hasWebAudio()}},{key:"isBlacklisted",value:function isBlacklisted(i){return!1}},{key:"isSlow",value:function isSlow(){return!1}},{key:"isTooSlow",value:function isTooSlow(){return!1}},{key:"supported",value:function supported(i){return"OGVDecoder"===i?this.hasWebAssembly():"OGVPlayer"===i&&this.supported("OGVDecoder")&&this.hasAudio()}}]),_class}());u.default=m},408:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=c(l(205)),g=c(l(585)),v=c(l(754));var _=function(i){(0,m.default)(OGVDecoderAudioProxy,i);var u=function _createSuper(i){var u=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(i){return!1}}();return function _createSuperInternal(){var l,c=(0,v.default)(i);if(u){var h=(0,v.default)(this).constructor;l=Reflect.construct(c,arguments,h)}else l=c.apply(this,arguments);return(0,g.default)(this,l)}}(OGVDecoderAudioProxy);function OGVDecoderAudioProxy(){return(0,h.default)(this,OGVDecoderAudioProxy),u.apply(this,arguments)}return(0,p.default)(OGVDecoderAudioProxy,[{key:"init",value:function init(i){this.proxy("init",[],i)}},{key:"processHeader",value:function processHeader(i,u){this.proxy("processHeader",[i],u,[i])}},{key:"processAudio",value:function processAudio(i,u){this.proxy("processAudio",[i],u,[i])}},{key:"close",value:function close(){this.terminate()}}]),OGVDecoderAudioProxy}((0,c(l(580)).default)({loadedMetadata:!1,audioFormat:null,audioBuffer:null,cpuTime:0}));u.default=_},319:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=c(l(205)),g=c(l(585)),v=c(l(754));var _=function(i){(0,m.default)(OGVDecoderVideoProxy,i);var u=function _createSuper(i){var u=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(i){return!1}}();return function _createSuperInternal(){var l,c=(0,v.default)(i);if(u){var h=(0,v.default)(this).constructor;l=Reflect.construct(c,arguments,h)}else l=c.apply(this,arguments);return(0,g.default)(this,l)}}(OGVDecoderVideoProxy);function OGVDecoderVideoProxy(){return(0,h.default)(this,OGVDecoderVideoProxy),u.apply(this,arguments)}return(0,p.default)(OGVDecoderVideoProxy,[{key:"init",value:function init(i){this.proxy("init",[],i)}},{key:"processHeader",value:function processHeader(i,u){this.proxy("processHeader",[i],u,[i])}},{key:"processFrame",value:function processFrame(i,u){this.proxy("processFrame",[i],u,[i])}},{key:"close",value:function close(){this.terminate()}},{key:"sync",value:function sync(){this.proxy("sync",[],(function(){}))}},{key:"recycleFrame",value:function recycleFrame(i){this.proxy("recycleFrame",[i],(function(){}),[i.y.bytes.buffer,i.u.bytes.buffer,i.v.bytes.buffer])}}]),OGVDecoderVideoProxy}((0,c(l(580)).default)({loadedMetadata:!1,videoFormat:null,frameBuffer:null,cpuTime:0}));u.default=_},445:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=c(l(539)),g="1.9.0-20240423190513-22f6924",v={OGVDemuxerOggW:"ogv-demuxer-ogg-wasm.js",OGVDemuxerWebMW:"ogv-demuxer-webm-wasm.js",OGVDecoderAudioOpusW:"ogv-decoder-audio-opus-wasm.js",OGVDecoderAudioVorbisW:"ogv-decoder-audio-vorbis-wasm.js",OGVDecoderVideoTheoraW:"ogv-decoder-video-theora-wasm.js",OGVDecoderVideoVP8W:"ogv-decoder-video-vp8-wasm.js",OGVDecoderVideoVP8MTW:"ogv-decoder-video-vp8-mt-wasm.js",OGVDecoderVideoVP9W:"ogv-decoder-video-vp9-wasm.js",OGVDecoderVideoVP9SIMDW:"ogv-decoder-video-vp9-simd-wasm.js",OGVDecoderVideoVP9MTW:"ogv-decoder-video-vp9-mt-wasm.js",OGVDecoderVideoVP9SIMDMTW:"ogv-decoder-video-vp9-simd-mt-wasm.js",OGVDecoderVideoAV1W:"ogv-decoder-video-av1-wasm.js",OGVDecoderVideoAV1SIMDW:"ogv-decoder-video-av1-simd-wasm.js",OGVDecoderVideoAV1MTW:"ogv-decoder-video-av1-mt-wasm.js",OGVDecoderVideoAV1SIMDMTW:"ogv-decoder-video-av1-simd-mt-wasm.js"},_=function(){function OGVLoaderBase(){(0,h.default)(this,OGVLoaderBase),this.base=this.defaultBase()}return(0,p.default)(OGVLoaderBase,[{key:"defaultBase",value:function defaultBase(){}},{key:"wasmSupported",value:function wasmSupported(){return m.default.wasmSupported()}},{key:"scriptForClass",value:function scriptForClass(i){return v[i]}},{key:"urlForClass",value:function urlForClass(i){var u=this.scriptForClass(i);if(u)return this.urlForScript(u);throw new Error("asked for URL for unknown class "+i)}},{key:"urlForScript",value:function urlForScript(i){if(i){var u=this.base;return void 0===u?u="":u+="/",u+i+"?version="+encodeURIComponent(g)}throw new Error("asked for URL for unknown script "+i)}},{key:"loadClass",value:function loadClass(i,u,l){var c=this;l=l||{};var h=this.getGlobal(),p=this.urlForClass(i),m=function classWrapper(u){return(u=u||{}).locateFile=function(i){return"data:"===i.slice(0,5)?i:c.urlForScript(i)},u.mainScriptUrlOrBlob=c.scriptForClass(i)+"?version="+encodeURIComponent(g),h[i](u)};"function"==typeof h[i]?u(m):this.loadScript(p,(function(){u(m)}))}}]),OGVLoaderBase}();u.default=_},964:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=c(l(525)),g=c(l(205)),v=c(l(585)),_=c(l(754)),y=c(l(408)),b=c(l(319)),T=c(l(445));var S={audio:{proxy:y.default,worker:"ogv-worker-audio.js"},video:{proxy:b.default,worker:"ogv-worker-video.js"}},k={OGVDecoderAudioOpusW:"audio",OGVDecoderAudioVorbisW:"audio",OGVDecoderVideoTheoraW:"video",OGVDecoderVideoVP8W:"video",OGVDecoderVideoVP9W:"video",OGVDecoderVideoVP9SIMDW:"video",OGVDecoderVideoAV1W:"video",OGVDecoderVideoAV1SIMDW:"video"},E=new(function(i){(0,g.default)(OGVLoaderWeb,i);var u=function _createSuper(i){var u=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(i){return!1}}();return function _createSuperInternal(){var l,c=(0,_.default)(i);if(u){var h=(0,_.default)(this).constructor;l=Reflect.construct(c,arguments,h)}else l=c.apply(this,arguments);return(0,v.default)(this,l)}}(OGVLoaderWeb);function OGVLoaderWeb(){var i;return(0,h.default)(this,OGVLoaderWeb),(i=u.call(this)).scriptStatus={},i.scriptCallbacks={},i}return(0,p.default)(OGVLoaderWeb,[{key:"getGlobal",value:function getGlobal(){return window}},{key:"defaultBase",value:function defaultBase(){for(var i,u,l=document.querySelectorAll("script"),c=/^(?:|(.*)\/)ogv(?:-support|-es2017)?\.js(?:\?|#|$)/,h=0;h<l.length;h++)if((i=l[h].getAttribute("src"))&&(u=i.match(c)))return u[1]}},{key:"loadClass",value:function loadClass(i,u,l){(l=l||{}).worker?this.workerProxy(i,u):(0,m.default)((0,_.default)(OGVLoaderWeb.prototype),"loadClass",this).call(this,i,u,l)}},{key:"loadScript",value:function loadScript(i,u){var l=this;if("done"==this.scriptStatus[i])u();else if("loading"==this.scriptStatus[i])this.scriptCallbacks[i].push(u);else{this.scriptStatus[i]="loading",this.scriptCallbacks[i]=[u];var c=document.createElement("script"),h=function done(u){var c=l.scriptCallbacks[i];delete l.scriptCallbacks[i],l.scriptStatus[i]="done",c.forEach((function(i){i()}))};c.addEventListener("load",h),c.addEventListener("error",h),c.src=i,document.querySelector("head").appendChild(c)}}},{key:"workerProxy",value:function workerProxy(i,u){var l=S[k[i]];if(!l)throw new Error("Requested worker for class with no proxy: "+i);var c,h=l.proxy,p=l.worker,m=this.urlForScript(this.scriptForClass(i)),g=this.urlForScript(p),v=function construct(u){return new h(c,i,u)};if(g.match(/^https?:|\/\//i)){var _,y,b,T,C,w=function completionCheck(){if(1==P&&1==A){var i=b+" "+T+"\nOGVLoader.base = "+JSON.stringify(E.base);try{C=new Blob([i],{type:"application/javascript"})}catch(u){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(C=new BlobBuilder).append(i),C=C.getBlob()}c=new Worker(URL.createObjectURL(C)),u((function(i){return Promise.resolve(new v(i))}))}},P=!1,A=!1;(_=new XMLHttpRequest).open("GET",m,!0),_.onreadystatechange=function(){4==_.readyState&&200==_.status&&(b=_.responseText,P=!0,w())},_.send(),(y=new XMLHttpRequest).open("GET",g,!0),y.onreadystatechange=function(){4==y.readyState&&200==y.status&&(T=y.responseText,A=!0,w())},y.send()}else c=new Worker(g),u((function(i){return Promise.resolve(new v(i))}))}}]),OGVLoaderWeb}(T.default));u.default=E},759:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(913)),p=c(l(575)),m=c(l(309)),g={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},v=(0,h.default)((function OGVMediaError(i,u){(0,p.default)(this,OGVMediaError),this.code=i,this.message=u}));(0,m.default)(v,g),(0,m.default)(v.prototype,g),u.default=v},278:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(913)),p=c(l(575));function split(i,u,l){var c=i.split(u,l).map((function(i){return function trim(i){return i.replace(/^\s+/,"").replace(/\s+$/,"")}(i)}));if("number"==typeof l)for(;c.length<l;)c.push(null);return c}var m=(0,h.default)((function OGVMediaType(i){(0,p.default)(this,OGVMediaType),i=String(i),this.major=null,this.minor=null,this.codecs=null;var u=split(i,";");if(u.length){var l=u.shift();if(l){var c=split(l,"/",2);this.major=c[0],this.minor=c[1]}for(var h in u){var m=u[h].match(/^codecs\s*=\s*"(.*?)"$/);if(m){this.codecs=split(m[1],",");break}}}}));u.default=m},869:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=c(l(506)),g=c(l(205)),v=c(l(585)),_=c(l(754)),y=c(l(8)),b=c(l(731)),T=c(l(936)),S=c(l(848)),k=c(l(964)),E=c(l(893)),C=c(l(309)),w=c(l(759)),P=c(l(278)),A=c(l(168)),x=c(l(625)),I=c(l(302));var O,L=function(){if("function"==typeof setImmediate)return setImmediate;var i=new MessageChannel,u=[];return i.port1.onmessage=function(i){u.shift()()},function nextTick(l){u.push(l),i.port2.postMessage({})}}(),D={NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},V="INITIAL",R="SEEKING_END",M="LOADED",N="PRELOAD",B="READY",j="PLAYING",H="SEEKING",W="ERROR",z="NOT_SEEKING",X="BISECT_TO_TARGET",K="BISECT_TO_KEYPOINT",Q="LINEAR_TO_TARGET",Y="fast";function OGVJSElement(){var i=document.createElement("ogvjs");return Object.setPrototypeOf?Object.setPrototypeOf(i,Object.getPrototypeOf(this)):i.__proto__=this.__proto__,i}O="undefined"==typeof performance||void 0===(0,y.default)(performance.now)?Date.now:performance.now.bind(performance),OGVJSElement.prototype=Object.create(HTMLElement.prototype,{});var $=function(i){(0,g.default)(OGVPlayer,i);var u=function _createSuper(i){var u=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(i){return!1}}();return function _createSuperInternal(){var l,c=(0,_.default)(i);if(u){var h=(0,_.default)(this).constructor;l=Reflect.construct(c,arguments,h)}else l=c.apply(this,arguments);return(0,v.default)(this,l)}}(OGVPlayer);function OGVPlayer(i){var l;if((0,h.default)(this,OGVPlayer),l=u.call(this),(i=i||{}).base=i.base||k.default.base,l._options=i,l._instanceId="ogvjs"+ ++OGVPlayer.instanceCount,l._enableWorker=void 0!==i.worker?!!i.worker:!!window.Worker,!k.default.wasmSupported())throw new Error("WebAssembly not supported");return l._enableThreading=!!i.threading,l._enableSIMD=!!i.simd,l._state=V,l._seekState=z,l._detectedType=null,l._canvas=document.createElement("canvas"),l._frameSink=null,l.className=l._instanceId,(0,C.default)((0,m.default)(l),D),l._view=l._canvas,l._view.style.position="absolute",l._view.style.top="0",l._view.style.left="0",l._view.style.width="100%",l._view.style.height="100%",l._view.style.objectFit="contain",l.appendChild(l._view),l._startTime=O(),l._codec=null,l._audioInfo=null,l._videoInfo=null,l._actionQueue=[],l._audioFeeder=null,l._muted=!1,l._initialPlaybackPosition=0,l._initialPlaybackOffset=0,l._prebufferingAudio=!1,l._initialSeekTime=0,l._currentSrc="",l._crossOrigin=null,l._streamEnded=!1,l._mediaError=null,l._dataEnded=!1,l._byteLength=0,l._duration=null,l._lastSeenTimestamp=null,l._nextProcessingTimer,l._nextFrameTimer=null,l._loading=!1,l._started=!1,l._paused=!0,l._ended=!1,l._startedPlaybackInDocument=!1,l._stream=void 0,l._framesProcessed=0,l._targetPerFrameTime=1e3/60,l._actualPerFrameTime=0,l._totalFrameTime=0,l._totalFrameCount=0,l._playTime=0,l._bufferTime=0,l._drawingTime=0,l._proxyTime=0,l._totalJitter=0,l._droppedAudio=0,l._delayedAudio=0,l._lateFrames=0,l._poster="",l._thumbnail=null,l._frameEndTimestamp=0,l._audioEndTimestamp=0,l._decodedFrames=[],l._pendingFrames=[],l._lastFrameDecodeTime=0,l._lastFrameVideoCpuTime=0,l._lastFrameAudioCpuTime=0,l._lastFrameDemuxerCpuTime=0,l._lastFrameDrawingTime=0,l._lastFrameBufferTime=0,l._lastFrameProxyTime=0,l._lastVideoCpuTime=0,l._lastAudioCpuTime=0,l._lastDemuxerCpuTime=0,l._lastBufferTime=0,l._lastProxyTime=0,l._lastDrawingTime=0,l._lastFrameTimestamp=0,l._currentVideoCpuTime=0,l._lastTimeUpdate=0,l._timeUpdateInterval=250,l._seekTargetTime=0,l._bisectTargetTime=0,l._seekMode=null,l._lastSeekPosition=null,l._seekBisector=null,l._didSeek=null,l._depth=0,l._needProcessing=!1,l._pendingFrame=0,l._pendingAudio=0,l._framePipelineDepth=8,l._frameParallelism=l._enableThreading?Math.min(16,navigator.hardwareConcurrency)||1:0,l._audioPipelineDepth=12,l._videoInfo=null,l._audioInfo=null,l._width=0,l._height=0,l._volume=1,l._playbackRate=1,Object.defineProperties((0,m.default)(l),{src:{get:function getSrc(){return this.getAttribute("src")||""},set:function setSrc(i){this.setAttribute("src",i),this._loading=!1,this._prepForLoad("interactive")}},buffered:{get:function getBuffered(){var i,u=this;return i=this._stream&&this._byteLength&&this._duration?this._stream.getBufferedRanges().map((function(i){return i.map((function(i){return i/u._stream.length*u._duration}))})):[[0,0]],new A.default(i)}},seekable:{get:function getSeekable(){return new A.default(this.duration<1/0&&this._stream&&this._stream.seekable&&this._codec&&this._codec.seekable?[[0,this._duration]]:[])}},currentTime:{get:function getCurrentTime(){return this._state==H?this._seekTargetTime:this._codec?this._state!=j||this._paused?this._initialPlaybackOffset:this._getPlaybackTime():this._initialSeekTime},set:function setCurrentTime(i){this._seek(i,"exact")}},duration:{get:function getDuration(){return this._codec&&this._codec.loadedMetadata?null!==this._duration?this._duration:1/0:NaN}},paused:{get:function getPaused(){return this._paused}},ended:{get:function getEnded(){return this._ended}},seeking:{get:function getSeeking(){return this._state==H}},muted:{get:function getMuted(){return this._muted},set:function setMuted(i){this._muted=i,this._audioFeeder?this._audioFeeder.muted=this._muted:this._started&&!this._muted&&this._codec&&this._codec.hasAudio&&(this._log("unmuting: switching from timer to audio clock"),this._initAudioFeeder(),this._startPlayback(this._audioEndTimestamp)),this._fireEventAsync("volumechange")}},poster:{get:function getPoster(){return this._poster},set:function setPoster(i){var u=this;if(this._poster=i,!this._started){this._thumbnail&&this.removeChild(this._thumbnail);var l=new Image;l.crossOrigin=this.crossOrigin,l.src=this._poster,l.className="ogvjs-poster",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.height="100%",l.style.objectFit="contain",l.style.visibility="hidden",l.addEventListener("load",(function(){u._thumbnail===l&&(OGVPlayer.styleManager.appendRule("."+u._instanceId,{width:l.naturalWidth+"px",height:l.naturalHeight+"px"}),l.style.visibility="visible")})),this._thumbnail=l,this.appendChild(l)}}},videoWidth:{get:function getVideoWidth(){return this._videoInfo?this._videoInfo.displayWidth:0}},videoHeight:{get:function getVideoHeight(){return this._videoInfo?this._videoInfo.displayHeight:0}},ogvjsVideoFrameRate:{get:function getOgvJsVideoFrameRate(){return this._videoInfo?0==this._videoInfo.fps?this._totalFrameCount/(this._totalFrameTime/1e3):this._videoInfo.fps:0}},ogvjsAudioChannels:{get:function getOgvJsAudioChannels(){return this._audioInfo?this._audioInfo.channels:0}},ogvjsAudioSampleRate:{get:function getOgvJsAudioChannels(){return this._audioInfo?this._audioInfo.rate:0}},width:{get:function getWidth(){return this._width},set:function setWidth(i){this._width=parseInt(i,10),this.style.width=this._width+"px"}},height:{get:function getHeight(){return this._height},set:function setHeight(i){this._height=parseInt(i,10),this.style.height=this._height+"px"}},autoplay:{get:function getAutoplay(){return!1},set:function setAutoplay(i){}},controls:{get:function getControls(){return!1},set:function setControls(i){}},loop:{get:function getLoop(){return!1},set:function setLoop(i){}},crossOrigin:{get:function getCrossOrigin(){return this._crossOrigin},set:function setCrossOrigin(i){switch(i){case null:this._crossOrigin=i,this.removeAttribute("crossorigin");break;default:i="anonymous";case"":case"anonymous":case"use-credentials":this._crossOrigin=i,this.setAttribute("crossorigin",i)}this._thumbnail&&(this._thumbnail.crossOrigin=i)}},currentSrc:{get:function getCurrentSrc(){return this._currentSrc}},defaultMuted:{get:function getDefaultMuted(){return!1}},defaultPlaybackRate:{get:function getDefaultPlaybackRate(){return 1}},error:{get:function getError(){return this._state===W?this._mediaError?this._mediaError:new w.default("unknown error occurred in media procesing"):null}},preload:{get:function getPreload(){return this.getAttribute("preload")||""},set:function setPreload(i){this.setAttribute("preload",i)}},readyState:{get:function getReadyState(){return this._stream&&this._codec&&this._codec.loadedMetadata?OGVPlayer.HAVE_ENOUGH_DATA:OGVPlayer.HAVE_NOTHING}},networkState:{get:function getNetworkState(){return this._stream?this._stream.waiting?OGVPlayer.NETWORK_LOADING:OGVPlayer.NETWORK_IDLE:this.readyState==OGVPlayer.HAVE_NOTHING?OGVPlayer.NETWORK_EMPTY:OGVPlayer.NETWORK_NO_SOURCE}},playbackRate:{get:function getPlaybackRate(){return this._playbackRate},set:function setPlaybackRate(i){var u=Number(i)||1;this._audioFeeder?this._audioFeeder.tempo=u:this._paused||(this._initialPlaybackOffset=this._getPlaybackTime(),this._initialPlaybackPosition=u*O()/1e3),this._playbackRate=u,this._fireEventAsync("ratechange")}},played:{get:function getPlayed(){return new A.default([[0,this.currentTime]])}},volume:{get:function getVolume(){return this._volume},set:function setVolume(i){this._volume=+i,this._audioFeeder&&(this._audioFeeder.volume=this._volume),this._fireEventAsync("volumechange")}}}),l.onframecallback=null,l.onloadstate=null,l.onprogress=null,l.onsuspend=null,l.onabort=null,l.onemptied=null,l.onstalled=null,l.onloadedmetadata=null,l.onloadeddata=null,l.oncanplay=null,l.oncanplaythrough=null,l.onplaying=null,l.onwaiting=null,l.onseeking=null,l.onseeked=null,l.onended=null,l.ondurationchange=null,l.ontimeupdate=null,l.onplay=null,l.onpause=null,l.onratechange=null,l.onresize=null,l.onvolumechange=null,l.onaudiofeedercreated=null,l}return(0,p.default)(OGVPlayer,[{key:"_time",value:function _time(i){var u=O();i();var l=O()-u;return this._lastFrameDecodeTime+=l,l}},{key:"_log",value:function _log(i){var u=this._options;if(u.debug){var l=O()-this._startTime;u.debugFilter&&!i.match(u.debugFilter)||console.log("["+Math.round(10*l)/10+"ms] "+i)}}},{key:"_fireEvent",value:function _fireEvent(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._log("fireEvent "+i);var l,c="function"==typeof Event;for(var h in c?l=new CustomEvent(i):(l=document.createEvent("Event")).initEvent(i,!1,!1),u)u.hasOwnProperty(h)&&(l[h]=u[h]);var p=this.dispatchEvent(l);!c&&"resize"===i&&this.onresize&&p&&this.onresize.call(this,l)}},{key:"_fireEventAsync",value:function _fireEventAsync(i){var u=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._log("fireEventAsync "+i),L((function(){u._fireEvent(i,l)}))}},{key:"_initAudioFeeder",value:function _initAudioFeeder(){var i=this,u=this._options,l={bufferSize:8192};u.audioContext&&(l.audioContext=u.audioContext),u.audioDestination&&(l.output=u.audioDestination),u.audioBackendFactory&&(l.backendFactory=u.audioBackendFactory);var c=this._audioFeeder=new S.default(l);c.init(this._audioInfo.channels,this._audioInfo.rate),this.onaudiofeedercreated&&this.onaudiofeedercreated(this._audioFeeder),c.bufferThreshold=1,c.volume=this.volume,c.muted=this.muted,c.tempo=this.playbackRate,c.onbufferlow=function(){i._log("onbufferlow"),i._stream&&(i._stream.buffering||i._stream.seeking)||i._pendingAudio||i._pingProcessing()},c.onstarved=function(){i._dataEnded?i._log("onstarved: appear to have reached end of audio"):(i._log("onstarved: halting audio due to starvation"),i._stopPlayback(),i._prebufferingAudio=!0),i._isProcessing()||i._pingProcessing(0)}}},{key:"_startPlayback",value:function _startPlayback(i){if(this._audioFeeder){this._audioFeeder.start();var u=this._audioFeeder.getPlaybackState();this._initialPlaybackPosition=u.playbackPosition}else this._initialPlaybackPosition=this._playbackRate*O()/1e3;void 0!==i&&(this._initialPlaybackOffset=i),this._prebufferingAudio=!1,this._log("continuing at "+this._initialPlaybackPosition+", "+this._initialPlaybackOffset)}},{key:"_stopPlayback",value:function _stopPlayback(){this._initialPlaybackOffset=this._getPlaybackTime(),this._log("pausing at "+this._initialPlaybackOffset),this._audioFeeder&&this._audioFeeder.stop()}},{key:"_getPlaybackTime",value:function _getPlaybackTime(i){return this._prebufferingAudio||this._paused?this._initialPlaybackOffset:(this._audioFeeder?(i=i||this._audioFeeder.getPlaybackState()).playbackPosition:this._playbackRate*O()/1e3)-this._initialPlaybackPosition+this._initialPlaybackOffset}},{key:"_stopVideo",value:function _stopVideo(){this._log("STOPPING"),this._state=V,this._seekState=z,this._started=!1,this._ended=!1,this._frameEndTimestamp=0,this._audioEndTimestamp=0,this._lastFrameDecodeTime=0,this._prebufferingAudio=!1,this._actionQueue.splice(0,this._actionQueue.length),this._stream&&(this._stream.abort(),this._stream=null,this._streamEnded=!1),this._codec&&(this._codec.close(),this._codec=null,this._pendingFrame=0,this._pendingAudio=0,this._dataEnded=!1),this._videoInfo=null,this._audioInfo=null,this._audioFeeder&&(this._audioFeeder.close(),this._audioFeeder=null),this._nextProcessingTimer&&(clearTimeout(this._nextProcessingTimer),this._nextProcessingTimer=null),this._nextFrameTimer&&(clearTimeout(this._nextFrameTimer),this._nextFrameTimer=null),this._frameSink&&(this._frameSink.clear(),this._frameSink=null),this._decodedFrames&&(this._decodedFrames=[]),this._pendingFrames&&(this._pendingFrames=[]),this._initialSeekTime=0,this._initialPlaybackPosition=0,this._initialPlaybackOffset=0,this._duration=null}},{key:"_doFrameComplete",value:function _doFrameComplete(){var i=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._startedPlaybackInDocument&&!document.body.contains(this)&&L((function(){i.stop()}));var l=O(),c=l-this._lastFrameTimestamp,h=this._actualPerFrameTime-this._targetPerFrameTime;this._totalJitter+=Math.abs(h),this._playTime+=c;var p={cpuTime:this._lastFrameDecodeTime,drawingTime:this._drawingTime-this._lastFrameDrawingTime,bufferTime:this._bufferTime-this._lastFrameBufferTime,proxyTime:this._proxyTime-this._lastFrameProxyTime,demuxerTime:0,videoTime:0,audioTime:0,clockTime:this._actualPerFrameTime,late:u.dropped,dropped:u.dropped};function n(i){return Math.round(10*i)/10}this._codec&&(p.demuxerTime=this._codec.demuxerCpuTime-this._lastFrameDemuxerCpuTime,p.videoTime+=this._currentVideoCpuTime-this._lastFrameVideoCpuTime,p.audioTime+=this._codec.audioCpuTime-this._lastFrameAudioCpuTime),p.cpuTime+=p.demuxerTime,this._lastFrameDecodeTime=0,this._lastFrameTimestamp=l,this._codec?(this._lastFrameVideoCpuTime=this._currentVideoCpuTime,this._lastFrameAudioCpuTime=this._codec.audioCpuTime,this._lastFrameDemuxerCpuTime=this._codec.demuxerCpuTime):(this._lastFrameVideoCpuTime=0,this._lastFrameAudioCpuTime=0,this._lastFrameDemuxerCpuTime=0),this._lastFrameDrawingTime=this._drawingTime,this._lastFrameBufferTime=this._bufferTime,this._lastFrameProxyTime=this._proxyTime,this._log("drew frame "+u.frameEndTimestamp+": clock time "+n(c)+" (jitter "+n(h)+") cpu: "+n(p.cpuTime)+" (mux: "+n(p.demuxerTime)+" buf: "+n(p.bufferTime)+" draw: "+n(p.drawingTime)+" proxy: "+n(p.proxyTime)+") vid: "+n(p.videoTime)+" aud: "+n(p.audioTime)),this._fireEventAsync("framecallback",p),(!this._lastTimeUpdate||l-this._lastTimeUpdate>=this._timeUpdateInterval)&&(this._lastTimeUpdate=l,this._fireEventAsync("timeupdate")),this._codec&&u.yCbCrBuffer&&this._codec.recycleFrame(u.yCbCrBuffer)}},{key:"_seekStream",value:function _seekStream(i){var u=this;this._stream.seeking&&this._stream.abort(),this._stream.buffering&&this._stream.abort(),this._streamEnded=!1,this._dataEnded=!1,this._ended=!1,this._stream.seek(i).then((function(){u._readBytesAndWait()})).catch((function(i){u._onStreamError(i)}))}},{key:"_onStreamError",value:function _onStreamError(i){"AbortError"===i.name?this._log("i/o promise canceled; ignoring"):(this._log("i/o error: "+i),this._mediaError=new w.default(w.default.MEDIA_ERR_NETWORK,String(i)),this._state=W,this._stopPlayback())}},{key:"_seek",value:function _seek(i,u){var l=this;if(this._log("requested seek to "+i+", mode "+u),this.readyState==this.HAVE_NOTHING)return this._log("not yet loaded; saving seek position for later"),void(this._initialSeekTime=i);if(this._stream&&!this._stream.seekable)throw new Error("Cannot seek a non-seekable stream");if(this._codec&&!this._codec.seekable)throw new Error("Cannot seek in a non-seekable file");var c=function prepForSeek(c){l._stream&&l._stream.buffering&&l._stream.abort(),l._stream&&l._stream.seeking&&l._stream.abort(),l._actionQueue.splice(0,l._actionQueue.length),l._stopPlayback(),l._prebufferingAudio=!1,l._audioFeeder&&l._audioFeeder.flush(),l._state=H,l._seekTargetTime=i,l._seekMode=u,l._codec?l._codec.flush(c):c()};c((function(){l._isProcessing()||l._pingProcessing(0)})),this._actionQueue.push((function(){c((function(){l._doSeek(i)}))}))}},{key:"_doSeek",value:function _doSeek(i){var u=this;this._streamEnded=!1,this._dataEnded=!1,this._ended=!1,this._state=H,this._seekTargetTime=i,this._lastSeekPosition=-1,this._decodedFrames=[],this._pendingFrames=[],this._pendingFrame=0,this._pendingAudio=0,this._didSeek=!1,this._codec.seekToKeypoint(i,(function(l){if(l)return u._seekState=Q,u._fireEventAsync("seeking"),u._didSeek?void 0:void u._pingProcessing();u._codec.getKeypointOffset(i,(function(i){i>0?(u._seekState=Q,u._seekStream(i)):(u._seekState=X,u._startBisection(u._seekTargetTime)),u._fireEventAsync("seeking")}))}))}},{key:"_startBisection",value:function _startBisection(i){var u=this,l=Math.max(0,this._stream.length-65536);this._bisectTargetTime=i,this._seekBisector=new E.default({start:0,end:l,process:function process(i,l,c){return c!=u._lastSeekPosition&&(u._lastSeekPosition=c,u._codec.flush((function(){u._seekStream(c)})),!0)}}),this._seekBisector.start()}},{key:"_continueSeekedPlayback",value:function _continueSeekedPlayback(){var i=this;this._seekState=z,this._state=B,this._frameEndTimestamp=this._codec.frameTimestamp,this._audioEndTimestamp=this._codec.audioTimestamp,this._seekTargetTime=this._codec.hasAudio?this._codec.audioTimestamp:this._codec.frameTimestamp,this._initialPlaybackOffset=this._seekTargetTime;var u=function finishedSeeking(){i._lastTimeUpdate=i._seekTargetTime,i._fireEventAsync("timeupdate"),i._fireEventAsync("seeked"),i._isProcessing()||i._pingProcessing()};if(this._codec.hasVideo&&this._decodedFrames.length){var l=this._decodedFrames.shift();this._drawFrame(l.yCbCrBuffer),u()}else{if(this._codec.hasVideo&&this._codec.frameReady)return this._codec.decodeFrame((function(l){l&&i._drawFrame(i._codec.frameBuffer),u()})),void this._codec.sync();u()}}},{key:"_drawFrame",value:function _drawFrame(i){this._thumbnail&&(this.removeChild(this._thumbnail),this._thumbnail=null),this._frameSink.drawFrame(i)}},{key:"_doProcessLinearSeeking",value:function _doProcessLinearSeeking(){var i,u=this;if(i=this._codec.hasVideo?this._targetPerFrameTime/1e3:1/256,this._codec.hasVideo){if(this._pendingFrame)return;if(!this._codec.frameReady)return void this._codec.process((function(i){i?u._pingProcessing():u._streamEnded?(u._log("stream ended during linear seeking on video"),u._dataEnded=!0,u._continueSeekedPlayback()):u._readBytesAndWait()}));if(this._seekMode===Y&&this._codec.keyframeTimestamp==this._codec.frameTimestamp)return void this._continueSeekedPlayback();if(this._codec.frameTimestamp<=this._seekTargetTime){var l=this._codec.frameTimestamp;return this._pendingFrame++,this._pendingFrames.push({frameEndTimestamp:l}),this._decodedFrames.splice(0,this._decodedFrames.length),this._codec.decodeFrame((function(i){u._pendingFrame--,u._pendingFrames.shift(),u._decodedFrames.push({yCbCrBuffer:u._codec.frameBuffer,videoCpuTime:u._codec.videoCpuTime,frameEndTimestamp:l}),u._pingProcessing()})),void this._codec.sync()}if(!this._codec.hasAudio)return void this._continueSeekedPlayback()}if(this._codec.hasAudio){if(this._pendingAudio)return;return this._codec.audioReady?this._codec.audioTimestamp+i<this._seekTargetTime?void this._codec.decodeAudio((function(){u._pingProcessing()})):void this._continueSeekedPlayback():void this._codec.process((function(i){i?u._pingProcessing():u._streamEnded?(u._log("stream ended during linear seeking on audio"),u._dataEnded=!0,u._continueSeekedPlayback()):u._readBytesAndWait()}))}}},{key:"_doProcessBisectionSeek",value:function _doProcessBisectionSeek(){var i,u,l=this;if(this._codec.hasVideo)u=this._codec.frameTimestamp,i=this._targetPerFrameTime/1e3;else{if(!this._codec.hasAudio)throw new Error("Invalid seek state; no audio or video track available");u=this._codec.audioTimestamp,i=1/256}u<0?this._codec.process((function(i){if(i)l._pingProcessing();else if(l._streamEnded){if(l._log("stream ended during bisection seek"),!l._seekBisector.right())throw l._log("failed going back"),new Error("not sure what to do")}else l._readBytesAndWait()})):u-i/2>this._bisectTargetTime?this._seekBisector.left()||(this._log("close enough (left)"),this._seekTargetTime=u,this._continueSeekedPlayback()):u+i/2<this._bisectTargetTime?this._seekBisector.right()||(this._log("close enough (right)"),this._seekState=Q,this._pingProcessing()):this._seekState==X&&this._codec.hasVideo&&this._codec.keyframeTimestamp<this._codec.frameTimestamp?(this._log("finding the keypoint now"),this._seekState=K,this._startBisection(this._codec.keyframeTimestamp)):(this._log("straight seeking now"),this._seekState=Q,this._pingProcessing())}},{key:"_setupVideo",value:function _setupVideo(){this._targetPerFrameTime=this._videoInfo.fps>0?1e3/this._videoInfo.fps:16.667,this._canvas.width=this._videoInfo.displayWidth,this._canvas.height=this._videoInfo.displayHeight,OGVPlayer.styleManager.appendRule("."+this._instanceId,{width:this._videoInfo.displayWidth+"px",height:this._videoInfo.displayHeight+"px"});var i={};void 0!==this._options.webGL&&(i.webGL=this._options.webGL),this._options.forceWebGL&&(i.webGL="required"),this._frameSink=b.default.attach(this._canvas,i)}},{key:"_doProcessing",value:function _doProcessing(){if(this._didSeek&&(this._didSeek=!1),this._nextProcessingTimer=null,this._isProcessing(),this._depth>0)throw new Error("REENTRANCY FAIL: doProcessing recursing unexpectedly");var i=0;do{if(this._needProcessing=!1,this._depth++,this._doProcessingLoop(),this._depth--,this._needProcessing&&this._isProcessing())throw new Error("REENTRANCY FAIL: waiting on input or codec but asked to keep processing");++i>500&&(this._log("stuck in processing loop; breaking with timer"),this._needProcessing=0,this._pingProcessing(0))}while(this._needProcessing)}},{key:"_doProcessingLoop",value:function _doProcessingLoop(){if(this._actionQueue.length)this._actionQueue.shift()();else if(this._state==V)this._doProcessInitial();else if(this._state==R)this._doProcessSeekingEnd();else if(this._state==M)this._doProcessLoaded();else if(this._state==N)this._doProcessPreload();else if(this._state==B)this._doProcessReady();else if(this._state==H)this._doProcessSeeking();else if(this._state==j)this._doProcessPlay();else{if(this._state!=W)throw new Error("Unexpected OGVPlayer state "+this._state);this._doProcessError()}}},{key:"_doProcessInitial",value:function _doProcessInitial(){var i=this;if(this._codec.loadedMetadata){if(!this._codec.hasVideo&&!this._codec.hasAudio)throw new Error("No audio or video found, something is wrong");this._codec.hasAudio&&(this._audioInfo=this._codec.audioFormat),this._codec.hasVideo&&(this._videoInfo=this._codec.videoFormat,this._setupVideo()),isNaN(this._codec.duration)||(this._duration=this._codec.duration),null===this._duration&&this._stream.seekable&&"video/ogg"==this._detectedType?(this._state=R,this._lastSeenTimestamp=-1,this._codec.flush((function(){i._seekStream(Math.max(0,i._stream.length-131072))}))):(this._state=M,this._pingProcessing())}else this._codec.process((function(u){if(u)i._pingProcessing();else{if(i._streamEnded)throw new Error("end of file before headers found");i._log("reading more cause we are out of data"),i._readBytesAndWait()}}))}},{key:"_doProcessSeekingEnd",value:function _doProcessSeekingEnd(){var i=this;this._codec.frameReady?(this._log("saw frame with "+this._codec.frameTimestamp),this._lastSeenTimestamp=Math.max(this._lastSeenTimestamp,this._codec.frameTimestamp),this._codec.discardFrame((function(){i._pingProcessing()}))):this._codec.audioReady?(this._log("saw audio with "+this._codec.audioTimestamp),this._lastSeenTimestamp=Math.max(this._lastSeenTimestamp,this._codec.audioTimestamp),this._codec.discardAudio((function(){i._pingProcessing()}))):this._codec.process((function(u){u?i._pingProcessing():i._stream.eof?(i._log("seek-duration: we are at the end: "+i._lastSeenTimestamp),i._lastSeenTimestamp>0&&(i._duration=i._lastSeenTimestamp),i._state=M,i._codec.flush((function(){i._streamEnded=!1,i._dataEnded=!1,i._seekStream(0)}))):i._readBytesAndWait()}))}},{key:"_doProcessLoaded",value:function _doProcessLoaded(){this._state=N,this._fireEventAsync("loadedmetadata"),this._fireEventAsync("durationchange"),this._codec.hasVideo&&this._fireEventAsync("resize"),this._pingProcessing(0)}},{key:"_doProcessPreload",value:function _doProcessPreload(){var i=this;!this._codec.frameReady&&this._codec.hasVideo||!this._codec.audioReady&&this._codec.hasAudio?this._codec.process((function(u){u?i._pingProcessing():i._streamEnded?i._ended=!0:i._readBytesAndWait()})):(this._state=B,this._fireEventAsync("loadeddata"),this._pingProcessing())}},{key:"_doProcessReady",value:function _doProcessReady(){var i=this;if(this._log("initial seek to "+this._initialSeekTime),this._initialSeekTime>0){var u=this._initialSeekTime;this._initialSeekTime=0,this._log("initial seek to "+u),this._doSeek(u)}else if(this._paused)this._log("paused while in ready");else{var l=function finishStartPlaying(){i._log("finishStartPlaying"),i._state=j,i._lastFrameTimestamp=O(),i._codec.hasAudio&&i._audioFeeder?i._prebufferingAudio=!0:i._startPlayback(),i._pingProcessing(0),i._fireEventAsync("play"),i._fireEventAsync("playing")};!this._codec.hasAudio||this._audioFeeder||this._muted?l():(this._initAudioFeeder(),this._audioFeeder.waitUntilReady(l))}}},{key:"_doProcessSeeking",value:function _doProcessSeeking(){if(this._seekState==z)throw new Error("seeking in invalid state (not seeking?)");if(this._seekState==X)this._doProcessBisectionSeek();else if(this._seekState==K)this._doProcessBisectionSeek();else{if(this._seekState!=Q)throw new Error("Invalid seek state "+this._seekState);this._doProcessLinearSeeking()}}},{key:"_doProcessPlay",value:function _doProcessPlay(){var i=this,u=this._codec;if(this._paused)this._log("paused during playback; stopping loop");else if((!u.hasAudio||u.audioReady||this._pendingAudio||this._dataEnded)&&(!u.hasVideo||u.frameReady||this._pendingFrame||this._decodedFrames.length||this._dataEnded)){var l,c,h,p=null,m=0,g=!1,v=0;if(u.hasAudio&&this._audioFeeder?(p=this._audioFeeder.getPlaybackState(),m=this._getPlaybackTime(p),g=this._dataEnded&&0==this._audioFeeder.durationBuffered,this._prebufferingAudio&&(this._audioFeeder.durationBuffered>=2*this._audioFeeder.bufferThreshold&&(!u.hasVideo||this._decodedFrames.length>=this._framePipelineDepth)||this._dataEnded)&&(this._log("prebuffering audio done; buffered to "+this._audioFeeder.durationBuffered),this._startPlayback(m),this._prebufferingAudio=!1),p.dropped!=this._droppedAudio&&this._log("dropped "+(p.dropped-this._droppedAudio)),p.delayed!=this._delayedAudio&&this._log("delayed "+(p.delayed-this._delayedAudio)),this._droppedAudio=p.dropped,this._delayedAudio=p.delayed,(l=this._audioFeeder.durationBuffered<=2*this._audioFeeder.bufferThreshold)&&(this._codec.audioReady?this._pendingAudio>=this._audioPipelineDepth&&(this._log("audio decode disabled: "+this._pendingAudio+" packets in flight"),l=!1):l=!1)):(m=this._getPlaybackTime(),l=this._codec.audioReady&&this._audioEndTimestamp<m),this._codec.hasVideo){h=this._pendingFrame+this._decodedFrames.length<this._framePipelineDepth+this._frameParallelism&&this._codec.frameReady,(c=this._decodedFrames.length>0)&&(this._actualPerFrameTime=this._targetPerFrameTime-(v=1e3*(this._decodedFrames[0].frameEndTimestamp-m)));var _=this._targetPerFrameTime;if(this._prebufferingAudio)h&&this._log("decoding a frame during prebuffering"),c=!1;else if(c&&this._dataEnded&&g)this._log("audio timeline ended? ready to draw frame");else if(c&&-v>=_){for(var y=-1,b=0;b<this._decodedFrames.length-1;b++)this._decodedFrames[b].frameEndTimestamp<m&&(y=b-1);if(y>=0)for(;y-- >=0;){this._lateFrames++;var T=this._decodedFrames.shift();this._log("skipping already-decoded late frame at "+T.frameEndTimestamp),v=1e3*(T.frameEndTimestamp-m),this._frameEndTimestamp=T.frameEndTimestamp,this._actualPerFrameTime=this._targetPerFrameTime-v,this._framesProcessed++,T.dropped=!0,this._doFrameComplete(T)}var S=this._codec.nextKeyframeTimestamp;if(S>=0&&S!=this._codec.frameTimestamp&&m>=S-this._targetPerFrameTime/1e3*(this._framePipelineDepth+this._pendingFrame)){this._log("skipping late frame at "+this._decodedFrames[0].frameEndTimestamp+" vs "+m+", expect to see keyframe at "+S);for(var k=0;k<this._decodedFrames.length;k++){var E=this._decodedFrames[k];this._lateFrames++,this._framesProcessed++,this._frameEndTimestamp=E.frameEndTimestamp,this._actualPerFrameTime=this._targetPerFrameTime-(v=1e3*(E.frameEndTimestamp-m)),E.dropped=!0,this._doFrameComplete(E)}this._decodedFrames=[];for(var C=0;C<this._pendingFrames.length;C++){var w=this._pendingFrames[C];this._lateFrames++,this._framesProcessed++,this._frameEndTimestamp=w.frameEndTimestamp,this._actualPerFrameTime=this._targetPerFrameTime-(v=1e3*(w.frameEndTimestamp-m)),w.dropped=!0,this._doFrameComplete(w)}for(this._pendingFrames=[],this._pendingFrame=0;this._codec.frameReady&&this._codec.frameTimestamp<S;){var P={frameEndTimestamp:this._codec.frameTimestamp,dropped:!0};this._actualPerFrameTime=this._targetPerFrameTime-(v=1e3*(P.frameEndTimestamp-m)),this._lateFrames++,this._codec.discardFrame((function(){})),this._framesProcessed++,this._doFrameComplete(P)}return void(this._isProcessing()||this._pingProcessing())}}else c&&v<=4||(c=!1)}if(h){this._log("play loop: ready to decode frame; thread depth: "+this._pendingFrame+", have buffered: "+this._decodedFrames.length),0==this._videoInfo.fps&&this._codec.frameTimestamp-this._frameEndTimestamp>0&&(this._targetPerFrameTime=1e3*(this._codec.frameTimestamp-this._frameEndTimestamp)),this._totalFrameTime+=this._targetPerFrameTime,this._totalFrameCount++;var A=this._frameEndTimestamp=this._codec.frameTimestamp;this._pendingFrame++,this._pendingFrames.push({frameEndTimestamp:A});var x=this._pendingFrames,I=!1,O=this._time((function(){i._codec.decodeFrame((function(u){x===i._pendingFrames?(i._log("play loop callback: decoded frame"),i._pendingFrame--,i._pendingFrames.shift(),u?i._decodedFrames.push({yCbCrBuffer:i._codec.frameBuffer,videoCpuTime:i._codec.videoCpuTime,frameEndTimestamp:A}):i._log("Bad video packet or something"),i._codec.process((function(){i._isProcessing()||i._pingProcessing(I?void 0:0)}))):i._log("play loop callback after flush, discarding")}))}));this._pendingFrame&&(I=!0,this._proxyTime+=O,this._pingProcessing(),this._dataEnded&&this._codec.sync())}else if(l){this._log("play loop: ready for audio; depth: "+this._pendingAudio),this._pendingAudio++;var L=this._codec.audioTimestamp,D=this._time((function(){i._codec.decodeAudio((function(u){if(i._pendingAudio--,i._log("play loop callback: decoded audio"),i._audioEndTimestamp=L,u){var l=i._codec.audioBuffer;if(l&&(i._bufferTime+=i._time((function(){i._audioFeeder&&i._audioFeeder.bufferData(l)})),!i._codec.hasVideo))i._framesProcessed++,i._doFrameComplete({frameEndTimestamp:i._audioEndTimestamp})}i._isProcessing()||i._pingProcessing()}))}));this._pendingAudio&&(this._proxyTime+=D,this._codec.audioReady?this._pingProcessing():this._doProcessPlayDemux())}else if(c){this._log("play loop: ready to draw frame"),this._nextFrameTimer&&(clearTimeout(this._nextFrameTimer),this._nextFrameTimer=null),this._thumbnail&&(this.removeChild(this._thumbnail),this._thumbnail=null);var V=this._decodedFrames.shift();this._currentVideoCpuTime=V.videoCpuTime,this._drawingTime+=this._time((function(){i._drawFrame(V.yCbCrBuffer)})),this._framesProcessed++,this._doFrameComplete(V),this._pingProcessing()}else if(!this._decodedFrames.length||this._nextFrameTimer||this._prebufferingAudio)if(this._dataEnded&&!(this._pendingAudio||this._pendingFrame||this._decodedFrames.length)){this._log("play loop: playback reached end of data "+[this._pendingAudio,this._pendingFrame,this._decodedFrames.length]);var R=0;this._codec.hasAudio&&this._audioFeeder&&(R=1e3*this._audioFeeder.durationBuffered),R>0?(this._log("play loop: ending pending "+R+" ms"),this._pingProcessing(Math.max(0,R))):(this._log("play loop: ENDING NOW: playback time "+this._getPlaybackTime()+"; frameEndTimestamp: "+this._frameEndTimestamp),this._stopPlayback(),this._prebufferingAudio=!1,this._initialPlaybackOffset=Math.max(this._audioEndTimestamp,this._frameEndTimestamp),this._ended=!0,this._paused=!0,this._fireEventAsync("pause"),this._fireEventAsync("ended"))}else this._prebufferingAudio&&(u.hasVideo&&!u.frameReady||u.hasAudio&&!u.audioReady)?(this._log("play loop: prebuffering demuxing"),this._doProcessPlayDemux()):this._log("play loop: waiting on async/timers");else{var M=v;this._log("play loop: setting a timer for drawing "+M),this._nextFrameTimer=setTimeout((function(){i._nextFrameTimer=null,i._pingProcessing()}),M)}}else this._log("play loop: demuxing"),this._doProcessPlayDemux()}},{key:"_doProcessPlayDemux",value:function _doProcessPlayDemux(){var i=this,u=this._codec.frameReady,l=this._codec.audioReady;this._codec.process((function(c){i._codec.frameReady&&!u||i._codec.audioReady&&!l?(i._log("demuxer has packets"),i._pingProcessing()):c?(i._log("demuxer processing to find more packets"),i._pingProcessing()):(i._log("demuxer ran out of data"),i._streamEnded?(i._log("demuxer reached end of data stream"),i._dataEnded=!0,i._pingProcessing()):(i._log("demuxer loading more data"),i._readBytesAndWait()))}))}},{key:"_doProcessError",value:function _doProcessError(){}},{key:"_isProcessing",value:function _isProcessing(){return this._stream&&(this._stream.buffering||this._stream.seeking)||this._codec&&this._codec.processing}},{key:"_readBytesAndWait",value:function _readBytesAndWait(){var i=this;this._stream.buffering||this._stream.seeking?this._log("readBytesAndWait during i/o"):this._stream.read(32768).then((function(u){i._log("got input "+[u.byteLength]),u.byteLength&&i._actionQueue.push((function(){i._codec.receiveInput(u,(function(){i._pingProcessing()}))})),i._stream.eof&&(i._log("stream is at end!"),i._streamEnded=!0),i._isProcessing()||i._pingProcessing()})).catch((function(u){i._onStreamError(u)}))}},{key:"_pingProcessing",value:function _pingProcessing(){var i=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(this._stream&&this._stream.waiting)this._log("waiting on input");else{this._nextProcessingTimer&&(this._log("canceling old processing timer"),clearTimeout(this._nextProcessingTimer),this._nextProcessingTimer=null);u>-1/256?this._nextProcessingTimer=setTimeout((function(){i._pingProcessing()}),u):this._depth?this._needProcessing=!0:this._doProcessing()}}},{key:"_startProcessingVideo",value:function _startProcessingVideo(i){var u=this;if(!this._started&&!this._codec){this._framesProcessed=0,this._bufferTime=0,this._drawingTime=0,this._proxyTime=0,this._started=!0,this._ended=!1;var l={base:this._options.base,worker:this._enableWorker,threading:this._enableThreading,simd:this._enableSIMD};this._detectedType&&(l.type=this._detectedType),this._codec=new x.default(l),this._lastVideoCpuTime=0,this._lastAudioCpuTime=0,this._lastDemuxerCpuTime=0,this._lastBufferTime=0,this._lastDrawingTime=0,this._lastProxyTime=0,this._lastFrameVideoCpuTime=0,this._lastFrameAudioCpuTime=0,this._lastFrameDemuxerCpuTime=0,this._lastFrameBufferTime=0,this._lastFrameProxyTime=0,this._lastFrameDrawingTime=0,this._currentVideoCpuTime=0,this._codec.onseek=function(i){u._didSeek=!0,u._stream&&u._seekStream(i)},this._codec.init((function(){u._codec.receiveInput(i,(function(){u._readBytesAndWait()}))}))}}},{key:"_loadCodec",value:function _loadCodec(i){var u=this;this._stream.read(1024).then((function(l){var c=new Uint8Array(l);u._detectedType=c.length>4&&c[0]=="O".charCodeAt(0)&&c[1]=="g".charCodeAt(0)&&c[2]=="g".charCodeAt(0)&&c[3]=="S".charCodeAt(0)?"video/ogg":c.length>4&&26==c[0]&&69==c[1]&&223==c[2]&&163==c[3]?"video/webm":"video/ogg",i(l)}))}},{key:"_prepForLoad",value:function _prepForLoad(i){var u=this;this._stopVideo(),this._currentSrc="",this._loading=!0,this._actionQueue.push((function(){i&&"none"===u.preload?u._loading=!1:function doLoad(){u._stream=u._options.stream?u._options.stream:new T.default({url:u.src,cacheSize:16777216,progressive:!1}),u._stream.load().then((function(){u._loading=!1,u._currentSrc=u.src,u._byteLength=u._stream.seekable?u._stream.length:0;var i=u._stream.headers["x-content-duration"];"string"==typeof i&&(u._duration=parseFloat(i)),u._loadCodec((function(i){u._startProcessingVideo(i)}))})).catch((function(i){u._onStreamError(i)}))}()})),this._pingProcessing(0)}},{key:"load",value:function load(){this._prepForLoad()}},{key:"canPlayType",value:function canPlayType(i){var u=new P.default(i);function checkTypes(i){if(u.codecs){var l=0,c=0;return u.codecs.forEach((function(u){i.indexOf(u)>=0?l++:c++})),0===l||c>0?"":"probably"}return"maybe"}return"ogg"!==u.minor||"audio"!==u.major&&"video"!==u.major&&"application"!==u.major?"webm"!==u.minor||"audio"!==u.major&&"video"!==u.major?"":checkTypes(["vorbis","opus","vp8","vp9"]):checkTypes(["vorbis","opus","theora"])}},{key:"play",value:function play(){this._muted||this._options.audioContext||OGVPlayer.initSharedAudioContext(),this._paused&&(this._startedPlaybackInDocument=document.body.contains(this),this._paused=!1,this._state==H||(this._started&&this._codec&&this._codec.loadedMetadata?(this._ended&&this._stream&&this._byteLength?(this._log(".play() starting over after end"),this._seek(0)):this._log(".play() while already started"),this._state=B,this._isProcessing()||this._pingProcessing()):this._loading?this._log(".play() while loading"):(this._log(".play() before started"),this._stream||this.load())))}},{key:"getPlaybackStats",value:function getPlaybackStats(){return{targetPerFrameTime:this._targetPerFrameTime,framesProcessed:this._framesProcessed,videoBytes:this._codec?this._codec.videoBytes:0,audioBytes:this._codec?this._codec.audioBytes:0,playTime:this._playTime,demuxingTime:this._codec?this._codec.demuxerCpuTime-this._lastDemuxerCpuTime:0,videoDecodingTime:this._codec?this._codec.videoCpuTime-this._lastVideoCpuTime:0,audioDecodingTime:this._codec?this._codec.audioCpuTime-this._lastAudioCpuTime:0,bufferTime:this._bufferTime-this._lastBufferTime,drawingTime:this._drawingTime-this._lastDrawingTime,proxyTime:this._proxyTime-this._lastProxyTime,droppedAudio:this._droppedAudio,delayedAudio:this._delayedAudio,jitter:this._totalJitter/this._framesProcessed,lateFrames:this._lateFrames}}},{key:"resetPlaybackStats",value:function resetPlaybackStats(){this._framesProcessed=0,this._playTime=0,this._codec&&(this._lastDemuxerCpuTime=this._codec.demuxerCpuTime,this._lastVideoCpuTime=this._codec.videoCpuTime,this._lastAudioCpuTime=this._codec.audioCpuTime,this._codec.videoBytes=0,this._codec.audioBytes=0),this._lastBufferTime=this._bufferTime,this._lastDrawingTime=this._drawingTime,this._lastProxyTime=this._proxyTime,this._totalJitter=0,this._totalFrameTime=0,this._totalFrameCount=0}},{key:"getVideoFrameSink",value:function getVideoFrameSink(){return this._frameSink}},{key:"getCanvas",value:function getCanvas(){return this._canvas}},{key:"getVideo",value:function getVideo(){return null}},{key:"pause",value:function pause(){this._paused||(this._nextProcessingTimer&&(clearTimeout(this._nextProcessingTimer),this._nextProcessingTimer=null),this._stopPlayback(),this._prebufferingAudio=!1,this._paused=!0,this._fireEvent("pause"))}},{key:"stop",value:function stop(){this._stopVideo(),this._paused=!0}},{key:"fastSeek",value:function fastSeek(i){this._seek(+i,Y)}}],[{key:"initSharedAudioContext",value:function initSharedAudioContext(){var i=document.createElement("audio");i.src=I.default,i.play(),S.default.initSharedAudioContext()}}]),OGVPlayer}(OGVJSElement);(0,C.default)($,D),$.instanceCount=0,$.styleManager=new function StyleManager(){var i=document.createElement("style");i.type="text/css",i.textContent="ogvjs { display: inline-block; position: relative; -webkit-user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); ",document.head.appendChild(i);var u=i.sheet;this.appendRule=function(i,l){var c=[];for(var h in l)l.hasOwnProperty(h)&&c.push(h+":"+l[h]);var p=i+"{"+c.join(";")+"}";u.insertRule(p,u.cssRules.length-1)}},u.default=$},580:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913));u.default=function OGVProxyClass(i){return function(){function _class(u,l,c){var p=this;for(var m in(0,h.default)(this,_class),c=c||{},this.worker=u,this.transferables=function(){var i=new ArrayBuffer(1024),l=new Uint8Array(i);try{return u.postMessage({action:"transferTest",bytes:l},[i]),!i.byteLength}catch(i){return!1}}(),i)i.hasOwnProperty(m)&&(this[m]=i[m]);this.processingQueue=0,Object.defineProperty(this,"processing",{get:function get(){return this.processingQueue>0}}),this.messageCount=0,this.pendingCallbacks={},this.worker.addEventListener("message",(function(i){p.handleMessage(i)})),this.proxy("construct",[l,c],(function(){}))}return(0,p.default)(_class,[{key:"proxy",value:function proxy(i,u,l){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!this.worker)throw'Tried to call "'+i+'" method on closed proxy object';var h="callback-"+ ++this.messageCount+"-"+i;l&&(this.pendingCallbacks[h]=l);var p={action:i,callbackId:h,args:u||[]};this.processingQueue++,this.transferables?this.worker.postMessage(p,c):this.worker.postMessage(p)}},{key:"terminate",value:function terminate(){this.worker&&(this.worker.terminate(),this.worker=null,this.processingQueue=0,this.pendingCallbacks={})}},{key:"handleMessage",value:function handleMessage(i){if(this.processingQueue--,"callback"===i.data.action){var u=i.data,l=u.callbackId,c=u.args,h=this.pendingCallbacks[l];if(u.props)for(var p in u.props)u.props.hasOwnProperty(p)&&(this[p]=u.props[p]);h&&(delete this.pendingCallbacks[l],h.apply(this,c))}}}]),_class}()}},168:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=function(){function OGVTimeRanges(i){(0,h.default)(this,OGVTimeRanges),this._ranges=i,this.length=i.length}return(0,p.default)(OGVTimeRanges,[{key:"start",value:function start(i){if(i<0||i>this.length||i!==(0|i))throw new RangeError("Invalid index");return this._ranges[i][0]}},{key:"end",value:function end(i){if(i<0||i>this.length||i!==(0|i))throw new RangeError("Invalid index");return this._ranges[i][1]}}]),OGVTimeRanges}();u.default=m},625:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(575)),p=c(l(913)),m=c(l(964));function _arrayLikeToArray(i,u){(null==u||u>i.length)&&(u=i.length);for(var l=0,c=new Array(u);l<u;l++)c[l]=i[l];return c}var g=function(){function OGVWrapperCodec(i){return(0,h.default)(this,OGVWrapperCodec),this.options=i||{},this.demuxer=null,this.videoDecoder=null,this.audioDecoder=null,this.flushIter=0,this.loadedMetadata=!1,this.processing=!1,Object.defineProperties(this,{duration:{get:function get(){return this.loadedMetadata?this.demuxer.duration:NaN}},hasAudio:{get:function get(){return this.loadedMetadata&&!!this.audioDecoder}},audioReady:{get:function get(){return this.hasAudio&&this.demuxer.audioReady}},audioTimestamp:{get:function get(){return this.demuxer.audioTimestamp}},audioFormat:{get:function get(){return this.hasAudio?this.audioDecoder.audioFormat:null}},audioBuffer:{get:function get(){return this.hasAudio?this.audioDecoder.audioBuffer:null}},hasVideo:{get:function get(){return this.loadedMetadata&&!!this.videoDecoder}},frameReady:{get:function get(){return this.hasVideo&&this.demuxer.frameReady}},frameTimestamp:{get:function get(){return this.demuxer.frameTimestamp}},keyframeTimestamp:{get:function get(){return this.demuxer.keyframeTimestamp}},nextKeyframeTimestamp:{get:function get(){return this.demuxer.nextKeyframeTimestamp}},videoFormat:{get:function get(){return this.hasVideo?this.videoDecoder.videoFormat:null}},frameBuffer:{get:function get(){return this.hasVideo?this.videoDecoder.frameBuffer:null}},seekable:{get:function get(){return this.demuxer.seekable}},demuxerCpuTime:{get:function get(){return this.demuxer?this.demuxer.cpuTime:0}},audioCpuTime:{get:function get(){return this.audioDecoder?this.audioDecoder.cpuTime:0}},videoCpuTime:{get:function get(){return this.videoDecoder?this.videoDecoder.cpuTime:0}}}),this.loadedDemuxerMetadata=!1,this.loadedAudioMetadata=!1,this.loadedVideoMetadata=!1,this.loadedAllMetadata=!1,this.onseek=null,this.videoBytes=0,this.audioBytes=0,this}return(0,p.default)(OGVWrapperCodec,[{key:"flushSafe",value:function flushSafe(i){var u=this,l=this.flushIter;return function(c){u.flushIter<=l&&i(c)}}},{key:"init",value:function init(i){var u=this;this.processing=!0,m.default.loadClass("video/webm"===this.options.type||"audio/webm"===this.options.type?"OGVDemuxerWebMW":"OGVDemuxerOggW",(function(l){l().then((function(l){u.demuxer=l,l.onseek=function(i){u.onseek&&u.onseek(i)},l.init((function(){u.processing=!1,i()}))}))}))}},{key:"close",value:function close(){this.demuxer&&(this.demuxer.close(),this.demuxer=null),this.videoDecoder&&(this.videoDecoder.close(),this.videoDecoder=null),this.audioDecoder&&(this.audioDecoder.close(),this.audioDecoder=null)}},{key:"receiveInput",value:function receiveInput(i,u){this.demuxer.receiveInput(i,u)}},{key:"process",value:function process(i){var u=this;if(this.processing)throw new Error("reentrancy fail on OGVWrapperCodec.process");this.processing=!0;var l=function finish(l){u.processing=!1,i(l)},c=function doProcessData(){u.demuxer.process(l)};this.demuxer.loadedMetadata&&!this.loadedDemuxerMetadata?this.loadAudioCodec((function(){u.loadVideoCodec((function(){u.loadedDemuxerMetadata=!0,u.loadedAudioMetadata=!u.audioDecoder,u.loadedVideoMetadata=!u.videoDecoder,u.loadedAllMetadata=u.loadedAudioMetadata&&u.loadedVideoMetadata,l(!0)}))})):this.loadedDemuxerMetadata&&!this.loadedAudioMetadata?this.audioDecoder.loadedMetadata?(this.loadedAudioMetadata=!0,this.loadedAllMetadata=this.loadedAudioMetadata&&this.loadedVideoMetadata,l(!0)):this.demuxer.audioReady?this.demuxer.dequeueAudioPacket((function(i,c){u.audioBytes+=i.byteLength,u.audioDecoder.processHeader(i,(function(i){l(!0)}))})):c():this.loadedAudioMetadata&&!this.loadedVideoMetadata?this.videoDecoder.loadedMetadata?(this.loadedVideoMetadata=!0,this.loadedAllMetadata=this.loadedAudioMetadata&&this.loadedVideoMetadata,l(!0)):this.demuxer.frameReady?(this.processing=!0,this.demuxer.dequeueVideoPacket((function(i){u.videoBytes+=i.byteLength,u.videoDecoder.processHeader(i,(function(){l(!0)}))}))):c():this.loadedVideoMetadata&&!this.loadedMetadata&&this.loadedAllMetadata?(this.loadedMetadata=!0,l(!0)):!this.loadedMetadata||this.hasAudio&&!this.demuxer.audioReady||this.hasVideo&&!this.demuxer.frameReady?c():l(!0)}},{key:"decodeFrame",value:function decodeFrame(i){var u=this,l=this.flushSafe(i),c=this.frameTimestamp,h=this.keyframeTimestamp;this.demuxer.dequeueVideoPacket((function(i){u.videoBytes+=i.byteLength,u.videoDecoder.processFrame(i,(function(i){var p=u.videoDecoder.frameBuffer;p&&(p.timestamp=c,p.keyframeTimestamp=h),l(i)}))}))}},{key:"decodeAudio",value:function decodeAudio(i){var u=this,l=this.flushSafe(i);this.demuxer.dequeueAudioPacket((function(i,c){u.audioBytes+=i.byteLength,u.audioDecoder.processAudio(i,(function(i){if(c){var h,p=[],m=function _createForOfIteratorHelper(i,u){var l="undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(!l){if(Array.isArray(i)||(l=function _unsupportedIterableToArray(i,u){if(i){if("string"==typeof i)return _arrayLikeToArray(i,u);var l=Object.prototype.toString.call(i).slice(8,-1);return"Object"===l&&i.constructor&&(l=i.constructor.name),"Map"===l||"Set"===l?Array.from(i):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?_arrayLikeToArray(i,u):void 0}}(i))||u&&i&&"number"==typeof i.length){l&&(i=l);var c=0,h=function F(){};return{s:h,n:function n(){return c>=i.length?{done:!0}:{done:!1,value:i[c++]}},e:function e(i){throw i},f:h}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,m=!0,g=!1;return{s:function s(){l=l.call(i)},n:function n(){var i=l.next();return m=i.done,i},e:function e(i){g=!0,p=i},f:function f(){try{m||null==l.return||l.return()}finally{if(g)throw p}}}}(u.audioDecoder.audioBuffer);try{for(m.s();!(h=m.n()).done;){var g=h.value,v=Math.round(c*u.audioFormat.rate/1e9);p.push(v>0?g.subarray(0,g.length-Math.min(v,g.length)):g.subarray(Math.min(Math.abs(v),g.length),g.length))}}catch(i){m.e(i)}finally{m.f()}u.audioDecoder.audioBuffer=p}return l(i)}))}))}},{key:"discardFrame",value:function discardFrame(i){var u=this;this.demuxer.dequeueVideoPacket((function(l){u.videoBytes+=l.byteLength,i()}))}},{key:"discardAudio",value:function discardAudio(i){var u=this;this.demuxer.dequeueAudioPacket((function(l,c){u.audioBytes+=l.byteLength,i()}))}},{key:"flush",value:function flush(i){this.flushIter++,this.demuxer.flush(i)}},{key:"sync",value:function sync(){this.videoDecoder&&this.videoDecoder.sync()}},{key:"recycleFrame",value:function recycleFrame(i){this.videoDecoder&&this.videoDecoder.recycleFrame(i)}},{key:"getKeypointOffset",value:function getKeypointOffset(i,u){this.demuxer.getKeypointOffset(i,u)}},{key:"seekToKeypoint",value:function seekToKeypoint(i,u){this.demuxer.seekToKeypoint(i,this.flushSafe(u))}},{key:"loadAudioCodec",value:function loadAudioCodec(i){var u=this;if(this.demuxer.audioCodec){var l={vorbis:"OGVDecoderAudioVorbisW",opus:"OGVDecoderAudioOpusW"}[this.demuxer.audioCodec];this.processing=!0,m.default.loadClass(l,(function(l){var c={};u.demuxer.audioFormat&&(c.audioFormat=u.demuxer.audioFormat),l(c).then((function(l){u.audioDecoder=l,l.init((function(){u.loadedAudioMetadata=l.loadedMetadata,u.processing=!1,i()}))}))}),{worker:this.options.worker})}else i()}},{key:"loadVideoCodec",value:function loadVideoCodec(i){var u=this;if(this.demuxer.videoCodec){var l=!!this.options.simd,c=!!this.options.threading,h={theora:"OGVDecoderVideoTheoraW",vp8:c?"OGVDecoderVideoVP8MTW":"OGVDecoderVideoVP8W",vp9:c?l?"OGVDecoderVideoVP9SIMDMTW":"OGVDecoderVideoVP9MTW":l?"OGVDecoderVideoVP9SIMDW":"OGVDecoderVideoVP9W",av1:c?l?"OGVDecoderVideoAV1SIMDMTW":"OGVDecoderVideoAV1MTW":l?"OGVDecoderVideoAV1SIMDW":"OGVDecoderVideoAV1W"}[this.demuxer.videoCodec];this.processing=!0,m.default.loadClass(h,(function(l){var h={};u.demuxer.videoFormat&&(h.videoFormat=u.demuxer.videoFormat),c&&delete window.ENVIRONMENT_IS_PTHREAD,l(h).then((function(l){u.videoDecoder=l,l.init((function(){u.loadedVideoMetadata=l.loadedMetadata,u.processing=!1,i()}))}))}),{worker:this.options.worker&&!this.options.threading})}else i()}}]),OGVWrapperCodec}();u.default=g},539:(i,u,l)=>{"use strict";var c=l(318);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var h=c(l(8)),p=c(l(575)),m=c(l(913)),g=new(function(){function WebAssemblyChecker(){(0,p.default)(this,WebAssemblyChecker),this.tested=!1,this.testResult=void 0}return(0,m.default)(WebAssemblyChecker,[{key:"wasmSupported",value:function wasmSupported(){if(!this.tested){try{this.testResult="object"===("undefined"==typeof WebAssembly?"undefined":(0,h.default)(WebAssembly))&&function testSafariWebAssemblyBug(){var i=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),u=new WebAssembly.Module(i);return 0!==new WebAssembly.Instance(u,{}).exports.test(4)}()}catch(i){console.log("Exception while testing WebAssembly",i),this.testResult=!1}this.tested=!0}return this.testResult}}]),WebAssemblyChecker}());u.default=g},309:(i,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;u.default=function extend(i,u){for(var l in u)u.hasOwnProperty(l)&&(i[l]=u[l])}},431:(i,u,l)=>{"use strict";var c=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}(),h=function get(i,u,l){null===i&&(i=Function.prototype);var c=Object.getOwnPropertyDescriptor(i,u);if(void 0===c){var h=Object.getPrototypeOf(i);return null===h?void 0:get(h,u,l)}if("value"in c)return c.value;var p=c.get;return void 0!==p?p.call(l):void 0};var p=l(828),m="arraybuffer",g=function(i){function ArrayBufferBackend(){return function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,ArrayBufferBackend),function _possibleConstructorReturn(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?i:u}(this,(ArrayBufferBackend.__proto__||Object.getPrototypeOf(ArrayBufferBackend)).apply(this,arguments))}return function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}(ArrayBufferBackend,i),c(ArrayBufferBackend,[{key:"initXHR",value:function initXHR(){h(ArrayBufferBackend.prototype.__proto__||Object.getPrototypeOf(ArrayBufferBackend.prototype),"initXHR",this).call(this),this.xhr.responseType=m}},{key:"onXHRProgress",value:function onXHRProgress(){}},{key:"onXHRLoad",value:function onXHRLoad(){var i=this.xhr.response;this.bytesRead+=i.byteLength,this.emit("buffer",i),h(ArrayBufferBackend.prototype.__proto__||Object.getPrototypeOf(ArrayBufferBackend.prototype),"onXHRLoad",this).call(this)}}]),ArrayBufferBackend}(p);g.supported=function(){try{var i=new XMLHttpRequest;return i.responseType=m,i.responseType===m}catch(i){return!1}},i.exports=g},306:(i,u,l)=>{"use strict";var c=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}();function getXHRRangeMatches(i){var u=i.getResponseHeader("Content-Range");return u&&u.match(/^bytes (\d+)-(\d+)\/(\d+)/)}var h=function(i){function Backend(i){var u=i.url,l=i.offset,c=i.length,h=i.cachever,p=void 0===h?0:h;!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,Backend);var m=function _possibleConstructorReturn(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?i:u}(this,(Backend.__proto__||Object.getPrototypeOf(Backend)).call(this));return m.url=u,m.offset=l,m.length=c,m.cachever=p,m.loaded=!1,m.seekable=!1,m.headers={},m.eof=!1,m.bytesRead=0,m.xhr=new XMLHttpRequest,m}return function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}(Backend,i),c(Backend,[{key:"load",value:function load(){var i=this;return new Promise((function(u,l){var c=null;i._onAbort=function(i){c(),l(i)};var h=function checkOpen(){if(2==i.xhr.readyState){if(206==i.xhr.status){var h=function getXHRRangeStart(i){var u=getXHRRangeMatches(i);return u?parseInt(u[1],10):0}(i.xhr);if(i.offset!=h)return console.log("Expected start at "+i.offset+" but got "+h+"; working around Safari range caching bug: https://bugs.webkit.org/show_bug.cgi?id=82672"),i.cachever++,i.emit("cachever"),i.abort(),c(),void i.load().then(u).catch(l);i.seekable=!0}i.xhr.status>=200&&i.xhr.status<300?(i.length=function getXHRLength(i){if(206==i.status)return function getXHRRangeTotal(i){var u=getXHRRangeMatches(i);return u?parseInt(u[3],10):-1}(i);var u=i.getResponseHeader("Content-Length");return null===u||""===u?-1:parseInt(u,10)}(i.xhr),i.headers=function getXHRHeaders(i){var u={};return i.getAllResponseHeaders().split(/\r?\n/).forEach((function(i){var l=i.split(/:\s*/,2);l.length>1&&(u[l[0].toLowerCase()]=l[1])})),u}(i.xhr),i.onXHRStart()):(c(),l(new Error("HTTP error "+i.xhr.status)))}},p=function checkError(){c(),l(new Error("network error"))},m=function checkBackendOpen(){c(),u()};c=function oncomplete(){i.xhr.removeEventListener("readystatechange",h),i.xhr.removeEventListener("error",p),i.off("open",m),i._onAbort=null},i.initXHR(),i.xhr.addEventListener("readystatechange",h),i.xhr.addEventListener("error",p),i.on("open",m),i.xhr.send()}))}},{key:"bufferToOffset",value:function bufferToOffset(i){return Promise.reject(new Error("abstract"))}},{key:"abort",value:function abort(){if(this.xhr.abort(),this._onAbort){var i=this._onAbort;this._onAbort=null;var u=new Error("Aborted");u.name="AbortError",i(u)}}},{key:"initXHR",value:function initXHR(){var i=this.url;this.cachever&&(i+="?buggy_cachever="+this.cachever),this.xhr.open("GET",i);var u=null;(this.offset||this.length)&&(u="bytes="+this.offset+"-"),this.length&&(u+=this.offset+this.length-1),null!==u&&this.xhr.setRequestHeader("Range",u)}},{key:"onXHRStart",value:function onXHRStart(){throw new Error("abstract")}}]),Backend}(l(566));i.exports=h},810:(i,u,l)=>{"use strict";var c=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}(),h=function get(i,u,l){null===i&&(i=Function.prototype);var c=Object.getOwnPropertyDescriptor(i,u);if(void 0===c){var h=Object.getPrototypeOf(i);return null===h?void 0:get(h,u,l)}if("value"in c)return c.value;var p=c.get;return void 0!==p?p.call(l):void 0};var p=function(i){function BinaryStringBackend(){return function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,BinaryStringBackend),function _possibleConstructorReturn(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?i:u}(this,(BinaryStringBackend.__proto__||Object.getPrototypeOf(BinaryStringBackend)).apply(this,arguments))}return function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}(BinaryStringBackend,i),c(BinaryStringBackend,[{key:"initXHR",value:function initXHR(){h(BinaryStringBackend.prototype.__proto__||Object.getPrototypeOf(BinaryStringBackend.prototype),"initXHR",this).call(this),this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")}},{key:"onXHRProgress",value:function onXHRProgress(){var i=this.xhr.responseText.slice(this.bytesRead);i.length>0&&(this.bytesRead+=i.length,this.emit("buffer",i))}},{key:"onXHRLoad",value:function onXHRLoad(){this.onXHRProgress(),h(BinaryStringBackend.prototype.__proto__||Object.getPrototypeOf(BinaryStringBackend.prototype),"onXHRLoad",this).call(this)}}]),BinaryStringBackend}(l(828));p.supported=function(){try{return!!(new XMLHttpRequest).overrideMimeType}catch(i){return!1}},i.exports=p},828:(i,u,l)=>{"use strict";var c=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}(),h=function get(i,u,l){null===i&&(i=Function.prototype);var c=Object.getOwnPropertyDescriptor(i,u);if(void 0===c){var h=Object.getPrototypeOf(i);return null===h?void 0:get(h,u,l)}if("value"in c)return c.value;var p=c.get;return void 0!==p?p.call(l):void 0};var p=function(i){function DownloadBackend(){return function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,DownloadBackend),function _possibleConstructorReturn(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?i:u}(this,(DownloadBackend.__proto__||Object.getPrototypeOf(DownloadBackend)).apply(this,arguments))}return function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}(DownloadBackend,i),c(DownloadBackend,[{key:"bufferToOffset",value:function bufferToOffset(i){var u=this;return new Promise((function(l,c){if(u.eof||u.offset>=i)l();else{var h=null;u._onAbort=function(i){h(),c(i)};var p=function checkBuffer(){u.offset>=i&&!u.eof&&(h(),l())},m=function checkDone(){h(),l()},g=function checkError(){h(),c(new Error("error streaming"))};h=function oncomplete(){u.buffering=!1,u.off("buffer",p),u.off("done",m),u.off("error",g),u._onAbort=null},u.buffering=!0,u.on("buffer",p),u.on("done",m),u.on("error",g)}}))}},{key:"initXHR",value:function initXHR(){h(DownloadBackend.prototype.__proto__||Object.getPrototypeOf(DownloadBackend.prototype),"initXHR",this).call(this)}},{key:"onXHRStart",value:function onXHRStart(){var i=this;this.xhr.addEventListener("progress",(function(){return i.onXHRProgress()})),this.xhr.addEventListener("error",(function(){return i.onXHRError()})),this.xhr.addEventListener("load",(function(){return i.onXHRLoad()})),this.emit("open")}},{key:"onXHRProgress",value:function onXHRProgress(){throw new Error("abstract")}},{key:"onXHRError",value:function onXHRError(){this.emit("error")}},{key:"onXHRLoad",value:function onXHRLoad(){this.eof=!0,this.emit("done")}}]),DownloadBackend}(l(306));i.exports=p},761:(i,u,l)=>{"use strict";var c=l(855),h=l(810),p=l(431),m=null;i.exports=function instantiate(i){if(!1===i.progressive)return new p(i);if(m||(m=function autoselect(){return c.supported()?c:h.supported()?h:null}()),!m)throw new Error("No supported backend class");return new m(i)}},855:(i,u,l)=>{"use strict";var c=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}(),h=function get(i,u,l){null===i&&(i=Function.prototype);var c=Object.getOwnPropertyDescriptor(i,u);if(void 0===c){var h=Object.getPrototypeOf(i);return null===h?void 0:get(h,u,l)}if("value"in c)return c.value;var p=c.get;return void 0!==p?p.call(l):void 0};var p=l(828),m="moz-chunked-arraybuffer",g=function(i){function MozChunkedBackend(){return function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,MozChunkedBackend),function _possibleConstructorReturn(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||"object"!=typeof u&&"function"!=typeof u?i:u}(this,(MozChunkedBackend.__proto__||Object.getPrototypeOf(MozChunkedBackend)).apply(this,arguments))}return function _inherits(i,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}(MozChunkedBackend,i),c(MozChunkedBackend,[{key:"initXHR",value:function initXHR(){h(MozChunkedBackend.prototype.__proto__||Object.getPrototypeOf(MozChunkedBackend.prototype),"initXHR",this).call(this),this.xhr.responseType=m}},{key:"onXHRProgress",value:function onXHRProgress(){var i=this.xhr.response;this.bytesRead+=i.byteLength,this.emit("buffer",i)}}]),MozChunkedBackend}(p);g.supported=function(){try{var i=new XMLHttpRequest;return i.responseType=m,i.responseType===m}catch(i){return!1}},i.exports=g},503:i=>{"use strict";var u=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}();var l=function(){function CacheItem(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=i.buffer,l=void 0===u?void 0:u,c=i.string,h=void 0===c?void 0:c,p=i.start,m=void 0===p?0:p,g=i.end,v=void 0===g?m+(l?l.byteLength:h?h.length:0):g,_=i.prev,y=void 0===_?null:_,b=i.next,T=void 0===b?null:b,S=i.eof,k=void 0!==S&&S,E=i.empty,C=void 0===E?!(l||h):E,w=i.timestamp,P=void 0===w?Date.now():w;(function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,CacheItem),this.start=m,this.end=v,this.prev=y,this.next=T,this.eof=k,this.empty=C,this.timestamp=P,this.buffer=l,this.string=h,Object.defineProperty(this,"length",{get:function get(){return this.end-this.start}})}return u(CacheItem,[{key:"contains",value:function contains(i){return i>=this.start&&(i<this.end||this.eof)}},{key:"readBytes",value:function readBytes(i,u,l){var c=u-this.start,h=l-u;if(this.buffer){var p=new Uint8Array(this.buffer,c,h);i.set(p)}else{if(!this.string)throw new Error("invalid state");for(var m=this.string,g=0;g<h;g++)i[g]=m.charCodeAt(c+g)}this.timestamp=Date.now()}},{key:"split",value:function split(i){if(!this.empty||!this.contains(i))throw new Error("invalid split");var u=new CacheItem({start:this.start,end:i}),l=new CacheItem({start:i,end:this.eof?i:this.end,eof:this.eof});return u.next=l,l.prev=u,[u,l]}},{key:"first",value:function first(i){for(var u=this;u;u=u.next)if(i(u))return u;return null}},{key:"last",value:function last(i){for(var last=null,u=this;u&&i(u);u=u.next)last=u;return last}}]),CacheItem}();i.exports=l},91:(i,u,l)=>{"use strict";var c=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}();var h=l(503),p=function(){function CachePool(){var i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cacheSize,u=void 0===i?0:i;!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,CachePool);var l=new h({eof:!0});this.head=l,this.tail=l,this.readOffset=0,this.readCursor=l,this.writeOffset=0,this.writeCursor=l,this.cacheSize=u}return c(CachePool,[{key:"bytesReadable",value:function bytesReadable(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,u=this.readOffset,l=this.readCursor.last((function(l){return!l.empty&&l.start<=u+i}));return l?Math.min(i,l.end-u):0}},{key:"bytesWritable",value:function bytesWritable(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,u=this.writeOffset,l=this.writeCursor;if(l.eof)return i;var c=l.last((function(l){return l.empty&&l.start<=u+i}));return c?Math.min(i,c.end-u):0}},{key:"seekRead",value:function seekRead(i){var u=this.head.first((function(u){return u.contains(i)}));if(!u)throw new Error("read seek out of range");this.readOffset=i,this.readCursor=u}},{key:"seekWrite",value:function seekWrite(i){var u=this.head.first((function(u){return u.contains(i)}));if(!u)throw new Error("write seek out of range");this.writeOffset=i,this.writeCursor=u}},{key:"readBytes",value:function readBytes(i){for(var u=this.bytesReadable(i.byteLength),l=this.readOffset,c=l+u,h=l,p=this.readCursor;p&&!p.empty&&!(p.start>=c);p=p.next){var m=Math.min(c,p.end),g=i.subarray(h-l,m-l);p.readBytes(g,h,m),h=m}return this.readOffset=h,this.readCursor=this.readCursor.first((function(i){return i.contains(h)})),u}},{key:"write",value:function write(i){var u=this.bufferItem(i),l=this.writeCursor;if(!l.empty)throw new Error("write cursor not empty");if(!l.contains(u.end)&&l.end!==u.end)throw new Error("write cursor too small");l.start<u.start&&(this.split(l,u.start),l=this.writeCursor),(u.end<l.end||l.eof)&&(this.split(l,u.end),l=this.writeCursor),this.splice(l,l,u,u),this.writeOffset=u.end,this.writeCursor=u.next,this.gc()}},{key:"bufferItem",value:function bufferItem(i){if(i instanceof ArrayBuffer)return new h({start:this.writeOffset,end:this.writeOffset+i.byteLength,buffer:i});if("string"==typeof i)return new h({start:this.writeOffset,end:this.writeOffset+i.length,string:i});throw new Error("invalid input to write")}},{key:"split",value:function split(i,u){var l=i.split(u);this.splice(i,i,l[0],l[1])}},{key:"ranges",value:function ranges(){for(var ranges=[],i=this.head;i;i=i.next)if(!i.empty){var u=i;i=i.last((function(i){return!i.empty})),ranges.push([u.start,i.end])}return ranges}},{key:"gc",value:function gc(){for(var i=0,u=[],l=this.head;l;l=l.next)l.empty||(i+=l.length,(l.end<this.readOffset||l.start>this.readOffset+this.chunkSize)&&u.push(l));if(i>this.cacheSize){u.sort((function(i,u){return i.timestamp-u.timestamp}));for(var c=0;c<u.length;c++){var h=u[c];if(i<=this.cacheSize)break;this.remove(h),i-=h.length}}}},{key:"remove",value:function remove(i){var u=new h({start:i.start,end:i.end});this.splice(i,i,u,u),(i=u).prev&&i.prev.empty&&(i=this.consolidate(i.prev)),i.next&&i.next.empty&&!i.next.eof&&(i=this.consolidate(i)),0===i.start&&(this.head=i)}},{key:"consolidate",value:function consolidate(i){var u=i.last((function(i){return i.empty&&!i.eof})),l=new h({start:i.start,end:u.end});return this.splice(i,u,l,l),l}},{key:"splice",value:function splice(i,u,l,c){var h=this;if(i.start!==l.start)throw new Error("invalid splice head");if(!(u.end===c.end||u.eof&&c.eof))throw new Error("invalid splice tail");var p=i.prev,m=u.next;i.prev=null,u.next=null,p&&(p.next=l,l.prev=p),m&&(m.prev=c,c.next=m),i===this.head&&(this.head=l),u===this.tail&&(this.tail=c),this.readCursor=this.head.first((function(i){return i.contains(h.readOffset)})),this.writeCursor=this.head.first((function(i){return i.contains(h.writeOffset)}))}},{key:"eof",get:function get(){return this.readCursor.eof}}]),CachePool}();i.exports=p},814:(i,u,l)=>{"use strict";i.exports=l(91)},566:i=>{"use strict";var u=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}(),l=function(){function TinyEvents(){!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,TinyEvents),this._e={}}return u(TinyEvents,[{key:"on",value:function on(i,u){(this._e[i]||(this._e[i]=[])).push(u)}},{key:"off",value:function off(i,u){var l=this._e[i]||[],c=l.indexOf(u);u>=0&&l.splice(c,1)}},{key:"emit",value:function emit(i,u){(this._e[i]||[]).slice().forEach((function(i){return i(u)}))}}]),TinyEvents}();i.exports=l},936:(i,u,l)=>{"use strict";var c=function(){function defineProperties(i,u){for(var l=0;l<u.length;l++){var c=u[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}return function(i,u,l){return u&&defineProperties(i.prototype,u),l&&defineProperties(i,l),i}}();l(566);var h=l(814),p=l(761),m=function(){function StreamFile(i){var u=i.url,l=void 0===u?"":u,c=i.chunkSize,p=void 0===c?1048576:c,m=i.cacheSize,g=void 0===m?0:m,v=i.progressive,_=void 0===v||v;!function _classCallCheck(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}(this,StreamFile),this.length=-1,this.loaded=!1,this.loading=!1,this.seekable=!1,this.buffering=!1,this.seeking=!1,this.progressive=_,Object.defineProperties(this,{offset:{get:function get(){return this._cache.readOffset}},eof:{get:function get(){return this.length===this._cache.readOffset}}}),this.url=l,this.headers={},this._cache=new h({cacheSize:g}),this._backend=null,this._cachever=0,this._chunkSize=p}return c(StreamFile,[{key:"load",value:function load(){var i=this;return new Promise((function(u,l){if(i.loading)throw new Error("cannot load when loading");if(i.loaded)throw new Error("cannot load when loaded");i.loading=!0,i._openBackend().then((function(l){i.seekable=l.seekable,i.headers=l.headers,i.length=l.length,i.loaded=!0,i.loading=!1,u()})).catch((function(u){"AbortError"!==u.name&&(i.loading=!1),l(u)}))}))}},{key:"_openBackend",value:function _openBackend(){var i=this;return new Promise((function(u,l){if(i._backend)u(i._backend);else if(i.eof)l(new Error("cannot open at end of file"));else{var c=i._cache,h=i._chunkSize,m=c.bytesReadable(h),g=c.readOffset+m;if(c.seekWrite(g),i.length>=0&&g>=i.length)return void u(null);var v=i._clampToLength(c.writeOffset+c.bytesWritable(h))-c.writeOffset;if(0===v)u(null);else{var _=i._backend=new p({url:i.url,offset:i._cache.writeOffset,length:v,cachever:i._cachever,progressive:i.progressive}),y=null,b=function checkOpen(){_!==i._backend?(y(),l(new Error("invalid state"))):(_.on("buffer",(function(u){_===i._backend&&i._cache.write(u)})),_.on("done",(function(){_===i._backend&&(-1===i.length&&(i.length=i._backend.offset+i._backend.bytesRead),i._backend=null)})),u(_))},T=function checkError(u){_!==i._backend?l(new Error("invalid state")):(i._backend=null,l(u))};y=function oncomplete(){_.off("open",b),_.off("error",T)},_.on("open",b),_.on("error",T),_.on("cachever",(function(){i._cachever++})),_.load()}}}))}},{key:"_readAhead",value:function _readAhead(){var i=this;return new Promise((function(u,l){i._backend||i.eof?u():i._openBackend().then((function(){u()})).catch((function(i){l(i)}))}))}},{key:"seek",value:function seek(i){var u=this;return new Promise((function(l,c){if(!u.loaded||u.buffering||u.seeking)throw new Error("invalid state");if(i!==(0|i)||i<0)throw new Error("invalid input");if(u.length>=0&&i>u.length)throw new Error("seek past end of file");if(!u.seekable)throw new Error("seek on non-seekable stream");u._backend&&u.abort(),u._cache.seekRead(i),u._cache.seekWrite(i),u._readAhead().then(l).catch(c)}))}},{key:"read",value:function read(i){var u=this;return this.buffer(i).then((function(i){return u.readSync(i)}))}},{key:"readSync",value:function readSync(i){var u=this.bytesAvailable(i),l=new Uint8Array(u);if(this.readBytes(l)!==u)throw new Error("failed to read expected data");return l.buffer}},{key:"readBytes",value:function readBytes(i){if(!this.loaded||this.buffering||this.seeking)throw new Error("invalid state");if(!(i instanceof Uint8Array))throw new Error("invalid input");var u=this._cache.readBytes(i);return this._readAhead(),u}},{key:"buffer",value:function buffer(i){var u=this;return new Promise((function(l,c){if(!u.loaded||u.buffering||u.seeking)throw new Error("invalid state");if(i!==(0|i)||i<0)throw new Error("invalid input");var h=u._clampToLength(u.offset+i),p=h-u.offset,m=u.bytesAvailable(p);m>=p?l(m):(u.buffering=!0,u._openBackend().then((function(l){return l?l.bufferToOffset(h).then((function(){return u.buffering=!1,u.buffer(i)})):Promise.resolve(m)})).then((function(i){u.buffering=!1,l(i)})).catch((function(i){"AbortError"!==i.name&&(u.buffering=!1),c(i)})))}))}},{key:"bytesAvailable",value:function bytesAvailable(){return this._cache.bytesReadable(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0)}},{key:"abort",value:function abort(){this.loading&&(this.loading=!1),this.buffering&&(this.buffering=!1),this.seeking&&(this.seeking=!1),this._backend&&(this._backend.abort(),this._backend=null)}},{key:"getBufferedRanges",value:function getBufferedRanges(){return this._cache.ranges()}},{key:"_clampToLength",value:function _clampToLength(i){return this.length<0?i:Math.min(this.length,i)}}]),StreamFile}();i.exports=m},302:(i,u,l)=>{"use strict";l.r(u),l.d(u,{default:()=>c});const c="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU5LjE2LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAAEEwCZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZ//////////////////////////////////////////////////////////////////8AAAAATGF2YzU5LjE4AAAAAAAAAAAAAAAAJAZAAAAAAAAABBMIw3vfAAAAAAAAAAAAAAAAAAAAAP/7kGQAD/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7kmRAj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU="},826:i=>{i.exports={vertex:"precision mediump float;\n\nattribute vec2 aPosition;\nattribute vec2 aLumaPosition;\nattribute vec2 aChromaPosition;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vLumaPosition = aLumaPosition;\n    vChromaPosition = aChromaPosition;\n}\n",fragment:"// inspired by https://github.com/mbebenita/Broadway/blob/master/Player/canvas.js\n\nprecision mediump float;\n\nuniform sampler2D uTextureY;\nuniform sampler2D uTextureCb;\nuniform sampler2D uTextureCr;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n   // Y, Cb, and Cr planes are uploaded as ALPHA textures.\n   float fY = texture2D(uTextureY, vLumaPosition).w;\n   float fCb = texture2D(uTextureCb, vChromaPosition).w;\n   float fCr = texture2D(uTextureCr, vChromaPosition).w;\n\n   // Premultipy the Y...\n   float fYmul = fY * 1.1643828125;\n\n   // And convert that to RGB!\n   gl_FragColor = vec4(\n     fYmul + 1.59602734375 * fCr - 0.87078515625,\n     fYmul - 0.39176171875 * fCb - 0.81296875 * fCr + 0.52959375,\n     fYmul + 2.017234375   * fCb - 1.081390625,\n     1\n   );\n}\n",vertexStripe:"precision mediump float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexturePosition;\nvarying vec2 vTexturePosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vTexturePosition = aTexturePosition;\n}\n",fragmentStripe:"// extra 'stripe' texture fiddling to work around IE 11's poor performance on gl.LUMINANCE and gl.ALPHA textures\n\nprecision mediump float;\n\nuniform sampler2D uStripe;\nuniform sampler2D uTexture;\nvarying vec2 vTexturePosition;\nvoid main() {\n   // Y, Cb, and Cr planes are mapped into a pseudo-RGBA texture\n   // so we can upload them without expanding the bytes on IE 11\n   // which doesn't allow LUMINANCE or ALPHA textures\n   // The stripe textures mark which channel to keep for each pixel.\n   // Each texture extraction will contain the relevant value in one\n   // channel only.\n\n   float fLuminance = dot(\n      texture2D(uStripe, vTexturePosition),\n      texture2D(uTexture, vTexturePosition)\n   );\n\n   gl_FragColor = vec4(0, 0, 0, fLuminance);\n}\n"}},487:i=>{!function(){"use strict";function FrameSink(i,u){throw new Error("abstract")}FrameSink.prototype.drawFrame=function(i){throw new Error("abstract")},FrameSink.prototype.clear=function(){throw new Error("abstract")},i.exports=FrameSink}()},926:(i,u,l)=>{!function(){"use strict";var u=l(487),c=l(627);function SoftwareFrameSink(i){var u=this,l=i.getContext("2d"),h=null,p=null,m=null;return u.drawFrame=function drawFrame(u){var g=u.format;i.width===g.displayWidth&&i.height===g.displayHeight||(i.width=g.displayWidth,i.height=g.displayHeight),null!==h&&h.width==g.width&&h.height==g.height||function initImageData(i,u){for(var c=(h=l.createImageData(i,u)).data,p=i*u*4,m=0;m<p;m+=4)c[m+3]=255}(g.width,g.height),c.convertYCbCr(u,h.data);var v,_=g.cropWidth!=g.displayWidth||g.cropHeight!=g.displayHeight;_?(p||function initResampleCanvas(i,u){(p=document.createElement("canvas")).width=i,p.height=u,m=p.getContext("2d")}(g.cropWidth,g.cropHeight),v=m):v=l,v.putImageData(h,-g.cropLeft,-g.cropTop,g.cropLeft,g.cropTop,g.cropWidth,g.cropHeight),_&&l.drawImage(p,0,0,g.displayWidth,g.displayHeight)},u.clear=function(){l.clearRect(0,0,i.width,i.height)},u}SoftwareFrameSink.prototype=Object.create(u.prototype),i.exports=SoftwareFrameSink}()},895:(i,u,l)=>{!function(){"use strict";var u=l(487),c=l(826);function WebGLFrameSink(i){var u,l,h=this,p=WebGLFrameSink.contextForCanvas(i);if(null===p)throw new Error("WebGL unavailable");function compileShader(i,u){var l=p.createShader(i);if(p.shaderSource(l,u),p.compileShader(l),!p.getShaderParameter(l,p.COMPILE_STATUS)){var c=p.getShaderInfoLog(l);throw p.deleteShader(l),new Error("GL shader compilation for "+i+" failed: "+c)}return l}var m,g,v,_,y,b,T,S,k,E,C=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),w={},P={},A={};function createOrReuseTexture(i,u){return w[i]&&!u||(w[i]=p.createTexture()),w[i]}function uploadTexture(i,u,l,c,h){var m=!w[i]||u,g=createOrReuseTexture(i,u);if(p.activeTexture(p.TEXTURE0),WebGLFrameSink.stripe){var v=!w[i+"_temp"]||u,_=createOrReuseTexture(i+"_temp",u);p.bindTexture(p.TEXTURE_2D,_),v?(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,l/4,c,0,p.RGBA,p.UNSIGNED_BYTE,h)):p.texSubImage2D(p.TEXTURE_2D,0,0,0,l/4,c,p.RGBA,p.UNSIGNED_BYTE,h);var y=w[i+"_stripe"],b=!y||u;b&&(y=createOrReuseTexture(i+"_stripe",u)),p.bindTexture(p.TEXTURE_2D,y),b&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,l,1,0,p.RGBA,p.UNSIGNED_BYTE,function buildStripe(i){if(A[i])return A[i];for(var u=i,l=new Uint32Array(u),c=0;c<u;c+=4)l[c]=255,l[c+1]=65280,l[c+2]=16711680,l[c+3]=4278190080;return A[i]=new Uint8Array(l.buffer)}(l)))}else p.bindTexture(p.TEXTURE_2D,g),m?(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,l,c,0,p.ALPHA,p.UNSIGNED_BYTE,h)):p.texSubImage2D(p.TEXTURE_2D,0,0,0,l,c,p.ALPHA,p.UNSIGNED_BYTE,h)}function unpackTexture(i,u,c,h){var T=w[i];p.useProgram(l);var S=P[i];S&&!u||(p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,T),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,c,h,0,p.RGBA,p.UNSIGNED_BYTE,null),S=P[i]=p.createFramebuffer()),p.bindFramebuffer(p.FRAMEBUFFER,S),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,T,0);var k=w[i+"_temp"];p.activeTexture(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,k),p.uniform1i(b,1);var E=w[i+"_stripe"];p.activeTexture(p.TEXTURE2),p.bindTexture(p.TEXTURE_2D,E),p.uniform1i(y,2),p.bindBuffer(p.ARRAY_BUFFER,m),p.enableVertexAttribArray(g),p.vertexAttribPointer(g,2,p.FLOAT,!1,0,0),p.bindBuffer(p.ARRAY_BUFFER,v),p.enableVertexAttribArray(_),p.vertexAttribPointer(_,2,p.FLOAT,!1,0,0),p.viewport(0,0,c,h),p.drawArrays(p.TRIANGLES,0,C.length/2),p.bindFramebuffer(p.FRAMEBUFFER,null)}function attachTexture(i,l,c){p.activeTexture(l),p.bindTexture(p.TEXTURE_2D,w[i]),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.uniform1i(p.getUniformLocation(u,i),c)}function initProgram(i,u){var l=compileShader(p.VERTEX_SHADER,i),c=compileShader(p.FRAGMENT_SHADER,u),h=p.createProgram();if(p.attachShader(h,l),p.attachShader(h,c),p.linkProgram(h),!p.getProgramParameter(h,p.LINK_STATUS)){var m=p.getProgramInfoLog(h);throw p.deleteProgram(h),new Error("GL program linking failed: "+m)}return h}return h.drawFrame=function(w){var P=w.format,A=!u||i.width!==P.displayWidth||i.height!==P.displayHeight;if(A&&(i.width=P.displayWidth,i.height=P.displayHeight,h.clear()),u||function init(){if(WebGLFrameSink.stripe){l=initProgram(c.vertexStripe,c.fragmentStripe),p.getAttribLocation(l,"aPosition"),v=p.createBuffer();var i=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);p.bindBuffer(p.ARRAY_BUFFER,v),p.bufferData(p.ARRAY_BUFFER,i,p.STATIC_DRAW),_=p.getAttribLocation(l,"aTexturePosition"),y=p.getUniformLocation(l,"uStripe"),b=p.getUniformLocation(l,"uTexture")}u=initProgram(c.vertex,c.fragment),m=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,m),p.bufferData(p.ARRAY_BUFFER,C,p.STATIC_DRAW),g=p.getAttribLocation(u,"aPosition"),T=p.createBuffer(),S=p.getAttribLocation(u,"aLumaPosition"),k=p.createBuffer(),E=p.getAttribLocation(u,"aChromaPosition")}(),A){var setupTexturePosition=function(i,u,l){var c=P.cropLeft/l,h=(P.cropLeft+P.cropWidth)/l,m=(P.cropTop+P.cropHeight)/P.height,g=P.cropTop/P.height,v=new Float32Array([c,m,h,m,c,g,c,g,h,m,h,g]);p.bindBuffer(p.ARRAY_BUFFER,i),p.bufferData(p.ARRAY_BUFFER,v,p.STATIC_DRAW)};setupTexturePosition(T,0,w.y.stride),setupTexturePosition(k,0,w.u.stride*P.width/P.chromaWidth)}uploadTexture("uTextureY",A,w.y.stride,P.height,w.y.bytes),uploadTexture("uTextureCb",A,w.u.stride,P.chromaHeight,w.u.bytes),uploadTexture("uTextureCr",A,w.v.stride,P.chromaHeight,w.v.bytes),WebGLFrameSink.stripe&&(unpackTexture("uTextureY",A,w.y.stride,P.height),unpackTexture("uTextureCb",A,w.u.stride,P.chromaHeight),unpackTexture("uTextureCr",A,w.v.stride,P.chromaHeight)),p.useProgram(u),p.viewport(0,0,i.width,i.height),attachTexture("uTextureY",p.TEXTURE0,0),attachTexture("uTextureCb",p.TEXTURE1,1),attachTexture("uTextureCr",p.TEXTURE2,2),p.bindBuffer(p.ARRAY_BUFFER,m),p.enableVertexAttribArray(g),p.vertexAttribPointer(g,2,p.FLOAT,!1,0,0),p.bindBuffer(p.ARRAY_BUFFER,T),p.enableVertexAttribArray(S),p.vertexAttribPointer(S,2,p.FLOAT,!1,0,0),p.bindBuffer(p.ARRAY_BUFFER,k),p.enableVertexAttribArray(E),p.vertexAttribPointer(E,2,p.FLOAT,!1,0,0),p.drawArrays(p.TRIANGLES,0,C.length/2)},h.clear=function(){p.viewport(0,0,i.width,i.height),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT)},h.clear(),h}WebGLFrameSink.stripe=!1,WebGLFrameSink.contextForCanvas=function(i){var u={preferLowPowerToHighPerformance:!0,powerPreference:"low-power",failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0};return i.getContext("webgl",u)||i.getContext("experimental-webgl",u)},WebGLFrameSink.isAvailable=function(){var i,u=document.createElement("canvas");u.width=1,u.height=1;try{i=WebGLFrameSink.contextForCanvas(u)}catch(i){return!1}if(i){var l=i.TEXTURE0,c=i.createTexture(),h=new Uint8Array(16),p=WebGLFrameSink.stripe?1:4,m=WebGLFrameSink.stripe?i.RGBA:i.ALPHA,g=WebGLFrameSink.stripe?i.NEAREST:i.LINEAR;return i.activeTexture(l),i.bindTexture(i.TEXTURE_2D,c),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,g),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,g),i.texImage2D(i.TEXTURE_2D,0,m,p,4,0,m,i.UNSIGNED_BYTE,h),!i.getError()}return!1},WebGLFrameSink.prototype=Object.create(u.prototype),i.exports=WebGLFrameSink}()},627:(i,u,l)=>{!function(){"use strict";var u=l(877);i.exports={convertYCbCr:function convertYCbCr(i,l){var c=0|i.format.width,h=0|i.format.height,p=0|u(i.format.width/i.format.chromaWidth),m=0|u(i.format.height/i.format.chromaHeight),g=i.y.bytes,v=i.u.bytes,_=i.v.bytes,y=0|i.y.stride,b=0|i.u.stride,T=0|i.v.stride,S=c<<2,k=0,E=0,C=0,w=0,P=0,A=0,x=0,I=0,O=0,L=0,D=0,V=0,R=0,M=0,N=0,B=0,j=0,H=0;if(1==p&&1==m)for(x=0,I=S,H=0,B=0;B<h;B+=2){for(C=(E=B*y|0)+y|0,w=H*b|0,P=H*T|0,N=0;N<c;N+=2)O=0|v[w++],V=(409*(L=0|_[P++])|0)-57088|0,R=(100*O|0)+(208*L|0)-34816|0,M=(516*O|0)-70912|0,D=298*g[E++]|0,l[x]=D+V>>8,l[x+1]=D-R>>8,l[x+2]=D+M>>8,D=298*g[E++]|0,l[x+=4]=D+V>>8,l[x+1]=D-R>>8,l[x+2]=D+M>>8,x+=4,D=298*g[C++]|0,l[I]=D+V>>8,l[I+1]=D-R>>8,l[I+2]=D+M>>8,D=298*g[C++]|0,l[I+=4]=D+V>>8,l[I+1]=D-R>>8,l[I+2]=D+M>>8,I+=4;x+=S,I+=S,H++}else for(A=0,B=0;B<h;B++)for(j=0,k=B*y|0,w=(H=B>>m)*b|0,P=H*T|0,N=0;N<c;N++)O=0|v[w+(j=N>>p)],V=(409*(L=0|_[P+j])|0)-57088|0,R=(100*O|0)+(208*L|0)-34816|0,M=(516*O|0)-70912|0,D=298*g[k++]|0,l[A]=D+V>>8,l[A+1]=D-R>>8,l[A+2]=D+M>>8,A+=4}}}()},877:i=>{!function(){"use strict";i.exports=function depower(i){for(var u=0,l=i>>1;0!=l;)l>>=1,u++;if(i!==1<<u)throw"chroma plane dimensions must be power of 2 ratio to luma plane dimensions; got "+i;return u}}()},731:(i,u,l)=>{!function(){"use strict";var u=l(487),c=l(926),h=l(895),p={FrameSink:u,SoftwareFrameSink:c,WebGLFrameSink:h,attach:function(i,u){return("webGL"in(u=u||{})?u.webGL:h.isAvailable())?new h(i,u):new c(i,u)}};i.exports=p}()}},u={};function __nested_webpack_require_207848__(l){var c=u[l];if(void 0!==c)return c.exports;var h=u[l]={exports:{}};return i[l](h,h.exports,__nested_webpack_require_207848__),h.exports}__nested_webpack_require_207848__.d=(i,u)=>{for(var l in u)__nested_webpack_require_207848__.o(u,l)&&!__nested_webpack_require_207848__.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:u[l]})},__nested_webpack_require_207848__.o=(i,u)=>Object.prototype.hasOwnProperty.call(i,u),__nested_webpack_require_207848__.r=i=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var l={};return(()=>{"use strict";var i=l,u=__nested_webpack_require_207848__(318);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"OGVCompat",{enumerable:!0,get:function get(){return h.default}}),Object.defineProperty(i,"OGVLoader",{enumerable:!0,get:function get(){return p.default}}),Object.defineProperty(i,"OGVMediaError",{enumerable:!0,get:function get(){return m.default}}),Object.defineProperty(i,"OGVMediaType",{enumerable:!0,get:function get(){return g.default}}),Object.defineProperty(i,"OGVPlayer",{enumerable:!0,get:function get(){return v.default}}),Object.defineProperty(i,"OGVTimeRanges",{enumerable:!0,get:function get(){return _.default}}),i.OGVVersion=void 0;var c=u(__nested_webpack_require_207848__(8)),h=u(__nested_webpack_require_207848__(523)),p=u(__nested_webpack_require_207848__(964)),m=u(__nested_webpack_require_207848__(759)),g=u(__nested_webpack_require_207848__(278)),v=u(__nested_webpack_require_207848__(869)),_=u(__nested_webpack_require_207848__(168)),y="1.9.0-20240423190513-22f6924";i.OGVVersion=y,"object"===("undefined"==typeof window?"undefined":(0,c.default)(window))&&(window.OGVCompat=h.default,window.OGVLoader=p.default,window.OGVMediaError=m.default,window.OGVMediaType=g.default,window.OGVTimeRanges=_.default,window.OGVPlayer=v.default,window.OGVVersion=y)})(),l})()}))},31400:(i,u,l)=>{i.exports=l(89997)},29766:i=>{i.exports=function SafeParseTuple(i,u){var l,c=null;try{l=JSON.parse(i,u)}catch(i){c=i}return[c,l]}},4753:function(i){var u,l,c,h,p;u=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,l=/^(?=([^\/?#]*))\1([^]*)$/,c=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,1,void(i.exports=p={buildAbsoluteURL:function(i,u,c){if(c=c||{},i=i.trim(),!(u=u.trim())){if(!c.alwaysNormalize)return i;var h=p.parseURL(i);if(!h)throw new Error("Error trying to parse base URL.");return h.path=p.normalizePath(h.path),p.buildURLFromParts(h)}var m=p.parseURL(u);if(!m)throw new Error("Error trying to parse relative URL.");if(m.scheme)return c.alwaysNormalize?(m.path=p.normalizePath(m.path),p.buildURLFromParts(m)):u;var g=p.parseURL(i);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&"/"!==g.path[0]){var v=l.exec(g.path);g.netLoc=v[1],g.path=v[2]}g.netLoc&&!g.path&&(g.path="/");var _={scheme:g.scheme,netLoc:m.netLoc,path:null,params:m.params,query:m.query,fragment:m.fragment};if(!m.netLoc&&(_.netLoc=g.netLoc,"/"!==m.path[0]))if(m.path){var y=g.path,b=y.substring(0,y.lastIndexOf("/")+1)+m.path;_.path=p.normalizePath(b)}else _.path=g.path,m.params||(_.params=g.params,m.query||(_.query=g.query));return null===_.path&&(_.path=c.alwaysNormalize?p.normalizePath(m.path):m.path),p.buildURLFromParts(_)},parseURL:function(i){var l=u.exec(i);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(i){for(i=i.split("").reverse().join("").replace(c,"");i.length!==(i=i.replace(h,"")).length;);return i.split("").reverse().join("")},buildURLFromParts:function(i){return i.scheme+i.netLoc+i.path+i.params+i.query+i.fragment}})},80509:(i,u,l)=>{var c=l(12843),h=i.exports={WebVTT:l(83042),VTTCue:l(70411),VTTRegion:l(29370)};c.vttjs=h,c.WebVTT=h.WebVTT;var p=h.VTTCue,m=h.VTTRegion,g=c.VTTCue,v=c.VTTRegion;h.shim=function(){c.VTTCue=p,c.VTTRegion=m},h.restore=function(){c.VTTCue=g,c.VTTRegion=v},c.VTTCue||h.shim()},83042:(i,u,l)=>{var c=l(90410),h=Object.create||function(){function F(){}return function(i){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return F.prototype=i,new F}}();function ParsingError(i,u){this.name="ParsingError",this.code=i.code,this.message=u||i.message}function parseTimeStamp(i){function computeSeconds(i,u,l,c){return 3600*(0|i)+60*(0|u)+(0|l)+(0|c)/1e3}var u=i.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return u?u[3]?computeSeconds(u[1],u[2],u[3].replace(":",""),u[4]):u[1]>59?computeSeconds(u[1],u[2],0,u[4]):computeSeconds(0,u[1],u[2],u[4]):null}function Settings(){this.values=h(null)}function parseOptions(i,u,l,c){var h=c?i.split(c):[i];for(var p in h)if("string"==typeof h[p]){var m=h[p].split(l);if(2===m.length)u(m[0].trim(),m[1].trim())}}function parseCue(i,u,l){var c=i;function consumeTimeStamp(){var u=parseTimeStamp(i);if(null===u)throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+c);return i=i.replace(/^[^\sa-zA-Z-]+/,""),u}function skipWhitespace(){i=i.replace(/^\s+/,"")}if(skipWhitespace(),u.startTime=consumeTimeStamp(),skipWhitespace(),"--\x3e"!==i.substr(0,3))throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+c);i=i.substr(3),skipWhitespace(),u.endTime=consumeTimeStamp(),skipWhitespace(),function consumeCueSettings(i,u){var c=new Settings;parseOptions(i,(function(i,u){switch(i){case"region":for(var h=l.length-1;h>=0;h--)if(l[h].id===u){c.set(i,l[h].region);break}break;case"vertical":c.alt(i,u,["rl","lr"]);break;case"line":var p=u.split(","),m=p[0];c.integer(i,m),c.percent(i,m)&&c.set("snapToLines",!1),c.alt(i,m,["auto"]),2===p.length&&c.alt("lineAlign",p[1],["start","center","end"]);break;case"position":p=u.split(","),c.percent(i,p[0]),2===p.length&&c.alt("positionAlign",p[1],["start","center","end"]);break;case"size":c.percent(i,u);break;case"align":c.alt(i,u,["start","center","end","left","right"])}}),/:/,/\s/),u.region=c.get("region",null),u.vertical=c.get("vertical","");try{u.line=c.get("line","auto")}catch(i){}u.lineAlign=c.get("lineAlign","start"),u.snapToLines=c.get("snapToLines",!0),u.size=c.get("size",100);try{u.align=c.get("align","center")}catch(i){u.align=c.get("align","middle")}try{u.position=c.get("position","auto")}catch(i){u.position=c.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},u.align)}u.positionAlign=c.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},u.align)}(i,u)}(ParsingError.prototype=h(Error.prototype)).constructor=ParsingError,ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Settings.prototype={set:function(i,u){this.get(i)||""===u||(this.values[i]=u)},get:function(i,u,l){return l?this.has(i)?this.values[i]:u[l]:this.has(i)?this.values[i]:u},has:function(i){return i in this.values},alt:function(i,u,l){for(var c=0;c<l.length;++c)if(u===l[c]){this.set(i,u);break}},integer:function(i,u){/^-?\d+$/.test(u)&&this.set(i,parseInt(u,10))},percent:function(i,u){return!!(u.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(u=parseFloat(u))>=0&&u<=100)&&(this.set(i,u),!0)}};var p=c.createElement&&c.createElement("textarea"),m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},g={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},v={v:"title",lang:"lang"},_={rt:"ruby"};function parseContent(i,u){function nextToken(){if(!u)return null;var i=u.match(/^([^<]*)(<[^>]*>?)?/);return function consume(i){return u=u.substr(i.length),i}(i[1]?i[1]:i[2])}function shouldAdd(i,u){return!_[u.localName]||_[u.localName]===i.localName}function createElement(u,l){var c=m[u];if(!c)return null;var h=i.document.createElement(c),p=v[u];return p&&l&&(h[p]=l.trim()),h}for(var l,c,h=i.document.createElement("div"),y=h,b=[];null!==(l=nextToken());)if("<"!==l[0])y.appendChild(i.document.createTextNode((p.innerHTML=c=l,c=p.textContent,p.textContent="",c)));else{if("/"===l[1]){b.length&&b[b.length-1]===l.substr(2).replace(">","")&&(b.pop(),y=y.parentNode);continue}var T,S=parseTimeStamp(l.substr(1,l.length-2));if(S){T=i.document.createProcessingInstruction("timestamp",S),y.appendChild(T);continue}var k=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!k)continue;if(!(T=createElement(k[1],k[3])))continue;if(!shouldAdd(y,T))continue;if(k[2]){var E=k[2].split(".");E.forEach((function(i){var u=/^bg_/.test(i),l=u?i.slice(3):i;g.hasOwnProperty(l)&&(T.style[u?"background-color":"color"]=g[l])})),T.className=E.join(" ")}b.push(k[1]),y.appendChild(T),y=T}return h}var y=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(i){for(var u=0;u<y.length;u++){var l=y[u];if(i>=l[0]&&i<=l[1])return!0}return!1}function determineBidi(i){var u=[],l="";if(!i||!i.childNodes)return"ltr";function pushNodes(i,u){for(var l=u.childNodes.length-1;l>=0;l--)i.push(u.childNodes[l])}function nextTextNode(i){if(!i||!i.length)return null;var u=i.pop(),l=u.textContent||u.innerText;if(l){var c=l.match(/^.*(\n|\r)/);return c?(i.length=0,c[0]):l}return"ruby"===u.tagName?nextTextNode(i):u.childNodes?(pushNodes(i,u),nextTextNode(i)):void 0}for(pushNodes(u,i);l=nextTextNode(u);)for(var c=0;c<l.length;c++)if(isStrongRTLChar(l.charCodeAt(c)))return"rtl";return"ltr"}function StyleBox(){}function CueStyleBox(i,u,l){StyleBox.call(this),this.cue=u,this.cueDiv=parseContent(i,u.text);var c={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===u.vertical?"horizontal-tb":"lr"===u.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(c,this.cueDiv),this.div=i.document.createElement("div"),c={direction:determineBidi(this.cueDiv),writingMode:""===u.vertical?"horizontal-tb":"lr"===u.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===u.align?"center":u.align,font:l.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(c),this.div.appendChild(this.cueDiv);var h=0;switch(u.positionAlign){case"start":case"line-left":h=u.position;break;case"center":h=u.position-u.size/2;break;case"end":case"line-right":h=u.position-u.size}this.applyStyles(""===u.vertical?{left:this.formatStyle(h,"%"),width:this.formatStyle(u.size,"%")}:{top:this.formatStyle(h,"%"),height:this.formatStyle(u.size,"%")}),this.move=function(i){this.applyStyles({top:this.formatStyle(i.top,"px"),bottom:this.formatStyle(i.bottom,"px"),left:this.formatStyle(i.left,"px"),right:this.formatStyle(i.right,"px"),height:this.formatStyle(i.height,"px"),width:this.formatStyle(i.width,"px")})}}function BoxPosition(i){var u,l,c,h;if(i.div){l=i.div.offsetHeight,c=i.div.offsetWidth,h=i.div.offsetTop;var p=(p=i.div.childNodes)&&(p=p[0])&&p.getClientRects&&p.getClientRects();i=i.div.getBoundingClientRect(),u=p?Math.max(p[0]&&p[0].height||0,i.height/p.length):0}this.left=i.left,this.right=i.right,this.top=i.top||h,this.height=i.height||l,this.bottom=i.bottom||h+(i.height||l),this.width=i.width||c,this.lineHeight=void 0!==u?u:i.lineHeight}function moveBoxToLinePosition(i,u,l,c){var h=new BoxPosition(u),p=u.cue,m=function computeLinePos(i){if("number"==typeof i.line&&(i.snapToLines||i.line>=0&&i.line<=100))return i.line;if(!i.track||!i.track.textTrackList||!i.track.textTrackList.mediaElement)return-1;for(var u=i.track,l=u.textTrackList,c=0,h=0;h<l.length&&l[h]!==u;h++)"showing"===l[h].mode&&c++;return-1*++c}(p),g=[];if(p.snapToLines){var v;switch(p.vertical){case"":g=["+y","-y"],v="height";break;case"rl":g=["+x","-x"],v="width";break;case"lr":g=["-x","+x"],v="width"}var _=h.lineHeight,y=_*Math.round(m),b=l[v]+_,T=g[0];Math.abs(y)>b&&(y=y<0?-1:1,y*=Math.ceil(b/_)*_),m<0&&(y+=""===p.vertical?l.height:l.width,g=g.reverse()),h.move(T,y)}else{var S=h.lineHeight/l.height*100;switch(p.lineAlign){case"center":m-=S/2;break;case"end":m-=S}switch(p.vertical){case"":u.applyStyles({top:u.formatStyle(m,"%")});break;case"rl":u.applyStyles({left:u.formatStyle(m,"%")});break;case"lr":u.applyStyles({right:u.formatStyle(m,"%")})}g=["+y","-x","+x","-y"],h=new BoxPosition(u)}var k=function findBestPosition(i,u){for(var h,p=new BoxPosition(i),m=1,g=0;g<u.length;g++){for(;i.overlapsOppositeAxis(l,u[g])||i.within(l)&&i.overlapsAny(c);)i.move(u[g]);if(i.within(l))return i;var v=i.intersectPercentage(l);m>v&&(h=new BoxPosition(i),m=v),i=new BoxPosition(p)}return h||p}(h,g);u.move(k.toCSSCompatValues(l))}function WebVTT(){}StyleBox.prototype.applyStyles=function(i,u){for(var l in u=u||this.div,i)i.hasOwnProperty(l)&&(u.style[l]=i[l])},StyleBox.prototype.formatStyle=function(i,u){return 0===i?0:i+u},(CueStyleBox.prototype=h(StyleBox.prototype)).constructor=CueStyleBox,BoxPosition.prototype.move=function(i,u){switch(u=void 0!==u?u:this.lineHeight,i){case"+x":this.left+=u,this.right+=u;break;case"-x":this.left-=u,this.right-=u;break;case"+y":this.top+=u,this.bottom+=u;break;case"-y":this.top-=u,this.bottom-=u}},BoxPosition.prototype.overlaps=function(i){return this.left<i.right&&this.right>i.left&&this.top<i.bottom&&this.bottom>i.top},BoxPosition.prototype.overlapsAny=function(i){for(var u=0;u<i.length;u++)if(this.overlaps(i[u]))return!0;return!1},BoxPosition.prototype.within=function(i){return this.top>=i.top&&this.bottom<=i.bottom&&this.left>=i.left&&this.right<=i.right},BoxPosition.prototype.overlapsOppositeAxis=function(i,u){switch(u){case"+x":return this.left<i.left;case"-x":return this.right>i.right;case"+y":return this.top<i.top;case"-y":return this.bottom>i.bottom}},BoxPosition.prototype.intersectPercentage=function(i){return Math.max(0,Math.min(this.right,i.right)-Math.max(this.left,i.left))*Math.max(0,Math.min(this.bottom,i.bottom)-Math.max(this.top,i.top))/(this.height*this.width)},BoxPosition.prototype.toCSSCompatValues=function(i){return{top:this.top-i.top,bottom:i.bottom-this.bottom,left:this.left-i.left,right:i.right-this.right,height:this.height,width:this.width}},BoxPosition.getSimpleBoxPosition=function(i){var u=i.div?i.div.offsetHeight:i.tagName?i.offsetHeight:0,l=i.div?i.div.offsetWidth:i.tagName?i.offsetWidth:0,c=i.div?i.div.offsetTop:i.tagName?i.offsetTop:0;return{left:(i=i.div?i.div.getBoundingClientRect():i.tagName?i.getBoundingClientRect():i).left,right:i.right,top:i.top||c,height:i.height||u,bottom:i.bottom||c+(i.height||u),width:i.width||l}},WebVTT.StringDecoder=function(){return{decode:function(i){if(!i)return"";if("string"!=typeof i)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(i))}}},WebVTT.convertCueToDOMTree=function(i,u){return i&&u?parseContent(i,u):null};WebVTT.processCues=function(i,u,l){if(!i||!u||!l)return null;for(;l.firstChild;)l.removeChild(l.firstChild);var c=i.document.createElement("div");if(c.style.position="absolute",c.style.left="0",c.style.right="0",c.style.top="0",c.style.bottom="0",c.style.margin="1.5%",l.appendChild(c),function shouldCompute(i){for(var u=0;u<i.length;u++)if(i[u].hasBeenReset||!i[u].displayState)return!0;return!1}(u)){var h=[],p=BoxPosition.getSimpleBoxPosition(c),m={font:Math.round(.05*p.height*100)/100+"px sans-serif"};!function(){for(var l,g,v=0;v<u.length;v++)l=new CueStyleBox(i,g=u[v],m),c.appendChild(l.div),moveBoxToLinePosition(0,l,p,h),g.displayState=l.div,h.push(BoxPosition.getSimpleBoxPosition(l))}()}else for(var g=0;g<u.length;g++)c.appendChild(u[g].displayState)},(WebVTT.Parser=function(i,u,l){l||(l=u,u={}),u||(u={}),this.window=i,this.vttjs=u,this.state="INITIAL",this.buffer="",this.decoder=l||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(i){if(!(i instanceof ParsingError))throw i;this.onparsingerror&&this.onparsingerror(i)},parse:function(i){var u=this;function collectNextLine(){for(var i=u.buffer,l=0;l<i.length&&"\r"!==i[l]&&"\n"!==i[l];)++l;var c=i.substr(0,l);return"\r"===i[l]&&++l,"\n"===i[l]&&++l,u.buffer=i.substr(l),c}function parseHeader(i){i.match(/X-TIMESTAMP-MAP/)?parseOptions(i,(function(i,l){if("X-TIMESTAMP-MAP"===i)!function parseTimestampMap(i){var l=new Settings;parseOptions(i,(function(i,u){switch(i){case"MPEGT":l.integer(i+"S",u);break;case"LOCA":l.set(i+"L",parseTimeStamp(u))}}),/[^\d]:/,/,/),u.ontimestampmap&&u.ontimestampmap({MPEGTS:l.get("MPEGTS"),LOCAL:l.get("LOCAL")})}(l)}),/=/):parseOptions(i,(function(i,l){if("Region"===i)!function parseRegion(i){var l=new Settings;if(parseOptions(i,(function(i,u){switch(i){case"id":l.set(i,u);break;case"width":l.percent(i,u);break;case"lines":l.integer(i,u);break;case"regionanchor":case"viewportanchor":var c=u.split(",");if(2!==c.length)break;var h=new Settings;if(h.percent("x",c[0]),h.percent("y",c[1]),!h.has("x")||!h.has("y"))break;l.set(i+"X",h.get("x")),l.set(i+"Y",h.get("y"));break;case"scroll":l.alt(i,u,["up"])}}),/=/,/\s/),l.has("id")){var c=new(u.vttjs.VTTRegion||u.window.VTTRegion);c.width=l.get("width",100),c.lines=l.get("lines",3),c.regionAnchorX=l.get("regionanchorX",0),c.regionAnchorY=l.get("regionanchorY",100),c.viewportAnchorX=l.get("viewportanchorX",0),c.viewportAnchorY=l.get("viewportanchorY",100),c.scroll=l.get("scroll",""),u.onregion&&u.onregion(c),u.regionList.push({id:l.get("id"),region:c})}}(l)}),/:/)}i&&(u.buffer+=u.decoder.decode(i,{stream:!0}));try{var l;if("INITIAL"===u.state){if(!/\r\n|\n/.test(u.buffer))return this;var c=(l=collectNextLine()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new ParsingError(ParsingError.Errors.BadSignature);u.state="HEADER"}for(var h=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(h?h=!1:l=collectNextLine(),u.state){case"HEADER":/:/.test(l)?parseHeader(l):l||(u.state="ID");continue;case"NOTE":l||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){u.state="NOTE";break}if(!l)continue;u.cue=new(u.vttjs.VTTCue||u.window.VTTCue)(0,0,"");try{u.cue.align="center"}catch(i){u.cue.align="middle"}if(u.state="CUE",-1===l.indexOf("--\x3e")){u.cue.id=l;continue}case"CUE":try{parseCue(l,u.cue,u.regionList)}catch(i){u.reportOrThrowError(i),u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var p=-1!==l.indexOf("--\x3e");if(!l||p&&(h=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+="\n"),u.cue.text+=l.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":l||(u.state="ID");continue}}}catch(i){u.reportOrThrowError(i),"CUETEXT"===u.state&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state="INITIAL"===u.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var i=this;try{if(i.buffer+=i.decoder.decode(),(i.cue||"HEADER"===i.state)&&(i.buffer+="\n\n",i.parse()),"INITIAL"===i.state)throw new ParsingError(ParsingError.Errors.BadSignature)}catch(u){i.reportOrThrowError(u)}return i.onflush&&i.onflush(),this}},i.exports=WebVTT},70411:i=>{var u={"":1,lr:1,rl:1},l={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function findAlignSetting(i){return"string"==typeof i&&(!!l[i.toLowerCase()]&&i.toLowerCase())}function VTTCue(i,l,c){this.hasBeenReset=!1;var h="",p=!1,m=i,g=l,v=c,_=null,y="",b=!0,T="auto",S="start",k="auto",E="auto",C=100,w="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return h},set:function(i){h=""+i}},pauseOnExit:{enumerable:!0,get:function(){return p},set:function(i){p=!!i}},startTime:{enumerable:!0,get:function(){return m},set:function(i){if("number"!=typeof i)throw new TypeError("Start time must be set to a number.");m=i,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(i){if("number"!=typeof i)throw new TypeError("End time must be set to a number.");g=i,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return v},set:function(i){v=""+i,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return _},set:function(i){_=i,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return y},set:function(i){var l=function findDirectionSetting(i){return"string"==typeof i&&!!u[i.toLowerCase()]&&i.toLowerCase()}(i);if(!1===l)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");y=l,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return b},set:function(i){b=!!i,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return T},set:function(i){if("number"!=typeof i&&"auto"!==i)throw new SyntaxError("Line: an invalid number or illegal string was specified.");T=i,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return S},set:function(i){var u=findAlignSetting(i);u?(S=u,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return k},set:function(i){if(i<0||i>100)throw new Error("Position must be between 0 and 100.");k=i,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return E},set:function(i){var u=findAlignSetting(i);u?(E=u,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return C},set:function(i){if(i<0||i>100)throw new Error("Size must be between 0 and 100.");C=i,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return w},set:function(i){var u=findAlignSetting(i);if(!u)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");w=u,this.hasBeenReset=!0}}}),this.displayState=void 0}VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},i.exports=VTTCue},29370:i=>{var u={"":!0,up:!0};function isValidPercentValue(i){return"number"==typeof i&&i>=0&&i<=100}i.exports=function VTTRegion(){var i=100,l=3,c=0,h=100,p=0,m=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return i},set:function(u){if(!isValidPercentValue(u))throw new Error("Width must be between 0 and 100.");i=u}},lines:{enumerable:!0,get:function(){return l},set:function(i){if("number"!=typeof i)throw new TypeError("Lines must be set to a number.");l=i}},regionAnchorY:{enumerable:!0,get:function(){return h},set:function(i){if(!isValidPercentValue(i))throw new Error("RegionAnchorX must be between 0 and 100.");h=i}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(i){if(!isValidPercentValue(i))throw new Error("RegionAnchorY must be between 0 and 100.");c=i}},viewportAnchorY:{enumerable:!0,get:function(){return m},set:function(i){if(!isValidPercentValue(i))throw new Error("ViewportAnchorY must be between 0 and 100.");m=i}},viewportAnchorX:{enumerable:!0,get:function(){return p},set:function(i){if(!isValidPercentValue(i))throw new Error("ViewportAnchorX must be between 0 and 100.");p=i}},scroll:{enumerable:!0,get:function(){return g},set:function(i){var l=function findScrollSetting(i){return"string"==typeof i&&!!u[i.toLowerCase()]&&i.toLowerCase()}(i);!1===l?console.warn("Scroll: an invalid or illegal string was specified."):g=l}}})}},80542:()=>{},94634:i=>{function _extends(){return i.exports=_extends=Object.assign?Object.assign.bind():function(i){for(var u=1;u<arguments.length;u++){var l=arguments[u];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i},i.exports.__esModule=!0,i.exports.default=i.exports,_extends.apply(this,arguments)}i.exports=_extends,i.exports.__esModule=!0,i.exports.default=i.exports}}]);